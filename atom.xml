<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>FomalhautğŸ¥</title>
  
  
  <link href="https://www.fomal.cc/atom.xml" rel="self"/>
  
  <link href="https://www.fomal.cc/"/>
  <updated>2022-09-10T14:20:00.000Z</updated>
  <id>https://www.fomal.cc/</id>
  
  <author>
    <name>FomalhautğŸ¥</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å…³äºå †(ä¼˜å…ˆé˜Ÿåˆ—)çš„ä¸€äº›é¢˜ç›®</title>
    <link href="https://www.fomal.cc/posts/5837a55a.html"/>
    <id>https://www.fomal.cc/posts/5837a55a.html</id>
    <published>2022-09-10T14:20:00.000Z</published>
    <updated>2022-09-10T14:20:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="LC2146-ä»·æ ¼èŒƒå›´å†…æœ€é«˜æ’åçš„-K-æ ·ç‰©å“"><a href="#LC2146-ä»·æ ¼èŒƒå›´å†…æœ€é«˜æ’åçš„-K-æ ·ç‰©å“" class="headerlink" title="LC2146. ä»·æ ¼èŒƒå›´å†…æœ€é«˜æ’åçš„ K æ ·ç‰©å“"></a><a href="https://leetcode.cn/problems/k-highest-ranked-items-within-a-price-range/">LC2146. ä»·æ ¼èŒƒå›´å†…æœ€é«˜æ’åçš„ K æ ·ç‰©å“</a></h2><p>æ€»ä½“æ–¹æ³•-&gt;<strong>BFS+å †</strong></p><p><b>ç»´åº¦ä¼˜å…ˆçº§ï¼š</b>1.æœ€çŸ­è·ç¦»ï¼›2.ä½ä»·æ ¼ï¼›3.å°çš„xï¼›4.å°çš„y</p><p>å› æ­¤åªæœ‰åœ¨ç›¸åŒçš„æœ€çŸ­è·¯å¾„åŸºç¡€ä¸Šå†è€ƒè™‘ä½™ä¸‹çš„3ä¸ªç»´åº¦ï¼Œæœ€çŸ­è·¯æˆ‘ä»¬å¯ä»¥é€šè¿‡BFSå»ç»´æŠ¤</p><p>è€Œä½™ä¸‹çš„ä¸‰ä¸ªç»´åº¦æˆ‘ä»¬å…·ä½“è¦å–å“ªä¸€ä¸ªå¯ä»¥å®šä¹‰åœ¨å †çš„æ’åºè§„åˆ™ä¸Šï¼Œå †ä¼šå°†æ»¡è¶³æ¡ä»¶çš„é¦–ä¸ªå…ƒç´ ä¼˜å…ˆå¼¹å‡º</p><p>é¢˜ç›®æ•°æ®èŒƒå›´ï¼š1 &lt;= m, n &lt;= 10^5ï¼Œ1 &lt;= m * n &lt;= 10^5ï¼Œæ˜¾ç„¶åªèƒ½æ¥æ”¶åˆ°O(NlogN)æˆ–ä»¥ä¸‹çº§åˆ«</p><p><b>å‘ç‚¹åˆ†æï¼š</b>è¦æ³¨æ„ä¸èƒ½åªç”¨ä¸€ä¸ªå †ï¼Œå› ä¸ºå †ä¸æ™®é€šçš„å•å‘é˜Ÿåˆ—ä¸åŒï¼Œå †é‡Œçš„å…ƒç´ é¡ºåºä¼šéšç€æ–°å…ƒç´ çš„æ’å…¥è€Œæ”¹å˜ï¼Œè‹¥åªç”¨ä¸€ä¸ªå †ä¸”å¼¹å‡ºå›ºå®šsizeæ•°ç›®çš„å…ƒç´ ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šæŠŠè¿™è½®è¿›æ¥çš„å…ƒç´ ä¹Ÿå¼¹å‡ºæ¥ï¼ˆåªè¦è¿™ä¸ªå…ƒç´ è¶³å¤Ÿä¼˜å…ˆï¼‰</p><p>æ—¶é—´å¤æ‚åº¦:O(M*N*log(M*N)) ç©ºé—´å¤æ‚åº¦:O(M*N)</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">highestRankedKItems</span><span class="params">(<span class="type">int</span>[][] grid, <span class="type">int</span>[] pricing, <span class="type">int</span>[] start, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> grid.length, n = grid[<span class="number">0</span>].length;</span><br><span class="line">        <span class="type">int</span>[][] dirs = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">        <span class="type">boolean</span>[][] vis = <span class="keyword">new</span> <span class="title class_">boolean</span>[m][n];</span><br><span class="line">        <span class="comment">// è‡ªå®šä¹‰è§„åˆ™å †:pq1å­˜å‚¨ä¸Šä¸€è½®å¾ªç¯çš„pq2é—ç•™çš„å…ƒç´ ï¼Œpq2æ˜¯ç”¨æ¥è£…æœ¬è½®å¾ªç¯æ–°çš„å…ƒç´ </span></span><br><span class="line">        PriorityQueue&lt;<span class="type">int</span>[]&gt; pq2 = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;((a, b) -&gt; grid[a[<span class="number">0</span>]][a[<span class="number">1</span>]] == grid[b[<span class="number">0</span>]][b[<span class="number">1</span>]] ?</span><br><span class="line">                (a[<span class="number">0</span>] == b[<span class="number">0</span>] ? a[<span class="number">1</span>] - b[<span class="number">1</span>] : a[<span class="number">0</span>] - b[<span class="number">0</span>]) : grid[a[<span class="number">0</span>]][a[<span class="number">1</span>]] - grid[b[<span class="number">0</span>]][b[<span class="number">1</span>]]), pq1;</span><br><span class="line">        pq2.add(start);</span><br><span class="line">        vis[start[<span class="number">0</span>]][start[<span class="number">1</span>]] = <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">// å¼€å¯BFS</span></span><br><span class="line">        <span class="keyword">while</span> (!pq2.isEmpty() &amp;&amp; res.size() &lt; k) &#123;</span><br><span class="line">            pq1 = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;(pq2); <span class="comment">// pq1å¤åˆ¶ä¸Šä¸€è½®çš„pq2ä¸”æ’åºè§„åˆ™ä¹Ÿä¸€è‡´</span></span><br><span class="line">            pq2.clear();    <span class="comment">// pq2æ¸…ç©ºï¼Œå‡†å¤‡è£…æ–°ä¸€è½®çš„</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> pq1.size();</span><br><span class="line">            <span class="keyword">while</span> (size-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="type">int</span>[] poll = pq1.poll();</span><br><span class="line">                <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> poll[<span class="number">0</span>], y = poll[<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">if</span> (grid[x][y] &gt;= pricing[<span class="number">0</span>] &amp;&amp; grid[x][y] &lt;= pricing[<span class="number">1</span>]) &#123;</span><br><span class="line">                    res.add(Arrays.asList(x, y));   <span class="comment">// æ˜¯å•†å“ä¸”ä»·é’±åˆé€‚</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (res.size() &gt;= k) <span class="keyword">break</span>; <span class="comment">// ä¹°å¤Ÿäº†</span></span><br><span class="line">                <span class="comment">// å¯»æ‰¾ä¸Šä¸‹å·¦å³çš„</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span>[] dir : dirs) &#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">newX</span> <span class="operator">=</span> x + dir[<span class="number">0</span>], newY = y + dir[<span class="number">1</span>];</span><br><span class="line">                    <span class="comment">// ä¸‹ä¸€ä¸ªåœ¨èŒƒå›´å†…&amp;&amp;æ²¡æœ‰èƒŒè®¿é—®è¿‡&amp;&amp;ä¸æ˜¯å¢™</span></span><br><span class="line">                    <span class="keyword">if</span> (newX &gt;= <span class="number">0</span> &amp;&amp; newX &lt; m &amp;&amp; newY &gt;= <span class="number">0</span> &amp;&amp; newY &lt; n &amp;&amp; !vis[newX][newY] &amp;&amp; grid[newX][newY] != <span class="number">0</span>) &#123;</span><br><span class="line">                        pq2.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;newX, newY&#125;);  <span class="comment">// æ–°çš„ä½ç½®å…¥å †</span></span><br><span class="line">                        vis[newX][newY] = <span class="literal">true</span>; <span class="comment">// æ ‡è®°è®¿é—®</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æ€»ç»“ä¸€äº›å…³äºå †(ä¼˜å…ˆé˜Ÿåˆ—)çš„é¢˜ç›®ä»¥åŠæ³¨æ„çš„åœ°æ–¹</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fomal.cc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="å †" scheme="https://www.fomal.cc/tags/%E5%A0%86/"/>
    
    <category term="ä¼˜å…ˆé˜Ÿåˆ—" scheme="https://www.fomal.cc/tags/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>æµ‹è¯•åŠ å¯†æ–‡ç« </title>
    <link href="https://www.fomal.cc/posts/5eb72442.html"/>
    <id>https://www.fomal.cc/posts/5eb72442.html</id>
    <published>2022-08-31T07:21:00.000Z</published>
    <updated>2022-08-31T07:21:00.000Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="6acde27f0e0195bb952649c2f6529ac0717c846851a95f159791c14d883d5835">4630436162ade97ba2718b7d0c4b3b63cb3a3f659c5ca08b4bca0f58459281868c3cb29eee8e176bf8dc29b0d38e16af4e4db98e38cbdab581fa9ceba2c7086e1c337888ba78868dc4a92a7a9a53c645f5dd642389669a88c2823a8ec4773f354c1f109b1a5860da9984bbf59b4580298f59820c46e9fc62d1282f5870096a364882a48fe3e64b8c1f424175ed6f2818210462c46c8d588e523ade9db96915dc50b0312e02ad5677867de38ddc07b263562637c976be13584ec7f7051e7ad49c8f4afc694ea89c4949035b57e3bd91eaf0dbd5f472603ed2629f6848256db4cfe7a73ac9084483febaf8344eb923212fe6ad606c8f3fe30d44356ba0a39ef37d3e9a9df5d4e736cae983d1ab23a04efef1ced75b50f3870556eaa2d1b6568669bd749ec41e6683501e8cdf9d25960141304fad8c56f61e4d89de1c0af5ca144e9d851f0b7911d97c02ccf8935bc59454ed622badcca970709a3ab4011385049f9356c7758fa887d13fb50069e9a8eef818f54b71da92d64e4c661d3f9429d610e10eb4c2d53aeed7c0d800230522ae4bcabac4f753b20619d3505fde5f83866701a0145ca140bc60d0194e1d15347a04fed16ed5505fb2620c190fd541314e9d69dfbbfcffe33adf329d2676d46ecae07d02d2dea50ecdfcd47e23f93e1cb599b7b887fa05c6b8668eaaf5e3258daba9f4773d5ab223be587320bad1e13aa9b208541187eceb6e62eb3ea77903c2ccf3aba9788327c32bc4060ac095077015dc601571b73789728babc1a58bbaf1809dc67fcd49fca6db68f8576656f78c5b6dee8c94a16ea2d5544df1aad8135a587ddcff4f5dfd0471dd8eac111ed3858bacbbe2be3a31d859d3bfc8af64bb1703a37d1d3548b0e9cece17dfe8db13441c63bd35f88bb26016fc466ca5487bf043daf34cb000a65a4ed8fb212957cc986a30eebd50590e9087a6bc44a6d3a5d9dd0d2e46aadb9da96a15003ad714c3b443ab7cecef0257eaf4c827f08f5d85565e14b1872fe31a79dcc4cc40b364ae70c5f644179ebf01e3de558c01950ee59eaeb04cd1a75671835967e796f8d0491ce25c155541f17dbaf0b42ea8d2642db4449d0ff63e2ff30c0f935593fb77f79b56f2cde0b6a73451cadcf3ef8abeded2b7862d084e90d928d85f3e385b1a5e97e4ae42bbad67d145988b7da43538cda485cc399736637fef510b95780240294545db7bb0d7703d3ae822bab467a2ca917c0d073bd9ae245bb580720ebd4129b71e9770d33734fe214a34a168e25d13c942e79bcf75392808aebdab2e6b1793bf419110315c6d19c78c6f207f5c89904dc36a6c27b713c7afef65874d7f2af871c6fe8e98dbc41a4bee7411220dc428e9161067f9442dfb890c1363f074bfe5e24f721ba2c7f999e3e18dd55f9b89fe122345674979254848d1da0e4f70002ba7c1f54f4957fa412381e45bd2a3d00cf6a6a3c51cd80de10802d016a95051661b74ba32e062212d30961f47c544c99d5a7f63052aa2e19ac858d06a30eadaa1bec74ef9601f7a10c915902c3104eb2503dc76cac739bba09734f3857d9017a112d31e077855658de2eaffbce9ccfa3dc6a7088a19b361c9fec2a2e9bc2a81303e12ce9258ec9a7c028b78dc64e33516869a15314787f13ec8a8630c49b23595949aec67d7ddc7ad0c48f91f250a2e481b1530630ea6dde829fcb423e9d122a97ee47b58502ffe6e3627af2f8d62fd5594ab49769e335daf18878107dfb9f01a5538f272a0d4acffcee1772af651854b7f27896ebf183a8e48b4f36cf477e7e03164f7ac4ed39df9f02c4c224001e67af12d613fd905d7752bbfa5b4bd0e6e304b97f2f380589a5d08a9e1e1ff515faec489efb67f5e0d835d87e662eae8b891c696ff76925619f692abd73b0153ed5147b76bf5a378004d00634de23ef52d3de8a8562fea823f60e04b4ad339afd5c4a3fa39722b61f2c2588fd6c006b5e150177bd597692376c93ea05b89d44072f09e22b7f7832a81cd5c201ed67512a0b6510bc42d3a24362a0d3ce8d7026ac4ff7af78bcdf44203bc4b432a6645aa0ebbb77e0d0fb239287505b6e53bbf676d21eba0b106a5da7173f52c098ccac1849f6356e45e8fc7afb30620063ddb3e0eeb1bbba2966337ea13c21f00703256ebed782aaa4a802691e062783e6642b979f5c6ca0b7cfb0cd1b5e7deb1150fef031a101449ed7cf6f1de6e0f9a03cf72ec80c7d33886cd40826903f4cdd141027c81a376c7caa5f5d5ee506178bc9943b6ef4fed9895fa887649e72490e7b0d7a5cc7bdfd740eb699792c52c84589568ccbc18cd1e4b866b4715ea5eec0b9c5688c9cb052168738273a598e3a646001f11f3ba5242a327826647aa95afdc2fc36765eb637e60d4692ea589d760eb9de5ca22828216d7381816a4f43cdf99082a2954846b280dcbf24777ebbd27f9e6b31f774ebfd3bc5f318eaff77d004f2b3a50269696b0bd471160e8b769581d86e028983601a226cb6e33606da5fd6674d4ade3028b8de1957779ab81c0af1744c23a46e090e450c98eb542f85c7d48cf9d84c6183d6898e024086b37a0fc342d6636b868493f4a45233a78f6b608406a839683d4cf258660c465f1464807d43708673939f32655928eb072d419121483b195bd738afc83b3ea46be01c56a35db84641869990a34ef3105580f8bde0e624009e9b55b4f4dba2de778c66cec22b4636af21e1bc995bbebef9eafae8685881e2a1ccb7978be0b244bbdc8f1e6d660daf6fd9e79e734b29b4d663d4848a8b826acb0196f93dba07d8b2011edff56cbd0054facbb1c3e4c468fd9a8d4f5f4c7a7fcce6d3d6225939ed13aa7a27136368f620d0a1f626fc842600a3d7373d536c01c6d699161ccefb5035b0bd5fd3eef4c44d09961784a34f842720d5e7cb2490f951c022e594bdd2beadfb2c29ee3bf89343689b078e11e9d23d985e67101017f489014a7fde81a266bd505665997275cbc81e36dc94808f4dd4ec7c0734a2a100e3e20dbf85361289996bea4c44741bfdb5cbf0c7b91eef0b98ee771021d1275d1b1aade9dfab877a6cb816c6bf04273e5cb36dd501aac66d151c98c013aef7f5f81505ebf5482c32ce24471d8f79be9d3e1a9cdb318865f6ed00d32cd7f57167f4b4c23228daa89528f542f4485b86cb77fa5c587533c6cf1c18089fcc4df5f613499330cab3c50e0103b22f2d620f3be9ebf2b499e4257ea121dc6125270de2c630c2f4f9b011f0b7083edf74f95074857bfca6ef8fc81c58b322b6ca71639d00eeae226620316dfc01258e2fbfead912aadfe1bc3cbc63541ee479a916b8a7cd8c058c32b8d2092e99696b920b56a9efc4da4c63f17899d2d2ddd3a1e1faf16305e674e1c80b9c0165d25a7d0e6d8554a27665a1cdd9511dc362ec708017d34f511f62be5bf693694d8a73f16246223bf33a2c56c750f5397cb120e9ef78d79c858334abe43f94d3333db1a833a1f3919dbfe1d154c2337775a6a25cd477c068909bf5e0862ffcf4ec81b7b9c48f375571620a23c3a7fa01c34103ff7536a401165e0fe1747bc871289d81b9d646ba1c9cdd4f2c71aecf7eb8bef290454a78a989f764a1f5d9f41009b54083da6e792f0764dce0e4a5ed2712219b4ba35929b4a985aca5d2f25ca45f0bfbb6824a7104110bfadee5d04a0f2835cec7659baba16b92bc7ff3c715aa9ee66176e8b633cb6a87bd4ed80970a36f58fcfc42a22af843d7a2a7cf66690d66400c7dc1993718bfaefad048efd7848f959f62dbc51fe4d191df6656116b7cdee7beda9f8e97f8036757693c94ee37545db26c54b6bf6b5855954c499d72d83f56dcd0c5572675a804b4ca5f9d0d88193c841dd18aec5e6f7119a3542b3146fd6daf1a55150fb4ee540cc7aa8d22cebacc073d28b1e07246fac6627c96c58528e772bc37fdeb75884cb2e5fe2c883f14f694fd404608ef18ea6faef6f24a6c8312dbb976c8fc308b9c4a3be43e0e1227e6a52d95abe9960419e94163fa26f9aac82892f2acb2f21de14f85644830176afd9434e34cabdadb840e268d24fb74d929009f0e57bb75602e4f4a48e66379837da4183b32b336b31cff6487df87ef7c59d46a510f787af847e1c3e69651c7addabdaa4a9f5228dccf098f3212d1e8774c4459ef68ec70bf1702f9a957d3749bfd11957534bfba4cecf19c66c33f9fcb8aae5a3897c3444cdf6be4f3ee26fdcebdfa4776456a12e28d9f8640e8c6da52bdf2e80bfca745776e2f377f87429d6ac71c827cc15c3caae9164228b6f75e3bb4e5f18ebe6dd36ba912a8ff3f2b1029a4d4c7a726386cdef0c9aacbb387a68c102acd9edcbe0225685fb8b45e1123cf6f6f8ea82b6408890a65fc4ba0027122c51103189a8fb8d6a776b864ddf44dc186bd4698741baa32b8cfc25f7c5807b94421692a5efb7ecdea83a928b74cf3335f9a6ac9dcb222d1be6ebd63a6898c28631cac8b6d03f5f95f49cc2891478635ff77a9738530d58f1a2612acc1bce564574263f5e1837504f470b3957c211dc4a43d4879f81e708a7b39874f048915543b7621f2f018997c8694ac9915f6f817b8e6af219c9ac5b3e069ca82f457a67c0015e023037a0cb93c6720d40512f73fbbf0a7e0eda214185a04f163c9fb38b6c61610db0faba00a65f141068ff5140302a8de345499c6fa98465635e94d1b8d50036c8623cc392d82944bbf9252d34b4009c778b41e80054bd06801f7ae7aabb5e243d184be093d6c31f22609889200bd5d54d827ea2c9f9f2bb2f1512c3c5db7e86c2b5b6c4dfe4fddfc15e9503a851e7eea339ece7d6f7fd5c112ae7a281abba29c28baad041c57389ac748ab9bb240b0423afd2eaa718df3a2a4495f33135b28882a35d2d586e6cb1f7992f890b9358b15f9275a8a8cd8b7d75b0fd82a90dc01dbe4369043e899b5bbb4ca3449f75bfd63c7dac07c1a00e0409890b6e8bb761d20dc8044c6f2f195bdc026166394a0964a3d48318e362cdcce46899ffa5c9bc4bd2b7e9fc4eafbd60ada46539f262396ccae21a7652559ab2d9cbba308ac8fa22af93352d4bae34ca7cddb2d68af0c278b781658921a0d17d68db527a330f6d667ed4bb3702235904e2c22a2176be3bcea1bf013c8b9b7d48484fe6f21a35bb553757dc834e9fd3c4cbf7ac890db4a420fae0c6faa671a7a318aa5e02e46744dc5871b5abf6452b50a9f05c9272e1776983fb50d986076e9e7bc6586089ac82a0d49d649179521cab2f354822ccbc575d8c57bd9c57cf7bffadb5a267309d07db1103b171310181557d1f4a290b6abcceaa28613cdbe18a8dd229082dd6d94f138a96c216b4e642801dcfb73fd739731065ea67e42f172ef576d33ded5b2c6e46f6cd5782338140fa882c0117921bbd057a7db7910d7d584a89bfb5cb72daebb2736374d15791d2d32113e454c6139e5e31d5536a84f5070c870ce4fafd538b6e855feace6d9e29849bfc6c85ec34b58453aeefe5cd0026b319eda129fc2719d2449f420b63ee74fe0ba38420d33d81abe92ccd78b2daf96ea9631f9d276a000fc8f215428078cd0344a081eb1f15de3e0665004e3f851080ff8fe063968f51871a49f3ee84f1c623d690cd39ec2f2615e82f050f6b7e46f417c3420a63105cc2874b96524acf40c38330a579d6de456c9a9916723983b1f35a847318138fa879a5e384bffc233f1eac0d520b4bf0cfdd6e6a17759494f28a301c65aad7176fa093233b8762c75dc8478ffc527ad25efa3a56cfdc60c8c4e984447ff96b84f955fb2185ed5b5cea8bb84a25de04b202e1d2d1c0d3bae1045fb87a2c40bab0db3677e21984eb0addd7ddbad83ad51016ffae3c9f7d3b310a8ef1b5a951a8098c4cb56e8b6e4cf49e7f1c575743c29e06c911e60525136f4ec488b5f313c3f3b3593c63aec98f38b9dfe240f703bee2023e247284233cd73513519ab57887f8a717e264623fc382608e253097f7a62fe1e38486c25d88d64bc60098a8a68711913eb5131bf5b36c7c049c12cb1a54046dbedf990148c98e2ceddf83783506a66ce0a1528f4d683f18ccc8d5e56b01d2199a3e7e44087c202b53fc6fa7436bda4c0abb47b7b791f3ccf5f1f9e5b982ed0ec109ed91805ec203df47469b625f3a038cea07b672db04282acd4cebbed98b98aa7a7c8c05466fb87f382e64d0ea425deab7c5353d4c7977c3e6d372fe9a84f3ba3d76ddc9caf68394cfeadda8b2ec59c03c7c23bcc64d27f46c99377f400755cf33203d0eae18db3e285e763444aaf01c705e90c7080a8451df56ca5b03b932073411d60c0ac5aba3084f979a9dd9743ec6e4dd93296485d9b493ccd4301a7e3737069edd2fbbae229f127a5f6b859fdcf279bb4ef217ea40e339011a40ca65de2276a460b8db387ca0e36785010b4955874f38352fc1f881ea0652f5c9e2651b125027e082f9478e3b95fe4022706de8fe160bfe726b20d9354aac71fe7c4b8301c3bde74e5e1a4d2dbd9d8394da9315dc3c626bb9fce48e45ca271c23897ee6c186f1565cf4d763021367a78639e16f26e12b3d280800df87d495b74f5ccb05f84343ed095340e8763f30a4fbabc61240363995a8cc8744ea7cf18448079320d645c2ee53a5acf3a7e6a9ca4c91437119711ddfd599f56032249faa103d0be18179a67c6041299172e057a724c9d054a1c572a2a2b735b04d71a30c6ba416c5b6564a0a4d9a51b8ada674f0322bfcada487d10cf8f3d6a9fc4d4d76ec5031dae4fffecbf7c83d262fc5c3409fbdbef4f5f3f7c71e6063724124816f1c3c252d565e452fcdd3919c2870ec889e3b209049d204def2c8211d4290c6328d95f1c4fe7798c5a18bb50684d9e360c081fdaf1087e5ecef85ba7ace27e273de672d56857f40ad64da5f01b26bbd74a902afe34539d2dd810be0224ca699c33853675a3329e4d82ee0a64d732aa3211aa4f64eb4cbc8557400af97a0fd106479d0ecebdb72607f95779c2a4b6e5232671baf0189b299bced7824d270f3a8d13c9e69dd31a3c87b365645205e89725a772a3530fb239b69680298740d364d91befe7021d73e83251f34169c0e25f6156378bcf9c36730d853b8d20d2e6f00b9849aa14c37d5c3b8743d6aa9103c67ecebf5a2a0beeb68e6b8915a2b21aa6989dce3d9789c0347ff82f8adf267969739c94a6d2dff81ad478ab900140726d5a3ce478df8c06d980699e6f15d16e6806df33b0a671deb82b201244d352dba266e8fb28dc1dc74236b8510edd99d635a47d8495463c413e26e168954032f732f89256ed9f284ab65234e1bbd11154141c35040131c5224a1365c7194ebd2ac56f4911ce7111fc3dc8a159353d72f519c7f5ea0c868d01a1d00756cd7d1a74a6a2ef2e0e37e4dfb0780927cd6feb301a2e42e5910a3cec79a8dec141413fb44b10440dc1efad0fd28e8fd9b6418f403f0ea76c6a8eec562f497e2eb20a02d56def9209ddea964ee655c86a3c786a501b31ddde23a4d2e982fd0fa379329b6a27198fd66cd7bc5be5adb05a0769f726502d3bf92f26914f90151abfed19a1525ac73a82f64efb94ccd43a07a15db63abb094cf29e444197721ccccbe2c9605022bba74ce4016c4d5fa3d54e24c64022da1dc5d6b701f2f03f0c3b785b461acc071058715b11569ff8be9a5d064cb967e34d090e9bdd77887585c0530f0487bd4ba360d2fd863061574175dfa4c9df5b9f2efcbab38d47aff1f7a94163a31266efb415a0a23ecc9c8225a1331541cae57604c7f38fcccb73e415dce94f4a746030ca43c3c2bcb7d047015ebb11630502cabbf8aaee6c73fc0c08f38edf0eb4835471a8d08137ca9f12034d32efcc0090760a5fdae8c4aa5d473c9bb319a9680f767c1cdc5779d8cabadd41943a0d54ac9be6f5687060ef84b376c942cd49fcdae0d6882dd66c5bc51743bb1fa351c997d5e338dd3032523002aa5b55867b5dee1561fc8abc2911c594ae122f40b4dfb3597d07ce9e3ce294c853132d463d0059c42bf06e3bf56d43b83fc1a0e09907a470ffc9af552802078685e27f09b2a3f592390e194eb7815dad33c85d7f9b332d2bfad7d67f66d370a4120f53d82b0eb589629850281a7cf370d8197698b55c93685a0f0f126a03150ca8368134991f68b0a45be585cafd2537be353e1170e0d1ec3a139e56bea323aac48e4dc7e2eb34066655ce6315d87a3f609571c3f7f92b3b19d6474cf43b00d7e51322612e2bdf9a9068018a2c3f34c57530dcabdcf9908a52067c95cf7d1f94fc748bd59ff7a2fa1b968703a44cfd6026e941d7042c319dd8ff18f525c327ee3a4d01dd1a40a349bf818859ade1a40b08e2afdc8840bc3f95361fef59ba8bc489a83f8309c67ba4032e0f77b8b4e210f8f1d4cc0f3964dde850fe248f62efe5c5c9ee9b4e23ed47808b6d1d7c5f89a9e4cd914f6266c1fc6e4a2f31cbada8880ce35cbb0385706ef40b41dc69a9c0a6988b08f5279217dd8e4543767c5efcb5445dc407c3a65104266de04d46c9a6390111bce2da717d4e56b9d4b6a896f2d52630facc5cfc5cb8b9e009c2d6e7b9a2c53ac3db3a09880643fc824ead02f175e085b5b401d8232d87a75fa35ece11b885e729fd18b80422b227f946ef2e311eed4d02c51af73e9c6e185f8a62a545b518273deb43447dbce098426f210acb41c953183b411877a877f81823bd7c7772dd2881bb54cf3c5d7de22d2220fa55530042964d74a851211076c85f85732766bbf9cd3738f6ad1592d2b4225e1f8f72f9f8c82f1e6243de61e58e4ed89e17cfde642c0e25882e08a088321710c2e3be50025c03ece645e294874d3b884e47ff1bdaae4c698947f747c9c92c1c8f0c9722de09fd38bd37e120c079d26b337fa4587cfc75f8aa38a2574b2cca95b2ff80ad5aa87555bba1d1ce241547a80e336802cf82eb50ef0cb289a247750056d44de638aa1e6005c1339c5136c76e6923330d1aea3f910c5a8a370ed4dafe351d9d2d9b5f56a539da8d21cd561e215bc2562538a26f3563204c94aaf80a695c67c130c3e118393875412a557e7545a77e0147133e92abaa8cdfb7ae8188f9a3529aef0d816d8ffce2fdc4ac1438c1295ccd315c33caf9292c29ebaff2bbb5c27978b4de80beb32b49255ea302906b25eece1fb5146bae71865dcb2c38b19dc90514fd60f2f505de241a03308ed0ca186433b78f6e42fb2255d0d428eabc07264dd737d862bdbaf7a4a694bc39260755de662493f4bfc16285de359df29e7f15f983510db5e19adbb7bf5ec6909da02fe0dd6a81653305a19e04e12378e84f44077a11975a22c4413db35ef3ce5ae65a88875d82331f379bfd9311e7a038893afa538881d93685208ed8dbc469f2103c7afcca41eb2de2585edc0a64769fde89abe20fd451205e34b00a0f7052e85c44f6eca35b575b2eb2021de306f9f188c36e0401c25231ab10c45662163132ab5b4abb9b091b6ce5fb4f9c4357bc4196f6f44e6a0d09c7559a69cbe1b9c46e0fa81e6996235b7e3e80b84442b94fa7bb6f238c844d893346a3355af1bce449f101b6b0536a9a09d37e9789354071441a6c647ee7ae66dc06452c6c1eb1072a6644468ca33f3b6a695f0413595fd367e18a0c1ac6ca49e5956788aaf712056c5663dfda46e3ec81f7d4f558b7ef2f24a419bfb8321a10685d069a3249ff167cdc01d25957ece81856ed59813f3781589b4cc122bf876906de01e44fe0bfe27211a41bb287580bb980261431c4d2f336b617eaaa3c3b3887b046e33c5c771c19881d40778df264bee5a5ec0bd2a8fd893cdb42f0b9014434a79262df2cfe9a378dfdac349edf51d61befc75a972aca0275b0a5b126bdbc09e4979504b00539d20aabd525758c25647c1c2f8414b10419c3cdf29a5b9b39a44811fb99e820b2ae93be4172ca6a17944bf651529fd15887e6fb70e3d3d11b5c60e7914b6e0232b40893b7f32219f8181b07f880eec3262de56564095dc041c17cec0ee05148e15b75013c117d9a5ed2e2fb176d0b6dcd852d3092196fde8c95833b6aa61dcf96a68b873de5450b67562550669b8cc163392e2ae58cbaae494300253ddbf2ae2cce9b6ec24a7e5e7e63c5bad6fc1cf3f0057994b2fe6c92bc5fa49c498692fe2df23e86d9bc56073301181f0307c44136641df2609c80c8647430a85aa16a6772e4b4a327f4de069c744b2f9c6622b3a16daa12745ce67aba9a3bdcd3fa5f39d4e4c2d4e391a026377a104881bc59e31ed269ef70320a682d77389485cf93ff2e58ec35fe0dba6d8e6e3b73064e9e041bfe0b248c04a20c41f1e854676a93fcb7e784d17eb4a3d18efd56ee0b7e573382314791361445770496c9b553e5b958c7437a12dde120b63f96e55c0ff9b83e265ea1cd5c14a13b54bd35e2506a26b3e3b73d3d0b9eadef12be5d12a04d85e7298a6a254da260a2feee6301ca405881ea79eab6515ee5f5d88ce2ca1e0474cce0bd9de19fcaf6cbdd5e8c94a78b4e0abcdb73ea405709b7e71db4ade7dfe492747d92ef75df4253dcd7f7b838fd708fd5e82c980618e3723877360204b80338b46f2354c3089f1a11be4271c742265f199c8bbfeffd75c67ee8f8fee817a3238621b310d20f82c6a0e51d53cd57e2979198eb07409c58c140f5112697ad7848816e3eb2232bea4f83533634078cbbb941ec476e9da6de78f1d9172efe1a3c93f5ab6194cd09e5c4ebe830f03ea84cd124143d324bb303d9777edd8e11daf34ef953dab0621a472a6c7d09f081d1def8101ba92554ca59b858480e8eb95754b32d35149f9e56baa519e7550832203006f4d002a076d11b2dd9b8e9027db74a47dc7ebfe2370849c4c26d4d28a67643f093d4611a55827d14df9a748b678ddb878f4ab4a10455cd14c85dd00eb314a1095c10281f782a289f44d0e3f8227ffab4f07ecd093f35e430f434d47bd43ecaa24d46a7f3a66262722dbb81db1f87e0a1decd8f7d2ec3e2e50936376e06d039c55e11038bfd58d6f2b4588d2fef1073918b90a1674b96eee1c822e29a00956912fd2912894e84b91ea48459743bc8b3186361a21d2640d510792dd97810ebe2a12e1329af0967d2051b46d81a895a462bc242caa4939181b4497ba2ca73185417ec5506326a8c66fe6c67accfbd338b0941840830049a04fc7e6d02b423230bc5ddeea9b74339e858df665114ea0fe18672b9cac3ad28325ec3dccd5597643bccc10720986558bf1df8957296c80093693bb0432a6f1e9ba8f62bc00af73a2fdd8e14e38b8c805e04fed712e6fb714aca0bca2b3d99809686dbb6a56c5491c5b8ae42ab091987a83646d08af3cff259fec00c13122554d2b55f5170c8e0e1f9e3ae6ffc8e9f29575b753a58499fcf5a8c2243e53b25b4520738bcf40bad50ff9825f853dbc59287f125ad365b798c147ddddeb11b526179afbdf678e8c44a18fc0c68b4d56050fd36f9e098abc5a954b46593ae2d7b823b98d65198769d863b73ca64b43b38c35d6e3239fd5c29b56bed7f5eb1d4d1f64ffdfe8a87779a4937c54b30115642a64ed226ce9f1c71c09847aa73bbfba92581f6875de758792ece9d4257a1fc132d071e411c37c34f5278dbe06dc7c5b9b07daa76cd97eaf3de72e9c082c4ad96e2fb3506332d330ad371d2fa1f47b176d8418d6652a861ea53c2902e7accac35d1f73387e659ee068f462ae2658ad11c2ee84a59ec8e9c79f235875303ecb2b0406e695577afbba837cd821a9e300c6e74cde76d8d053dd77e696498fd398c59414dbecde23dfb889cbb7b5ee63aab5f1a2a52d646c8fdba27b0a829a177deea9f68389f43a87d09dd482364ad957d1883dde707ac3aa4c1e3855f0a5b59a5bb98734f0033e3c3afdc1e8e6bb1370810e11651f40eed03578a3898a969bf3b40a52c08ff8091343fe26be395a25c2d8effa54246a2df529f84d7da0ab3a25d1a805017edc35393b70e8753423e8810e6c6dcf2e0327e80b96eb947cc767ab2cd7b8d9f77a9d9ba1da9b80309db8fdbd3a1764a37d0144ff74582d5efec25fd583a654d5379b5b77c9f32b0fcd7d72f3215c42a1463e1c49f92113f6df4cc62ea8bcec0ed9f589870610916a868ac57ca8da4b8fab332c59decaa37ebae460a1cba4ec44292147ed6d3a494016622a59087376af8495c575938106712d116bf94dd6c373848bb01f3062b8b577badb0a50c694acc276a04374d278cc1f455eb91463beb8aad59c7492ce3d3ec40cb33ff8407c4eb3e97c3ed6a8d86d938ea60df5268ecb43a267779bde892ad26e7900f864b67f6b3e74e160b9bac8587c8613772f412c28778442b51035b673b1886aaaa4c70194ea736aee99b5c1b09203faacbdee98ee4faf482e54a41b5ae8964ce7185d62d34ae090c5f672b36db72cd74cf978305b0f618ca037e8b348718ceb8ecb41df994956c18743157a5c32b2e966221f90fd09a8aaea485c7bb5455e2b31df68f0f1ef12c946f3e9176ed04805aaa1ebfe9d053ac4c09c1183e03151b36a1df25db952d1152fcb7f0a549d0290243b63f92b368eec0b58abd060891ada716628b0dcdd342d26f460cee397ac2b80ab4c81de28b191000af207a2bbe1068514cd152629cba86662800685fa80b47c53fa99e0246f129470e514400379e05bb5fdea7e300d11ca336e458a81a9ac7d6f2fc421b54f149b0969fd424a9aea4a4408d5b0ea6b65ea5ba9cc564d17476fbbc055cdf6262f2364c50e7cf117f5ba84530e3cfaed32bce591e7f0cea9fca8ebd096ac43f9024fb9c47b2110c0fbbaebecb7439828a8ac707124030a95edb8ff35c01269a1399d4f0271d03f738733656598d9bf877c118bd61802ce7236745b56e99da1cde2d82ab2def670dcfa62eea8861d3d48516561ad22f29e68d0096d5544d9124692008fe097f64fffd6e5fd156f38a23742f067a08bfafd90882c2bc0bc85abde679e3c9c3564181118a03990d68419fe7bac0eae3becfd84301026ab038645146887466947dbb0dc1743eb6e311350a511d4256c8e4dc21df145bf5dd3937ab42a7885011f162d88cb03b0be0f8edb9cf89735dff2626aa4606c90b7319a63ced4ece598da00a2796003694236994c479341cca9ac500bdd1091d4c2a7cbfd4dcb831fc721bb8cb34b3473a3dddadcda6eacecb789bd27c8a49f8a08f7a6313386503d59ba4b09782be069e6a78574bce18492f4d4ef7eddf38172d6c3f054d69e48056049064793f643ee905d1ca9db0962e7425d63eafccf4a3e8fef7149e48246c1cc40411bc15d4ab5fd615ce42564fda770e6518cde89bf5027d297b8b87ce03dc185fda92989b7151acdec2160be1b9a56e8a6ea08a8447565561647bae95ae76d5b78fbc06eed01232b1b3bc02798a14e3ee7102f84a28363b740793081cc0ba7fac2590d9c55b77249d74c57d71f499fbe245d78af62a6d76bcaaf298ab2b52065cb1bb0d2fb3dd1b4831b7dbd0147a286c7d72955b73fead00b71530dc00649916ffb5ee272a1987fac3c8edadf40e57c4f3643f62329dea0726c12ba829147494af058603e26fa480e16af138565c9d8894fa4f78a3c347b46a1b7cb4843fade6bd843f257848c44711d1106e98e0aa5419b96041531dad6cc55858076f94806ba98746c40b91fdd26f566401a0b1719089caec6e7f910677af4be235ca5c71aba70168251d9f4fc52dc469c59205a6877dc6f284991941fb6413f5582f691b12be563b519b424a3214e9275acf36c7fe5abb208a33e1bf95c228a34ab8714d9fa6a513491bd5e9713c66b823e4b15280856ac538a0a04f81b3eb14bb8eba8853af2d200eb07f7163966a7796fd3f63f3f0b9df919af6fbf9898acb3be3d74837a6711084e3649003819f084fd1af9b7f06dcf2d9b4995c49bd9f9e9391aa73a91961f79447a0f1089d16cd54a349042792854e1751f3cfa5a9dfeb7021aab6eeccb0d268034d3e6034da745d296270652686a6770aebfa33d6dfccfabff1d3887813f85571196859279bed0db7bdaa225e0b9e88a37ce1aec7d3667f90d3a5237cb1c6877f862c018918407e047609161f756f04c0d2209b8f44976f6752334823e104ee3934504bc35f4822fc459f8d6f89cf4b015b202d1a9b71785705a7452b222b2b34c00274787cf21705ab11840a1182723bbe0f4f5e81268f70a243379104dcc93a800bc3ec45eacf648146c9fbb5d45025581ee5ff9d99aac6fc3acb9688dd90a3aceb6dff16e858064c84c1bd8b42a666b87b4518022ddabbda387bb41e56d53548b03e1d1250bb5d512110a6184b8e6495842f18ebc1e8bcbc83f9bdc2f6fbe144ec4cfce84dd6a20a840b35553eef9c4365659c398111378beaa4457c10c5a0c947a1a21e3b2df12b9ad96f2fa25ec3d7bcb8f238df60cc06e69d10d8225c4f67d32083b82447f4c7bbf88044872529a347df0324ea5ee5bd9a2251d201c12abbecee520828ee679215978e288fc483a188950eb320c82a8ae02b8281c1e1ec68d42d1575ef9fa86a9b4eba96e4e309baed9e84e477c22706baa7ac74ed19b9b5156ce7a5ea6a0afc93067542c4adf94672d9663714490dff8e8448b8f436ba7ee3a383670dfdac4bf5e9d80ea355aa224c45697360d1fc530d163092a4c95d160c99f78ee41d2365fcbd17c7d5fda3062fc1b5efadc23b0fdaf573207c622966360455efa1af85763c30a0565f001782b9beed9d82b37e8d6e54348de18739fe5f11bd076d5bbdea02286841952d5983f381dbd6077efd0da66c4ced110e8bc28a366f4bb0711c20417e037f5070e35b2d43d5463b3a44ad1a71d28d534a067446e0e2c780c875de17d100a15c580ee2f1814027ad7405b8e1161f3b927ede6ed3b7b73559673fb9903b67ae9fcce7db016b023be7db91e9fcff94da1ef81291f87e6b51ec1d7124725c29a6228769b2c367c7ccceb54744fd4109a937fdf67dc67d6a2de28fb2c6112aabf1094d5e8cadbe75051297c54e6bcbc26088d2f7bcb15bfc92bfc35ff8d8dde90627468bd2d6b6b97ccf743ba1ff2a5a5b817d8bfd9e8b7d10625b26163cdddc88c4dffc089dfcf948019cf6458afd81e0b5719d3612d6b3a0ee81404ace10ec4dbe6b6e111402fba1b57a488ca9c14cd3d63d1107dfa494ad9325a48ae598192bd8f6db1412814626a85abfbdf99276dc78633d0131f82a1e53c82a27aa2a5a3b0d2e924bbc8ba60726b2a68a328eae63602dbbb4365a49929ba60011f9f822e204ea478d1cb3e42a019ee276f9f9b699df5bbbe7bf45cdfa0be5d3ee54f5c08537c1effc2e2e653cc241c0f853a7b163f9d04112690bb720a18e135cf5fa5533d506f12b816899f7a1d4faab7ce8136cee7b697a8c4769752624f06970ac5ebc20f298c661a11b8ebecaf57d05bdd36701efdf0c0485aa720be2928081ebed1632c877d53a0bcaf9fc29c1b1b94499d711859b0a25b3f4d854826c1f703672e491cde51c4b8c1c4c87adf772eb43f0f729fbd89f96088cc1ef727bd18ede4e1540b7b9907b51a307e2074d448c9769e1d659cc00767e0a6539896099686f8cd50a35d51a014e6bc317b92e44ac09db95892f35d4118d3bb6672d82e7b30442ce20363eb10dbdb9223a4f4fceec0de3d77cfa8aa1fd3033c4dcf1fca46ad72bdbc125a4075a5a7b9b09c3a8d7fe8b78a47c8ca51d1e1fb11440cfaf9e058062d9ac5b47b1e41b094c620f84a03ebee03c42fbe75541189978255bd5b049e934427292799b65115ec0c0ece9c19e534402fb155358f4d59a739f216584c0ecc59061fc1a9af9afd475d5c9ae691847237e8c3109b0cc05f893b0fe52fa1cf5f90a9ce95c1a196b4964a5d818988ba8bc167b7c43fc01a7540e9f41f06729403a5b064df3d8892d5a7bbdb585938c8ce07e6364eb065a5c480fc4d5320777b8732d7349a89a96e1998342be607e4cf13564552fa122bd70ebbfce7e8805e1abf2f77ce298f935aa0266f8903f291dc1de57b3a808daf5554c5b758a6e5a79e3fce140c3e768ce9f77ba221cc72858b3bccbcf05dc7399d077602f718effef90b15fe95b2ca046f4ec9058fe43366eb1637ba7af7864a719ebfac61d63688136cdc58c713748b7f8796d65919235c8fe2fd4377e7cbd92cf00fa1f6cb550e3c1a2026dd14188fd2c2725fd063d88cdcfbe460b918ca0ab2066e4adfc74bec9104f6c820228be5cc2906e110d24e5c0a10a55743abffd1f4c517280d911355f048efd6c6e272d35568ebf413acdc3d4332846a19fe1e4e37b6818d6223716c022c45b7b593743007ba718c833c02707f27d8e6411975f243c9aee8a98e30d489d39711aae7d9038e02b5dfbc0ba4070ba0a8d3fae3bf8383f6a54e5115852823313a70c9859c7c4d9672190419d7b4f73634d57b4ce61beb4048aa10489b90e410715b704538a5b24cf7e77d766cc6faab0bcbb97d369c18fa35cd4217ee12e0e6e22bcfdb5b49e68ed587299f3fb531deb0709899f6ba2e612b38b16be7fc380b7d34feef76add14fdca7e7aabf5622ba44ebf2aee49fbf13df2336efb99870e1821069bb394bac18ffc270076b1fea2ee1315a7c80f086c9f066a90619f88a986a67e9ce0a88f14b84edbef3324ae24c1a87f4a51115fa25ad293bdc1d410ac26ac14128139d27fd95d8488f816d8d7a751f199726aa3cad529a6bec1791940b8eea86bb7a3681ce02888d7560f04478c046751f5f26fb718f08c71075e6351c7112bce29610c421c47e600ce434901370c4d74cc71a78ffa75a403728d82e0d28a8e40b801db21a5e411400994e0e87e78a3dfc8d9d5ffeafba6e234270a2e7d2c12a8767876cf627fad22d9d1e95f0c43594ec8b14db33328915c96023dcba03a79baa8594445aab815d8a9e188c85662105ec0ff2a7fa97212de4348386edf9c751a25847a71ad33dfcdd1b239c696d031b5f3c26c62049028cbf349f0a1c40ff9e214342c64448642bced33cac1e2ef1f27dd5c6a1fd5d08a5086ab48bafb195e90f5e81a417564074b08e1dd6198ebb511ecced8915ab6175efa07338dffcaf4072ff1be2ed90f83f4453925502c3d6808fff174b5a52d6fa4bd6685194c81250f0f138b70a3861055bf5bd44d5690d7acacf01a27007a311f1f24063391f30a9fa8661db9501ebf957ae7ee6cf153dd24261154e0b2bbfdf9066e069f6963921c33183bb92945a18ab127444c67437ab8e878e15f644ba35c48e20123a2f1bf9e080e8895c12d3ad059386dff734e6cceda7cae6155dbfa1d7569503dd57e0b6e4a278d699fa96d3e2d54ac4b9f68072fb77b5544901268dd39d2dc82f9cb4f56edbb9505462cbc1ff3357099ca502936f077d978b67b6381aa39e43400659bcf9f2a5fbab3b5f2b22c08edd70cfaf22c53521ee839b15103c49ae99d0065e165ad6385be267553e6d7b41c5fef3c184f764107c706b3a6e6fc50d65477a7b53198e41b38b14b76aa8753b09bdede863772e5abc5b9b7c7f3f501a06bc9cea59aa1fd830e8c5665a74200ff9a64570b881d4a2d218c848c6f44e5c351e0fcdf838851ac8a72a038c60ec79c474896a2b0021c95ab4b31ee0b296eeafb90594431632fb443d8c9dc29749e7ef0c133062eebbf082b1024a670a0bc50bcc0c6df25bf8a623e44128d61747307a09151a9feb0e031602967d04e5523a3bc67cd2b1de66342342b0b00e34448301056323d76a78235cfe3e1e90246da9b5618939928a9fd9c4b807f6fe076272a1018c65a570d24f54ca334df1dab50d7525a7e18cef9b9da718f53699561042121650880759046f78c4338c9346ce6a2a09d915b2f0e6dc056ee2f92f044c9f922dc7d91a3610bd418acb5bf912213d8e0869a74ebc48211838bb1edff3b04a056fa4c75fecae4f46e97a8270e4bb6a10483e509811aedde542bd22f64d06b2ecaebd7f0ded2bd59fd61d82f9dc353c23e49f493d28dc72afb394ecb1e5d8acc7a84b3b95a3125e6f5d7ee740426b4ef65c9dcb88d35c40f56265e89c54714ae538e13ceef3d0d343204411d0b318b1f66ec7bcd33e2463ee836be21da72d5063c70a8acb8bd21628ca09d1c4e99de2796f3b7b448cedc6cd1ace20bb596e1dc06d52782742516ba10fbdc4331164e31d1717f572e90c4b20bb9090b6bcf3e559ac13875f0d2477f7e271498ef2389cdccee893db4ff56d566c4d26c63e034a8ffc3aa8272b3e2cd8bfcad95365e3e944527fd96c2cb2eb78e9b3ce7671be650497658ff952c8567bb4e930a8e632cafe8aef8122108ba4f4ec06b1ede4ae02f508192c0e362c5e2e941cca50bd3580ef0fabfb3f22e827fb99f53ab783d76e8d43a85b91bd4479f8e572b12c4d4b6b5220225e54212d73b67913ba6746b394f8888f9ca829ecc8fb0ec5bb14859009db61e9aeb471b5c14b351c668386110556c8782153d43c732b017dd76c64cbcc35541362add47a18800aa27a32a89ce362280afd1220a740992fdb484c6fc3ff0344741106e5b5643979c005cbfd04362064dbabe473f920db907e4c8431b4761dd2df25e59b778100729be9dcee6263fec82249a3da93c236ee9daa842616615b6c86be073cff2d9fce52c2cb1ce8bb4e3e35ba9466063b0dfb59e891ccbee595bd4e5e7ab4b54ed25ed28de85da574eac567679c526d8b2fb5fb5726f6a15dec1f6324264e7ddc073989769465eef4317fced4e1dc9e21a2a8686336980c3f3062b0b17651dd21224cf808a6e6fa52fab08f33e4d9b97dfc0bb22db039cd64be89b4ad0ddb87fb6bd79fb1a93d1a2ec4adafa7c1d939130418f4593a4024113568f88eeba1b7a3c6d0d43f8da56e84fbc8d00a755e7847f73131dad3f81cba7d87c232811e75656ff00c3ddc85482e10276362b77da69c7ba3e0901a9976a3af2e7e12600ad44998d7b7da43fe5e9124d226422703f85aedafb50a3847b93d1e00221218ae0cf298abbe7e391e3f71b69e097f566e34e64f0204990e8c3cbd19592e3e9f3321425753e1ab11aaf888ce998670bee7e2cff49dac35ef708d2f6ca45e54e2a15ae036d81d06f3fd254941018f171689059e3cdcc898cef2032d05377bf0b6d87089e6b0ec31bba36ed30f1f9b5d1a2cb1af1314b88268c30defead5c441e4ebf5a8a3c733f8ffb8bd79741c02274d89be7b4aa35577fc0cb8c3a89a04b1208767ac9286d4fc6db4e4e4bb3a4a6a52bb48663bae1fc1fbc90e416de9079e366d4ee958e887d6d8ddedce6ecf6b0c6610b2ebedfb2c78fa253e49a895458878e39ab1165d479cc7206263b44c38ae9729fba32b6ea67e861d3b59b71a09d52a0b48a7f30368caab57292a9a2663298e321710cd7fb29464c4019045ea636f22b4f7ddf7e072f377d2e2f31d9e4314ae7cd2e192df9d7ee15eeedb29fe731011488cf0844e2731abd7340d45f5a823f5607632e8557db5cf67b9c0fd62715462af303c5bd41d4df4ab116f5051ed1ac4130f8eb31c9d5f8c318729f47ca77845ad9ae097bf9aa16998b65245554cb57e523075e5ef1e1ebf97d75bb3c61ebebd1ca864602353c336d9972ef9b62ce10c85f43894ca2448968cf9d883ee19e2c63b9b7ff1e12a7ee2bfc4a521f34612bdf46d8d314910606dd066f634cee23504c47da91c301cb8c4d18984b2fdf555ee51bc14ebcd6380710265166cd0716c0bdf3e4f85e16860229ef737d5754dbd9f65fcd9af7286772f765a587092beaa5d63133df80997eb347c8463cd3383522c2fdb6d956d04b4edf115d2e2e266b57321a20bb8aed0fdf29bd34c88aa7e810fcb002f1d64380a02ce2d2e6c0059d4219e419fbaf893b3d5f5fb2c7d319dd3f37e2197af9526b74a98896bbf74feab044586e7829076e4dbc6be7a8d830bd31f8cc4a1404e8d6749949364e87489c20899315518afadaeae5ade153317b42f6d274e81ca198d6ee76118024676dd793b4a33a799f94a3633dd4cf2943071e88b1661063f8aae210ec99934bf3f85aeaf28ff6ff5b3d85e12c327f5cdd78be22228d85ceb4e7b90e42b4915916a3e4d177c9878d3826e3862ec0eccbedb9fb08c7fcbd0c9aa1e2203ad31d0d27d5c1fdedef59216b46a1ced56e881db9f1175533a8f78ea63ccac978ba1f97272c64ba55e5684494e4d02cd84c62052dbffc8d3a88d9769146a8cba54311f24d9833cf01774b9b768839f4f620a1adba081df787e91917f08a4a636feff958a3a8455a3b0b2f68d8e5a6c0b9162cb8d963542b99446a46ea93e85b3b5a3404ccd7235d40c523eed571d7ba208b04790362caddbc47fee2a0c9c0cede194be915ebaf954d3411852d6d9ee49bc3f15f779cdef6a896d91e74b112af40ddeaba0abba4ed8e3a0c45dad8bf4bf5619439e96a2f05d8a544724999b6ddbbf9436b617677335cbcbc8a76b5baa2e395fd61c39fb90fb9c7cf4c0d7b9461fbfa1a6ddf5743cb06cb65b6181bfa796b36c6fad931fdf3520463071eac58aa7c311d44dff8da0d8502df1a8f296336194acb0c4811c2f3e9c81f56b6c341c487084a7acff4e491f328fb530998ac4a79848b398618f7f18ced1075529f1e367387f61e4214c97a440b44cc1107d2a8d136561f5b6ca7636420718497667053a9bb9aa92a9cff32ff9a5afde66963a3565d40cd1d60c1d89d48b6780384096378616ca96c25354e71b356f0aa2e79a7a2e3f6d64d233c34ff9f341de5a4b439f3787ecce127815545b5040517c6499b03939d7607818f49b8425e53262c64eb2c6ad256b1b1c897a42c8943c136fdfe383a0e0949bf0a25fbea75b30b7484bf762c37f7f342603cfef33276e721e89be5ce5d4263d27720ec2ffe8c96274d91c7d833be28eda17efff0eca78d843254c0e26bc1604844896bb5474a238b0cf68a96a1b1777be2994761f9c08cb76eab49cbbc6ae76cf024bc23350fef3228c1be09fae8dfeb1dc510eb6ed63bfac2131718e49f136e22c752df1b829d065376eb452e6484da779a6a390318559f7cfaf422c9b10bcbcfb8fa7013dc288bb2dc5d2254f0751623654645d9f8160f73cb3fbcbbdfac25dd4dd45aab48cc5286ffbfd7723c946bf4bdc2ba584f4dcf6d330cc312859c9d96858c2731abe2b9c7b49e47a15953386df99fec2cf839a293b49114a383f4c29cdf768ffa7e32096d5bb8d61bb766611a1ec5849992ce009826f2da60a9e5a677279bd275c91e96014f7d26d39b548fb19670981fd45afa6ad3606da4b420939fbf5631c66086dc05ccf594749d53b8a8cb5d3affe3626987a32a1dec71a847a9504f2a5eeb8f46b686cee0e31ed1b9bcd432c66f6fc2b3d6eba8f831902f97c89ff9d6277865d3dbd8fbd62e40e30fb9ca36433c2707a9b9b756b60dae11efc2a181febc95a62e7eca26ca7963f8e9564c043dd74403f241a900ebc9d4f9772f1d84500dc5136eeb7236adeb373bb422f3909c88c950d942f4fe58b7b102fd949520752cfc0379dd680b60bdfa48ff9efbc38c4718adb9db66e6ae44ef1cf34e384fe2cd6f7cbfe5b95d272459129496be1b842360789116320399b2bbaaebe0e27870f909e16916aa2944fc848d3fe39f860fcecfeb6013eee5cc2f40e31307e4bbe24c5a7397c85db547ae0a17cc02199b6c9691fded63790f512559bd86b8cae207e977c4bff1ef21744931dce92081b9580e457c672073ca23986ca32f514700bf24dc78215bf336d7bcccb205291e4b2918c569a5062eb0349ba604f133bcf772fa00f56f12f37ce19b01d077488b4d631e57170fd63eceb1f994e466c599fa727210e43c36b9f8278f4479aee745273eb20ff98c67ee9dd123335fbd47075a626704975ab4fafaf0869b2a927680d60223f4401943f60c9c954e7bab8905669191358779f55c6e6be932434e638aad6857a7368a108481991e48aa9f9170f507e30c9740e812bc15168495d876894eeca1fb8b354ddd246932fea15cdc68b273c63960f58d6106c9440ce350220c647c4775b5d72755a0c78448aa8f2cbc6d006db43bba0c3c511d2bdebbf447d8ccf66da1542231f56d9825f5c28295755e5d2e7887c585646395e1b12e60e567fb26de724ca4a036cbb8cb816516fb714f7000968d9deedc605f0171d1592b63ac71375a54669af8184ceb4612796db4c69cefca89c3b8006a0d50999b907723735c75798a4e716afa758be8ed0d99b16d374261263130c482580bffe6031bd63c316327dfe0942f6192b39067e006dafbaeb8d13610f9ef766045c0ba2e6c1bc153ea72c8294a8c768a392810f5feefc8244eb3bc369e9fa3a2e3b5601053830937958f3d846b723842c508ac2153b1e27dfb89bb4685244fefc80325a3d1f389fdf2ad7f035ac974af7eb896a507cf008a21d26837d5e43157a41c56064a4931cd0d6a1f8a8bed5be9323c29dc21e513ed52fbf5772f177f07bbdf86505d1c2c2afd7284472e46de95f69f2690aef178117754bfd2947acda418deecaf482905a802a74f848beab79cb4fe4e7456fe99b3c3421c522920999e14d1a7eede0aafa24234f5c5eead942b85ab02cc2f9b1d802d84777c21a98492bc3633c0f3e40ef41266fbb394bf246cd60803aa153fd62ccf07baecd6721b56c55a07704224932a118ed5b8527929577787cf791878624436ca87f6807c0c09b79cffb20baf784b6adef93c96aa7772452448be21def1269adfbd68abe70545095cdea4a127342b3ccba80271708604f0f1623ee075a9bfad94282f4a14aa5abf1f7f84725eb1db0a6676da1b139fc3abb37514c7a6e6659128953d3966c02a307343fbfa745202338e14e0ad9594868cf38983e53e834e6cc5602e2f10393f3d3cdcd68f7cb1c70c29504388e6bb3f700560c22f5ffa926ab715dea985138b65d7423cad748374fd33b27bf68fa4c6248329571cf3b2d497a575cde235e3cf13636e036187d5e10bbabbf114271b3bf0446b64119f6bc5a484469618e7e11ccf0af7ee688505d975e5ccc20efe35b911e3be6c14457c71f9bdec156892822e41d0cbc0ab2aad132c7eb7bb52b491f7e5bff79e0a40ef6530b61f193ae194dab4473333d3e9bcb55d26ed7680b951fd8ef3c3c854e7e83120382a0c1f8c4a0a6665a49aba1411d8addeb62d5fb4c038d9937e323d2509bf1c91a5227096aa6463af758b9593c7e3ea1fb4e3c0c</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">è¿™æ˜¯ä¸€ç¯‡åŠ å¯†æ–‡ç« ï¼Œè¾“å…¥æ­£ç¡®å¯†ç æ‰èƒ½æŸ¥çœ‹!</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">æµ‹è¯•åŠ å¯†æ–‡ç« </summary>
    
    
    
    <category term="æ¼”ç¤º" scheme="https://www.fomal.cc/categories/%E6%BC%94%E7%A4%BA/"/>
    
    
    <category term="æ¼”ç¤º" scheme="https://www.fomal.cc/tags/%E6%BC%94%E7%A4%BA/"/>
    
    <category term="æµ‹è¯•" scheme="https://www.fomal.cc/tags/%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>å®¹æ–¥åŸç†+è®¡æ•°ä¸“é¢˜</title>
    <link href="https://www.fomal.cc/posts/34beab1a.html"/>
    <id>https://www.fomal.cc/posts/34beab1a.html</id>
    <published>2022-08-24T14:58:00.000Z</published>
    <updated>2022-08-24T14:58:00.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1711-å¤§é¤è®¡æ•°"><a href="#1711-å¤§é¤è®¡æ•°" class="headerlink" title="1711. å¤§é¤è®¡æ•°"></a><a href="https://leetcode.cn/problems/count-good-meals/">1711. å¤§é¤è®¡æ•°</a></h3><p>ç»†èŠ‚æ»¡æ»¡çš„ä¸€é¢˜ï¼Œç»„åˆè®¡ç®—é—®é¢˜å†å‘¨èµ›çš„T3ä¸T4ç»å¸¸å‡ºï¼Œå¯¹äºå¸¸è§çš„ç»„åˆè®¡ç®—é—®é¢˜åº”è¯¥è¦æŒæ¡ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countPairs</span><span class="params">(<span class="type">int</span>[] deliciousness)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        HashMap+è®¡æ•°+å®¹æ–¥åŸç†:</span></span><br><span class="line"><span class="comment">        1 &lt;= deliciousness.length &lt;= 1e5</span></span><br><span class="line"><span class="comment">        0 &lt;= deliciousness[i] &lt;= 2^20</span></span><br><span class="line"><span class="comment">        çœ‹æ•°æ®èŒƒå›´åªèƒ½ç”¨O(N)ã€O(C*N)ã€O(NlogN)çš„æ—¶é—´å¤æ‚åº¦ç®—æ³•è¿›è¡Œæ±‚è§£</span></span><br><span class="line"><span class="comment">        1.é¢„å¤„ç†å‡º2çš„0~21æ¬¡å¹‚</span></span><br><span class="line"><span class="comment">        2.HashMapç»Ÿè®¡æ¯ä¸ªæ•°å­—å‡ºç°çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment">        3.æšä¸¾æ¯ä¸ªHashMapä¸­çš„æ•°å­—è¿›è¡Œè®¡æ•°ï¼Œä»¥keyä¸ºé”šç‚¹ï¼Œæšä¸¾æ‰€æœ‰çš„å¯èƒ½çš„äºŒæ¬¡å¹‚å¹¶çƒå‡ºç›®æ ‡åŒ¹é…æ•°å­—ï¼›</span></span><br><span class="line"><span class="comment">            ä¹‹åå…ˆç»Ÿè®¡ç›¸åŒæ•°å­—ç»„æˆçš„å¯¹ï¼Œå†ç»Ÿè®¡ä¸åŒæ•°å­—ç»„æˆçš„å¯¹è¿›è¡Œç›¸åŠ </span></span><br><span class="line"><span class="comment">        4.æœ€åè®°å¾—å¯¹ç»Ÿè®¡çš„æ•°å­—/2</span></span><br><span class="line"><span class="comment">        å‘ç‚¹:</span></span><br><span class="line"><span class="comment">        1.2^0=1ä¹Ÿæ˜¯2çš„æ¬¡å¹‚</span></span><br><span class="line"><span class="comment">        2.ç›¸åŒæ•°å­—çš„è®¡ç®—æ–¹æ³•ä¸º:num*(num-1)/2ï¼Œå…¶ä¸­numä¸ºæ•°å­—ä¸ªæ•°</span></span><br><span class="line"><span class="comment">        3.ç›¸åŒæ•°å­—çš„è®¡ç®—æ–¹æ³•ä¸º:cnt[t]*cnt[key]/2ï¼Œå…¶ä¸­tä¸ºè¦åŒ¹é…çš„ç›®æ ‡æ•°å­—ï¼Œkeyä¸ºå½“å‰æ•°å­—</span></span><br><span class="line"><span class="comment">            å¯ä»¥å°†2ä¸3ç»Ÿä¸€èµ·æ¥æœ€åä¸€èµ·é™¤2</span></span><br><span class="line"><span class="comment">        4.è¿™é‡Œlongç±»å‹åœ¨ç»Ÿè®¡è¿‡ç¨‹ä¸­å¯ä»¥ä¸è¿›è¡ŒMOD(&lt;1e10)ï¼Œæœ€åæ‰å–ä½™å³å¯</span></span><br><span class="line"><span class="comment">            æœ€å¥½å…ˆè¿›è¡Œé™¤2æ“ä½œæœ€åå†å–ä½™ï¼Œå¦‚æœé¡ºåºåäº†æœ€åå–ä½™å†é™¤2ç»“æœä¸å¯¹!</span></span><br><span class="line"><span class="comment">            è¿˜æœ‰æœ€åå–ä½™çš„ä¸€å®šä¸€å®šè¦æŠŠMODæ‹¬èµ·æ¥ï¼Œå¦åˆ™å°±ä¼šå°†reså…ˆè½¬æ¢ä¸ºintäº†!!!!</span></span><br><span class="line"><span class="comment">        5.æšä¸¾äºŒæ¬¡å¹‚å¯ä»¥å€’åºæå‰é€€å‡º</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">// ç¾å‘³ç¨‹åº¦ä¹‹å’Œä¸Šé™ä¸º2^21ï¼Œé¢„å¤„ç†å‡º2^0~2^21çš„å¹‚</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">cur</span> <span class="operator">=</span> <span class="number">1</span>, MOD = (<span class="type">int</span>) <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">22</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= <span class="number">21</span>; i++) &#123;</span><br><span class="line">            arr[i] = cur;</span><br><span class="line">            cur *= <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ç»Ÿè®¡æ•°å­—å¯¹åº”ä¸ªæ•°</span></span><br><span class="line">        HashMap&lt;Integer, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> num : deliciousness) &#123;</span><br><span class="line">            map.put(num, map.getOrDefault(num, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0L</span>;</span><br><span class="line">        <span class="comment">// å¯»æ‰¾æ¯ä¸ªæ•°å­—ç¼ºå¤±çš„å¦ä¸€åŠ</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> key : map.keySet()) &#123;</span><br><span class="line">            <span class="type">long</span> <span class="variable">num</span> <span class="operator">=</span> map.get(key); <span class="comment">// è¯¥æ•°å­—keyçš„æ•°ç›®</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">21</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> arr[i] - key;  <span class="comment">// è¦æ‰¾çš„ç›®æ ‡æ•°å­—</span></span><br><span class="line">                <span class="keyword">if</span> (t &lt; <span class="number">0</span>) <span class="keyword">break</span>;   <span class="comment">// ä»å¤§çš„å¼€å§‹æšä¸¾ï¼Œå¦‚æœå½“å‰å·²ç»å°äº0ï¼Œé‚£ä¹ˆå‰é¢çš„å¿…å®šå°äº0ï¼Œæå‰break</span></span><br><span class="line">                <span class="comment">// 1.å…ˆç»Ÿè®¡ç›¸åŒæ•°å­—ç»„æˆçš„:ç»„åˆç§æ•°=cnt[key]*(cnt[key]-1)/2</span></span><br><span class="line">                <span class="keyword">if</span> (t == key) &#123;</span><br><span class="line">                    res += num * (num - <span class="number">1</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (map.containsKey(t)) &#123;</span><br><span class="line">                    <span class="comment">// 2.å†ç»Ÿè®¡ä¸åŒæ•°å­—ä¹‹é—´çš„cnt[t]*cnt[key]/2</span></span><br><span class="line">                    res += num * map.get(t);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æœ€åç»Ÿè®¡é‡äº†ä¸€å€åº”è¯¥é™¤2</span></span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) ((res &gt;&gt; <span class="number">1</span>) % MOD);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">å®¹æ–¥åŸç†+è®¡æ•°</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fomal.cc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="å®¹æ–¥åŸç†" scheme="https://www.fomal.cc/tags/%E5%AE%B9%E6%96%A5%E5%8E%9F%E7%90%86/"/>
    
    <category term="æ•°å­¦" scheme="https://www.fomal.cc/tags/%E6%95%B0%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>MySQLæ€»ç»“</title>
    <link href="https://www.fomal.cc/posts/54ed288e.html"/>
    <id>https://www.fomal.cc/posts/54ed288e.html</id>
    <published>2022-08-16T06:18:00.000Z</published>
    <updated>2022-08-16T06:18:00.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ğŸ­ğŸ­ğŸ­ ä»¥ä¸‹å†…å®¹å‡è½¬è‡ª<a href="https://dhc.pythonanywhere.com/entry/share/?key=3ad29aad765a2b98b2b2a745d71bef715507ee9db8adbec98257bac0ad84cbe4">è·¯é€”åšå®¢çš„ MySQL æ€»ç»“</a>(å·²è·å¾—ä½œè€…å…è®¸)ï¼Œæœ€åˆæ¥æºä¸º<a href="https://www.bilibili.com/video/BV1Kr4y1i7ru">é»‘é©¬ç¨‹åºå‘˜çš„ MySQL è§†é¢‘è¯¾</a></p><div>æœ¬åšå®¢æ–‡ç« ç”¨é€”å‡æ˜¯å­¦ä¹ æ‰€ç”¨ï¼Œæ— å•†ä¸šç”¨é€”ï¼Œå¦‚æœ‰ä¾µæƒè¯·è”ç³»åšä¸»åˆ é™¤ï¼ğŸ“§ï¼š1174008660@qq.com</div></blockquote><h1 id="1-åŸºç¡€ç¯‡"><a href="#1-åŸºç¡€ç¯‡" class="headerlink" title="1.åŸºç¡€ç¯‡"></a>1.åŸºç¡€ç¯‡</h1><h2 id="1-1-é€šç”¨è¯­æ³•åŠåˆ†ç±»"><a href="#1-1-é€šç”¨è¯­æ³•åŠåˆ†ç±»" class="headerlink" title="1.1 é€šç”¨è¯­æ³•åŠåˆ†ç±»"></a>1.1 é€šç”¨è¯­æ³•åŠåˆ†ç±»</h2><ul><li>DDL: æ•°æ®å®šä¹‰è¯­è¨€ï¼Œç”¨æ¥å®šä¹‰æ•°æ®åº“å¯¹è±¡ï¼ˆæ•°æ®åº“ã€è¡¨ã€å­—æ®µï¼‰</li><li>DML: æ•°æ®æ“ä½œè¯­è¨€ï¼Œç”¨æ¥å¯¹æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åˆ æ”¹</li><li>DQL: æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼Œç”¨æ¥æŸ¥è¯¢æ•°æ®åº“ä¸­è¡¨çš„è®°å½•</li><li>DCL: æ•°æ®æ§åˆ¶è¯­è¨€ï¼Œç”¨æ¥åˆ›å»ºæ•°æ®åº“ç”¨æˆ·ã€æ§åˆ¶æ•°æ®åº“çš„æ§åˆ¶æƒé™</li></ul><h3 id="DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰"><a href="#DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰" class="headerlink" title="DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰"></a>DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰</h3><p>æ•°æ®å®šä¹‰è¯­è¨€</p><h4 id="æ•°æ®åº“æ“ä½œ"><a href="#æ•°æ®åº“æ“ä½œ" class="headerlink" title="æ•°æ®åº“æ“ä½œ"></a>æ•°æ®åº“æ“ä½œ</h4><p>æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“ï¼š<br><code>SHOW DATABASES;</code><br>æŸ¥è¯¢å½“å‰æ•°æ®åº“ï¼š<br><code>SELECT DATABASE();</code><br>åˆ›å»ºæ•°æ®åº“ï¼š<br><code>CREATE DATABASE [ IF NOT EXISTS ] æ•°æ®åº“å [ DEFAULT CHARSET å­—ç¬¦é›†] [COLLATE æ’åºè§„åˆ™ ];</code><br>åˆ é™¤æ•°æ®åº“ï¼š<br><code>DROP DATABASE [ IF EXISTS ] æ•°æ®åº“å;</code><br>ä½¿ç”¨æ•°æ®åº“ï¼š<br><code>USE æ•°æ®åº“å;</code></p><h5 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h5><ul><li>UTF8 å­—ç¬¦é›†é•¿åº¦ä¸º 3 å­—èŠ‚ï¼Œæœ‰äº›ç¬¦å·å  4 å­—èŠ‚ï¼Œæ‰€ä»¥æ¨èç”¨ utf8mb4 å­—ç¬¦é›†</li></ul><h4 id="è¡¨æ“ä½œ"><a href="#è¡¨æ“ä½œ" class="headerlink" title="è¡¨æ“ä½œ"></a>è¡¨æ“ä½œ</h4><p>æŸ¥è¯¢å½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨ï¼š<br><code>SHOW TABLES;</code><br>æŸ¥è¯¢è¡¨ç»“æ„ï¼š<br><code>DESC è¡¨å;</code><br>æŸ¥è¯¢æŒ‡å®šè¡¨çš„å»ºè¡¨è¯­å¥ï¼š<br><code>SHOW CREATE TABLE è¡¨å;</code></p><p>åˆ›å»ºè¡¨ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> è¡¨å(</span><br><span class="line">å­—æ®µ<span class="number">1</span> å­—æ®µ<span class="number">1</span>ç±»å‹ [COMMENT å­—æ®µ<span class="number">1</span>æ³¨é‡Š],</span><br><span class="line">å­—æ®µ<span class="number">2</span> å­—æ®µ<span class="number">2</span>ç±»å‹ [COMMENT å­—æ®µ<span class="number">2</span>æ³¨é‡Š],</span><br><span class="line">å­—æ®µ<span class="number">3</span> å­—æ®µ<span class="number">3</span>ç±»å‹ [COMMENT å­—æ®µ<span class="number">3</span>æ³¨é‡Š],</span><br><span class="line">...</span><br><span class="line">å­—æ®µn å­—æ®µnç±»å‹ [COMMENT å­—æ®µnæ³¨é‡Š]</span><br><span class="line">)[ COMMENT è¡¨æ³¨é‡Š ];</span><br></pre></td></tr></table></figure><p><strong>æœ€åä¸€ä¸ªå­—æ®µåé¢æ²¡æœ‰é€—å·</strong></p><p>æ·»åŠ å­—æ®µï¼š<br><code>ALTER TABLE è¡¨å ADD å­—æ®µå ç±»å‹(é•¿åº¦) [COMMENT æ³¨é‡Š] [çº¦æŸ];</code><br>ä¾‹ï¼š<code>ALTER TABLE emp ADD nickname varchar(20) COMMENT &#39;æ˜µç§°&#39;;</code></p><p>ä¿®æ”¹æ•°æ®ç±»å‹ï¼š<br><code>ALTER TABLE è¡¨å MODIFY å­—æ®µå æ–°æ•°æ®ç±»å‹(é•¿åº¦);</code><br>ä¿®æ”¹å­—æ®µåå’Œå­—æ®µç±»å‹ï¼š<br><code>ALTER TABLE è¡¨å CHANGE æ—§å­—æ®µå æ–°å­—æ®µå ç±»å‹(é•¿åº¦) [COMMENT æ³¨é‡Š] [çº¦æŸ];</code><br>ä¾‹ï¼šå°† emp è¡¨çš„ nickname å­—æ®µä¿®æ”¹ä¸º usernameï¼Œç±»å‹ä¸º varchar(30)<br><code>ALTER TABLE emp CHANGE nickname username varchar(30) COMMENT &#39;æ˜µç§°&#39;;</code></p><p>åˆ é™¤å­—æ®µï¼š<br><code>ALTER TABLE è¡¨å DROP å­—æ®µå;</code></p><p>ä¿®æ”¹è¡¨åï¼š<br><code>ALTER TABLE è¡¨å RENAME TO æ–°è¡¨å</code></p><p>åˆ é™¤è¡¨ï¼š<br><code>DROP TABLE [IF EXISTS] è¡¨å;</code><br>åˆ é™¤è¡¨ï¼Œå¹¶é‡æ–°åˆ›å»ºè¯¥è¡¨ï¼š<br><code>TRUNCATE TABLE è¡¨å;</code></p><h3 id="DMLï¼ˆæ•°æ®æ“ä½œè¯­è¨€ï¼‰"><a href="#DMLï¼ˆæ•°æ®æ“ä½œè¯­è¨€ï¼‰" class="headerlink" title="DMLï¼ˆæ•°æ®æ“ä½œè¯­è¨€ï¼‰"></a>DMLï¼ˆæ•°æ®æ“ä½œè¯­è¨€ï¼‰</h3><h4 id="æ·»åŠ æ•°æ®"><a href="#æ·»åŠ æ•°æ®" class="headerlink" title="æ·»åŠ æ•°æ®"></a>æ·»åŠ æ•°æ®</h4><p>æŒ‡å®šå­—æ®µï¼š<br><code>INSERT INTO è¡¨å (å­—æ®µå1, å­—æ®µå2, ...) VALUES (å€¼1, å€¼2, ...);</code><br>å…¨éƒ¨å­—æ®µï¼š<br><code>INSERT INTO è¡¨å VALUES (å€¼1, å€¼2, ...);</code></p><p>æ‰¹é‡æ·»åŠ æ•°æ®ï¼š<br><code>INSERT INTO è¡¨å (å­—æ®µå1, å­—æ®µå2, ...) VALUES (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...);</code><br><code>INSERT INTO è¡¨å VALUES (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...);</code></p><h5 id="æ³¨æ„äº‹é¡¹-1"><a href="#æ³¨æ„äº‹é¡¹-1" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h5><ul><li><strong>å­—ç¬¦ä¸²</strong>å’Œ<strong>æ—¥æœŸç±»å‹</strong>æ•°æ®åº”è¯¥åŒ…å«åœ¨å¼•å·ä¸­</li><li>æ’å…¥çš„æ•°æ®å¤§å°åº”è¯¥åœ¨å­—æ®µçš„è§„å®šèŒƒå›´å†…</li></ul><h4 id="æ›´æ–°å’Œåˆ é™¤æ•°æ®"><a href="#æ›´æ–°å’Œåˆ é™¤æ•°æ®" class="headerlink" title="æ›´æ–°å’Œåˆ é™¤æ•°æ®"></a>æ›´æ–°å’Œåˆ é™¤æ•°æ®</h4><p>ä¿®æ”¹æ•°æ®ï¼š<br><code>UPDATE è¡¨å SET å­—æ®µå1 = å€¼1, å­—æ®µå2 = å€¼2, ... [ WHERE æ¡ä»¶ ];</code><br>ä¾‹ï¼š<br><code>UPDATE emp SET name = &#39;Jack&#39; WHERE id = 1;</code></p><p>åˆ é™¤æ•°æ®ï¼š<br><code>DELETE FROM è¡¨å [ WHERE æ¡ä»¶ ];</code></p><h3 id="DQLï¼ˆæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼‰"><a href="#DQLï¼ˆæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼‰" class="headerlink" title="DQLï¼ˆæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼‰"></a>DQLï¼ˆæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼‰</h3><p>è¯­æ³•ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">å­—æ®µåˆ—è¡¨</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">è¡¨åå­—æ®µ</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">æ¡ä»¶åˆ—è¡¨</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">åˆ†ç»„å­—æ®µåˆ—è¡¨</span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">åˆ†ç»„åçš„æ¡ä»¶åˆ—è¡¨</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">æ’åºå­—æ®µåˆ—è¡¨</span><br><span class="line">LIMIT</span><br><span class="line">åˆ†é¡µå‚æ•°</span><br></pre></td></tr></table></figure><h4 id="åŸºç¡€æŸ¥è¯¢"><a href="#åŸºç¡€æŸ¥è¯¢" class="headerlink" title="åŸºç¡€æŸ¥è¯¢"></a>åŸºç¡€æŸ¥è¯¢</h4><p>æŸ¥è¯¢å¤šä¸ªå­—æ®µï¼š<br><code>SELECT å­—æ®µ1, å­—æ®µ2, å­—æ®µ3, ... FROM è¡¨å;</code><br><code>SELECT * FROM è¡¨å;</code></p><p>è®¾ç½®åˆ«åï¼š<br><code>SELECT å­—æ®µ1 [ AS åˆ«å1 ], å­—æ®µ2 [ AS åˆ«å2 ], å­—æ®µ3 [ AS åˆ«å3 ], ... FROM è¡¨å;</code><br><code>SELECT å­—æ®µ1 [ åˆ«å1 ], å­—æ®µ2 [ åˆ«å2 ], å­—æ®µ3 [ åˆ«å3 ], ... FROM è¡¨å;</code></p><p>å»é™¤é‡å¤è®°å½•ï¼š<br><code>SELECT DISTINCT å­—æ®µåˆ—è¡¨ FROM è¡¨å;</code></p><p>è½¬ä¹‰ï¼š<br><code>SELECT * FROM è¡¨å WHERE name LIKE &#39;/_å¼ ä¸‰&#39; ESCAPE &#39;/&#39;</code><br>/ ä¹‹åçš„_ä¸ä½œä¸ºé€šé…ç¬¦</p><h4 id="æ¡ä»¶æŸ¥è¯¢"><a href="#æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢"></a>æ¡ä»¶æŸ¥è¯¢</h4><p>è¯­æ³•ï¼š<br><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å WHERE æ¡ä»¶åˆ—è¡¨;</code></p><p>æ¡ä»¶ï¼š</p><div class="table-container"><table><thead><tr><th>æ¯”è¾ƒè¿ç®—ç¬¦</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>&gt;</td><td>å¤§äº</td></tr><tr><td>&gt;=</td><td>å¤§äºç­‰äº</td></tr><tr><td>&lt;</td><td>å°äº</td></tr><tr><td>&lt;=</td><td>å°äºç­‰äº</td></tr><tr><td>=</td><td>ç­‰äº</td></tr><tr><td>&lt;&gt; æˆ– !=</td><td>ä¸ç­‰äº</td></tr><tr><td>BETWEEN â€¦ AND â€¦</td><td>åœ¨æŸä¸ªèŒƒå›´å†…ï¼ˆå«æœ€å°ã€æœ€å¤§å€¼ï¼‰</td></tr><tr><td>IN(â€¦)</td><td>åœ¨ in ä¹‹åçš„åˆ—è¡¨ä¸­çš„å€¼ï¼Œå¤šé€‰ä¸€</td></tr><tr><td>LIKE å ä½ç¬¦</td><td>æ¨¡ç³ŠåŒ¹é…ï¼ˆ_åŒ¹é…å•ä¸ªå­—ç¬¦ï¼Œ%åŒ¹é…ä»»æ„ä¸ªå­—ç¬¦ï¼‰</td></tr><tr><td>IS NULL</td><td>æ˜¯ NULL</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>é€»è¾‘è¿ç®—ç¬¦</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>AND æˆ– &amp;&amp;</td><td>å¹¶ä¸”ï¼ˆå¤šä¸ªæ¡ä»¶åŒæ—¶æˆç«‹ï¼‰</td></tr><tr><td>OR æˆ– &#124;&#124;</td><td>æˆ–è€…ï¼ˆå¤šä¸ªæ¡ä»¶ä»»æ„ä¸€ä¸ªæˆç«‹ï¼‰</td></tr><tr><td>NOT æˆ– !</td><td>éï¼Œä¸æ˜¯</td></tr></tbody></table></div><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å¹´é¾„ç­‰äº30</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"><span class="comment">-- å¹´é¾„å°äº30</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="operator">&lt;</span> <span class="number">30</span>;</span><br><span class="line"><span class="comment">-- å°äºç­‰äº</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="operator">&lt;=</span> <span class="number">30</span>;</span><br><span class="line"><span class="comment">-- æ²¡æœ‰èº«ä»½è¯</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> idcard <span class="keyword">is</span> <span class="keyword">null</span> <span class="keyword">or</span> idcard <span class="operator">=</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="comment">-- æœ‰èº«ä»½è¯</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> idcard;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> idcard <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">-- ä¸ç­‰äº</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="operator">!=</span> <span class="number">30</span>;</span><br><span class="line"><span class="comment">-- å¹´é¾„åœ¨20åˆ°30ä¹‹é—´</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="keyword">between</span> <span class="number">20</span> <span class="keyword">and</span> <span class="number">30</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="operator">&gt;=</span> <span class="number">20</span> <span class="keyword">and</span> age <span class="operator">&lt;=</span> <span class="number">30</span>;</span><br><span class="line"><span class="comment">-- ä¸‹é¢è¯­å¥ä¸æŠ¥é”™ï¼Œä½†æŸ¥ä¸åˆ°ä»»ä½•ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="keyword">between</span> <span class="number">30</span> <span class="keyword">and</span> <span class="number">20</span>;</span><br><span class="line"><span class="comment">-- æ€§åˆ«ä¸ºå¥³ä¸”å¹´é¾„å°äº30</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="operator">&lt;</span> <span class="number">30</span> <span class="keyword">and</span> gender <span class="operator">=</span> <span class="string">&#x27;å¥³&#x27;</span>;</span><br><span class="line"><span class="comment">-- å¹´é¾„ç­‰äº25æˆ–30æˆ–35</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="operator">=</span> <span class="number">25</span> <span class="keyword">or</span> age <span class="operator">=</span> <span class="number">30</span> <span class="keyword">or</span> age <span class="operator">=</span> <span class="number">35</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="keyword">in</span> (<span class="number">25</span>, <span class="number">30</span>, <span class="number">35</span>);</span><br><span class="line"><span class="comment">-- å§“åä¸ºä¸¤ä¸ªå­—</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;__&#x27;</span>;</span><br><span class="line"><span class="comment">-- èº«ä»½è¯æœ€åä¸ºX</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> idcard <span class="keyword">like</span> <span class="string">&#x27;%X&#x27;</span>;</span><br></pre></td></tr></table></figure><h4 id="èšåˆæŸ¥è¯¢ï¼ˆèšåˆå‡½æ•°ï¼‰"><a href="#èšåˆæŸ¥è¯¢ï¼ˆèšåˆå‡½æ•°ï¼‰" class="headerlink" title="èšåˆæŸ¥è¯¢ï¼ˆèšåˆå‡½æ•°ï¼‰"></a>èšåˆæŸ¥è¯¢ï¼ˆèšåˆå‡½æ•°ï¼‰</h4><p>å¸¸è§èšåˆå‡½æ•°(null å€¼ä¸å‚ä¸èšåˆå‡½æ•°è¿ç®—)ï¼š</p><div class="table-container"><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>count</td><td>ç»Ÿè®¡æ•°é‡</td></tr><tr><td>max</td><td>æœ€å¤§å€¼</td></tr><tr><td>min</td><td>æœ€å°å€¼</td></tr><tr><td>avg</td><td>å¹³å‡å€¼</td></tr><tr><td>sum</td><td>æ±‚å’Œ</td></tr></tbody></table></div><p>è¯­æ³•ï¼š<br><code>SELECT èšåˆå‡½æ•°(å­—æ®µåˆ—è¡¨) FROM è¡¨å;</code><br>ä¾‹ï¼š<br><code>SELECT count(id) from employee where workaddress = &quot;å¹¿ä¸œçœ&quot;;</code></p><h4 id="åˆ†ç»„æŸ¥è¯¢"><a href="#åˆ†ç»„æŸ¥è¯¢" class="headerlink" title="åˆ†ç»„æŸ¥è¯¢"></a>åˆ†ç»„æŸ¥è¯¢</h4><p>è¯­æ³•ï¼š<br><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å [ WHERE æ¡ä»¶ ] GROUP BY åˆ†ç»„å­—æ®µå [ HAVING åˆ†ç»„åçš„è¿‡æ»¤æ¡ä»¶ ];</code></p><p>where å’Œ having çš„åŒºåˆ«ï¼š</p><ul><li>æ‰§è¡Œæ—¶æœºä¸åŒï¼šwhere æ˜¯åˆ†ç»„ä¹‹å‰è¿›è¡Œè¿‡æ»¤ï¼Œä¸æ»¡è¶³ where æ¡ä»¶ä¸å‚ä¸åˆ†ç»„ï¼›having æ˜¯åˆ†ç»„åå¯¹ç»“æœè¿›è¡Œè¿‡æ»¤ã€‚</li><li>åˆ¤æ–­æ¡ä»¶ä¸åŒï¼šwhere ä¸èƒ½å¯¹èšåˆå‡½æ•°è¿›è¡Œåˆ¤æ–­ï¼Œè€Œ having å¯ä»¥ã€‚</li></ul><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ ¹æ®æ€§åˆ«åˆ†ç»„ï¼Œç»Ÿè®¡ç”·æ€§å’Œå¥³æ€§æ•°é‡ï¼ˆåªæ˜¾ç¤ºåˆ†ç»„æ•°é‡ï¼Œä¸æ˜¾ç¤ºå“ªä¸ªæ˜¯ç”·å“ªä¸ªæ˜¯å¥³ï¼‰</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> employee <span class="keyword">group</span> <span class="keyword">by</span> gender;</span><br><span class="line"><span class="comment">-- æ ¹æ®æ€§åˆ«åˆ†ç»„ï¼Œç»Ÿè®¡ç”·æ€§å’Œå¥³æ€§æ•°é‡</span></span><br><span class="line"><span class="keyword">select</span> gender, <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> employee <span class="keyword">group</span> <span class="keyword">by</span> gender;</span><br><span class="line"><span class="comment">-- æ ¹æ®æ€§åˆ«åˆ†ç»„ï¼Œç»Ÿè®¡ç”·æ€§å’Œå¥³æ€§çš„å¹³å‡å¹´é¾„</span></span><br><span class="line"><span class="keyword">select</span> gender, <span class="built_in">avg</span>(age) <span class="keyword">from</span> employee <span class="keyword">group</span> <span class="keyword">by</span> gender;</span><br><span class="line"><span class="comment">-- å¹´é¾„å°äº45ï¼Œå¹¶æ ¹æ®å·¥ä½œåœ°å€åˆ†ç»„</span></span><br><span class="line"><span class="keyword">select</span> workaddress, <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="operator">&lt;</span> <span class="number">45</span> <span class="keyword">group</span> <span class="keyword">by</span> workaddress;</span><br><span class="line"><span class="comment">-- å¹´é¾„å°äº45ï¼Œå¹¶æ ¹æ®å·¥ä½œåœ°å€åˆ†ç»„ï¼Œè·å–å‘˜å·¥æ•°é‡å¤§äºç­‰äº3çš„å·¥ä½œåœ°å€</span></span><br><span class="line"><span class="keyword">select</span> workaddress, <span class="built_in">count</span>(<span class="operator">*</span>) address_count <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="operator">&lt;</span> <span class="number">45</span> <span class="keyword">group</span> <span class="keyword">by</span> workaddress <span class="keyword">having</span> address_count <span class="operator">&gt;=</span> <span class="number">3</span>;</span><br></pre></td></tr></table></figure><h5 id="æ³¨æ„äº‹é¡¹-2"><a href="#æ³¨æ„äº‹é¡¹-2" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h5><ul><li>æ‰§è¡Œé¡ºåºï¼šwhere &gt; èšåˆå‡½æ•° &gt; having</li><li>åˆ†ç»„ä¹‹åï¼ŒæŸ¥è¯¢çš„å­—æ®µä¸€èˆ¬ä¸º<strong>èšåˆå‡½æ•°</strong>å’Œ<strong>åˆ†ç»„å­—æ®µ</strong>ï¼ŒæŸ¥è¯¢å…¶ä»–å­—æ®µæ— ä»»ä½•æ„ä¹‰</li></ul><h4 id="æ’åºæŸ¥è¯¢"><a href="#æ’åºæŸ¥è¯¢" class="headerlink" title="æ’åºæŸ¥è¯¢"></a>æ’åºæŸ¥è¯¢</h4><p>è¯­æ³•ï¼š<br><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å ORDER BY å­—æ®µ1 æ’åºæ–¹å¼1, å­—æ®µ2 æ’åºæ–¹å¼2;</code></p><p>æ’åºæ–¹å¼ï¼š</p><ul><li>ASC: å‡åºï¼ˆé»˜è®¤ï¼‰</li><li>DESC: é™åº</li></ul><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ ¹æ®å¹´é¾„å‡åºæ’åº</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee <span class="keyword">ORDER</span> <span class="keyword">BY</span> age <span class="keyword">ASC</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee <span class="keyword">ORDER</span> <span class="keyword">BY</span> age;</span><br><span class="line"><span class="comment">-- ä¸¤å­—æ®µæ’åºï¼Œæ ¹æ®å¹´é¾„å‡åºæ’åºï¼Œå…¥èŒæ—¶é—´é™åºæ’åº</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee <span class="keyword">ORDER</span> <span class="keyword">BY</span> age <span class="keyword">ASC</span>, entrydate <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure><h5 id="æ³¨æ„äº‹é¡¹-3"><a href="#æ³¨æ„äº‹é¡¹-3" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h5><p>å¦‚æœæ˜¯å¤šå­—æ®µæ’åºï¼Œå½“ç¬¬ä¸€ä¸ªå­—æ®µå€¼ç›¸åŒæ—¶ï¼Œæ‰ä¼šæ ¹æ®ç¬¬äºŒä¸ªå­—æ®µè¿›è¡Œæ’åº</p><h4 id="åˆ†é¡µæŸ¥è¯¢"><a href="#åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="åˆ†é¡µæŸ¥è¯¢"></a>åˆ†é¡µæŸ¥è¯¢</h4><p>è¯­æ³•ï¼š<br><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å LIMIT èµ·å§‹ç´¢å¼•, æŸ¥è¯¢è®°å½•æ•°;</code></p><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢ç¬¬ä¸€é¡µæ•°æ®ï¼Œå±•ç¤º10æ¡</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee LIMIT <span class="number">0</span>, <span class="number">10</span>;</span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ç¬¬äºŒé¡µ</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee LIMIT <span class="number">10</span>, <span class="number">10</span>;</span><br></pre></td></tr></table></figure><h5 id="æ³¨æ„äº‹é¡¹-4"><a href="#æ³¨æ„äº‹é¡¹-4" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h5><ul><li>èµ·å§‹ç´¢å¼•ä» 0 å¼€å§‹ï¼Œèµ·å§‹ç´¢å¼• = ï¼ˆæŸ¥è¯¢é¡µç  - 1ï¼‰ * æ¯é¡µæ˜¾ç¤ºè®°å½•æ•°</li><li>åˆ†é¡µæŸ¥è¯¢æ˜¯æ•°æ®åº“çš„æ–¹è¨€ï¼Œä¸åŒæ•°æ®åº“æœ‰ä¸åŒå®ç°ï¼ŒMySQL æ˜¯ LIMIT</li><li>å¦‚æœæŸ¥è¯¢çš„æ˜¯ç¬¬ä¸€é¡µæ•°æ®ï¼Œèµ·å§‹ç´¢å¼•å¯ä»¥çœç•¥ï¼Œç›´æ¥ç®€å†™ LIMIT 10</li></ul><h4 id="DQL-æ‰§è¡Œé¡ºåº"><a href="#DQL-æ‰§è¡Œé¡ºåº" class="headerlink" title="DQL æ‰§è¡Œé¡ºåº"></a>DQL æ‰§è¡Œé¡ºåº</h4><p>1.FROM(ä»å“ªå¼ è¡¨æŸ¥è¯¢) -&gt; 2.WHERE(å¯¹æ•°æ®è¿›è¡Œç­›é€‰) -&gt; 3.GROUP BY(å¯¹ç­›é€‰çš„æ•°æ®è¿›è¡Œåˆ†ç»„) -&gt; 4.HAVING(åˆ†ç»„åçš„æ¡ä»¶åˆ—è¡¨)-&gt; 5.SELECT(é€‰æ‹©å¯¹åº”æ•°æ®) -&gt; 6.ORDER BY(å¯¹ç»“æœæ’åº) -&gt; 7.LIMIT(å¯¹ç»“æœåˆ†é¡µ)</p><h3 id="DCL"><a href="#DCL" class="headerlink" title="DCL"></a>DCL</h3><h4 id="ç®¡ç†ç”¨æˆ·"><a href="#ç®¡ç†ç”¨æˆ·" class="headerlink" title="ç®¡ç†ç”¨æˆ·"></a>ç®¡ç†ç”¨æˆ·</h4><p>æŸ¥è¯¢ç”¨æˆ·ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">USER</span> mysql;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºç”¨æˆ·:<br><code>CREATE USER &#39;ç”¨æˆ·å&#39;@&#39;ä¸»æœºå&#39; IDENTIFIED BY &#39;å¯†ç &#39;;</code></p><p>ä¿®æ”¹ç”¨æˆ·å¯†ç ï¼š<br><code>ALTER USER &#39;ç”¨æˆ·å&#39;@&#39;ä¸»æœºå&#39; IDENTIFIED WITH mysql_native_password BY &#39;æ–°å¯†ç &#39;;</code></p><p>åˆ é™¤ç”¨æˆ·ï¼š<br><code>DROP USER &#39;ç”¨æˆ·å&#39;@&#39;ä¸»æœºå&#39;;</code></p><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºç”¨æˆ·testï¼Œåªèƒ½åœ¨å½“å‰ä¸»æœºlocalhostè®¿é—®</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;test&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"><span class="comment">-- åˆ›å»ºç”¨æˆ·testï¼Œèƒ½åœ¨ä»»æ„ä¸»æœºè®¿é—®</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;test&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;test&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"><span class="comment">-- ä¿®æ”¹å¯†ç </span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> <span class="string">&#x27;test&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified <span class="keyword">with</span> mysql_native_password <span class="keyword">by</span> <span class="string">&#x27;1234&#x27;</span>;</span><br><span class="line"><span class="comment">-- åˆ é™¤ç”¨æˆ·</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> <span class="string">&#x27;test&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br></pre></td></tr></table></figure><h5 id="æ³¨æ„äº‹é¡¹-5"><a href="#æ³¨æ„äº‹é¡¹-5" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h5><ul><li>ä¸»æœºåå¯ä»¥ä½¿ç”¨ % é€šé…</li></ul><h4 id="æƒé™æ§åˆ¶"><a href="#æƒé™æ§åˆ¶" class="headerlink" title="æƒé™æ§åˆ¶"></a>æƒé™æ§åˆ¶</h4><p>å¸¸ç”¨æƒé™ï¼š</p><div class="table-container"><table><thead><tr><th>æƒé™</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ALL, ALL PRIVILEGES</td><td>æ‰€æœ‰æƒé™</td></tr><tr><td>SELECT</td><td>æŸ¥è¯¢æ•°æ®</td></tr><tr><td>INSERT</td><td>æ’å…¥æ•°æ®</td></tr><tr><td>UPDATE</td><td>ä¿®æ”¹æ•°æ®</td></tr><tr><td>DELETE</td><td>åˆ é™¤æ•°æ®</td></tr><tr><td>ALTER</td><td>ä¿®æ”¹è¡¨</td></tr><tr><td>DROP</td><td>åˆ é™¤æ•°æ®åº“/è¡¨/è§†å›¾</td></tr><tr><td>CREATE</td><td>åˆ›å»ºæ•°æ®åº“/è¡¨</td></tr></tbody></table></div><p>æ›´å¤šæƒé™è¯·çœ‹<a href="#æƒé™ä¸€è§ˆè¡¨" title="æƒé™ä¸€è§ˆè¡¨">æƒé™ä¸€è§ˆè¡¨</a></p><p>æŸ¥è¯¢æƒé™ï¼š<br><code>SHOW GRANTS FOR &#39;ç”¨æˆ·å&#39;@&#39;ä¸»æœºå&#39;;</code></p><p>æˆäºˆæƒé™ï¼š<br><code>GRANT æƒé™åˆ—è¡¨ ON æ•°æ®åº“å.è¡¨å TO &#39;ç”¨æˆ·å&#39;@&#39;ä¸»æœºå&#39;;</code></p><p>æ’¤é”€æƒé™ï¼š<br><code>REVOKE æƒé™åˆ—è¡¨ ON æ•°æ®åº“å.è¡¨å FROM &#39;ç”¨æˆ·å&#39;@&#39;ä¸»æœºå&#39;;</code></p><h5 id="æ³¨æ„äº‹é¡¹-6"><a href="#æ³¨æ„äº‹é¡¹-6" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h5><ul><li>å¤šä¸ªæƒé™ç”¨é€—å·åˆ†éš”</li><li>æˆæƒæ—¶ï¼Œæ•°æ®åº“åå’Œè¡¨åå¯ä»¥ç”¨ * è¿›è¡Œé€šé…ï¼Œä»£è¡¨æ‰€æœ‰</li></ul><h2 id="1-2-å‡½æ•°"><a href="#1-2-å‡½æ•°" class="headerlink" title="1.2 å‡½æ•°"></a>1.2 å‡½æ•°</h2><ul><li>å­—ç¬¦ä¸²å‡½æ•°</li><li>æ•°å€¼å‡½æ•°</li><li>æ—¥æœŸå‡½æ•°</li><li>æµç¨‹å‡½æ•°</li></ul><h3 id="å­—ç¬¦ä¸²å‡½æ•°"><a href="#å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="å­—ç¬¦ä¸²å‡½æ•°"></a>å­—ç¬¦ä¸²å‡½æ•°</h3><p>å¸¸ç”¨å‡½æ•°ï¼š</p><div class="table-container"><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>CONCAT(s1, s2, â€¦, sn)</td><td>å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå°† s1, s2, â€¦, sn æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²</td></tr><tr><td>LOWER(str)</td><td>å°†å­—ç¬¦ä¸²å…¨éƒ¨è½¬ä¸ºå°å†™</td></tr><tr><td>UPPER(str)</td><td>å°†å­—ç¬¦ä¸²å…¨éƒ¨è½¬ä¸ºå¤§å†™</td></tr><tr><td>LPAD(str, n, pad)</td><td>å·¦å¡«å……ï¼Œç”¨å­—ç¬¦ä¸² pad å¯¹ str çš„å·¦è¾¹è¿›è¡Œå¡«å……ï¼Œè¾¾åˆ° n ä¸ªå­—ç¬¦ä¸²é•¿åº¦</td></tr><tr><td>RPAD(str, n, pad)</td><td>å³å¡«å……ï¼Œç”¨å­—ç¬¦ä¸² pad å¯¹ str çš„å³è¾¹è¿›è¡Œå¡«å……ï¼Œè¾¾åˆ° n ä¸ªå­—ç¬¦ä¸²é•¿åº¦</td></tr><tr><td>TRIM(str)</td><td>å»æ‰å­—ç¬¦ä¸²å¤´éƒ¨å’Œå°¾éƒ¨çš„ç©ºæ ¼</td></tr><tr><td>SUBSTRING(str, start, len)</td><td>è¿”å›ä»å­—ç¬¦ä¸² str ä» start ä½ç½®èµ·çš„ len ä¸ªé•¿åº¦çš„å­—ç¬¦ä¸²ï¼ˆæ³¨æ„ç´¢å¼•ä» 1 å¼€å§‹ï¼‰</td></tr></tbody></table></div><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ‹¼æ¥</span></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(<span class="string">&#x27;Hello&#x27;</span>, <span class="string">&#x27;World&#x27;</span>);</span><br><span class="line"><span class="comment">-- å°å†™</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">LOWER</span>(<span class="string">&#x27;Hello&#x27;</span>);</span><br><span class="line"><span class="comment">-- å¤§å†™</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">UPPER</span>(<span class="string">&#x27;Hello&#x27;</span>);</span><br><span class="line"><span class="comment">-- å·¦å¡«å……</span></span><br><span class="line"><span class="keyword">SELECT</span> LPAD(<span class="string">&#x27;01&#x27;</span>, <span class="number">5</span>, <span class="string">&#x27;-&#x27;</span>);</span><br><span class="line"><span class="comment">-- å³å¡«å……</span></span><br><span class="line"><span class="keyword">SELECT</span> RPAD(<span class="string">&#x27;01&#x27;</span>, <span class="number">5</span>, <span class="string">&#x27;-&#x27;</span>);</span><br><span class="line"><span class="comment">-- å»é™¤ç©ºæ ¼</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">TRIM</span>(<span class="string">&#x27; Hello World &#x27;</span>);</span><br><span class="line"><span class="comment">-- åˆ‡ç‰‡ï¼ˆèµ·å§‹ç´¢å¼•ä¸º1ï¼‰</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUBSTRING</span>(<span class="string">&#x27;Hello World&#x27;</span>, <span class="number">1</span>, <span class="number">5</span>);</span><br></pre></td></tr></table></figure><h3 id="æ•°å€¼å‡½æ•°"><a href="#æ•°å€¼å‡½æ•°" class="headerlink" title="æ•°å€¼å‡½æ•°"></a>æ•°å€¼å‡½æ•°</h3><p>å¸¸è§å‡½æ•°ï¼š</p><div class="table-container"><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>CEIL(x)</td><td>å‘ä¸Šå–æ•´</td></tr><tr><td>FLOOR(x)</td><td>å‘ä¸‹å–æ•´</td></tr><tr><td>MOD(x, y)</td><td>è¿”å› x/y çš„æ¨¡</td></tr><tr><td>RAND()</td><td>è¿”å› 0~1 å†…çš„éšæœºæ•°</td></tr><tr><td>ROUND(x, y)</td><td>æ±‚å‚æ•° x çš„å››èˆäº”å…¥å€¼ï¼Œä¿ç•™ y ä½å°æ•°</td></tr></tbody></table></div><h3 id="æ—¥æœŸå‡½æ•°"><a href="#æ—¥æœŸå‡½æ•°" class="headerlink" title="æ—¥æœŸå‡½æ•°"></a>æ—¥æœŸå‡½æ•°</h3><p>å¸¸ç”¨å‡½æ•°ï¼š</p><div class="table-container"><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>CURDATE()</td><td>è¿”å›å½“å‰æ—¥æœŸ</td></tr><tr><td>CURTIME()</td><td>è¿”å›å½“å‰æ—¶é—´</td></tr><tr><td>NOW()</td><td>è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td></tr><tr><td>YEAR(date)</td><td>è·å–æŒ‡å®š date çš„å¹´ä»½</td></tr><tr><td>MONTH(date)</td><td>è·å–æŒ‡å®š date çš„æœˆä»½</td></tr><tr><td>DAY(date)</td><td>è·å–æŒ‡å®š date çš„æ—¥æœŸ</td></tr><tr><td>DATE_ADD(date, INTERVAL expr type)</td><td>è¿”å›ä¸€ä¸ªæ—¥æœŸ/æ—¶é—´å€¼åŠ ä¸Šä¸€ä¸ªæ—¶é—´é—´éš” expr åçš„æ—¶é—´å€¼</td></tr><tr><td>DATEDIFF(date1, date2)</td><td>è¿”å›èµ·å§‹æ—¶é—´ date1 å’Œç»“æŸæ—¶é—´ date2 ä¹‹é—´çš„å¤©æ•°</td></tr></tbody></table></div><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- DATE_ADD</span></span><br><span class="line"><span class="keyword">SELECT</span> DATE_ADD(NOW(), <span class="type">INTERVAL</span> <span class="number">70</span> <span class="keyword">YEAR</span>);</span><br></pre></td></tr></table></figure><h3 id="æµç¨‹å‡½æ•°"><a href="#æµç¨‹å‡½æ•°" class="headerlink" title="æµç¨‹å‡½æ•°"></a>æµç¨‹å‡½æ•°</h3><p>å¸¸ç”¨å‡½æ•°ï¼š</p><div class="table-container"><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>IF(value, t, f)</td><td>å¦‚æœ value ä¸º trueï¼Œåˆ™è¿”å› tï¼Œå¦åˆ™è¿”å› f</td></tr><tr><td>IFNULL(value1, value2)</td><td>å¦‚æœ value1 ä¸ä¸ºç©ºï¼Œè¿”å› value1ï¼Œå¦åˆ™è¿”å› value2</td></tr><tr><td>CASE WHEN [ val1 ] THEN [ res1 ] â€¦ ELSE [ default ] END</td><td>å¦‚æœ val1 ä¸º trueï¼Œè¿”å› res1ï¼Œâ€¦ å¦åˆ™è¿”å› default é»˜è®¤å€¼</td></tr><tr><td>CASE [ expr ] WHEN [ val1 ] THEN [ res1 ] â€¦ ELSE [ default ] END</td><td>å¦‚æœ expr çš„å€¼ç­‰äº val1ï¼Œè¿”å› res1ï¼Œâ€¦ å¦åˆ™è¿”å› default é»˜è®¤å€¼</td></tr></tbody></table></div><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">name,</span><br><span class="line">(<span class="keyword">case</span> <span class="keyword">when</span> age <span class="operator">&gt;</span> <span class="number">30</span> <span class="keyword">then</span> <span class="string">&#x27;ä¸­å¹´&#x27;</span> <span class="keyword">else</span> <span class="string">&#x27;é’å¹´&#x27;</span> <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">from</span> employee;</span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">name,</span><br><span class="line">(<span class="keyword">case</span> workaddress <span class="keyword">when</span> <span class="string">&#x27;åŒ—äº¬å¸‚&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;ä¸€çº¿åŸå¸‚&#x27;</span> <span class="keyword">when</span> <span class="string">&#x27;ä¸Šæµ·å¸‚&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;ä¸€çº¿åŸå¸‚&#x27;</span> <span class="keyword">else</span> <span class="string">&#x27;äºŒçº¿åŸå¸‚&#x27;</span> <span class="keyword">end</span>) <span class="keyword">as</span> <span class="string">&#x27;å·¥ä½œåœ°å€&#x27;</span></span><br><span class="line"><span class="keyword">from</span> employee;</span><br></pre></td></tr></table></figure><h2 id="1-3-çº¦æŸ"><a href="#1-3-çº¦æŸ" class="headerlink" title="1.3 çº¦æŸ"></a>1.3 çº¦æŸ</h2><p>åˆ†ç±»ï¼š</p><div class="table-container"><table><thead><tr><th>çº¦æŸ</th><th>æè¿°</th><th>å…³é”®å­—</th></tr></thead><tbody><tr><td>éç©ºçº¦æŸ</td><td>é™åˆ¶è¯¥å­—æ®µçš„æ•°æ®ä¸èƒ½ä¸º null</td><td>NOT NULL</td></tr><tr><td>å”¯ä¸€çº¦æŸ</td><td>ä¿è¯è¯¥å­—æ®µçš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯å”¯ä¸€ã€ä¸é‡å¤çš„</td><td>UNIQUE</td></tr><tr><td>ä¸»é”®çº¦æŸ</td><td>ä¸»é”®æ˜¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼Œè¦æ±‚éç©ºä¸”å”¯ä¸€</td><td>PRIMARY KEY</td></tr><tr><td>é»˜è®¤çº¦æŸ</td><td>ä¿å­˜æ•°æ®æ—¶ï¼Œå¦‚æœæœªæŒ‡å®šè¯¥å­—æ®µçš„å€¼ï¼Œåˆ™é‡‡ç”¨é»˜è®¤å€¼</td><td>DEFAULT</td></tr><tr><td>æ£€æŸ¥çº¦æŸï¼ˆ8.0.1 ç‰ˆæœ¬åï¼‰</td><td>ä¿è¯å­—æ®µå€¼æ»¡è¶³æŸä¸€ä¸ªæ¡ä»¶</td><td>CHECK</td></tr><tr><td>å¤–é”®çº¦æŸ</td><td>ç”¨æ¥è®©ä¸¤å¼ è¡¨çš„æ•°æ®ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§</td><td>FOREIGN KEY</td></tr></tbody></table></div><p><strong>çº¦æŸæ˜¯ä½œç”¨äºè¡¨ä¸­å­—æ®µä¸Šçš„ï¼Œå¯ä»¥å†åˆ›å»ºè¡¨/ä¿®æ”¹è¡¨çš„æ—¶å€™æ·»åŠ çº¦æŸ</strong>ã€‚</p><h3 id="å¸¸ç”¨çº¦æŸ"><a href="#å¸¸ç”¨çº¦æŸ" class="headerlink" title="å¸¸ç”¨çº¦æŸ"></a>å¸¸ç”¨çº¦æŸ</h3><div class="table-container"><table><thead><tr><th>çº¦æŸæ¡ä»¶</th><th>å…³é”®å­—</th></tr></thead><tbody><tr><td>ä¸»é”®</td><td>PRIMARY KEY</td></tr><tr><td>è‡ªåŠ¨å¢é•¿</td><td>AUTO_INCREMENT</td></tr><tr><td>ä¸ä¸ºç©º</td><td>NOT NULL</td></tr><tr><td>å”¯ä¸€</td><td>UNIQUE</td></tr><tr><td>é€»è¾‘æ¡ä»¶</td><td>CHECK</td></tr><tr><td>é»˜è®¤å€¼</td><td>DEFAULT</td></tr></tbody></table></div><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span>(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span>,</span><br><span class="line">age <span class="type">int</span> <span class="keyword">check</span>(age <span class="operator">&gt;</span> <span class="number">0</span> <span class="keyword">and</span> age <span class="operator">&lt;</span> <span class="number">120</span>),</span><br><span class="line">status <span class="type">char</span>(<span class="number">1</span>) <span class="keyword">default</span> <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">gender <span class="type">char</span>(<span class="number">1</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="å¤–é”®çº¦æŸ"><a href="#å¤–é”®çº¦æŸ" class="headerlink" title="å¤–é”®çº¦æŸ"></a>å¤–é”®çº¦æŸ</h3><p>ä½œç”¨ï¼šä¿è¯æ•°æ®ä¸€è‡´æ€§ä¸å®Œæ•´æ€§</p><p>æ·»åŠ å¤–é”®ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> è¡¨å(</span><br><span class="line">å­—æ®µå å­—æ®µç±»å‹,</span><br><span class="line">...</span><br><span class="line">[<span class="keyword">CONSTRAINT</span>] [å¤–é”®åç§°] <span class="keyword">FOREIGN</span> KEY(å¤–é”®å­—æ®µå) <span class="keyword">REFERENCES</span> ä¸»è¡¨(ä¸»è¡¨åˆ—å)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> è¡¨å <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> å¤–é”®åç§° <span class="keyword">FOREIGN</span> KEY (å¤–é”®å­—æ®µå) <span class="keyword">REFERENCES</span> ä¸»è¡¨(ä¸»è¡¨åˆ—å);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¾‹å­</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> emp <span class="keyword">add</span> <span class="keyword">constraint</span> fk_emp_dept_id <span class="keyword">foreign</span> key(dept_id) <span class="keyword">references</span> dept(id);</span><br></pre></td></tr></table></figure><p>åˆ é™¤å¤–é”®ï¼š<br><code>ALTER TABLE è¡¨å DROP FOREIGN KEY å¤–é”®å;</code></p><h4 id="åˆ é™¤-æ›´æ–°è¡Œä¸º"><a href="#åˆ é™¤-æ›´æ–°è¡Œä¸º" class="headerlink" title="åˆ é™¤/æ›´æ–°è¡Œä¸º"></a>åˆ é™¤/æ›´æ–°è¡Œä¸º</h4><div class="table-container"><table><thead><tr><th>è¡Œä¸º</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>NO ACTION</td><td>å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¸å…è®¸åˆ é™¤/æ›´æ–°ï¼ˆä¸ RESTRICT ä¸€è‡´ï¼‰</td></tr><tr><td>RESTRICT</td><td>å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¸å…è®¸åˆ é™¤/æ›´æ–°ï¼ˆä¸ NO ACTION ä¸€è‡´ï¼‰</td></tr><tr><td>CASCADE</td><td>å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¹Ÿåˆ é™¤/æ›´æ–°å¤–é”®åœ¨å­è¡¨ä¸­çš„è®°å½•</td></tr><tr><td>SET NULL</td><td>å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™è®¾ç½®å­è¡¨ä¸­è¯¥å¤–é”®å€¼ä¸º nullï¼ˆè¦æ±‚è¯¥å¤–é”®å…è®¸ä¸º nullï¼‰</td></tr><tr><td>SET DEFAULT</td><td>çˆ¶è¡¨æœ‰å˜æ›´æ—¶ï¼Œå­è¡¨å°†å¤–é”®è®¾ä¸ºä¸€ä¸ªé»˜è®¤å€¼ï¼ˆInnodb ä¸æ”¯æŒï¼‰</td></tr></tbody></table></div><p>æ›´æ”¹åˆ é™¤/æ›´æ–°è¡Œä¸ºï¼š<br><code>ALTER TABLE è¡¨å ADD CONSTRAINT å¤–é”®åç§° FOREIGN KEY (å¤–é”®å­—æ®µ) REFERENCES ä¸»è¡¨å(ä¸»è¡¨å­—æ®µå) ON UPDATE è¡Œä¸º ON DELETE è¡Œä¸º;</code></p><h2 id="1-4-å¤šè¡¨æŸ¥è¯¢"><a href="#1-4-å¤šè¡¨æŸ¥è¯¢" class="headerlink" title="1.4 å¤šè¡¨æŸ¥è¯¢"></a>1.4 å¤šè¡¨æŸ¥è¯¢</h2><h3 id="å¤šè¡¨å…³ç³»"><a href="#å¤šè¡¨å…³ç³»" class="headerlink" title="å¤šè¡¨å…³ç³»"></a>å¤šè¡¨å…³ç³»</h3><ul><li>ä¸€å¯¹å¤šï¼ˆå¤šå¯¹ä¸€ï¼‰</li><li>å¤šå¯¹å¤š</li><li>ä¸€å¯¹ä¸€</li></ul><h4 id="ä¸€å¯¹å¤š"><a href="#ä¸€å¯¹å¤š" class="headerlink" title="ä¸€å¯¹å¤š"></a>ä¸€å¯¹å¤š</h4><p>æ¡ˆä¾‹ï¼šéƒ¨é—¨ä¸å‘˜å·¥<br>å…³ç³»ï¼šä¸€ä¸ªéƒ¨é—¨å¯¹åº”å¤šä¸ªå‘˜å·¥ï¼Œä¸€ä¸ªå‘˜å·¥å¯¹åº”ä¸€ä¸ªéƒ¨é—¨<br>å®ç°ï¼šåœ¨å¤šçš„ä¸€æ–¹å»ºç«‹å¤–é”®ï¼ŒæŒ‡å‘ä¸€çš„ä¸€æ–¹çš„ä¸»é”®</p><h4 id="å¤šå¯¹å¤š"><a href="#å¤šå¯¹å¤š" class="headerlink" title="å¤šå¯¹å¤š"></a>å¤šå¯¹å¤š</h4><p>æ¡ˆä¾‹ï¼šå­¦ç”Ÿä¸è¯¾ç¨‹<br>å…³ç³»ï¼šä¸€ä¸ªå­¦ç”Ÿå¯ä»¥é€‰å¤šé—¨è¯¾ç¨‹ï¼Œä¸€é—¨è¯¾ç¨‹ä¹Ÿå¯ä»¥ä¾›å¤šä¸ªå­¦ç”Ÿé€‰ä¿®<br>å®ç°ï¼šå»ºç«‹ç¬¬ä¸‰å¼ ä¸­é—´è¡¨ï¼Œä¸­é—´è¡¨è‡³å°‘åŒ…å«ä¸¤ä¸ªå¤–é”®ï¼Œåˆ†åˆ«å…³è”ä¸¤æ–¹ä¸»é”®</p><h4 id="ä¸€å¯¹ä¸€"><a href="#ä¸€å¯¹ä¸€" class="headerlink" title="ä¸€å¯¹ä¸€"></a>ä¸€å¯¹ä¸€</h4><p>æ¡ˆä¾‹ï¼šç”¨æˆ·ä¸ç”¨æˆ·è¯¦æƒ…<br>å…³ç³»ï¼šä¸€å¯¹ä¸€å…³ç³»ï¼Œå¤šç”¨äºå•è¡¨æ‹†åˆ†ï¼Œå°†ä¸€å¼ è¡¨çš„åŸºç¡€å­—æ®µæ”¾åœ¨ä¸€å¼ è¡¨ä¸­ï¼Œå…¶ä»–è¯¦æƒ…å­—æ®µæ”¾åœ¨å¦ä¸€å¼ è¡¨ä¸­ï¼Œä»¥æå‡æ“ä½œæ•ˆç‡<br>å®ç°ï¼šåœ¨ä»»æ„ä¸€æ–¹åŠ å…¥å¤–é”®ï¼Œå…³è”å¦å¤–ä¸€æ–¹çš„ä¸»é”®ï¼Œå¹¶ä¸”è®¾ç½®å¤–é”®ä¸ºå”¯ä¸€çš„ï¼ˆUNIQUEï¼‰</p><h3 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h3><p>åˆå¹¶æŸ¥è¯¢ï¼ˆç¬›å¡å°”ç§¯ï¼Œä¼šå±•ç¤ºæ‰€æœ‰ç»„åˆç»“æœï¼‰ï¼š<br><code>select * from employee, dept;</code></p><blockquote><p>ç¬›å¡å°”ç§¯ï¼šä¸¤ä¸ªé›†åˆ A é›†åˆå’Œ B é›†åˆçš„æ‰€æœ‰ç»„åˆæƒ…å†µï¼ˆåœ¨å¤šè¡¨æŸ¥è¯¢æ—¶ï¼Œéœ€è¦æ¶ˆé™¤æ— æ•ˆçš„ç¬›å¡å°”ç§¯ï¼‰</p></blockquote><p>æ¶ˆé™¤æ— æ•ˆç¬›å¡å°”ç§¯ï¼š<br><code>select * from employee, dept where employee.dept = dept.id;</code></p><h3 id="å†…è¿æ¥æŸ¥è¯¢"><a href="#å†…è¿æ¥æŸ¥è¯¢" class="headerlink" title="å†…è¿æ¥æŸ¥è¯¢"></a>å†…è¿æ¥æŸ¥è¯¢</h3><p>å†…è¿æ¥æŸ¥è¯¢çš„æ˜¯ä¸¤å¼ è¡¨äº¤é›†çš„éƒ¨åˆ†</p><p>éšå¼å†…è¿æ¥ï¼š<br><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1, è¡¨2 WHERE æ¡ä»¶ ...;</code></p><p>æ˜¾å¼å†…è¿æ¥ï¼š<br><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1 [ INNER ] JOIN è¡¨2 ON è¿æ¥æ¡ä»¶ ...;</code></p><p>æ˜¾å¼æ€§èƒ½æ¯”éšå¼é«˜</p><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢å‘˜å·¥å§“åï¼ŒåŠå…³è”çš„éƒ¨é—¨çš„åç§°</span></span><br><span class="line"><span class="comment">-- éšå¼</span></span><br><span class="line"><span class="keyword">select</span> e.name, d.name <span class="keyword">from</span> employee <span class="keyword">as</span> e, dept <span class="keyword">as</span> d <span class="keyword">where</span> e.dept <span class="operator">=</span> d.id;</span><br><span class="line"><span class="comment">-- æ˜¾å¼</span></span><br><span class="line"><span class="keyword">select</span> e.name, d.name <span class="keyword">from</span> employee <span class="keyword">as</span> e <span class="keyword">inner</span> <span class="keyword">join</span> dept <span class="keyword">as</span> d <span class="keyword">on</span> e.dept <span class="operator">=</span> d.id;</span><br></pre></td></tr></table></figure><h3 id="å¤–è¿æ¥æŸ¥è¯¢"><a href="#å¤–è¿æ¥æŸ¥è¯¢" class="headerlink" title="å¤–è¿æ¥æŸ¥è¯¢"></a>å¤–è¿æ¥æŸ¥è¯¢</h3><p>å·¦å¤–è¿æ¥ï¼š<br>æŸ¥è¯¢å·¦è¡¨æ‰€æœ‰æ•°æ®ï¼Œä»¥åŠä¸¤å¼ è¡¨äº¤é›†éƒ¨åˆ†æ•°æ®<br><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1 LEFT [ OUTER ] JOIN è¡¨2 ON æ¡ä»¶ ...;</code><br>ç›¸å½“äºæŸ¥è¯¢è¡¨ 1 çš„æ‰€æœ‰æ•°æ®ï¼ŒåŒ…å«è¡¨ 1 å’Œè¡¨ 2 äº¤é›†éƒ¨åˆ†æ•°æ®</p><p>å³å¤–è¿æ¥ï¼š<br>æŸ¥è¯¢å³è¡¨æ‰€æœ‰æ•°æ®ï¼Œä»¥åŠä¸¤å¼ è¡¨äº¤é›†éƒ¨åˆ†æ•°æ®<br><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1 RIGHT [ OUTER ] JOIN è¡¨2 ON æ¡ä»¶ ...;</code></p><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å·¦</span></span><br><span class="line"><span class="keyword">select</span> e.<span class="operator">*</span>, d.name <span class="keyword">from</span> employee <span class="keyword">as</span> e <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> dept <span class="keyword">as</span> d <span class="keyword">on</span> e.dept <span class="operator">=</span> d.id;</span><br><span class="line"><span class="keyword">select</span> d.name, e.<span class="operator">*</span> <span class="keyword">from</span> dept d <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> emp e <span class="keyword">on</span> e.dept <span class="operator">=</span> d.id;  <span class="comment">-- è¿™æ¡è¯­å¥ä¸ä¸‹é¢çš„è¯­å¥æ•ˆæœä¸€æ ·</span></span><br><span class="line"><span class="comment">-- å³</span></span><br><span class="line"><span class="keyword">select</span> d.name, e.<span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">as</span> e <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> dept <span class="keyword">as</span> d <span class="keyword">on</span> e.dept <span class="operator">=</span> d.id;</span><br></pre></td></tr></table></figure><p>å·¦è¿æ¥å¯ä»¥æŸ¥è¯¢åˆ°æ²¡æœ‰ dept çš„ employeeï¼Œå³è¿æ¥å¯ä»¥æŸ¥è¯¢åˆ°æ²¡æœ‰ employee çš„ dept</p><h3 id="è‡ªè¿æ¥æŸ¥è¯¢"><a href="#è‡ªè¿æ¥æŸ¥è¯¢" class="headerlink" title="è‡ªè¿æ¥æŸ¥è¯¢"></a>è‡ªè¿æ¥æŸ¥è¯¢</h3><p>å½“å‰è¡¨ä¸è‡ªèº«çš„è¿æ¥æŸ¥è¯¢ï¼Œè‡ªè¿æ¥å¿…é¡»ä½¿ç”¨è¡¨åˆ«å</p><p>è¯­æ³•ï¼š<br><code>SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨A åˆ«åA JOIN è¡¨A åˆ«åB ON æ¡ä»¶ ...;</code></p><p>è‡ªè¿æ¥æŸ¥è¯¢ï¼Œå¯ä»¥æ˜¯å†…è¿æ¥æŸ¥è¯¢ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤–è¿æ¥æŸ¥è¯¢</p><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢å‘˜å·¥åŠå…¶æ‰€å±é¢†å¯¼çš„åå­—</span></span><br><span class="line"><span class="keyword">select</span> a.name, b.name <span class="keyword">from</span> employee a, employee b <span class="keyword">where</span> a.manager <span class="operator">=</span> b.id;</span><br><span class="line"><span class="comment">-- æ²¡æœ‰é¢†å¯¼çš„ä¹ŸæŸ¥è¯¢å‡ºæ¥</span></span><br><span class="line"><span class="keyword">select</span> a.name, b.name <span class="keyword">from</span> employee a <span class="keyword">left</span> <span class="keyword">join</span> employee b <span class="keyword">on</span> a.manager <span class="operator">=</span> b.id;</span><br></pre></td></tr></table></figure><h3 id="è”åˆæŸ¥è¯¢-union-union-all"><a href="#è”åˆæŸ¥è¯¢-union-union-all" class="headerlink" title="è”åˆæŸ¥è¯¢ union, union all"></a>è”åˆæŸ¥è¯¢ union, union all</h3><p>æŠŠå¤šæ¬¡æŸ¥è¯¢çš„ç»“æœåˆå¹¶ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„æŸ¥è¯¢é›†</p><p>è¯­æ³•ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> å­—æ®µåˆ—è¡¨ <span class="keyword">FROM</span> è¡¨A ...</span><br><span class="line"><span class="keyword">UNION</span> [<span class="keyword">ALL</span>]</span><br><span class="line"><span class="keyword">SELECT</span> å­—æ®µåˆ—è¡¨ <span class="keyword">FROM</span> è¡¨B ...</span><br></pre></td></tr></table></figure><h4 id="æ³¨æ„äº‹é¡¹-7"><a href="#æ³¨æ„äº‹é¡¹-7" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h4><ul><li>UNION ALL ä¼šæœ‰é‡å¤ç»“æœï¼ŒUNION ä¸ä¼š</li><li>è”åˆæŸ¥è¯¢æ¯”ä½¿ç”¨ or æ•ˆç‡é«˜ï¼Œä¸ä¼šä½¿ç´¢å¼•å¤±æ•ˆ</li></ul><h3 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢"></a>å­æŸ¥è¯¢</h3><p>SQL è¯­å¥ä¸­åµŒå¥— SELECT è¯­å¥ï¼Œç§°è°“åµŒå¥—æŸ¥è¯¢ï¼Œåˆç§°å­æŸ¥è¯¢ã€‚<br><code>SELECT * FROM t1 WHERE column1 = ( SELECT column1 FROM t2);</code><br><strong>å­æŸ¥è¯¢å¤–éƒ¨çš„è¯­å¥å¯ä»¥æ˜¯ INSERT / UPDATE / DELETE / SELECT çš„ä»»ä½•ä¸€ä¸ª</strong></p><p>æ ¹æ®å­æŸ¥è¯¢ç»“æœå¯ä»¥åˆ†ä¸ºï¼š</p><ul><li>æ ‡é‡å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºå•ä¸ªå€¼ï¼‰</li><li>åˆ—å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºä¸€åˆ—ï¼‰</li><li>è¡Œå­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºä¸€è¡Œï¼‰</li><li>è¡¨å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºå¤šè¡Œå¤šåˆ—ï¼‰</li></ul><p>æ ¹æ®å­æŸ¥è¯¢ä½ç½®å¯åˆ†ä¸ºï¼š</p><ul><li>WHERE ä¹‹å</li><li>FROM ä¹‹å</li><li>SELECT ä¹‹å</li></ul><h4 id="æ ‡é‡å­æŸ¥è¯¢"><a href="#æ ‡é‡å­æŸ¥è¯¢" class="headerlink" title="æ ‡é‡å­æŸ¥è¯¢"></a>æ ‡é‡å­æŸ¥è¯¢</h4><p>å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯å•ä¸ªå€¼ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€æ—¥æœŸç­‰ï¼‰ã€‚<br>å¸¸ç”¨æ“ä½œç¬¦ï¼š- &lt; &gt; &gt; &gt;= &lt; &lt;=</p><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢é”€å”®éƒ¨æ‰€æœ‰å‘˜å·¥</span></span><br><span class="line"><span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;é”€å”®éƒ¨&#x27;</span>;</span><br><span class="line"><span class="comment">-- æ ¹æ®é”€å”®éƒ¨éƒ¨é—¨IDï¼ŒæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> dept <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line"><span class="comment">-- åˆå¹¶ï¼ˆå­æŸ¥è¯¢ï¼‰</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> dept <span class="operator">=</span> (<span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;é”€å”®éƒ¨&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢xxxå…¥èŒä¹‹åçš„å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> entrydate <span class="operator">&gt;</span> (<span class="keyword">select</span> entrydate <span class="keyword">from</span> employee <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;xxx&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="åˆ—å­æŸ¥è¯¢"><a href="#åˆ—å­æŸ¥è¯¢" class="headerlink" title="åˆ—å­æŸ¥è¯¢"></a>åˆ—å­æŸ¥è¯¢</h4><p>è¿”å›çš„ç»“æœæ˜¯ä¸€åˆ—ï¼ˆå¯ä»¥æ˜¯å¤šè¡Œï¼‰ã€‚</p><p>å¸¸ç”¨æ“ä½œç¬¦ï¼š</p><div class="table-container"><table><thead><tr><th>æ“ä½œç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td>IN</td><td>åœ¨æŒ‡å®šçš„é›†åˆèŒƒå›´å†…ï¼Œå¤šé€‰ä¸€</td></tr><tr><td>NOT IN</td><td>ä¸åœ¨æŒ‡å®šçš„é›†åˆèŒƒå›´å†…</td></tr><tr><td>ANY</td><td>å­æŸ¥è¯¢è¿”å›åˆ—è¡¨ä¸­ï¼Œæœ‰ä»»æ„ä¸€ä¸ªæ»¡è¶³å³å¯</td></tr><tr><td>SOME</td><td>ä¸ ANY ç­‰åŒï¼Œä½¿ç”¨ SOME çš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨ ANY</td></tr><tr><td>ALL</td><td>å­æŸ¥è¯¢è¿”å›åˆ—è¡¨çš„æ‰€æœ‰å€¼éƒ½å¿…é¡»æ»¡è¶³</td></tr></tbody></table></div><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢é”€å”®éƒ¨å’Œå¸‚åœºéƒ¨çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> dept <span class="keyword">in</span> (<span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;é”€å”®éƒ¨&#x27;</span> <span class="keyword">or</span> name <span class="operator">=</span> <span class="string">&#x27;å¸‚åœºéƒ¨&#x27;</span>);</span><br><span class="line"><span class="comment">-- æŸ¥è¯¢æ¯”è´¢åŠ¡éƒ¨æ‰€æœ‰äººå·¥èµ„éƒ½é«˜çš„å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> salary <span class="operator">&gt;</span> <span class="keyword">all</span>(<span class="keyword">select</span> salary <span class="keyword">from</span> employee <span class="keyword">where</span> dept <span class="operator">=</span> (<span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;è´¢åŠ¡éƒ¨&#x27;</span>));</span><br><span class="line"><span class="comment">-- æŸ¥è¯¢æ¯”ç ”å‘éƒ¨ä»»æ„ä¸€äººå·¥èµ„é«˜çš„å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> salary <span class="operator">&gt;</span> <span class="keyword">any</span> (<span class="keyword">select</span> salary <span class="keyword">from</span> employee <span class="keyword">where</span> dept <span class="operator">=</span> (<span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;ç ”å‘éƒ¨&#x27;</span>));</span><br></pre></td></tr></table></figure><h4 id="è¡Œå­æŸ¥è¯¢"><a href="#è¡Œå­æŸ¥è¯¢" class="headerlink" title="è¡Œå­æŸ¥è¯¢"></a>è¡Œå­æŸ¥è¯¢</h4><p>è¿”å›çš„ç»“æœæ˜¯ä¸€è¡Œï¼ˆå¯ä»¥æ˜¯å¤šåˆ—ï¼‰ã€‚<br>å¸¸ç”¨æ“ä½œç¬¦ï¼š=, &lt;, &gt;, IN, NOT IN</p><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢ä¸xxxçš„è–ªèµ„åŠç›´å±é¢†å¯¼ç›¸åŒçš„å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> (salary, manager) <span class="operator">=</span> (<span class="number">12500</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> (salary, manager) <span class="operator">=</span> (<span class="keyword">select</span> salary, manager <span class="keyword">from</span> employee <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;xxx&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="è¡¨å­æŸ¥è¯¢"><a href="#è¡¨å­æŸ¥è¯¢" class="headerlink" title="è¡¨å­æŸ¥è¯¢"></a>è¡¨å­æŸ¥è¯¢</h4><p>è¿”å›çš„ç»“æœæ˜¯å¤šè¡Œå¤šåˆ—<br>å¸¸ç”¨æ“ä½œç¬¦ï¼šIN</p><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢ä¸xxx1ï¼Œxxx2çš„èŒä½å’Œè–ªèµ„ç›¸åŒçš„å‘˜å·¥</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> (job, salary) <span class="keyword">in</span> (<span class="keyword">select</span> job, salary <span class="keyword">from</span> employee <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;xxx1&#x27;</span> <span class="keyword">or</span> name <span class="operator">=</span> <span class="string">&#x27;xxx2&#x27;</span>);</span><br><span class="line"><span class="comment">-- æŸ¥è¯¢å…¥èŒæ—¥æœŸæ˜¯2006-01-01ä¹‹åçš„å‘˜å·¥ï¼ŒåŠå…¶éƒ¨é—¨ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">select</span> e.<span class="operator">*</span>, d.<span class="operator">*</span> <span class="keyword">from</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> entrydate <span class="operator">&gt;</span> <span class="string">&#x27;2006-01-01&#x27;</span>) <span class="keyword">as</span> e <span class="keyword">left</span> <span class="keyword">join</span> dept <span class="keyword">as</span> d <span class="keyword">on</span> e.dept <span class="operator">=</span> d.id;</span><br></pre></td></tr></table></figure><h2 id="1-5-äº‹åŠ¡"><a href="#1-5-äº‹åŠ¡" class="headerlink" title="1.5 äº‹åŠ¡"></a>1.5 äº‹åŠ¡</h2><p>äº‹åŠ¡æ˜¯ä¸€ç»„æ“ä½œçš„é›†åˆï¼Œäº‹åŠ¡ä¼šæŠŠæ‰€æœ‰æ“ä½œä½œä¸ºä¸€ä¸ªæ•´ä½“ä¸€èµ·å‘ç³»ç»Ÿæäº¤æˆ–æ’¤é”€æ“ä½œè¯·æ±‚ï¼Œå³è¿™äº›æ“ä½œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚</p><p>åŸºæœ¬æ“ä½œï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 1. æŸ¥è¯¢å¼ ä¸‰è´¦æˆ·ä½™é¢</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;å¼ ä¸‰&#x27;</span>;</span><br><span class="line"><span class="comment">-- 2. å°†å¼ ä¸‰è´¦æˆ·ä½™é¢-1000</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> money <span class="operator">=</span> money <span class="operator">-</span> <span class="number">1000</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;å¼ ä¸‰&#x27;</span>;</span><br><span class="line"><span class="comment">-- æ­¤è¯­å¥å‡ºé”™åå¼ ä¸‰é’±å‡å°‘ä½†æ˜¯æå››é’±æ²¡æœ‰å¢åŠ </span></span><br><span class="line">æ¨¡æ‹Ÿ<span class="keyword">sql</span>è¯­å¥é”™è¯¯</span><br><span class="line"><span class="comment">-- 3. å°†æå››è´¦æˆ·ä½™é¢+1000</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> money <span class="operator">=</span> money <span class="operator">+</span> <span class="number">1000</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;æå››&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹äº‹åŠ¡æäº¤æ–¹å¼</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@AUTOCOMMIT</span>;</span><br><span class="line"><span class="comment">-- è®¾ç½®äº‹åŠ¡æäº¤æ–¹å¼ï¼Œ1ä¸ºè‡ªåŠ¨æäº¤ï¼Œ0ä¸ºæ‰‹åŠ¨æäº¤ï¼Œè¯¥è®¾ç½®åªå¯¹å½“å‰ä¼šè¯æœ‰æ•ˆ</span></span><br><span class="line"><span class="keyword">SET</span> @<span class="variable">@AUTOCOMMIT</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">-- æäº¤äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"><span class="comment">-- å›æ»šäº‹åŠ¡</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è®¾ç½®æ‰‹åŠ¨æäº¤åä¸Šé¢ä»£ç æ”¹ä¸ºï¼š</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;å¼ ä¸‰&#x27;</span>;</span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> money <span class="operator">=</span> money <span class="operator">-</span> <span class="number">1000</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;å¼ ä¸‰&#x27;</span>;</span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> money <span class="operator">=</span> money <span class="operator">+</span> <span class="number">1000</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;æå››&#x27;</span>;</span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure><p>æ“ä½œæ–¹å¼äºŒï¼š</p><p>å¼€å¯äº‹åŠ¡ï¼š<br><code>START TRANSACTION æˆ– BEGIN TRANSACTION;</code><br>æäº¤äº‹åŠ¡ï¼š<br><code>COMMIT;</code><br>å›æ»šäº‹åŠ¡ï¼š<br><code>ROLLBACK;</code></p><p>æ“ä½œå®ä¾‹ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;å¼ ä¸‰&#x27;</span>;</span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> money <span class="operator">=</span> money <span class="operator">-</span> <span class="number">1000</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;å¼ ä¸‰&#x27;</span>;</span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> money <span class="operator">=</span> money <span class="operator">+</span> <span class="number">1000</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;æå››&#x27;</span>;</span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure><h3 id="å››å¤§ç‰¹æ€§-ACID"><a href="#å››å¤§ç‰¹æ€§-ACID" class="headerlink" title="å››å¤§ç‰¹æ€§ ACID"></a>å››å¤§ç‰¹æ€§ ACID</h3><ul><li>åŸå­æ€§(Atomicity)ï¼šäº‹åŠ¡æ˜¯ä¸å¯åˆ†å‰²çš„æœ€å°æ“ä½œä½†æ„¿ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥</li><li>ä¸€è‡´æ€§(Consistency)ï¼šäº‹åŠ¡å®Œæˆæ—¶ï¼Œå¿…é¡»ä½¿æ‰€æœ‰æ•°æ®éƒ½ä¿æŒä¸€è‡´çŠ¶æ€</li><li>éš”ç¦»æ€§(Isolation)ï¼šæ•°æ®åº“ç³»ç»Ÿæä¾›çš„éš”ç¦»æœºåˆ¶ï¼Œä¿è¯äº‹åŠ¡åœ¨ä¸å—å¤–éƒ¨å¹¶å‘æ“ä½œå½±å“çš„ç‹¬ç«‹ç¯å¢ƒä¸‹è¿è¡Œ</li><li>æŒä¹…æ€§(Durability)ï¼šäº‹åŠ¡ä¸€æ—¦æäº¤æˆ–å›æ»šï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…çš„</li></ul><h3 id="å¹¶å‘äº‹åŠ¡"><a href="#å¹¶å‘äº‹åŠ¡" class="headerlink" title="å¹¶å‘äº‹åŠ¡"></a>å¹¶å‘äº‹åŠ¡</h3><div class="table-container"><table><thead><tr><th>é—®é¢˜</th><th>æè¿°</th></tr></thead><tbody><tr><td>è„è¯»</td><td>ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°å¦ä¸€ä¸ªäº‹åŠ¡è¿˜æ²¡æäº¤çš„æ•°æ®</td></tr><tr><td>ä¸å¯é‡å¤è¯»</td><td>ä¸€ä¸ªäº‹åŠ¡å…ˆåè¯»å–åŒä¸€æ¡è®°å½•ï¼Œä½†ä¸¤æ¬¡è¯»å–çš„æ•°æ®ä¸åŒ</td></tr><tr><td>å¹»è¯»</td><td>ä¸€ä¸ªäº‹åŠ¡æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢æ•°æ®æ—¶ï¼Œæ²¡æœ‰å¯¹åº”çš„æ•°æ®è¡Œï¼Œä½†æ˜¯å†æ’å…¥æ•°æ®æ—¶ï¼Œåˆå‘ç°è¿™è¡Œæ•°æ®å·²ç»å­˜åœ¨</td></tr></tbody></table></div><blockquote><p>è¿™ä¸‰ä¸ªé—®é¢˜çš„è¯¦ç»†æ¼”ç¤ºï¼š<a href="https://www.bilibili.com/video/BV1Kr4y1i7ru?p=55cd">https://www.bilibili.com/video/BV1Kr4y1i7ru?p=55cd</a></p></blockquote><p>å¹¶å‘äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š</p><div class="table-container"><table><thead><tr><th>éš”ç¦»çº§åˆ«</th><th>è„è¯»</th><th>ä¸å¯é‡å¤è¯»</th><th>å¹»è¯»</th></tr></thead><tbody><tr><td>Read uncommitted</td><td>âˆš</td><td>âˆš</td><td>âˆš</td></tr><tr><td>Read committed</td><td>Ã—</td><td>âˆš</td><td>âˆš</td></tr><tr><td>Repeatable Read(é»˜è®¤)</td><td>Ã—</td><td>Ã—</td><td>âˆš</td></tr><tr><td>Serializable</td><td>Ã—</td><td>Ã—</td><td>Ã—</td></tr></tbody></table></div><ul><li>âˆš è¡¨ç¤ºåœ¨å½“å‰éš”ç¦»çº§åˆ«ä¸‹è¯¥é—®é¢˜ä¼šå‡ºç°</li><li>Serializable æ€§èƒ½æœ€ä½ï¼›Read uncommitted æ€§èƒ½æœ€é«˜ï¼Œæ•°æ®å®‰å…¨æ€§æœ€å·®</li></ul><p>æŸ¥çœ‹äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š<br><code>SELECT @@TRANSACTION_ISOLATION;</code><br>è®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š<br><code>SET [ SESSION | GLOBAL ] TRANSACTION ISOLATION LEVEL &#123;READ UNCOMMITTED | READ COMMITTED | REPEATABLE READ | SERIALIZABLE &#125;;</code><br>SESSION æ˜¯ä¼šè¯çº§åˆ«ï¼Œè¡¨ç¤ºåªé’ˆå¯¹å½“å‰ä¼šè¯æœ‰æ•ˆï¼ŒGLOBAL è¡¨ç¤ºå¯¹æ‰€æœ‰ä¼šè¯æœ‰æ•ˆ</p><h1 id="2-è¿›é˜¶ç¯‡"><a href="#2-è¿›é˜¶ç¯‡" class="headerlink" title="2.è¿›é˜¶ç¯‡"></a>2.è¿›é˜¶ç¯‡</h1><h2 id="2-1-å­˜å‚¨å¼•æ“"><a href="#2-1-å­˜å‚¨å¼•æ“" class="headerlink" title="2.1 å­˜å‚¨å¼•æ“"></a>2.1 å­˜å‚¨å¼•æ“</h2><p>MySQL ä½“ç³»ç»“æ„ï¼š</p><p><img src="https://dhc.pythonanywhere.com/media/editor/MySQLä½“ç³»ç»“æ„_20220315034329549927.png" alt="ç»“æ„å›¾" title="ç»“æ„å›¾"><br><img src="https://dhc.pythonanywhere.com/media/editor/MySQLä½“ç³»ç»“æ„å±‚çº§å«ä¹‰_20220315034359342837.png" alt="å±‚çº§æè¿°" title="å±‚çº§æè¿°"></p><p>å­˜å‚¨å¼•æ“å°±æ˜¯å­˜å‚¨æ•°æ®ã€å»ºç«‹ç´¢å¼•ã€æ›´æ–°/æŸ¥è¯¢æ•°æ®ç­‰æŠ€æœ¯çš„å®ç°æ–¹å¼ã€‚å­˜å‚¨å¼•æ“æ˜¯åŸºäºè¡¨è€Œä¸æ˜¯åŸºäºåº“çš„ï¼Œæ‰€ä»¥å­˜å‚¨å¼•æ“ä¹Ÿå¯ä»¥è¢«ç§°ä¸ºè¡¨å¼•æ“ã€‚<br>é»˜è®¤å­˜å‚¨å¼•æ“æ˜¯ InnoDBã€‚</p><p>ç›¸å…³æ“ä½œï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢å»ºè¡¨è¯­å¥</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> account;</span><br><span class="line"><span class="comment">-- å»ºè¡¨æ—¶æŒ‡å®šå­˜å‚¨å¼•æ“</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> è¡¨å(</span><br><span class="line">...</span><br><span class="line">) ENGINE<span class="operator">=</span>INNODB;</span><br><span class="line"><span class="comment">-- æŸ¥çœ‹å½“å‰æ•°æ®åº“æ”¯æŒçš„å­˜å‚¨å¼•æ“</span></span><br><span class="line"><span class="keyword">show</span> engines;</span><br></pre></td></tr></table></figure><h3 id="InnoDB"><a href="#InnoDB" class="headerlink" title="InnoDB"></a>InnoDB</h3><p>InnoDB æ˜¯ä¸€ç§å…¼é¡¾é«˜å¯é æ€§å’Œé«˜æ€§èƒ½çš„é€šç”¨å­˜å‚¨å¼•æ“ï¼Œåœ¨ MySQL 5.5 ä¹‹åï¼ŒInnoDB æ˜¯é»˜è®¤çš„ MySQL å¼•æ“ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>DML æ“ä½œéµå¾ª ACID æ¨¡å‹ï¼Œæ”¯æŒ<strong>äº‹åŠ¡</strong></li><li><strong>è¡Œçº§é”</strong>ï¼Œæé«˜å¹¶å‘è®¿é—®æ€§èƒ½</li><li>æ”¯æŒ<strong>å¤–é”®</strong>çº¦æŸï¼Œä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§</li></ul><p>æ–‡ä»¶ï¼š</p><ul><li>xxx.ibd: xxx ä»£è¡¨è¡¨åï¼ŒInnoDB å¼•æ“çš„æ¯å¼ è¡¨éƒ½ä¼šå¯¹åº”è¿™æ ·ä¸€ä¸ªè¡¨ç©ºé—´æ–‡ä»¶ï¼Œå­˜å‚¨è¯¥è¡¨çš„è¡¨ç»“æ„ï¼ˆfrmã€sdiï¼‰ã€æ•°æ®å’Œç´¢å¼•ã€‚</li></ul><p>å‚æ•°ï¼šinnodb_file_per_tableï¼Œå†³å®šå¤šå¼ è¡¨å…±äº«ä¸€ä¸ªè¡¨ç©ºé—´è¿˜æ˜¯æ¯å¼ è¡¨å¯¹åº”ä¸€ä¸ªè¡¨ç©ºé—´</p><p>çŸ¥è¯†ç‚¹ï¼š</p><p>æŸ¥çœ‹ Mysql å˜é‡ï¼š<br><code>show variables like &#39;innodb_file_per_table&#39;;</code></p><p>ä» idb æ–‡ä»¶æå–è¡¨ç»“æ„æ•°æ®ï¼š<br>ï¼ˆåœ¨ cmd è¿è¡Œï¼‰<br><code>ibd2sdi xxx.ibd</code></p><p>InnoDB é€»è¾‘å­˜å‚¨ç»“æ„ï¼š<br><img src="https://dhc.pythonanywhere.com/media/editor/é€»è¾‘å­˜å‚¨ç»“æ„_20220316030616590001.png" alt="InnoDBé€»è¾‘å­˜å‚¨ç»“æ„" title="InnoDBé€»è¾‘å­˜å‚¨ç»“æ„"></p><h3 id="MyISAM"><a href="#MyISAM" class="headerlink" title="MyISAM"></a>MyISAM</h3><p>MyISAM æ˜¯ MySQL æ—©æœŸçš„é»˜è®¤å­˜å‚¨å¼•æ“ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>ä¸æ”¯æŒäº‹åŠ¡ï¼Œä¸æ”¯æŒå¤–é”®</li><li>æ”¯æŒè¡¨é”ï¼Œä¸æ”¯æŒè¡Œé”</li><li>è®¿é—®é€Ÿåº¦å¿«</li></ul><p>æ–‡ä»¶ï¼š</p><ul><li>xxx.sdi: å­˜å‚¨è¡¨ç»“æ„ä¿¡æ¯</li><li>xxx.MYD: å­˜å‚¨æ•°æ®</li><li>xxx.MYI: å­˜å‚¨ç´¢å¼•</li></ul><h3 id="Memory"><a href="#Memory" class="headerlink" title="Memory"></a>Memory</h3><p>Memory å¼•æ“çš„è¡¨æ•°æ®æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ï¼Œå—ç¡¬ä»¶é—®é¢˜ã€æ–­ç”µé—®é¢˜çš„å½±å“ï¼Œåªèƒ½å°†è¿™äº›è¡¨ä½œä¸ºä¸´æ—¶è¡¨æˆ–ç¼“å­˜ä½¿ç”¨ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œé€Ÿåº¦å¿«</li><li>hash ç´¢å¼•ï¼ˆé»˜è®¤ï¼‰</li></ul><p>æ–‡ä»¶ï¼š</p><ul><li>xxx.sdi: å­˜å‚¨è¡¨ç»“æ„ä¿¡æ¯</li></ul><h3 id="å­˜å‚¨å¼•æ“ç‰¹ç‚¹"><a href="#å­˜å‚¨å¼•æ“ç‰¹ç‚¹" class="headerlink" title="å­˜å‚¨å¼•æ“ç‰¹ç‚¹"></a>å­˜å‚¨å¼•æ“ç‰¹ç‚¹</h3><div class="table-container"><table><thead><tr><th>ç‰¹ç‚¹</th><th>InnoDB</th><th>MyISAM</th><th>Memory</th></tr></thead><tbody><tr><td>å­˜å‚¨é™åˆ¶</td><td>64TB</td><td>æœ‰</td><td>æœ‰</td></tr><tr><td>äº‹åŠ¡å®‰å…¨</td><td>æ”¯æŒ</td><td>-</td><td>-</td></tr><tr><td>é”æœºåˆ¶</td><td>è¡Œé”</td><td>è¡¨é”</td><td>è¡¨é”</td></tr><tr><td>B+tree ç´¢å¼•</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>Hash ç´¢å¼•</td><td>-</td><td>-</td><td>æ”¯æŒ</td></tr><tr><td>å…¨æ–‡ç´¢å¼•</td><td>æ”¯æŒï¼ˆ5.6 ç‰ˆæœ¬ä¹‹åï¼‰</td><td>æ”¯æŒ</td><td>-</td></tr><tr><td>ç©ºé—´ä½¿ç”¨</td><td>é«˜</td><td>ä½</td><td>N/A</td></tr><tr><td>å†…å­˜ä½¿ç”¨</td><td>é«˜</td><td>ä½</td><td>ä¸­ç­‰</td></tr><tr><td>æ‰¹é‡æ’å…¥é€Ÿåº¦</td><td>ä½</td><td>é«˜</td><td>é«˜</td></tr><tr><td>æ”¯æŒå¤–é”®</td><td>æ”¯æŒ</td><td>-</td><td>-</td></tr></tbody></table></div><h3 id="å­˜å‚¨å¼•æ“çš„é€‰æ‹©"><a href="#å­˜å‚¨å¼•æ“çš„é€‰æ‹©" class="headerlink" title="å­˜å‚¨å¼•æ“çš„é€‰æ‹©"></a>å­˜å‚¨å¼•æ“çš„é€‰æ‹©</h3><p>åœ¨é€‰æ‹©å­˜å‚¨å¼•æ“æ—¶ï¼Œåº”è¯¥æ ¹æ®åº”ç”¨ç³»ç»Ÿçš„ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„å­˜å‚¨å¼•æ“ã€‚å¯¹äºå¤æ‚çš„åº”ç”¨ç³»ç»Ÿï¼Œè¿˜å¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©å¤šç§å­˜å‚¨å¼•æ“è¿›è¡Œç»„åˆã€‚</p><ul><li>InnoDB: å¦‚æœåº”ç”¨å¯¹äº‹ç‰©çš„å®Œæ•´æ€§æœ‰æ¯”è¾ƒé«˜çš„è¦æ±‚ï¼Œåœ¨å¹¶å‘æ¡ä»¶ä¸‹è¦æ±‚æ•°æ®çš„ä¸€è‡´æ€§ï¼Œæ•°æ®æ“ä½œé™¤äº†æ’å…¥å’ŒæŸ¥è¯¢ä¹‹å¤–ï¼Œè¿˜åŒ…å«å¾ˆå¤šçš„æ›´æ–°ã€åˆ é™¤æ“ä½œï¼Œåˆ™ InnoDB æ˜¯æ¯”è¾ƒåˆé€‚çš„é€‰æ‹©</li><li>MyISAM: å¦‚æœåº”ç”¨æ˜¯ä»¥è¯»æ“ä½œå’Œæ’å…¥æ“ä½œä¸ºä¸»ï¼Œåªæœ‰å¾ˆå°‘çš„æ›´æ–°å’Œåˆ é™¤æ“ä½œï¼Œå¹¶ä¸”å¯¹äº‹åŠ¡çš„å®Œæ•´æ€§ã€å¹¶å‘æ€§è¦æ±‚ä¸é«˜ï¼Œé‚£è¿™ä¸ªå­˜å‚¨å¼•æ“æ˜¯éå¸¸åˆé€‚çš„ã€‚</li><li>Memory: å°†æ‰€æœ‰æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè®¿é—®é€Ÿåº¦å¿«ï¼Œé€šå¸¸ç”¨äºä¸´æ—¶è¡¨åŠç¼“å­˜ã€‚Memory çš„ç¼ºé™·æ˜¯å¯¹è¡¨çš„å¤§å°æœ‰é™åˆ¶ï¼Œå¤ªå¤§çš„è¡¨æ— æ³•ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œä¸”æ— æ³•ä¿éšœæ•°æ®çš„å®‰å…¨æ€§</li></ul><p>ç”µå•†ä¸­çš„è¶³è¿¹å’Œè¯„è®ºé€‚åˆä½¿ç”¨ MyISAM å¼•æ“ï¼Œç¼“å­˜é€‚åˆä½¿ç”¨ Memory å¼•æ“ã€‚</p><h2 id="2-2-æ€§èƒ½åˆ†æ"><a href="#2-2-æ€§èƒ½åˆ†æ" class="headerlink" title="2.2 æ€§èƒ½åˆ†æ"></a>2.2 æ€§èƒ½åˆ†æ</h2><h3 id="æŸ¥çœ‹æ‰§è¡Œé¢‘æ¬¡"><a href="#æŸ¥çœ‹æ‰§è¡Œé¢‘æ¬¡" class="headerlink" title="æŸ¥çœ‹æ‰§è¡Œé¢‘æ¬¡"></a>æŸ¥çœ‹æ‰§è¡Œé¢‘æ¬¡</h3><p>æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„ INSERT, UPDATE, DELETE, SELECT è®¿é—®é¢‘æ¬¡ï¼š<br><code>SHOW GLOBAL STATUS LIKE &#39;Com_______&#39;;</code> æˆ–è€… <code>SHOW SESSION STATUS LIKE &#39;Com_______&#39;;</code><br>ä¾‹ï¼š<code>show global status like &#39;Com_______&#39;</code></p><h3 id="æ…¢æŸ¥è¯¢æ—¥å¿—"><a href="#æ…¢æŸ¥è¯¢æ—¥å¿—" class="headerlink" title="æ…¢æŸ¥è¯¢æ—¥å¿—"></a>æ…¢æŸ¥è¯¢æ—¥å¿—</h3><p>æ…¢æŸ¥è¯¢æ—¥å¿—è®°å½•äº†æ‰€æœ‰æ‰§è¡Œæ—¶é—´è¶…è¿‡æŒ‡å®šå‚æ•°ï¼ˆlong_query_timeï¼Œå•ä½ï¼šç§’ï¼Œé»˜è®¤ 10 ç§’ï¼‰çš„æ‰€æœ‰ SQL è¯­å¥çš„æ—¥å¿—ã€‚<br>MySQL çš„æ…¢æŸ¥è¯¢æ—¥å¿—é»˜è®¤æ²¡æœ‰å¼€å¯ï¼Œéœ€è¦åœ¨ MySQL çš„é…ç½®æ–‡ä»¶ï¼ˆ/etc/my.cnfï¼‰ä¸­é…ç½®å¦‚ä¸‹ä¿¡æ¯ï¼š # å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—å¼€å…³<br>slow_query_log=1 # è®¾ç½®æ…¢æŸ¥è¯¢æ—¥å¿—çš„æ—¶é—´ä¸º 2 ç§’ï¼ŒSQL è¯­å¥æ‰§è¡Œæ—¶é—´è¶…è¿‡ 2 ç§’ï¼Œå°±ä¼šè§†ä¸ºæ…¢æŸ¥è¯¢ï¼Œè®°å½•æ…¢æŸ¥è¯¢æ—¥å¿—<br>long_query_time=2<br>æ›´æ”¹åè®°å¾—é‡å¯ MySQL æœåŠ¡ï¼Œæ—¥å¿—æ–‡ä»¶ä½ç½®ï¼š/var/lib/mysql/localhost-slow.log</p><p>æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—å¼€å…³çŠ¶æ€ï¼š<br><code>show variables like &#39;slow_query_log&#39;;</code></p><h3 id="profile"><a href="#profile" class="headerlink" title="profile"></a>profile</h3><p>show profile èƒ½åœ¨åš SQL ä¼˜åŒ–æ—¶å¸®æˆ‘ä»¬äº†è§£æ—¶é—´éƒ½è€—è´¹åœ¨å“ªé‡Œã€‚é€šè¿‡ have_profiling å‚æ•°ï¼Œèƒ½çœ‹åˆ°å½“å‰ MySQL æ˜¯å¦æ”¯æŒ profile æ“ä½œï¼š<br><code>SELECT @@have_profiling;</code><br>profiling é»˜è®¤å…³é—­ï¼Œå¯ä»¥é€šè¿‡ set è¯­å¥åœ¨ session/global çº§åˆ«å¼€å¯ profilingï¼š<br><code>SET profiling = 1;</code><br>æŸ¥çœ‹æ‰€æœ‰è¯­å¥çš„è€—æ—¶ï¼š<br><code>show profiles;</code><br>æŸ¥çœ‹æŒ‡å®š query_id çš„ SQL è¯­å¥å„ä¸ªé˜¶æ®µçš„è€—æ—¶ï¼š<br><code>show profile for query query_id;</code><br>æŸ¥çœ‹æŒ‡å®š query_id çš„ SQL è¯­å¥ CPU çš„ä½¿ç”¨æƒ…å†µ<br><code>show profile cpu for query query_id;</code></p><h3 id="explain"><a href="#explain" class="headerlink" title="explain"></a>explain</h3><p>EXPLAIN æˆ–è€… DESC å‘½ä»¤è·å– MySQL å¦‚ä½•æ‰§è¡Œ SELECT è¯­å¥çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬åœ¨ SELECT è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­è¡¨å¦‚ä½•è¿æ¥å’Œè¿æ¥çš„é¡ºåºã€‚<br>è¯­æ³•ï¼š # ç›´æ¥åœ¨ select è¯­å¥ä¹‹å‰åŠ ä¸Šå…³é”®å­— explain / desc<br>EXPLAIN SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å HWERE æ¡ä»¶;</p><p>EXPLAIN å„å­—æ®µå«ä¹‰ï¼š</p><ul><li>idï¼šselect æŸ¥è¯¢çš„åºåˆ—å·ï¼Œè¡¨ç¤ºæŸ¥è¯¢ä¸­æ‰§è¡Œ select å­å¥æˆ–è€…æ“ä½œè¡¨çš„é¡ºåºï¼ˆid ç›¸åŒï¼Œæ‰§è¡Œé¡ºåºä»ä¸Šåˆ°ä¸‹ï¼›id ä¸åŒï¼Œå€¼è¶Šå¤§è¶Šå…ˆæ‰§è¡Œï¼‰</li><li>select_typeï¼šè¡¨ç¤º SELECT çš„ç±»å‹ï¼Œå¸¸è§å–å€¼æœ‰ SIMPLEï¼ˆç®€å•è¡¨ï¼Œå³ä¸é€‚ç”¨è¡¨è¿æ¥æˆ–è€…å­æŸ¥è¯¢ï¼‰ã€PRIMARYï¼ˆä¸»æŸ¥è¯¢ï¼Œå³å¤–å±‚çš„æŸ¥è¯¢ï¼‰ã€UNIONï¼ˆUNION ä¸­çš„ç¬¬äºŒä¸ªæˆ–è€…åé¢çš„æŸ¥è¯¢è¯­å¥ï¼‰ã€SUBQUERYï¼ˆSELECT/WHERE ä¹‹ååŒ…å«äº†å­æŸ¥è¯¢ï¼‰ç­‰</li><li>typeï¼šè¡¨ç¤ºè¿æ¥ç±»å‹ï¼Œæ€§èƒ½ç”±å¥½åˆ°å·®çš„è¿æ¥ç±»å‹ä¸º NULLã€systemã€constã€eq_refã€refã€rangeã€indexã€all</li><li>possible_keyï¼šå¯èƒ½åº”ç”¨åœ¨è¿™å¼ è¡¨ä¸Šçš„ç´¢å¼•ï¼Œä¸€ä¸ªæˆ–å¤šä¸ª</li><li>Keyï¼šå®é™…ä½¿ç”¨çš„ç´¢å¼•ï¼Œå¦‚æœä¸º NULLï¼Œåˆ™æ²¡æœ‰ä½¿ç”¨ç´¢å¼•</li><li>Key_lenï¼šè¡¨ç¤ºç´¢å¼•ä¸­ä½¿ç”¨çš„å­—èŠ‚æ•°ï¼Œè¯¥å€¼ä¸ºç´¢å¼•å­—æ®µæœ€å¤§å¯èƒ½é•¿åº¦ï¼Œå¹¶éå®é™…ä½¿ç”¨é•¿åº¦ï¼Œåœ¨ä¸æŸå¤±ç²¾ç¡®æ€§çš„å‰æä¸‹ï¼Œé•¿åº¦è¶ŠçŸ­è¶Šå¥½</li><li>rowsï¼šMySQL è®¤ä¸ºå¿…é¡»è¦æ‰§è¡Œçš„è¡Œæ•°ï¼Œåœ¨ InnoDB å¼•æ“çš„è¡¨ä¸­ï¼Œæ˜¯ä¸€ä¸ªä¼°è®¡å€¼ï¼Œå¯èƒ½å¹¶ä¸æ€»æ˜¯å‡†ç¡®çš„</li><li>filteredï¼šè¡¨ç¤ºè¿”å›ç»“æœçš„è¡Œæ•°å éœ€è¯»å–è¡Œæ•°çš„ç™¾åˆ†æ¯”ï¼Œfiltered çš„å€¼è¶Šå¤§è¶Šå¥½</li></ul><h2 id="2-3-ç´¢å¼•"><a href="#2-3-ç´¢å¼•" class="headerlink" title="2.3 ç´¢å¼•"></a>2.3 ç´¢å¼•</h2><p>ç´¢å¼•æ˜¯å¸®åŠ© MySQL <strong>é«˜æ•ˆè·å–æ•°æ®</strong>çš„<strong>æ•°æ®ç»“æ„ï¼ˆæœ‰åºï¼‰</strong>ã€‚åœ¨æ•°æ®ä¹‹å¤–ï¼Œæ•°æ®åº“ç³»ç»Ÿè¿˜ç»´æŠ¤ç€æ»¡è¶³ç‰¹å®šæŸ¥æ‰¾ç®—æ³•çš„æ•°æ®ç»“æ„ï¼Œè¿™äº›æ•°æ®ç»“æ„ä»¥æŸç§æ–¹å¼å¼•ç”¨ï¼ˆæŒ‡å‘ï¼‰æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è¿™äº›æ•°æ®ç»“æ„ä¸Šå®ç°é«˜çº§æŸ¥è¯¢ç®—æ³•ï¼Œè¿™ç§æ•°æ®ç»“æ„å°±æ˜¯ç´¢å¼•ã€‚</p><p>ä¼˜ç¼ºç‚¹ï¼š</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>æé«˜æ•°æ®æ£€ç´¢æ•ˆç‡ï¼Œé™ä½æ•°æ®åº“çš„ IO æˆæœ¬</li><li>é€šè¿‡ç´¢å¼•åˆ—å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œé™ä½æ•°æ®æ’åºçš„æˆæœ¬ï¼Œé™ä½ CPU çš„æ¶ˆè€—</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>ç´¢å¼•åˆ—ä¹Ÿæ˜¯è¦å ç”¨ç©ºé—´çš„</li><li>ç´¢å¼•å¤§å¤§æé«˜äº†æŸ¥è¯¢æ•ˆç‡ï¼Œä½†é™ä½äº†æ›´æ–°çš„é€Ÿåº¦ï¼Œæ¯”å¦‚ INSERTã€UPDATEã€DELETE</li></ul><h3 id="ç´¢å¼•ç»“æ„"><a href="#ç´¢å¼•ç»“æ„" class="headerlink" title="ç´¢å¼•ç»“æ„"></a>ç´¢å¼•ç»“æ„</h3><div class="table-container"><table><thead><tr><th>ç´¢å¼•ç»“æ„</th><th>æè¿°</th></tr></thead><tbody><tr><td>B+Tree</td><td>æœ€å¸¸è§çš„ç´¢å¼•ç±»å‹ï¼Œå¤§éƒ¨åˆ†å¼•æ“éƒ½æ”¯æŒ B+æ ‘ç´¢å¼•</td></tr><tr><td>Hash</td><td>åº•å±‚æ•°æ®ç»“æ„æ˜¯ç”¨å“ˆå¸Œè¡¨å®ç°ï¼Œåªæœ‰ç²¾ç¡®åŒ¹é…ç´¢å¼•åˆ—çš„æŸ¥è¯¢æ‰æœ‰æ•ˆï¼Œä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢</td></tr><tr><td>R-Tree(ç©ºé—´ç´¢å¼•)</td><td>ç©ºé—´ç´¢å¼•æ˜¯ MyISAM å¼•æ“çš„ä¸€ä¸ªç‰¹æ®Šç´¢å¼•ç±»å‹ï¼Œä¸»è¦ç”¨äºåœ°ç†ç©ºé—´æ•°æ®ç±»å‹ï¼Œé€šå¸¸ä½¿ç”¨è¾ƒå°‘</td></tr><tr><td>Full-Text(å…¨æ–‡ç´¢å¼•)</td><td>æ˜¯ä¸€ç§é€šè¿‡å»ºç«‹å€’æ’ç´¢å¼•ï¼Œå¿«é€ŸåŒ¹é…æ–‡æ¡£çš„æ–¹å¼ï¼Œç±»ä¼¼äº Lucene, Solr, ES</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th>ç´¢å¼•</th><th>InnoDB</th><th>MyISAM</th><th>Memory</th></tr></thead><tbody><tr><td>B+Tree ç´¢å¼•</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>Hash ç´¢å¼•</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>R-Tree ç´¢å¼•</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>Full-text</td><td>5.6 ç‰ˆæœ¬åæ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr></tbody></table></div><h4 id="B-Tree"><a href="#B-Tree" class="headerlink" title="B-Tree"></a>B-Tree</h4><p><img src="https://dhc.pythonanywhere.com/media/editor/äºŒå‰æ ‘_20220316153214227108.png" alt="äºŒå‰æ ‘" title="äºŒå‰æ ‘"></p><p>äºŒå‰æ ‘çš„ç¼ºç‚¹å¯ä»¥ç”¨çº¢é»‘æ ‘æ¥è§£å†³ï¼š<br><img src="https://dhc.pythonanywhere.com/media/editor/çº¢é»‘æ ‘_20220316163142686602.png" alt="çº¢é»‘æ ‘" title="çº¢é»‘æ ‘"><br>çº¢é»‘æ ‘ä¹Ÿå­˜åœ¨å¤§æ•°æ®é‡æƒ…å†µä¸‹ï¼Œå±‚çº§è¾ƒæ·±ï¼Œæ£€ç´¢é€Ÿåº¦æ…¢çš„é—®é¢˜ã€‚</p><p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ B-Tree ç»“æ„ã€‚<br>B-Tree (å¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘) ä»¥ä¸€æ£µæœ€å¤§åº¦æ•°ï¼ˆmax-degreeï¼ŒæŒ‡ä¸€ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸ªæ•°ï¼‰ä¸º 5ï¼ˆ5 é˜¶ï¼‰çš„ b-tree ä¸ºä¾‹ï¼ˆæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šå­˜å‚¨ 4 ä¸ª keyï¼Œ5 ä¸ªæŒ‡é’ˆï¼‰</p><p><img src="https://dhc.pythonanywhere.com/media/editor/B-Treeç»“æ„_20220316163813441163.png" alt="B-Treeç»“æ„" title="B-Treeç»“æ„"></p><blockquote><p>B-Tree çš„æ•°æ®æ’å…¥è¿‡ç¨‹åŠ¨ç”»å‚ç…§ï¼š<a href="https://www.bilibili.com/video/BV1Kr4y1i7ru?p=68">https://www.bilibili.com/video/BV1Kr4y1i7ru?p=68</a><br>æ¼”ç¤ºåœ°å€ï¼š<a href="https://www.cs.usfca.edu/~galles/visualization/BTree.html">https://www.cs.usfca.edu/~galles/visualization/BTree.html</a></p></blockquote><h4 id="B-Tree-1"><a href="#B-Tree-1" class="headerlink" title="B+Tree"></a>B+Tree</h4><p>ç»“æ„å›¾ï¼š</p><p><img src="https://dhc.pythonanywhere.com/media/editor/B+Treeç»“æ„å›¾_20220316170700591277.png" alt="B+Treeç»“æ„å›¾" title="B+Treeç»“æ„å›¾"></p><blockquote><p>æ¼”ç¤ºåœ°å€ï¼š<a href="https://www.cs.usfca.edu/~galles/visualization/BPlusTree.html">https://www.cs.usfca.edu/~galles/visualization/BPlusTree.html</a></p></blockquote><p>ä¸ B-Tree çš„åŒºåˆ«ï¼š</p><ul><li>æ‰€æœ‰çš„æ•°æ®éƒ½ä¼šå‡ºç°åœ¨å¶å­èŠ‚ç‚¹</li><li>å¶å­èŠ‚ç‚¹å½¢æˆä¸€ä¸ªå•å‘é“¾è¡¨</li></ul><p>MySQL ç´¢å¼•æ•°æ®ç»“æ„å¯¹ç»å…¸çš„ B+Tree è¿›è¡Œäº†ä¼˜åŒ–ã€‚åœ¨åŸ B+Tree çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€ä¸ªæŒ‡å‘ç›¸é‚»å¶å­èŠ‚ç‚¹çš„é“¾è¡¨æŒ‡é’ˆï¼Œå°±å½¢æˆäº†å¸¦æœ‰é¡ºåºæŒ‡é’ˆçš„ B+Treeï¼Œæé«˜åŒºé—´è®¿é—®çš„æ€§èƒ½ã€‚</p><p><img src="https://dhc.pythonanywhere.com/media/editor/ç»“æ„å›¾_20220316171730865611.png" alt="MySQL B+Tree ç»“æ„å›¾" title="MySQL B+Tree ç»“æ„å›¾"></p><h4 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h4><p>å“ˆå¸Œç´¢å¼•å°±æ˜¯é‡‡ç”¨ä¸€å®šçš„ hash ç®—æ³•ï¼Œå°†é”®å€¼æ¢ç®—æˆæ–°çš„ hash å€¼ï¼Œæ˜ å°„åˆ°å¯¹åº”çš„æ§½ä½ä¸Šï¼Œç„¶åå­˜å‚¨åœ¨ hash è¡¨ä¸­ã€‚<br>å¦‚æœä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰é”®å€¼ï¼Œæ˜ å°„åˆ°ä¸€ä¸ªç›¸åŒçš„æ§½ä½ä¸Šï¼Œä»–ä»¬å°±äº§ç”Ÿäº† hash å†²çªï¼ˆä¹Ÿç§°ä¸º hash ç¢°æ’ï¼‰ï¼Œå¯ä»¥é€šè¿‡é“¾è¡¨æ¥è§£å†³ã€‚</p><p><img src="https://dhc.pythonanywhere.com/media/editor/Hashç´¢å¼•åŸç†å›¾_20220317143226150679.png" alt="Hashç´¢å¼•åŸç†å›¾" title="Hashç´¢å¼•åŸç†å›¾"></p><p>ç‰¹ç‚¹ï¼š</p><ul><li>Hash ç´¢å¼•åªèƒ½ç”¨äºå¯¹ç­‰æ¯”è¾ƒï¼ˆ=ã€inï¼‰ï¼Œä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼ˆbetwwnã€&gt;ã€&lt;ã€â€¦ï¼‰</li><li>æ— æ³•åˆ©ç”¨ç´¢å¼•å®Œæˆæ’åºæ“ä½œ</li><li>æŸ¥è¯¢æ•ˆç‡é«˜ï¼Œé€šå¸¸åªéœ€è¦ä¸€æ¬¡æ£€ç´¢å°±å¯ä»¥äº†ï¼Œæ•ˆç‡é€šå¸¸è¦é«˜äº B+Tree ç´¢å¼•</li></ul><p>å­˜å‚¨å¼•æ“æ”¯æŒï¼š</p><ul><li>Memory</li><li>InnoDB: å…·æœ‰è‡ªé€‚åº” hash åŠŸèƒ½ï¼Œhash ç´¢å¼•æ˜¯å­˜å‚¨å¼•æ“æ ¹æ® B+Tree ç´¢å¼•åœ¨æŒ‡å®šæ¡ä»¶ä¸‹è‡ªåŠ¨æ„å»ºçš„</li></ul><h4 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h4><ol><li>ä¸ºä»€ä¹ˆ InnoDB å­˜å‚¨å¼•æ“é€‰æ‹©ä½¿ç”¨ B+Tree ç´¢å¼•ç»“æ„ï¼Ÿ</li></ol><ul><li>ç›¸å¯¹äºäºŒå‰æ ‘ï¼Œå±‚çº§æ›´å°‘ï¼Œæœç´¢æ•ˆç‡é«˜</li><li>å¯¹äº B-Treeï¼Œæ— è®ºæ˜¯å¶å­èŠ‚ç‚¹è¿˜æ˜¯éå¶å­èŠ‚ç‚¹ï¼Œéƒ½ä¼šä¿å­˜æ•°æ®ï¼Œè¿™æ ·å¯¼è‡´ä¸€é¡µä¸­å­˜å‚¨çš„é”®å€¼å‡å°‘ï¼ŒæŒ‡é’ˆä¹Ÿè·Ÿç€å‡å°‘ï¼Œè¦åŒæ ·ä¿å­˜å¤§é‡æ•°æ®ï¼Œåªèƒ½å¢åŠ æ ‘çš„é«˜åº¦ï¼Œå¯¼è‡´æ€§èƒ½é™ä½</li><li>ç›¸å¯¹äº Hash ç´¢å¼•ï¼ŒB+Tree æ”¯æŒèŒƒå›´åŒ¹é…åŠæ’åºæ“ä½œ</li></ul><h3 id="ç´¢å¼•åˆ†ç±»"><a href="#ç´¢å¼•åˆ†ç±»" class="headerlink" title="ç´¢å¼•åˆ†ç±»"></a>ç´¢å¼•åˆ†ç±»</h3><div class="table-container"><table><thead><tr><th>åˆ†ç±»</th><th>å«ä¹‰</th><th>ç‰¹ç‚¹</th><th>å…³é”®å­—</th></tr></thead><tbody><tr><td>ä¸»é”®ç´¢å¼•</td><td>é’ˆå¯¹äºè¡¨ä¸­ä¸»é”®åˆ›å»ºçš„ç´¢å¼•</td><td>é»˜è®¤è‡ªåŠ¨åˆ›å»ºï¼Œåªèƒ½æœ‰ä¸€ä¸ª</td><td>PRIMARY</td></tr><tr><td>å”¯ä¸€ç´¢å¼•</td><td>é¿å…åŒä¸€ä¸ªè¡¨ä¸­æŸæ•°æ®åˆ—ä¸­çš„å€¼é‡å¤</td><td>å¯ä»¥æœ‰å¤šä¸ª</td><td>UNIQUE</td></tr><tr><td>å¸¸è§„ç´¢å¼•</td><td>å¿«é€Ÿå®šä½ç‰¹å®šæ•°æ®</td><td>å¯ä»¥æœ‰å¤šä¸ª</td><td></td></tr><tr><td>å…¨æ–‡ç´¢å¼•</td><td>å…¨æ–‡ç´¢å¼•æŸ¥æ‰¾çš„æ˜¯æ–‡æœ¬ä¸­çš„å…³é”®è¯ï¼Œè€Œä¸æ˜¯æ¯”è¾ƒç´¢å¼•ä¸­çš„å€¼</td><td>å¯ä»¥æœ‰å¤šä¸ª</td><td>FULLTEXT</td></tr></tbody></table></div><p>åœ¨ InnoDB å­˜å‚¨å¼•æ“ä¸­ï¼Œæ ¹æ®ç´¢å¼•çš„å­˜å‚¨å½¢å¼ï¼Œåˆå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š</p><div class="table-container"><table><thead><tr><th>åˆ†ç±»</th><th>å«ä¹‰</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>èšé›†ç´¢å¼•(Clustered Index)</td><td>å°†æ•°æ®å­˜å‚¨ä¸ç´¢å¼•æ”¾ä¸€å—ï¼Œç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹ä¿å­˜äº†è¡Œæ•°æ®</td><td>å¿…é¡»æœ‰ï¼Œè€Œä¸”åªæœ‰ä¸€ä¸ª</td></tr><tr><td>äºŒçº§ç´¢å¼•(Secondary Index)</td><td>å°†æ•°æ®ä¸ç´¢å¼•åˆ†å¼€å­˜å‚¨ï¼Œç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹å…³è”çš„æ˜¯å¯¹åº”çš„ä¸»é”®</td><td>å¯ä»¥å­˜åœ¨å¤šä¸ª</td></tr></tbody></table></div><p>æ¼”ç¤ºå›¾ï¼š</p><p><img src="https://dhc.pythonanywhere.com/media/editor/åŸç†å›¾_20220318194454880073.png" alt="å¤§è‡´åŸç†" title="å¤§è‡´åŸç†"><br><img src="https://dhc.pythonanywhere.com/media/editor/æ¼”ç¤ºå›¾_20220319215403721066.png" alt="æ¼”ç¤ºå›¾" title="æ¼”ç¤ºå›¾"></p><p>èšé›†ç´¢å¼•é€‰å–è§„åˆ™ï¼š</p><ul><li>å¦‚æœå­˜åœ¨ä¸»é”®ï¼Œä¸»é”®ç´¢å¼•å°±æ˜¯èšé›†ç´¢å¼•</li><li>å¦‚æœä¸å­˜åœ¨ä¸»é”®ï¼Œå°†ä½¿ç”¨ç¬¬ä¸€ä¸ªå”¯ä¸€(UNIQUE)ç´¢å¼•ä½œä¸ºèšé›†ç´¢å¼•</li><li>å¦‚æœè¡¨æ²¡æœ‰ä¸»é”®æˆ–æ²¡æœ‰åˆé€‚çš„å”¯ä¸€ç´¢å¼•ï¼Œåˆ™ InnoDB ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª rowid ä½œä¸ºéšè—çš„èšé›†ç´¢å¼•</li></ul><h4 id="æ€è€ƒé¢˜"><a href="#æ€è€ƒé¢˜" class="headerlink" title="æ€è€ƒé¢˜"></a>æ€è€ƒé¢˜</h4><p>1. ä»¥ä¸‹ SQL è¯­å¥ï¼Œå“ªä¸ªæ‰§è¡Œæ•ˆç‡é«˜ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;Arm&#x27;</span>;</span><br><span class="line"><span class="comment">-- å¤‡æ³¨ï¼šidä¸ºä¸»é”®ï¼Œnameå­—æ®µåˆ›å»ºçš„æœ‰ç´¢å¼•</span></span><br></pre></td></tr></table></figure><p>ç­”ï¼šç¬¬ä¸€æ¡è¯­å¥ï¼Œå› ä¸ºç¬¬äºŒæ¡éœ€è¦å›è¡¨æŸ¥è¯¢ï¼Œç›¸å½“äºä¸¤ä¸ªæ­¥éª¤ã€‚</p><p>2. InnoDB ä¸»é”®ç´¢å¼•çš„ B+Tree é«˜åº¦ä¸ºå¤šå°‘ï¼Ÿ</p><p>ç­”ï¼šå‡è®¾ä¸€è¡Œæ•°æ®å¤§å°ä¸º 1kï¼Œä¸€é¡µä¸­å¯ä»¥å­˜å‚¨ 16 è¡Œè¿™æ ·çš„æ•°æ®ã€‚InnoDB çš„æŒ‡é’ˆå ç”¨ 6 ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œä¸»é”®å‡è®¾ä¸º bigintï¼Œå ç”¨å­—èŠ‚æ•°ä¸º 8.<br>å¯å¾—å…¬å¼ï¼š<code>n * 8 + (n + 1) * 6 = 16 * 1024</code>ï¼Œå…¶ä¸­ 8 è¡¨ç¤º bigint å ç”¨çš„å­—èŠ‚æ•°ï¼Œn è¡¨ç¤ºå½“å‰èŠ‚ç‚¹å­˜å‚¨çš„ key çš„æ•°é‡ï¼Œ(n + 1) è¡¨ç¤ºæŒ‡é’ˆæ•°é‡ï¼ˆæ¯” key å¤šä¸€ä¸ªï¼‰ã€‚ç®—å‡º n çº¦ä¸º 1170ã€‚</p><p>å¦‚æœæ ‘çš„é«˜åº¦ä¸º 2ï¼Œé‚£ä¹ˆä»–èƒ½å­˜å‚¨çš„æ•°æ®é‡å¤§æ¦‚ä¸ºï¼š<code>1171 * 16 = 18736</code>ï¼›<br>å¦‚æœæ ‘çš„é«˜åº¦ä¸º 3ï¼Œé‚£ä¹ˆä»–èƒ½å­˜å‚¨çš„æ•°æ®é‡å¤§æ¦‚ä¸ºï¼š<code>1171 * 1171 * 16 = 21939856</code>ã€‚</p><p>å¦å¤–ï¼Œå¦‚æœæœ‰æˆåƒä¸Šä¸‡çš„æ•°æ®ï¼Œé‚£ä¹ˆå°±è¦è€ƒè™‘åˆ†è¡¨ï¼Œæ¶‰åŠè¿ç»´ç¯‡çŸ¥è¯†ã€‚</p><h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><p>åˆ›å»ºç´¢å¼•ï¼š<br><code>CREATE [ UNIQUE | FULLTEXT ] INDEX index_name ON table_name (index_col_name, ...);</code><br>å¦‚æœä¸åŠ  CREATE åé¢ä¸åŠ ç´¢å¼•ç±»å‹å‚æ•°ï¼Œåˆ™åˆ›å»ºçš„æ˜¯å¸¸è§„ç´¢å¼•</p><p>æŸ¥çœ‹ç´¢å¼•ï¼š<br><code>SHOW INDEX FROM table_name;</code></p><p>åˆ é™¤ç´¢å¼•ï¼š<br><code>DROP INDEX index_name ON table_name;</code></p><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- nameå­—æ®µä¸ºå§“åå­—æ®µï¼Œè¯¥å­—æ®µçš„å€¼å¯èƒ½ä¼šé‡å¤ï¼Œä¸ºè¯¥å­—æ®µåˆ›å»ºç´¢å¼•</span></span><br><span class="line"><span class="keyword">create</span> index idx_user_name <span class="keyword">on</span> tb_user(name);</span><br><span class="line"><span class="comment">-- phoneæ‰‹æœºå·å­—æ®µçš„å€¼éç©ºï¼Œä¸”å”¯ä¸€ï¼Œä¸ºè¯¥å­—æ®µåˆ›å»ºå”¯ä¸€ç´¢å¼•</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index idx_user_phone <span class="keyword">on</span> tb_user (phone);</span><br><span class="line"><span class="comment">-- ä¸ºprofession, age, statusåˆ›å»ºè”åˆç´¢å¼•</span></span><br><span class="line"><span class="keyword">create</span> index idx_user_pro_age_stat <span class="keyword">on</span> tb_user(profession, age, status);</span><br><span class="line"><span class="comment">-- ä¸ºemailå»ºç«‹åˆé€‚çš„ç´¢å¼•æ¥æå‡æŸ¥è¯¢æ•ˆç‡</span></span><br><span class="line"><span class="keyword">create</span> index idx_user_email <span class="keyword">on</span> tb_user(email);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ é™¤ç´¢å¼•</span></span><br><span class="line"><span class="keyword">drop</span> index idx_user_email <span class="keyword">on</span> tb_user;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨è§„åˆ™"><a href="#ä½¿ç”¨è§„åˆ™" class="headerlink" title="ä½¿ç”¨è§„åˆ™"></a>ä½¿ç”¨è§„åˆ™</h3><h4 id="æœ€å·¦å‰ç¼€æ³•åˆ™"><a href="#æœ€å·¦å‰ç¼€æ³•åˆ™" class="headerlink" title="æœ€å·¦å‰ç¼€æ³•åˆ™"></a>æœ€å·¦å‰ç¼€æ³•åˆ™</h4><p>å¦‚æœç´¢å¼•å…³è”äº†å¤šåˆ—ï¼ˆè”åˆç´¢å¼•ï¼‰ï¼Œè¦éµå®ˆæœ€å·¦å‰ç¼€æ³•åˆ™ï¼Œæœ€å·¦å‰ç¼€æ³•åˆ™æŒ‡çš„æ˜¯æŸ¥è¯¢ä»ç´¢å¼•çš„æœ€å·¦åˆ—å¼€å§‹ï¼Œå¹¶ä¸”ä¸è·³è¿‡ç´¢å¼•ä¸­çš„åˆ—ã€‚<br>å¦‚æœè·³è·ƒæŸä¸€åˆ—ï¼Œç´¢å¼•å°†éƒ¨åˆ†å¤±æ•ˆï¼ˆåé¢çš„å­—æ®µç´¢å¼•å¤±æ•ˆï¼‰ã€‚</p><p>è”åˆç´¢å¼•ä¸­ï¼Œå‡ºç°èŒƒå›´æŸ¥è¯¢ï¼ˆ&lt;, &gt;ï¼‰ï¼ŒèŒƒå›´æŸ¥è¯¢å³ä¾§çš„åˆ—ç´¢å¼•å¤±æ•ˆã€‚å¯ä»¥ç”¨&gt;=æˆ–è€…&lt;=æ¥è§„é¿ç´¢å¼•å¤±æ•ˆé—®é¢˜ã€‚</p><h4 id="ç´¢å¼•å¤±æ•ˆæƒ…å†µ"><a href="#ç´¢å¼•å¤±æ•ˆæƒ…å†µ" class="headerlink" title="ç´¢å¼•å¤±æ•ˆæƒ…å†µ"></a>ç´¢å¼•å¤±æ•ˆæƒ…å†µ</h4><ol><li>åœ¨ç´¢å¼•åˆ—ä¸Šè¿›è¡Œè¿ç®—æ“ä½œï¼Œç´¢å¼•å°†å¤±æ•ˆã€‚å¦‚ï¼š<code>explain select * from tb_user where substring(phone, 10, 2) = &#39;15&#39;;</code></li><li>å­—ç¬¦ä¸²ç±»å‹å­—æ®µä½¿ç”¨æ—¶ï¼Œä¸åŠ å¼•å·ï¼Œç´¢å¼•å°†å¤±æ•ˆã€‚å¦‚ï¼š<code>explain select * from tb_user where phone = 17799990015;</code>ï¼Œæ­¤å¤„ phone çš„å€¼æ²¡æœ‰åŠ å¼•å·</li><li>æ¨¡ç³ŠæŸ¥è¯¢ä¸­ï¼Œå¦‚æœä»…ä»…æ˜¯å°¾éƒ¨æ¨¡ç³ŠåŒ¹é…ï¼Œç´¢å¼•ä¸ä¼šæ˜¯å¤±æ•ˆï¼›å¦‚æœæ˜¯å¤´éƒ¨æ¨¡ç³ŠåŒ¹é…ï¼Œç´¢å¼•å¤±æ•ˆã€‚å¦‚ï¼š<code>explain select * from tb_user where profession like &#39;%å·¥ç¨‹&#39;;</code>ï¼Œå‰åéƒ½æœ‰ % ä¹Ÿä¼šå¤±æ•ˆã€‚</li><li>ç”¨ or åˆ†å‰²å¼€çš„æ¡ä»¶ï¼Œå¦‚æœ or å…¶ä¸­ä¸€ä¸ªæ¡ä»¶çš„åˆ—æ²¡æœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆæ¶‰åŠçš„ç´¢å¼•éƒ½ä¸ä¼šè¢«ç”¨åˆ°ã€‚</li><li>å¦‚æœ MySQL è¯„ä¼°ä½¿ç”¨ç´¢å¼•æ¯”å…¨è¡¨æ›´æ…¢ï¼Œåˆ™ä¸ä½¿ç”¨ç´¢å¼•ã€‚</li></ol><h4 id="SQL-æç¤º"><a href="#SQL-æç¤º" class="headerlink" title="SQL æç¤º"></a>SQL æç¤º</h4><p>æ˜¯ä¼˜åŒ–æ•°æ®åº“çš„ä¸€ä¸ªé‡è¦æ‰‹æ®µï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯åœ¨ SQL è¯­å¥ä¸­åŠ å…¥ä¸€äº›äººä¸ºçš„æç¤ºæ¥è¾¾åˆ°ä¼˜åŒ–æ“ä½œçš„ç›®çš„ã€‚</p><p>ä¾‹å¦‚ï¼Œä½¿ç”¨ç´¢å¼•ï¼š<br><code>explain select * from tb_user use index(idx_user_pro) where profession=&quot;è½¯ä»¶å·¥ç¨‹&quot;;</code><br>ä¸ä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼š<br><code>explain select * from tb_user ignore index(idx_user_pro) where profession=&quot;è½¯ä»¶å·¥ç¨‹&quot;;</code><br>å¿…é¡»ä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼š<br><code>explain select * from tb_user force index(idx_user_pro) where profession=&quot;è½¯ä»¶å·¥ç¨‹&quot;;</code></p><p>use æ˜¯å»ºè®®ï¼Œå®é™…ä½¿ç”¨å“ªä¸ªç´¢å¼• MySQL è¿˜ä¼šè‡ªå·±æƒè¡¡è¿è¡Œé€Ÿåº¦å»æ›´æ”¹ï¼Œforce å°±æ˜¯æ— è®ºå¦‚ä½•éƒ½å¼ºåˆ¶ä½¿ç”¨è¯¥ç´¢å¼•ã€‚</p><h4 id="è¦†ç›–ç´¢å¼•-amp-å›è¡¨æŸ¥è¯¢"><a href="#è¦†ç›–ç´¢å¼•-amp-å›è¡¨æŸ¥è¯¢" class="headerlink" title="è¦†ç›–ç´¢å¼•&amp;å›è¡¨æŸ¥è¯¢"></a>è¦†ç›–ç´¢å¼•&amp;å›è¡¨æŸ¥è¯¢</h4><p>å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼ˆæŸ¥è¯¢ä½¿ç”¨äº†ç´¢å¼•ï¼Œå¹¶ä¸”éœ€è¦è¿”å›çš„åˆ—ï¼Œåœ¨è¯¥ç´¢å¼•ä¸­å·²ç»å…¨éƒ¨èƒ½æ‰¾åˆ°ï¼‰ï¼Œå‡å°‘ select *ã€‚</p><p>explain ä¸­ extra å­—æ®µå«ä¹‰ï¼š<br><code>using index condition</code>ï¼šæŸ¥æ‰¾ä½¿ç”¨äº†ç´¢å¼•ï¼Œä½†æ˜¯éœ€è¦å›è¡¨æŸ¥è¯¢æ•°æ®<br><code>using where; using index;</code>ï¼šæŸ¥æ‰¾ä½¿ç”¨äº†ç´¢å¼•ï¼Œä½†æ˜¯éœ€è¦çš„æ•°æ®éƒ½åœ¨ç´¢å¼•åˆ—ä¸­èƒ½æ‰¾åˆ°ï¼Œæ‰€ä»¥ä¸éœ€è¦å›è¡¨æŸ¥è¯¢</p><p>å¦‚æœåœ¨èšé›†ç´¢å¼•ä¸­ç›´æ¥èƒ½æ‰¾åˆ°å¯¹åº”çš„è¡Œï¼Œåˆ™ç›´æ¥è¿”å›è¡Œæ•°æ®ï¼Œåªéœ€è¦ä¸€æ¬¡æŸ¥è¯¢ï¼Œå“ªæ€•æ˜¯ select *ï¼›å¦‚æœåœ¨è¾…åŠ©ç´¢å¼•ä¸­æ‰¾èšé›†ç´¢å¼•ï¼Œå¦‚<code>select id, name from xxx where name=&#39;xxx&#39;;</code>ï¼Œä¹Ÿåªéœ€è¦é€šè¿‡è¾…åŠ©ç´¢å¼•(name)æŸ¥æ‰¾åˆ°å¯¹åº”çš„ idï¼Œè¿”å› name å’Œ name ç´¢å¼•å¯¹åº”çš„ id å³å¯ï¼Œåªéœ€è¦ä¸€æ¬¡æŸ¥è¯¢ï¼›å¦‚æœæ˜¯é€šè¿‡è¾…åŠ©ç´¢å¼•æŸ¥æ‰¾å…¶ä»–å­—æ®µï¼Œåˆ™éœ€è¦å›è¡¨æŸ¥è¯¢ï¼Œå¦‚<code>select id, name, gender from xxx where name=&#39;xxx&#39;;</code></p><p>æ‰€ä»¥å°½é‡ä¸è¦ç”¨<code>select *</code>ï¼Œå®¹æ˜“å‡ºç°å›è¡¨æŸ¥è¯¢ï¼Œé™ä½æ•ˆç‡ï¼Œé™¤éæœ‰è”åˆç´¢å¼•åŒ…å«äº†æ‰€æœ‰å­—æ®µ</p><p>é¢è¯•é¢˜ï¼šä¸€å¼ è¡¨ï¼Œæœ‰å››ä¸ªå­—æ®µï¼ˆid, username, password, statusï¼‰ï¼Œç”±äºæ•°æ®é‡å¤§ï¼Œéœ€è¦å¯¹ä»¥ä¸‹ SQL è¯­å¥è¿›è¡Œä¼˜åŒ–ï¼Œè¯¥å¦‚ä½•è¿›è¡Œæ‰æ˜¯æœ€ä¼˜æ–¹æ¡ˆï¼š<br><code>select id, username, password from tb_user where username=&#39;itcast&#39;;</code></p><p>è§£ï¼šç»™ username å’Œ password å­—æ®µå»ºç«‹è”åˆç´¢å¼•ï¼Œåˆ™ä¸éœ€è¦å›è¡¨æŸ¥è¯¢ï¼Œç›´æ¥è¦†ç›–ç´¢å¼•</p><h4 id="å‰ç¼€ç´¢å¼•"><a href="#å‰ç¼€ç´¢å¼•" class="headerlink" title="å‰ç¼€ç´¢å¼•"></a>å‰ç¼€ç´¢å¼•</h4><p>å½“å­—æ®µç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼ˆvarchar, text ç­‰ï¼‰æ—¶ï¼Œæœ‰æ—¶å€™éœ€è¦ç´¢å¼•å¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œè¿™ä¼šè®©ç´¢å¼•å˜å¾—å¾ˆå¤§ï¼ŒæŸ¥è¯¢æ—¶ï¼Œæµªè´¹å¤§é‡çš„ç£ç›˜ IOï¼Œå½±å“æŸ¥è¯¢æ•ˆç‡ï¼Œæ­¤æ—¶å¯ä»¥åªé™å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†å‰ç¼€ï¼Œå»ºç«‹ç´¢å¼•ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§èŠ‚çº¦ç´¢å¼•ç©ºé—´ï¼Œä»è€Œæé«˜ç´¢å¼•æ•ˆç‡ã€‚</p><p>è¯­æ³•ï¼š<code>create index idx_xxxx on table_name(columnn(n));</code><br>å‰ç¼€é•¿åº¦ï¼šå¯ä»¥æ ¹æ®ç´¢å¼•çš„é€‰æ‹©æ€§æ¥å†³å®šï¼Œè€Œé€‰æ‹©æ€§æ˜¯æŒ‡ä¸é‡å¤çš„ç´¢å¼•å€¼ï¼ˆåŸºæ•°ï¼‰å’Œæ•°æ®è¡¨çš„è®°å½•æ€»æ•°çš„æ¯”å€¼ï¼Œç´¢å¼•é€‰æ‹©æ€§è¶Šé«˜åˆ™æŸ¥è¯¢æ•ˆç‡è¶Šé«˜ï¼Œå”¯ä¸€ç´¢å¼•çš„é€‰æ‹©æ€§æ˜¯ 1ï¼Œè¿™æ˜¯æœ€å¥½çš„ç´¢å¼•é€‰æ‹©æ€§ï¼Œæ€§èƒ½ä¹Ÿæ˜¯æœ€å¥½çš„ã€‚<br>æ±‚é€‰æ‹©æ€§å…¬å¼ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> email) <span class="operator">/</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> tb_user;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> <span class="built_in">substring</span>(email, <span class="number">1</span>, <span class="number">5</span>)) <span class="operator">/</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> tb_user;</span><br></pre></td></tr></table></figure><p>show index é‡Œé¢çš„ sub_part å¯ä»¥çœ‹åˆ°æ¥å–çš„é•¿åº¦</p><h4 id="å•åˆ—ç´¢å¼•-amp-è”åˆç´¢å¼•"><a href="#å•åˆ—ç´¢å¼•-amp-è”åˆç´¢å¼•" class="headerlink" title="å•åˆ—ç´¢å¼•&amp;è”åˆç´¢å¼•"></a>å•åˆ—ç´¢å¼•&amp;è”åˆç´¢å¼•</h4><p>å•åˆ—ç´¢å¼•ï¼šå³ä¸€ä¸ªç´¢å¼•åªåŒ…å«å•ä¸ªåˆ—<br>è”åˆç´¢å¼•ï¼šå³ä¸€ä¸ªç´¢å¼•åŒ…å«äº†å¤šä¸ªåˆ—<br>åœ¨ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œè€ƒè™‘é’ˆå¯¹äºæŸ¥è¯¢å­—æ®µå»ºç«‹ç´¢å¼•æ—¶ï¼Œå»ºè®®å»ºç«‹è”åˆç´¢å¼•ï¼Œè€Œéå•åˆ—ç´¢å¼•ã€‚</p><p>å•åˆ—ç´¢å¼•æƒ…å†µï¼š<br><code>explain select id, phone, name from tb_user where phone = &#39;17799990010&#39; and name = &#39;éŸ©ä¿¡&#39;;</code><br>è¿™å¥åªä¼šç”¨åˆ° phone ç´¢å¼•å­—æ®µ</p><h5 id="æ³¨æ„äº‹é¡¹-8"><a href="#æ³¨æ„äº‹é¡¹-8" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h5><ul><li>å¤šæ¡ä»¶è”åˆæŸ¥è¯¢æ—¶ï¼ŒMySQL ä¼˜åŒ–å™¨ä¼šè¯„ä¼°å“ªä¸ªå­—æ®µçš„ç´¢å¼•æ•ˆç‡æ›´é«˜ï¼Œä¼šé€‰æ‹©è¯¥ç´¢å¼•å®Œæˆæœ¬æ¬¡æŸ¥è¯¢</li></ul><h3 id="è®¾è®¡åŸåˆ™"><a href="#è®¾è®¡åŸåˆ™" class="headerlink" title="è®¾è®¡åŸåˆ™"></a>è®¾è®¡åŸåˆ™</h3><ol><li>é’ˆå¯¹äºæ•°æ®é‡è¾ƒå¤§ï¼Œä¸”æŸ¥è¯¢æ¯”è¾ƒé¢‘ç¹çš„è¡¨å»ºç«‹ç´¢å¼•</li><li>é’ˆå¯¹äºå¸¸ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼ˆwhereï¼‰ã€æ’åºï¼ˆorder byï¼‰ã€åˆ†ç»„ï¼ˆgroup byï¼‰æ“ä½œçš„å­—æ®µå»ºç«‹ç´¢å¼•</li><li>å°½é‡é€‰æ‹©åŒºåˆ†åº¦é«˜çš„åˆ—ä½œä¸ºç´¢å¼•ï¼Œå°½é‡å»ºç«‹å”¯ä¸€ç´¢å¼•ï¼ŒåŒºåˆ†åº¦è¶Šé«˜ï¼Œä½¿ç”¨ç´¢å¼•çš„æ•ˆç‡è¶Šé«˜</li><li>å¦‚æœæ˜¯å­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µï¼Œå­—æ®µé•¿åº¦è¾ƒé•¿ï¼Œå¯ä»¥é’ˆå¯¹äºå­—æ®µçš„ç‰¹ç‚¹ï¼Œå»ºç«‹å‰ç¼€ç´¢å¼•</li><li>å°½é‡ä½¿ç”¨è”åˆç´¢å¼•ï¼Œå‡å°‘å•åˆ—ç´¢å¼•ï¼ŒæŸ¥è¯¢æ—¶ï¼Œè”åˆç´¢å¼•å¾ˆå¤šæ—¶å€™å¯ä»¥è¦†ç›–ç´¢å¼•ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œé¿å…å›è¡¨ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡</li><li>è¦æ§åˆ¶ç´¢å¼•çš„æ•°é‡ï¼Œç´¢å¼•å¹¶ä¸æ˜¯å¤šå¤šç›Šå–„ï¼Œç´¢å¼•è¶Šå¤šï¼Œç»´æŠ¤ç´¢å¼•ç»“æ„çš„ä»£ä»·å°±è¶Šå¤§ï¼Œä¼šå½±å“å¢åˆ æ”¹çš„æ•ˆç‡</li><li>å¦‚æœç´¢å¼•åˆ—ä¸èƒ½å­˜å‚¨ NULL å€¼ï¼Œè¯·åœ¨åˆ›å»ºè¡¨æ—¶ä½¿ç”¨ NOT NULL çº¦æŸå®ƒã€‚å½“ä¼˜åŒ–å™¨çŸ¥é“æ¯åˆ—æ˜¯å¦åŒ…å« NULL å€¼æ—¶ï¼Œå®ƒå¯ä»¥æ›´å¥½åœ°ç¡®å®šå“ªä¸ªç´¢å¼•æœ€æœ‰æ•ˆåœ°ç”¨äºæŸ¥è¯¢</li></ol><h2 id="2-4-SQL-ä¼˜åŒ–"><a href="#2-4-SQL-ä¼˜åŒ–" class="headerlink" title="2.4 SQL ä¼˜åŒ–"></a>2.4 SQL ä¼˜åŒ–</h2><h3 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h3><p>æ™®é€šæ’å…¥ï¼š</p><ol><li>é‡‡ç”¨æ‰¹é‡æ’å…¥ï¼ˆä¸€æ¬¡æ’å…¥çš„æ•°æ®ä¸å»ºè®®è¶…è¿‡ 1000 æ¡ï¼‰</li><li>æ‰‹åŠ¨æäº¤äº‹åŠ¡</li><li>ä¸»é”®é¡ºåºæ’å…¥</li></ol><p>å¤§æ‰¹é‡æ’å…¥ï¼š<br>å¦‚æœä¸€æ¬¡æ€§éœ€è¦æ’å…¥å¤§æ‰¹é‡æ•°æ®ï¼Œä½¿ç”¨ insert è¯­å¥æ’å…¥æ€§èƒ½è¾ƒä½ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨ MySQL æ•°æ®åº“æä¾›çš„ load æŒ‡ä»¤æ’å…¥ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># å®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯æ—¶ï¼ŒåŠ ä¸Šå‚æ•° <span class="comment">--local-infileï¼ˆè¿™ä¸€è¡Œåœ¨bash/cmdç•Œé¢è¾“å…¥ï¼‰</span></span><br><span class="line">mysql <span class="comment">--local-infile -u root -p</span></span><br><span class="line"># è®¾ç½®å…¨å±€å‚æ•°local_infileä¸º<span class="number">1</span>ï¼Œå¼€å¯ä»æœ¬åœ°åŠ è½½æ–‡ä»¶å¯¼å…¥æ•°æ®çš„å¼€å…³</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> local_infile <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@local</span>_infile;</span><br><span class="line"># æ‰§è¡ŒloadæŒ‡ä»¤å°†å‡†å¤‡å¥½çš„æ•°æ®ï¼ŒåŠ è½½åˆ°è¡¨ç»“æ„ä¸­</span><br><span class="line">load data <span class="keyword">local</span> infile <span class="string">&#x27;/root/sql1.log&#x27;</span> <span class="keyword">into</span> <span class="keyword">table</span> <span class="string">&#x27;tb_user&#x27;</span> fields terminated <span class="keyword">by</span> <span class="string">&#x27;,&#x27;</span> lines terminated <span class="keyword">by</span> <span class="string">&#x27;\n&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="ä¸»é”®ä¼˜åŒ–"><a href="#ä¸»é”®ä¼˜åŒ–" class="headerlink" title="ä¸»é”®ä¼˜åŒ–"></a>ä¸»é”®ä¼˜åŒ–</h3><p>æ•°æ®ç»„ç»‡æ–¹å¼ï¼šåœ¨ InnoDB å­˜å‚¨å¼•æ“ä¸­ï¼Œè¡¨æ•°æ®éƒ½æ˜¯æ ¹æ®ä¸»é”®é¡ºåºç»„ç»‡å­˜æ”¾çš„ï¼Œè¿™ç§å­˜å‚¨æ–¹å¼çš„è¡¨ç§°ä¸ºç´¢å¼•ç»„ç»‡è¡¨ï¼ˆIndex organized table, IOTï¼‰</p><p>é¡µåˆ†è£‚ï¼šé¡µå¯ä»¥ä¸ºç©ºï¼Œä¹Ÿå¯ä»¥å¡«å……ä¸€èˆ¬ï¼Œä¹Ÿå¯ä»¥å¡«å…… 100%ï¼Œæ¯ä¸ªé¡µåŒ…å«äº† 2-N è¡Œæ•°æ®ï¼ˆå¦‚æœä¸€è¡Œæ•°æ®è¿‡å¤§ï¼Œä¼šè¡Œæº¢å‡ºï¼‰ï¼Œæ ¹æ®ä¸»é”®æ’åˆ—ã€‚<br>é¡µåˆå¹¶ï¼šå½“åˆ é™¤ä¸€è¡Œè®°å½•æ—¶ï¼Œå®é™…ä¸Šè®°å½•å¹¶æ²¡æœ‰è¢«ç‰©ç†åˆ é™¤ï¼Œåªæ˜¯è®°å½•è¢«æ ‡è®°ï¼ˆflagedï¼‰ä¸ºåˆ é™¤å¹¶ä¸”å®ƒçš„ç©ºé—´å˜å¾—å…è®¸è¢«å…¶ä»–è®°å½•å£°æ˜ä½¿ç”¨ã€‚å½“é¡µä¸­åˆ é™¤çš„è®°å½•åˆ°è¾¾ MERGE_THRESHOLDï¼ˆé»˜è®¤ä¸ºé¡µçš„ 50%ï¼‰ï¼ŒInnoDB ä¼šå¼€å§‹å¯»æ‰¾æœ€é è¿‘çš„é¡µï¼ˆå‰åï¼‰çœ‹çœ‹æ˜¯å¦å¯ä»¥å°†è¿™ä¸¤ä¸ªé¡µåˆå¹¶ä»¥ä¼˜åŒ–ç©ºé—´ä½¿ç”¨ã€‚</p><p>MERGE_THRESHOLDï¼šåˆå¹¶é¡µçš„é˜ˆå€¼ï¼Œå¯ä»¥è‡ªå·±è®¾ç½®ï¼Œåœ¨åˆ›å»ºè¡¨æˆ–åˆ›å»ºç´¢å¼•æ—¶æŒ‡å®š</p><blockquote><p>æ–‡å­—è¯´æ˜ä¸å¤Ÿæ¸…æ™°æ˜äº†ï¼Œå…·ä½“å¯ä»¥çœ‹è§†é¢‘é‡Œçš„ PPT æ¼”ç¤ºè¿‡ç¨‹ï¼š<a href="https://www.bilibili.com/video/BV1Kr4y1i7ru?p=90">https://www.bilibili.com/video/BV1Kr4y1i7ru?p=90</a></p></blockquote><p>ä¸»é”®è®¾è®¡åŸåˆ™ï¼š</p><ul><li>æ»¡è¶³ä¸šåŠ¡éœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œå°½é‡é™ä½ä¸»é”®çš„é•¿åº¦</li><li>æ’å…¥æ•°æ®æ—¶ï¼Œå°½é‡é€‰æ‹©é¡ºåºæ’å…¥ï¼Œé€‰æ‹©ä½¿ç”¨ AUTO_INCREMENT è‡ªå¢ä¸»é”®</li><li>å°½é‡ä¸è¦ä½¿ç”¨ UUID åšä¸»é”®æˆ–è€…æ˜¯å…¶ä»–çš„è‡ªç„¶ä¸»é”®ï¼Œå¦‚èº«ä»½è¯å·</li><li>ä¸šåŠ¡æ“ä½œæ—¶ï¼Œé¿å…å¯¹ä¸»é”®çš„ä¿®æ”¹</li></ul><h3 id="order-by-ä¼˜åŒ–"><a href="#order-by-ä¼˜åŒ–" class="headerlink" title="order by ä¼˜åŒ–"></a>order by ä¼˜åŒ–</h3><ol><li>Using filesortï¼šé€šè¿‡è¡¨çš„ç´¢å¼•æˆ–å…¨è¡¨æ‰«æï¼Œè¯»å–æ»¡è¶³æ¡ä»¶çš„æ•°æ®è¡Œï¼Œç„¶ååœ¨æ’åºç¼“å†²åŒº sort buffer ä¸­å®Œæˆæ’åºæ“ä½œï¼Œæ‰€æœ‰ä¸æ˜¯é€šè¿‡ç´¢å¼•ç›´æ¥è¿”å›æ’åºç»“æœçš„æ’åºéƒ½å« FileSort æ’åº</li><li>Using indexï¼šé€šè¿‡æœ‰åºç´¢å¼•é¡ºåºæ‰«æç›´æ¥è¿”å›æœ‰åºæ•°æ®ï¼Œè¿™ç§æƒ…å†µå³ä¸º using indexï¼Œä¸éœ€è¦é¢å¤–æ’åºï¼Œæ“ä½œæ•ˆç‡é«˜</li></ol><p>å¦‚æœ order by å­—æ®µå…¨éƒ¨ä½¿ç”¨å‡åºæ’åºæˆ–è€…é™åºæ’åºï¼Œåˆ™éƒ½ä¼šèµ°ç´¢å¼•ï¼Œä½†æ˜¯å¦‚æœä¸€ä¸ªå­—æ®µå‡åºæ’åºï¼Œå¦ä¸€ä¸ªå­—æ®µé™åºæ’åºï¼Œåˆ™ä¸ä¼šèµ°ç´¢å¼•ï¼Œexplain çš„ extra ä¿¡æ¯æ˜¾ç¤ºçš„æ˜¯<code>Using index, Using filesort</code>ï¼Œå¦‚æœè¦ä¼˜åŒ–æ‰ Using filesortï¼Œåˆ™éœ€è¦å¦å¤–å†åˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼Œå¦‚ï¼š<code>create index idx_user_age_phone_ad on tb_user(age asc, phone desc);</code>ï¼Œæ­¤æ—¶ä½¿ç”¨<code>select id, age, phone from tb_user order by age asc, phone desc;</code>ä¼šå…¨éƒ¨èµ°ç´¢å¼•</p><p>æ€»ç»“ï¼š</p><ul><li>æ ¹æ®æ’åºå­—æ®µå»ºç«‹åˆé€‚çš„ç´¢å¼•ï¼Œå¤šå­—æ®µæ’åºæ—¶ï¼Œä¹Ÿéµå¾ªæœ€å·¦å‰ç¼€æ³•åˆ™</li><li>å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•</li><li>å¤šå­—æ®µæ’åºï¼Œä¸€ä¸ªå‡åºä¸€ä¸ªé™åºï¼Œæ­¤æ—¶éœ€è¦æ³¨æ„è”åˆç´¢å¼•åœ¨åˆ›å»ºæ—¶çš„è§„åˆ™ï¼ˆASC/DESCï¼‰</li><li>å¦‚æœä¸å¯é¿å…å‡ºç° filesortï¼Œå¤§æ•°æ®é‡æ’åºæ—¶ï¼Œå¯ä»¥é€‚å½“å¢å¤§æ’åºç¼“å†²åŒºå¤§å° sort_buffer_sizeï¼ˆé»˜è®¤ 256kï¼‰</li></ul><h3 id="group-by-ä¼˜åŒ–"><a href="#group-by-ä¼˜åŒ–" class="headerlink" title="group by ä¼˜åŒ–"></a>group by ä¼˜åŒ–</h3><ul><li>åœ¨åˆ†ç»„æ“ä½œæ—¶ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•æ¥æé«˜æ•ˆç‡</li><li>åˆ†ç»„æ“ä½œæ—¶ï¼Œç´¢å¼•çš„ä½¿ç”¨ä¹Ÿæ˜¯æ»¡è¶³æœ€å·¦å‰ç¼€æ³•åˆ™çš„</li></ul><p>å¦‚ç´¢å¼•ä¸º<code>idx_user_pro_age_stat</code>ï¼Œåˆ™å¥å¼å¯ä»¥æ˜¯<code>select ... where profession order by age</code>ï¼Œè¿™æ ·ä¹Ÿç¬¦åˆæœ€å·¦å‰ç¼€æ³•åˆ™</p><h3 id="limit-ä¼˜åŒ–"><a href="#limit-ä¼˜åŒ–" class="headerlink" title="limit ä¼˜åŒ–"></a>limit ä¼˜åŒ–</h3><p>å¸¸è§çš„é—®é¢˜å¦‚<code>limit 2000000, 10</code>ï¼Œæ­¤æ—¶éœ€è¦ MySQL æ’åºå‰ 2000000 æ¡è®°å½•ï¼Œä½†ä»…ä»…è¿”å› 2000000 - 2000010 çš„è®°å½•ï¼Œå…¶ä»–è®°å½•ä¸¢å¼ƒï¼ŒæŸ¥è¯¢æ’åºçš„ä»£ä»·éå¸¸å¤§ã€‚<br>ä¼˜åŒ–æ–¹æ¡ˆï¼šä¸€èˆ¬åˆ†é¡µæŸ¥è¯¢æ—¶ï¼Œé€šè¿‡åˆ›å»ºè¦†ç›–ç´¢å¼•èƒ½å¤Ÿæ¯”è¾ƒå¥½åœ°æé«˜æ€§èƒ½ï¼Œå¯ä»¥é€šè¿‡è¦†ç›–ç´¢å¼•åŠ å­æŸ¥è¯¢å½¢å¼è¿›è¡Œä¼˜åŒ–</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ­¤è¯­å¥è€—æ—¶å¾ˆé•¿</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_sku limit <span class="number">9000000</span>, <span class="number">10</span>;</span><br><span class="line"><span class="comment">-- é€šè¿‡è¦†ç›–ç´¢å¼•åŠ å¿«é€Ÿåº¦ï¼Œç›´æ¥é€šè¿‡ä¸»é”®ç´¢å¼•è¿›è¡Œæ’åºåŠæŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">select</span> id <span class="keyword">from</span> tb_sku <span class="keyword">order</span> <span class="keyword">by</span> id limit <span class="number">9000000</span>, <span class="number">10</span>;</span><br><span class="line"><span class="comment">-- ä¸‹é¢çš„è¯­å¥æ˜¯é”™è¯¯çš„ï¼Œå› ä¸º MySQL ä¸æ”¯æŒ in é‡Œé¢ä½¿ç”¨ limit</span></span><br><span class="line"><span class="comment">-- select * from tb_sku where id in (select id from tb_sku order by id limit 9000000, 10);</span></span><br><span class="line"><span class="comment">-- é€šè¿‡è¿è¡¨æŸ¥è¯¢å³å¯å®ç°ç¬¬ä¸€å¥çš„æ•ˆæœï¼Œå¹¶ä¸”èƒ½è¾¾åˆ°ç¬¬äºŒå¥çš„é€Ÿåº¦</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_sku <span class="keyword">as</span> s, (<span class="keyword">select</span> id <span class="keyword">from</span> tb_sku <span class="keyword">order</span> <span class="keyword">by</span> id limit <span class="number">9000000</span>, <span class="number">10</span>) <span class="keyword">as</span> a <span class="keyword">where</span> s.id <span class="operator">=</span> a.id;</span><br></pre></td></tr></table></figure><h3 id="count-ä¼˜åŒ–"><a href="#count-ä¼˜åŒ–" class="headerlink" title="count ä¼˜åŒ–"></a>count ä¼˜åŒ–</h3><p>MyISAM å¼•æ“æŠŠä¸€ä¸ªè¡¨çš„æ€»è¡Œæ•°å­˜åœ¨äº†ç£ç›˜ä¸Šï¼Œå› æ­¤æ‰§è¡Œ count(*) çš„æ—¶å€™ä¼šç›´æ¥è¿”å›è¿™ä¸ªæ•°ï¼Œæ•ˆç‡å¾ˆé«˜ï¼ˆå‰ææ˜¯ä¸é€‚ç”¨ whereï¼‰ï¼›<br>InnoDB åœ¨æ‰§è¡Œ count(*) æ—¶ï¼Œéœ€è¦æŠŠæ•°æ®ä¸€è¡Œä¸€è¡Œåœ°ä»å¼•æ“é‡Œé¢è¯»å‡ºæ¥ï¼Œç„¶åç´¯è®¡è®¡æ•°ã€‚<br>ä¼˜åŒ–æ–¹æ¡ˆï¼šè‡ªå·±è®¡æ•°ï¼Œå¦‚åˆ›å»º key-value è¡¨å­˜å‚¨åœ¨å†…å­˜æˆ–ç¡¬ç›˜ï¼Œæˆ–è€…æ˜¯ç”¨ redis</p><p>count çš„å‡ ç§ç”¨æ³•ï¼š</p><ul><li>å¦‚æœ count å‡½æ•°çš„å‚æ•°ï¼ˆcount é‡Œé¢å†™çš„é‚£ä¸ªå­—æ®µï¼‰ä¸æ˜¯ NULLï¼ˆå­—æ®µå€¼ä¸ä¸º NULLï¼‰ï¼Œç´¯è®¡å€¼å°±åŠ ä¸€ï¼Œæœ€åè¿”å›ç´¯è®¡å€¼</li><li>ç”¨æ³•ï¼šcount(*)ã€count(ä¸»é”®)ã€count(å­—æ®µ)ã€count(1)</li><li>count(ä¸»é”®)è·Ÿ count(*)ä¸€æ ·ï¼Œå› ä¸ºä¸»é”®ä¸èƒ½ä¸ºç©ºï¼›count(å­—æ®µ)åªè®¡ç®—å­—æ®µå€¼ä¸ä¸º NULL çš„è¡Œï¼›count(1)å¼•æ“ä¼šä¸ºæ¯è¡Œæ·»åŠ ä¸€ä¸ª 1ï¼Œç„¶åå°± count è¿™ä¸ª 1ï¼Œè¿”å›ç»“æœä¹Ÿè·Ÿ count(*)ä¸€æ ·ï¼›count(null)è¿”å› 0</li></ul><p>å„ç§ç”¨æ³•çš„æ€§èƒ½ï¼š</p><ul><li>count(ä¸»é”®)ï¼šInnoDB å¼•æ“ä¼šéå†æ•´å¼ è¡¨ï¼ŒæŠŠæ¯è¡Œçš„ä¸»é”® id å€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ï¼ŒæœåŠ¡å±‚æ‹¿åˆ°ä¸»é”®åï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ ï¼ˆä¸»é”®ä¸å¯èƒ½ä¸ºç©ºï¼‰</li><li>count(å­—æ®µ)ï¼šæ²¡æœ‰ not null çº¦æŸçš„è¯ï¼ŒInnoDB å¼•æ“ä¼šéå†æ•´å¼ è¡¨æŠŠæ¯ä¸€è¡Œçš„å­—æ®µå€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ï¼ŒæœåŠ¡å±‚åˆ¤æ–­æ˜¯å¦ä¸º nullï¼Œä¸ä¸º nullï¼Œè®¡æ•°ç´¯åŠ ï¼›æœ‰ not null çº¦æŸçš„è¯ï¼ŒInnoDB å¼•æ“ä¼šéå†æ•´å¼ è¡¨æŠŠæ¯ä¸€è¡Œçš„å­—æ®µå€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ </li><li>count(1)ï¼šInnoDB å¼•æ“éå†æ•´å¼ è¡¨ï¼Œä½†ä¸å–å€¼ã€‚æœåŠ¡å±‚å¯¹äºè¿”å›çš„æ¯ä¸€å±‚ï¼Œæ”¾ä¸€ä¸ªæ•°å­— 1 è¿›å»ï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ </li><li>count(*)ï¼šInnoDB å¼•æ“å¹¶ä¸ä¼šæŠŠå…¨éƒ¨å­—æ®µå–å‡ºæ¥ï¼Œè€Œæ˜¯ä¸“é—¨åšäº†ä¼˜åŒ–ï¼Œä¸å–å€¼ï¼ŒæœåŠ¡å±‚ç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ </li></ul><p>æŒ‰æ•ˆç‡æ’åºï¼šcount(å­—æ®µ) &lt; count(ä¸»é”®) &lt; count(1) &lt; count(*)ï¼Œæ‰€ä»¥å°½é‡ä½¿ç”¨ count(*)</p><h3 id="update-ä¼˜åŒ–ï¼ˆé¿å…è¡Œé”å‡çº§ä¸ºè¡¨é”ï¼‰"><a href="#update-ä¼˜åŒ–ï¼ˆé¿å…è¡Œé”å‡çº§ä¸ºè¡¨é”ï¼‰" class="headerlink" title="update ä¼˜åŒ–ï¼ˆé¿å…è¡Œé”å‡çº§ä¸ºè¡¨é”ï¼‰"></a>update ä¼˜åŒ–ï¼ˆé¿å…è¡Œé”å‡çº§ä¸ºè¡¨é”ï¼‰</h3><p>InnoDB çš„è¡Œé”æ˜¯é’ˆå¯¹ç´¢å¼•åŠ çš„é”ï¼Œä¸æ˜¯é’ˆå¯¹è®°å½•åŠ çš„é”ï¼Œå¹¶ä¸”è¯¥ç´¢å¼•ä¸èƒ½å¤±æ•ˆï¼Œå¦åˆ™ä¼šä»è¡Œé”å‡çº§ä¸ºè¡¨é”ã€‚</p><p>å¦‚ä»¥ä¸‹ä¸¤æ¡è¯­å¥ï¼š<br><code>update student set no = &#39;123&#39; where id = 1;</code>ï¼Œè¿™å¥ç”±äº id æœ‰ä¸»é”®ç´¢å¼•ï¼Œæ‰€ä»¥åªä¼šé”è¿™ä¸€è¡Œï¼›<br><code>update student set no = &#39;123&#39; where name = &#39;test&#39;;</code>ï¼Œè¿™å¥ç”±äº name æ²¡æœ‰ç´¢å¼•ï¼Œæ‰€ä»¥ä¼šæŠŠæ•´å¼ è¡¨éƒ½é”ä½è¿›è¡Œæ•°æ®æ›´æ–°ï¼Œè§£å†³æ–¹æ³•æ˜¯ç»™ name å­—æ®µæ·»åŠ ç´¢å¼•</p><h1 id="3-æ•°æ®ç±»å‹"><a href="#3-æ•°æ®ç±»å‹" class="headerlink" title="3.æ•°æ®ç±»å‹"></a>3.æ•°æ®ç±»å‹</h1><h2 id="æ•´å‹"><a href="#æ•´å‹" class="headerlink" title="æ•´å‹"></a>æ•´å‹</h2><div class="table-container"><table><thead><tr><th>ç±»å‹åç§°</th><th>å–å€¼èŒƒå›´</th><th>å¤§å°</th></tr></thead><tbody><tr><td>TINYINT</td><td>-128ã€œ127</td><td>1 ä¸ªå­—èŠ‚</td></tr><tr><td>SMALLINT</td><td>-32768ã€œ32767</td><td>2 ä¸ªå®‡èŠ‚</td></tr><tr><td>MEDIUMINT</td><td>-8388608ã€œ8388607</td><td>3 ä¸ªå­—èŠ‚</td></tr><tr><td>INT (INTEGHR)</td><td>-2147483648ã€œ2147483647</td><td>4 ä¸ªå­—èŠ‚</td></tr><tr><td>BIGINT</td><td>-9223372036854775808ã€œ9223372036854775807</td><td>8 ä¸ªå­—èŠ‚</td></tr></tbody></table></div><p>æ— ç¬¦å·åœ¨æ•°æ®ç±»å‹ååŠ  unsigned å…³é”®å­—ã€‚</p><h2 id="æµ®ç‚¹å‹"><a href="#æµ®ç‚¹å‹" class="headerlink" title="æµ®ç‚¹å‹"></a>æµ®ç‚¹å‹</h2><div class="table-container"><table><thead><tr><th>ç±»å‹åç§°</th><th>è¯´æ˜</th><th>å­˜å‚¨éœ€æ±‚</th></tr></thead><tbody><tr><td>FLOAT</td><td>å•ç²¾åº¦æµ®ç‚¹æ•°</td><td>4 ä¸ªå­—èŠ‚</td></tr><tr><td>DOUBLE</td><td>åŒç²¾åº¦æµ®ç‚¹æ•°</td><td>8 ä¸ªå­—èŠ‚</td></tr><tr><td>DECIMAL (M, D)ï¼ŒDEC</td><td>å‹ç¼©çš„â€œä¸¥æ ¼â€å®šç‚¹æ•°</td><td>M+2 ä¸ªå­—èŠ‚</td></tr></tbody></table></div><h2 id="æ—¥æœŸå’Œæ—¶é—´"><a href="#æ—¥æœŸå’Œæ—¶é—´" class="headerlink" title="æ—¥æœŸå’Œæ—¶é—´"></a>æ—¥æœŸå’Œæ—¶é—´</h2><div class="table-container"><table><thead><tr><th>ç±»å‹åç§°</th><th>æ—¥æœŸæ ¼å¼</th><th>æ—¥æœŸèŒƒå›´</th><th>å­˜å‚¨éœ€æ±‚</th></tr></thead><tbody><tr><td>YEAR</td><td>YYYY</td><td>1901 ~ 2155</td><td>1 ä¸ªå­—èŠ‚</td></tr><tr><td>TIME</td><td>HH:MM:SS</td><td>-838:59:59 ~ 838:59:59</td><td>3 ä¸ªå­—èŠ‚</td></tr><tr><td>DATE</td><td>YYYY-MM-DD</td><td>1000-01-01 ~ 9999-12-3</td><td>3 ä¸ªå­—èŠ‚</td></tr><tr><td>DATETIME</td><td>YYYY-MM-DD HH:MM:SS</td><td>1000-01-01 00:00:00 ~ 9999-12-31 23:59:59</td><td>8 ä¸ªå­—èŠ‚</td></tr><tr><td>TIMESTAMP</td><td>YYYY-MM-DD HH:MM:SS</td><td>1980-01-01 00:00:01 UTC ~ 2040-01-19 03:14:07 UTC</td><td>4 ä¸ªå­—èŠ‚</td></tr></tbody></table></div><h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><div class="table-container"><table><thead><tr><th>ç±»å‹åç§°</th><th>è¯´æ˜</th><th>å­˜å‚¨éœ€æ±‚</th></tr></thead><tbody><tr><td>CHAR(M)</td><td>å›ºå®šé•¿åº¦éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>M å­—èŠ‚ï¼Œ1&lt;=M&lt;=255</td></tr><tr><td>VARCHAR(M)</td><td>å˜é•¿éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+1 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt; = M å’Œ 1&lt;=M&lt;=255</td></tr><tr><td>TINYTEXT</td><td>éå¸¸å°çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+1 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^8</td></tr><tr><td>TEXT</td><td>å°çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+2 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^16</td></tr><tr><td>MEDIUMTEXT</td><td>ä¸­ç­‰å¤§å°çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+3 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^24</td></tr><tr><td>LONGTEXT</td><td>å¤§çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+4 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^32</td></tr><tr><td>ENUM</td><td>æšä¸¾ç±»å‹ï¼Œåªèƒ½æœ‰ä¸€ä¸ªæšä¸¾å­—ç¬¦ä¸²å€¼</td><td>1 æˆ– 2 ä¸ªå­—èŠ‚ï¼Œå–å†³äºæšä¸¾å€¼çš„æ•°ç›® (æœ€å¤§å€¼ä¸º 65535)</td></tr><tr><td>SET</td><td>ä¸€ä¸ªè®¾ç½®ï¼Œå­—ç¬¦ä¸²å¯¹è±¡å¯ä»¥æœ‰é›¶ä¸ªæˆ– å¤šä¸ª SET æˆå‘˜</td><td>1ã€2ã€3ã€4 æˆ– 8 ä¸ªå­—èŠ‚ï¼Œå–å†³äºé›†åˆ æˆå‘˜çš„æ•°é‡ï¼ˆæœ€å¤š 64 ä¸ªæˆå‘˜ï¼‰</td></tr></tbody></table></div><h2 id="äºŒè¿›åˆ¶ç±»å‹"><a href="#äºŒè¿›åˆ¶ç±»å‹" class="headerlink" title="äºŒè¿›åˆ¶ç±»å‹"></a>äºŒè¿›åˆ¶ç±»å‹</h2><div class="table-container"><table><thead><tr><th>ç±»å‹åç§°</th><th>è¯´æ˜</th><th>å­˜å‚¨éœ€æ±‚</th></tr></thead><tbody><tr><td>BIT(M)</td><td>ä½å­—æ®µç±»å‹</td><td>å¤§çº¦ (M+7)/8 å­—èŠ‚</td></tr><tr><td>BINARY(M)</td><td>å›ºå®šé•¿åº¦äºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>M å­—èŠ‚</td></tr><tr><td>VARBINARY (M)</td><td>å¯å˜é•¿åº¦äºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>M+1 å­—èŠ‚</td></tr><tr><td>TINYBLOB (M)</td><td>éå¸¸å°çš„ BLOB</td><td>L+1 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^8</td></tr><tr><td>BLOB (M)</td><td>å° BLOB</td><td>L+2 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^16</td></tr><tr><td>MEDIUMBLOB (M)</td><td>ä¸­ç­‰å¤§å°çš„ BLOB</td><td>L+3 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^24</td></tr><tr><td>LONGBLOB (M)</td><td>éå¸¸å¤§çš„ BLOB</td><td>L+4 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^32</td></tr></tbody></table></div><h1 id="4-æƒé™ä¸€è§ˆè¡¨"><a href="#4-æƒé™ä¸€è§ˆè¡¨" class="headerlink" title="4.æƒé™ä¸€è§ˆè¡¨"></a>4.æƒé™ä¸€è§ˆè¡¨</h1><blockquote><p>å…·ä½“æƒé™çš„ä½œç”¨è¯¦è§<a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html" title="å®˜æ–¹æ–‡æ¡£">å®˜æ–¹æ–‡æ¡£</a></p></blockquote><p>GRANT å’Œ REVOKE å…è®¸çš„é™æ€æƒé™</p><div class="table-container"><table><thead><tr><th style="text-align:left">Privilege</th><th style="text-align:left">Grant Table Column</th><th style="text-align:left">Context</th></tr></thead><tbody><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_all"><code>ALL [PRIVILEGES]</code></a></td><td style="text-align:left">Synonym for â€œall privilegesâ€</td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_alter"><code>ALTER</code></a></td><td style="text-align:left"><code>Alter_priv</code></td><td style="text-align:left">Tables</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_alter-routine"><code>ALTER ROUTINE</code></a></td><td style="text-align:left"><code>Alter_routine_priv</code></td><td style="text-align:left">Stored routines</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create"><code>CREATE</code></a></td><td style="text-align:left"><code>Create_priv</code></td><td style="text-align:left">Databases, tables, or indexes</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-role"><code>CREATE ROLE</code></a></td><td style="text-align:left"><code>Create_role_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-routine"><code>CREATE ROUTINE</code></a></td><td style="text-align:left"><code>Create_routine_priv</code></td><td style="text-align:left">Stored routines</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-tablespace"><code>CREATE TABLESPACE</code></a></td><td style="text-align:left"><code>Create_tablespace_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-temporary-tables"><code>CREATE TEMPORARY TABLES</code></a></td><td style="text-align:left"><code>Create_tmp_table_priv</code></td><td style="text-align:left">Tables</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-user"><code>CREATE USER</code></a></td><td style="text-align:left"><code>Create_user_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-view"><code>CREATE VIEW</code></a></td><td style="text-align:left"><code>Create_view_priv</code></td><td style="text-align:left">Views</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_delete"><code>DELETE</code></a></td><td style="text-align:left"><code>Delete_priv</code></td><td style="text-align:left">Tables</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_drop"><code>DROP</code></a></td><td style="text-align:left"><code>Drop_priv</code></td><td style="text-align:left">Databases, tables, or views</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_drop-role"><code>DROP ROLE</code></a></td><td style="text-align:left"><code>Drop_role_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_event"><code>EVENT</code></a></td><td style="text-align:left"><code>Event_priv</code></td><td style="text-align:left">Databases</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_execute"><code>EXECUTE</code></a></td><td style="text-align:left"><code>Execute_priv</code></td><td style="text-align:left">Stored routines</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_file"><code>FILE</code></a></td><td style="text-align:left"><code>File_priv</code></td><td style="text-align:left">File access on server host</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_grant-option"><code>GRANT OPTION</code></a></td><td style="text-align:left"><code>Grant_priv</code></td><td style="text-align:left">Databases, tables, or stored routines</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_index"><code>INDEX</code></a></td><td style="text-align:left"><code>Index_priv</code></td><td style="text-align:left">Tables</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_insert"><code>INSERT</code></a></td><td style="text-align:left"><code>Insert_priv</code></td><td style="text-align:left">Tables or columns</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_lock-tables"><code>LOCK TABLES</code></a></td><td style="text-align:left"><code>Lock_tables_priv</code></td><td style="text-align:left">Databases</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_process"><code>PROCESS</code></a></td><td style="text-align:left"><code>Process_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_proxy"><code>PROXY</code></a></td><td style="text-align:left">See <code>proxies_priv</code> table</td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_references"><code>REFERENCES</code></a></td><td style="text-align:left"><code>References_priv</code></td><td style="text-align:left">Databases or tables</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_reload"><code>RELOAD</code></a></td><td style="text-align:left"><code>Reload_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-client"><code>REPLICATION CLIENT</code></a></td><td style="text-align:left"><code>Repl_client_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-slave"><code>REPLICATION SLAVE</code></a></td><td style="text-align:left"><code>Repl_slave_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_select"><code>SELECT</code></a></td><td style="text-align:left"><code>Select_priv</code></td><td style="text-align:left">Tables or columns</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_show-databases"><code>SHOW DATABASES</code></a></td><td style="text-align:left"><code>Show_db_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_show-view"><code>SHOW VIEW</code></a></td><td style="text-align:left"><code>Show_view_priv</code></td><td style="text-align:left">Views</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_shutdown"><code>SHUTDOWN</code></a></td><td style="text-align:left"><code>Shutdown_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_super"><code>SUPER</code></a></td><td style="text-align:left"><code>Super_priv</code></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_trigger"><code>TRIGGER</code></a></td><td style="text-align:left"><code>Trigger_priv</code></td><td style="text-align:left">Tables</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_update"><code>UPDATE</code></a></td><td style="text-align:left"><code>Update_priv</code></td><td style="text-align:left">Tables or columns</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_usage"><code>USAGE</code></a></td><td style="text-align:left">Synonym for â€œno privilegesâ€</td><td style="text-align:left">Server administration</td></tr></tbody></table></div><p>GRANT å’Œ REVOKE å…è®¸çš„åŠ¨æ€æƒé™</p><div class="table-container"><table><thead><tr><th style="text-align:left">Privilege</th><th style="text-align:left">Context</th></tr></thead><tbody><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_application-password-admin"><code>APPLICATION_PASSWORD_ADMIN</code></a></td><td style="text-align:left">Dual password administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_audit-abort-exempt"><code>AUDIT_ABORT_EXEMPT</code></a></td><td style="text-align:left">Allow queries blocked by audit log filter</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_audit-admin"><code>AUDIT_ADMIN</code></a></td><td style="text-align:left">Audit log administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_authentication-policy-admin"><code>AUTHENTICATION_POLICY_ADMIN</code></a></td><td style="text-align:left">Authentication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_backup-admin"><code>BACKUP_ADMIN</code></a></td><td style="text-align:left">Backup administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_binlog-admin"><code>BINLOG_ADMIN</code></a></td><td style="text-align:left">Backup and Replication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_binlog-encryption-admin"><code>BINLOG_ENCRYPTION_ADMIN</code></a></td><td style="text-align:left">Backup and Replication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_clone-admin"><code>CLONE_ADMIN</code></a></td><td style="text-align:left">Clone administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_connection-admin"><code>CONNECTION_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_encryption-key-admin"><code>ENCRYPTION_KEY_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_firewall-admin"><code>FIREWALL_ADMIN</code></a></td><td style="text-align:left">Firewall administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_firewall-exempt"><code>FIREWALL_EXEMPT</code></a></td><td style="text-align:left">Firewall administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_firewall-user"><code>FIREWALL_USER</code></a></td><td style="text-align:left">Firewall administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-optimizer-costs"><code>FLUSH_OPTIMIZER_COSTS</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-status"><code>FLUSH_STATUS</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-tables"><code>FLUSH_TABLES</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-user-resources"><code>FLUSH_USER_RESOURCES</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_group-replication-admin"><code>GROUP_REPLICATION_ADMIN</code></a></td><td style="text-align:left">Replication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_group-replication-stream"><code>GROUP_REPLICATION_STREAM</code></a></td><td style="text-align:left">Replication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_innodb-redo-log-archive"><code>INNODB_REDO_LOG_ARCHIVE</code></a></td><td style="text-align:left">Redo log archiving administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_ndb-stored-user"><code>NDB_STORED_USER</code></a></td><td style="text-align:left">NDB Cluster</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_passwordless-user-admin"><code>PASSWORDLESS_USER_ADMIN</code></a></td><td style="text-align:left">Authentication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_persist-ro-variables-admin"><code>PERSIST_RO_VARIABLES_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-applier"><code>REPLICATION_APPLIER</code></a></td><td style="text-align:left"><code>PRIVILEGE_CHECKS_USER</code> for a replication channel</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-slave-admin"><code>REPLICATION_SLAVE_ADMIN</code></a></td><td style="text-align:left">Replication administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_resource-group-admin"><code>RESOURCE_GROUP_ADMIN</code></a></td><td style="text-align:left">Resource group administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_resource-group-user"><code>RESOURCE_GROUP_USER</code></a></td><td style="text-align:left">Resource group administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_role-admin"><code>ROLE_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_session-variables-admin"><code>SESSION_VARIABLES_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_set-user-id"><code>SET_USER_ID</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_show-routine"><code>SHOW_ROUTINE</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_system-user"><code>SYSTEM_USER</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_system-variables-admin"><code>SYSTEM_VARIABLES_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_table-encryption-admin"><code>TABLE_ENCRYPTION_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_version-token-admin"><code>VERSION_TOKEN_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr><tr><td style="text-align:left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_xa-recover-admin"><code>XA_RECOVER_ADMIN</code></a></td><td style="text-align:left">Server administration</td></tr></tbody></table></div><h1 id="5-å›¾å½¢åŒ–ç•Œé¢å·¥å…·"><a href="#5-å›¾å½¢åŒ–ç•Œé¢å·¥å…·" class="headerlink" title="5.å›¾å½¢åŒ–ç•Œé¢å·¥å…·"></a>5.å›¾å½¢åŒ–ç•Œé¢å·¥å…·</h1><ul><li>Workbench(å…è´¹): <a href="http://dev.mysql.com/downloads/workbench/">http://dev.mysql.com/downloads/workbench/</a></li><li>navicat(æ”¶è´¹ï¼Œè¯•ç”¨ç‰ˆ 30 å¤©): <a href="https://www.navicat.com/en/download/navicat-for-mysql">https://www.navicat.com/en/download/navicat-for-mysql</a></li><li>Sequel Pro(å¼€æºå…è´¹ï¼Œä»…æ”¯æŒ Mac OS): <a href="http://www.sequelpro.com/">http://www.sequelpro.com/</a></li><li>HeidiSQL(å…è´¹): <a href="http://www.heidisql.com/">http://www.heidisql.com/</a></li><li>phpMyAdmin(å…è´¹): <a href="https://www.phpmyadmin.net/">https://www.phpmyadmin.net/</a></li><li>SQLyog: <a href="https://sqlyog.en.softonic.com/">https://sqlyog.en.softonic.com/</a></li></ul><h1 id="6-å®‰è£…"><a href="#6-å®‰è£…" class="headerlink" title="6.å®‰è£…"></a>6.å®‰è£…</h1><h1 id="7-å°æŠ€å·§"><a href="#7-å°æŠ€å·§" class="headerlink" title="7.å°æŠ€å·§"></a>7.å°æŠ€å·§</h1><ol><li>åœ¨ SQL è¯­å¥ä¹‹ååŠ ä¸Š<code>\G</code>ä¼šå°†ç»“æœçš„è¡¨æ ¼å½¢å¼è½¬æ¢æˆè¡Œæ–‡æœ¬å½¢å¼</li><li>æŸ¥çœ‹ Mysql æ•°æ®åº“å ç”¨ç©ºé—´ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> table_schema &quot;Database Name&quot;</span><br><span class="line">     , <span class="built_in">SUM</span>(data_length <span class="operator">+</span> index_length) <span class="operator">/</span> (<span class="number">1024</span> <span class="operator">*</span> <span class="number">1024</span>) &quot;Database Size in MB&quot;</span><br><span class="line"><span class="keyword">FROM</span> information_schema.TABLES</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> table_schema;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">è½¬è‡ªè·¯é€”åšå®¢çš„MySQLæ€»ç»“ï¼Œæ¥æºä¸ºé»‘é©¬ç¨‹åºå‘˜çš„MySQLè§†é¢‘è¯¾</summary>
    
    
    
    <category term="æ•°æ®åº“" scheme="https://www.fomal.cc/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MySQL" scheme="https://www.fomal.cc/tags/MySQL/"/>
    
    <category term="å…³ç³»å‹æ•°æ®åº“" scheme="https://www.fomal.cc/tags/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>å•è°ƒé˜Ÿåˆ—ä¸“é¢˜</title>
    <link href="https://www.fomal.cc/posts/cedcefe1.html"/>
    <id>https://www.fomal.cc/posts/cedcefe1.html</id>
    <published>2022-08-12T06:43:42.000Z</published>
    <updated>2022-08-12T06:43:42.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-å‰‘æŒ‡-Offer-59-I-æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼"><a href="#1-å‰‘æŒ‡-Offer-59-I-æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼" class="headerlink" title="1.å‰‘æŒ‡ Offer 59 - I. æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼"></a><a href="https://leetcode.cn/problems/hua-dong-chuang-kou-de-zui-da-zhi-lcof/">1.å‰‘æŒ‡ Offer 59 - I. æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼</a></h3><p>ç»™å®šä¸€ä¸ªæ•°ç»„ nums å’Œæ»‘åŠ¨çª—å£çš„å¤§å° kï¼Œè¯·æ‰¾å‡ºæ‰€æœ‰æ»‘åŠ¨çª—å£é‡Œçš„æœ€å¤§å€¼ã€‚</p><p>ç¤ºä¾‹ï¼š</p><p><img src="../images/p23.jpg" alt="p23"></p><p><strong>æ€è·¯</strong></p><p><strong>å•è°ƒåŒç«¯é˜Ÿåˆ—+æ»‘çª—ï¼šO(N)</strong></p><p> æ³¨æ„:</p><p><strong>1.è¾¹ç•Œæ¡ä»¶:</strong></p><p>1.1 è¾“å…¥æ•°ç»„ä¸ºç©ºçš„æƒ…å†µï¼›</p><p>1.2 é˜Ÿåˆ—å¼¹å‡ºæ—¶æ³¨æ„å‰é¢åŠ ä¸Šåˆ¤ç©ºæ“ä½œï¼›</p><p>1.3 peekFirst()ä¸pollFirst()çš„ç”¨æ³•åŒºåˆ«ï¼›</p><p><strong>2.æ€è·¯æº¯æºï¼š</strong></p><p>è¿™é‡Œå¦‚æœç”¨æš´åŠ›éå†çš„è¯ï¼Œçª—å£æ¯å˜åŒ–ä¸€æ¬¡éƒ½è¦éå†æ‰€æœ‰å…ƒç´ æ‰¾å‡ºå½“å‰çª—å£çš„æœ€å¤§å€¼ï¼Œæ¸è¿›æ—¶é—´å¤æ‚åº¦ä¸º:<strong>O(N*K)</strong></p><p>è¿™é‡Œçš„è¾“å…¥ä¸Šé™ä¸º10^5è¯´æ˜æ€»çš„è¿ç®—é‡è¦è¾¾åˆ°10^10ï¼Œç»å¯¹ä¼šè¶…æ—¶çš„ï¼Œ10^5çš„è¾“å…¥ç†è®ºå¤æ‚åº¦ä¸Šé™å¤§è‡´åœ¨<strong>O(NlogN)</strong></p><p>å› æ­¤å¿…é¡»è¦å¯»æ‰¾å¤æ‚åº¦æ›´ä½çš„ç®—æ³•è¿›è¡Œæ±‚è§£</p><p>é‚£ä¹ˆæœ€æ ¸å¿ƒçš„é—®é¢˜å°±æ¥äº†ï¼Œå¦‚ä½•åœ¨æ¯”O(N)å°çš„æ—¶é—´å¤æ‚åº¦å†…æ‰¾å‡ºçš„çª—å£æœ€å¤§å€¼å‘¢?</p><p>åŠæ³•å…¶å®æœ‰å‡ ç§ï¼šä¸€ç§å¯ä»¥ç”¨æ ‘å½¢æ•°æ®ç»“æ„å¦‚<strong>å †ã€çº¢é»‘æ ‘</strong>ç­‰ï¼Œæ­¤æ—¶æ—¶é—´å¤æ‚åº¦ä¸ºO(logN)</p><p>è¿˜æœ‰ä¸€ç§å°±æ˜¯<strong>å•è°ƒåŒç«¯é˜Ÿåˆ—</strong>ï¼šå•è°ƒåŒç«¯é˜Ÿåˆ—å†…éƒ¨ç»´æŠ¤çš„ä»…ä»…æ˜¯å¯¹äºå½“å‰çª—å£æ‰€æœ‰å¯èƒ½çš„æœ€å¤§å€¼</p><p>ä¸”æœ€å¤§å€¼çš„é¡ºåºä¸çª—å£çš„èµ°åŠ¿ä¸€è‡´ï¼Œé˜Ÿå¤´ä½ç½®çš„æœ€å¤§å€¼æ˜¯ç›®å‰çª—å£çš„æœ€å¤§å€¼ï¼Œå¹¶ä¸”æ˜¯å³å°†è¦ç¬¬ä¸€ä¸ªé€€å‡ºçš„</p><p>egï¼šé˜Ÿå¤´[6, 5, 4, 3]é˜Ÿå°¾</p><p><strong>å½“æœ‰æ–°å…ƒç´ nums[i]åŠ å…¥æ—¶æ˜¯ä»é˜Ÿå°¾åŠ å…¥çš„ï¼š</strong></p><p>1.å½“<strong>nums[i]&gt;é˜Ÿå°¾</strong>æ—¶ï¼Œé˜Ÿå°¾çš„å¯ä»¥å¼¹å‡ºã€‚</p><p>å› ä¸ºé˜Ÿå°¾çš„éƒ½ä¸å¤Ÿnums[i]å¤§ï¼Œè€Œçª—å£çš„ä¸­è‚¯å®šæ˜¯å‰é¢çš„é˜Ÿå°¾åœ¨å‰é¢ï¼Œå› æ­¤å½“å‰çŠ¶æ€çš„æœ€å¤§å€¼å¿…å®šè½®ä¸åˆ°é˜Ÿå°¾</p><p>è½®äº†nums[i]æ‰ä¼šè½®åˆ°é˜Ÿå°¾çš„å…ƒç´ ï¼Œæ¢å¥è¯è¯´å°±æ˜¯<strong>é˜Ÿå°¾å…ƒç´ ä¸å¯èƒ½æˆä¸ºçª—å£æœ€å¤§å€¼</strong></p><p>2.å½“<strong>nums[i]&lt;=é˜Ÿå°¾</strong>æ—¶ï¼Œæ­¤æ—¶å¯ä»¥è®©é˜Ÿåˆ—ä¿æŒå•è°ƒé€’å¢(éä¸¥æ ¼)ï¼Œnums[i]ç›´æ¥åŠ å…¥é˜Ÿå°¾ã€‚</p><p>å› ä¸ºé˜Ÿå°¾çš„å…ƒç´ &gt;=nums[i]ï¼Œè¿˜æ˜¯æœ‰å¯èƒ½æˆä¸ºæœ€å¤§å€¼çš„ï¼Œè¯•æƒ³ä¸€ä¸‹çª—å£åªå‰©ä¸‹ <strong>[é˜Ÿå°¾ï¼Œnums[i]]</strong></p><p>å› æ­¤é˜Ÿå°¾æ˜¯ä¸€å®šè¦ä¿ç•™çš„ï¼Œè€Œnums[i]ä¹Ÿè¦åŠ å…¥ï¼Œå› ä¸ºåé¢å¯èƒ½æœ‰æ¯”nums[i]æ›´å°çš„ï¼</p><p><strong>å½“æœ‰å…ƒç´ è¦å¼¹å‡ºæ—¶æ˜¯ä»é˜Ÿå¤´å¼¹å‡ºçš„ï¼š</strong></p><p>ç»´æŠ¤çª—å£çš„è¿‡ç¨‹ä¸­ï¼Œæ€»æœ‰å…ƒç´ ä»å·¦è¾¹é€€å‡ºã€‚è‹¥è¯¥å…ƒç´ æ˜¯é˜Ÿå¤´å…ƒç´ å°±è¦å¼¹å‡ºï¼Œå› ä¸ºå•è°ƒé˜Ÿåˆ—ç»´æŠ¤çš„æ˜¯<strong>çª—å£æœ¬èº«çš„å¯èƒ½çš„æœ€å¤§å€¼</strong>ï¼Œæ‰€ä»¥è‚¯å®šè¦ä¸çª—å£åŒæ­¥çš„ï¼›é‚£ä¸æ˜¯é˜Ÿå¤´çš„å…ƒç´ å¼¹å‡ºçª—å£ä¸ºä½•ä¸ç”¨ç®¡ï¼Ÿå› ä¸ºè¿™äº›å…ƒç´ å¼¹å‡ºä¸ä¼šå½±å“çª—å£çš„æœ€å¤§å€¼ï¼Œeg:[1, 3, -1, -2]ï¼Œæ­¤æ—¶-2è¦åŠ å…¥çª—å£ï¼Œ1è¦å¼¹å‡ºçª—å£ï¼›æ­¤æ—¶é˜Ÿåˆ—å°¾[3, -1ï¼Œ-2]ï¼Œæœ€å¤§å€¼å§‹ç»ˆè¿˜æ˜¯3ï¼Œè€Œ1çš„ä½ç½®åœ¨3å‡ºç°ä¹‹æ—¶å·²ç»ä¸å¯èƒ½æˆä¸ºçª—å£æœ€å¤§å€¼ï¼Œè°å«å¥¹æ•°å€¼å°å¹¶ä¸”å…ˆäº3å‡ºç°ï¼å› æ­¤1çš„é€€å‡ºä¸ä¼šå½±å“çª—å£çš„æœ€å¤§å€¼ï¼Œè€Œ3çš„é€€å‡ºå°±ä¼šä½¿å¾—æœ€å¤§å€¼ä»3å˜ä¸º-1ã€‚å¥½å¥½æ€è€ƒä¸€ä¸‹â€¦â€¦.</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ç»™å®šä¸€ä¸ªæ•°ç»„ nums å’Œæ»‘åŠ¨çª—å£çš„å¤§å° kï¼Œè¯·æ‰¾å‡ºæ‰€æœ‰æ»‘åŠ¨çª—å£é‡Œçš„æœ€å¤§å€¼</span></span><br><span class="line"><span class="comment">æ ¸å¿ƒæ–¹æ³•:å•è°ƒåŒç«¯é˜Ÿåˆ—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] maxSlidingWindow(<span class="type">int</span>[] nums, <span class="type">int</span> k) &#123;</span><br><span class="line">    <span class="keyword">if</span>(nums == <span class="literal">null</span> || nums.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nums.length;</span><br><span class="line">    <span class="comment">// è¿™é‡Œçš„é•¿åº¦å¯ä»¥é€šè¿‡ä¸¾ä¾‹å­å¾—åˆ°:len=4,k=2,çª—å£æ•°ç›®ä¸º3,å³len-k+1</span></span><br><span class="line">    <span class="type">int</span>[] res = <span class="keyword">new</span> <span class="title class_">int</span>[len - k + <span class="number">1</span>];</span><br><span class="line">    <span class="comment">// åˆ›å»ºå•è°ƒé€’å¢çš„é˜Ÿåˆ—(é˜Ÿå°¾-&gt;é˜Ÿå¤´),é˜Ÿå¤´ä¸ºæ­¤æ—¶çª—å£çš„æœ€å¤§å€¼</span></span><br><span class="line">    <span class="comment">// å¦‚:é˜Ÿå¤´[6,5,4,3,2]é˜Ÿå°¾,å½“nums[i]&gt;é˜Ÿå°¾å…ƒç´ æ—¶,ä¸ºäº†ç»´æŠ¤é€’å¢çš„è¶‹åŠ¿å°†é˜Ÿå°¾å…ƒç´ å¼¹å‡º</span></span><br><span class="line">    <span class="comment">// å½“ä¸”ä»…å½“nums[i]&lt;=é˜Ÿå°¾å…ƒç´ æ—¶,æ‰å¯ä»¥ç»´æŠ¤é˜Ÿåˆ—çš„é€’å¢,æ­¤æ—¶nums[i]åŠ å…¥é˜Ÿå°¾</span></span><br><span class="line">    Deque&lt;Integer&gt; que = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–çª—å£nums[0,k-1]å…¥é˜Ÿ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; k; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span> (!que.isEmpty() &amp;&amp; que.peekLast() &lt; nums[i]) que.pollLast();</span><br><span class="line">        <span class="comment">// å½“ä¸”ä»…å½“nums[i]&lt;=é˜Ÿå°¾å…ƒç´ æ—¶æˆ–è€…queä¸ºç©ºæ—¶nums[i]å…¥é˜Ÿ</span></span><br><span class="line">        que.addLast(nums[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è®°å½•æœ€å¤§å€¼çš„æ•°ç»„ç´¢å¼•</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    res[index++] = que.peekFirst();</span><br><span class="line">    <span class="comment">// éå†ååºçª—å£çš„æœ€å¤§å€¼(ä»¥çª—å£ç»“æŸç´¢å¼•ä¸ºæ ‡è®°)</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> k; j &lt; len; j++) &#123;</span><br><span class="line">        <span class="comment">// åŠ å…¥nums[j]åŒæ—¶ç»´æŠ¤é€’å¢é˜Ÿåˆ—</span></span><br><span class="line">        <span class="keyword">while</span> (!que.isEmpty() &amp;&amp; nums[j] &gt; que.peekLast()) que.pollLast();</span><br><span class="line">        que.addLast(nums[j]);</span><br><span class="line">        <span class="comment">// å¼¹å‡ºnums[j-k]åŒæ—¶ç»´æŠ¤çª—å£å…ƒç´ å¯¹åº”</span></span><br><span class="line">        <span class="keyword">if</span>(nums[j - k] == que.peekFirst()) que.pollFirst();</span><br><span class="line">        <span class="comment">// è®°å½•å½“å‰çª—å£çš„æœ€å¤§å€¼è¿›res(è¿™é‡Œåªæ˜¯å¼¹å‡ºæ¥çœ‹çœ‹æœ€å¤§å€¼æ˜¯å¤šå°‘,ä¸è¦çœŸçš„å¼¹å‡ºæ¥äº†)</span></span><br><span class="line">        res[index++] = que.peekFirst();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-å‰‘æŒ‡-Offer-59-II-é˜Ÿåˆ—çš„æœ€å¤§å€¼"><a href="#2-å‰‘æŒ‡-Offer-59-II-é˜Ÿåˆ—çš„æœ€å¤§å€¼" class="headerlink" title="2.å‰‘æŒ‡ Offer 59 - II. é˜Ÿåˆ—çš„æœ€å¤§å€¼"></a><a href="https://leetcode.cn/problems/dui-lie-de-zui-da-zhi-lcof/">2.å‰‘æŒ‡ Offer 59 - II. é˜Ÿåˆ—çš„æœ€å¤§å€¼</a></h3><p>è¯·å®šä¹‰ä¸€ä¸ªé˜Ÿåˆ—å¹¶å®ç°å‡½æ•° max_value å¾—åˆ°é˜Ÿåˆ—é‡Œçš„æœ€å¤§å€¼ã€‚</p><p>è¦æ±‚å‡½æ•°max_valueã€push_back å’Œ pop_front çš„å‡æ‘Šæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)ã€‚</p><p>è‹¥é˜Ÿåˆ—ä¸ºç©ºï¼Œpop_front å’Œ max_value éœ€è¦è¿”å› -1</p><p>è¾“å…¥:</p><p>[â€œMaxQueueâ€,â€push_backâ€,â€push_backâ€,â€max_valueâ€,â€pop_frontâ€,â€max_valueâ€]</p><p>[[],[1],[2],[],[],[]]</p><p>è¾“å‡º: </p><p>[null,null,null,2,1,2]</p><p><strong>æ€è·¯ï¼š</strong></p><p>â€‹    <strong>å•è°ƒé€’å¢é˜Ÿåˆ—O(1)å†…æ‰¾å‡ºæœ€å¤§å€¼</strong>:</p><p>â€‹    åˆ©ç”¨å•è°ƒé˜Ÿåˆ—ç»´æŠ¤å½“å‰é˜Ÿåˆ—ä¸­çš„å¯èƒ½çš„æœ€å¤§å€¼ï¼Œç„¶åå¯ä»¥ä»¥O(1)çš„æ—¶é—´å¤æ‚åº¦å†…è¿”å›æœ€å¤§å€¼</p><p>â€‹    æ³¨æ„ï¼š</p><p>1.å¢åˆ å…ƒç´ ä¿æŒä¸¤ä¸ªé˜Ÿåˆ—å…ƒç´ åŒæ­¥</p><p>2.æ¯å½“æ‰§è¡Œé˜Ÿåˆ—çš„æ–¹æ³•æ—¶éƒ½è¦è¿›è¡Œåˆ¤ç©ºæ“ä½œ</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * èƒ½è·å–æœ€å¤§å€¼çš„é˜Ÿåˆ—ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MaxQueue</span> &#123;</span><br><span class="line">    <span class="comment">// æ™®é€šé˜Ÿåˆ—:æŒ‰é¡ºåºå­˜å‚¨æ‰€æœ‰å…ƒç´ </span></span><br><span class="line">    Deque&lt;Integer&gt; que;</span><br><span class="line">    <span class="comment">// å•è°ƒé€’å¢é˜Ÿåˆ—:ç”¨äºç»´æŠ¤å½“å‰é˜Ÿåˆ—ä¸­çš„æœ€å¤§å€¼</span></span><br><span class="line">    Deque&lt;Integer&gt; maxQue;</span><br><span class="line">    <span class="comment">/*æ„é€ å™¨*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MaxQueue</span><span class="params">()</span> &#123;</span><br><span class="line">        que = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        maxQue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*è·å–æœ€å¤§å€¼*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">max_value</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// æœ€å¤§å€¼å°±æ˜¯maxQueçš„é˜Ÿå¤´å…ƒç´ (åˆ«å¿˜äº†åˆ¤ç©º)</span></span><br><span class="line">        <span class="keyword">return</span> maxQue.isEmpty() ? -<span class="number">1</span> : maxQue.peekFirst();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*ä»é˜Ÿå°¾åŠ å…¥å…ƒç´ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push_back</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="comment">// åŠ å…¥å…ƒç´ :queç›´æ¥åŠ ,maxQueè¦ä¿æŒé˜Ÿåˆ—éä¸¥æ ¼é€’å¢(é˜Ÿå°¾-&gt;é˜Ÿå¤´)</span></span><br><span class="line">        que.add(value);</span><br><span class="line">        <span class="keyword">while</span> (!maxQue.isEmpty() &amp;&amp; value &gt; maxQue.peekLast()) maxQue.pollLast();</span><br><span class="line">        <span class="comment">// å¼¹å‡ºé˜Ÿå°¾æ¯”valueå°çš„å€¼å,valueåŠ å…¥é˜Ÿå°¾,ä¿æŒmaxQueå•å¢</span></span><br><span class="line">        maxQue.addLast(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*ä»é˜Ÿå¤´å¼¹å‡ºå…ƒç´ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop_front</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// ç§»é™¤å…ƒç´ :queç›´æ¥ç§»é™¤,maxQueè¦ä¿æŒä¸queåŒæ­¥</span></span><br><span class="line">        <span class="comment">// ä¸å­˜åœ¨å°±è¦å¼¹å‡º-1</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">poll</span> <span class="operator">=</span> que.isEmpty() ? -<span class="number">1</span> : que.pollFirst();</span><br><span class="line">        <span class="comment">// è¿™é‡Œä¹Ÿè¦åˆ¤ç©º</span></span><br><span class="line">        <span class="keyword">if</span>(poll != -<span class="number">1</span> &amp;&amp; poll == maxQue.peekFirst()) maxQue.pollFirst();</span><br><span class="line">        <span class="keyword">return</span> poll;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">å•è°ƒé˜Ÿåˆ—å¯ä»¥ä»¥O(1)æ—¶é—´å¤æ‚åº¦å†…ç»´æŠ¤å‡ºæŸä¸ªçª—å£çš„æœ€å€¼</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fomal.cc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="å•è°ƒé˜Ÿåˆ—" scheme="https://www.fomal.cc/tags/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>å›æº¯ç®—æ³•ä¸“é¢˜</title>
    <link href="https://www.fomal.cc/posts/7e6eaabb.html"/>
    <id>https://www.fomal.cc/posts/7e6eaabb.html</id>
    <published>2022-08-12T06:39:25.000Z</published>
    <updated>2022-09-08T12:08:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å›æº¯ç®—æ³•çš„ä¸¤ç§å†™æ³•"><a href="#å›æº¯ç®—æ³•çš„ä¸¤ç§å†™æ³•" class="headerlink" title="å›æº¯ç®—æ³•çš„ä¸¤ç§å†™æ³•"></a>å›æº¯ç®—æ³•çš„ä¸¤ç§å†™æ³•</h2><p><strong>é¢˜ç›®æè¿°ï¼ˆé¢è¯•é¢˜ï¼‰</strong>ï¼šä¸ºäº†è¿æ¥æ–°åŒå­¦çš„åŠ å…¥ï¼Œå°é£é£ç»„ç»‡äº†ä¸°å¯Œå¤šå½©çš„æ´»åŠ¨ï¼Œè¿™ä¸€æ¬¡ä»–éšæœºåœ¨åŒºçš„æ ‘ç¯±è¿·å®«ä¸­æ”¾ç½®äº†ä¸€ä¸ªå¥–å“ï¼Œè¯·å¸®åŠ©åŒå­¦ä»¥æœ€å¿«çš„é€Ÿåº¦æ‰¾åˆ°å¥–å“å§ã€‚æ ‘ç¯±è¿·å®«æ˜¯ä¸€ä¸ª4x4çš„æ­£æ–¹å½¢ï¼Œç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„æ¥è¡¨ç¤ºï¼Œå…¶ä¸­0ä»£è¡¨å¯ä»¥èµ°çš„è·¯ï¼Œ1ä»£è¡¨æ ‘ç¯±ä¸å¯è¡Œèµ°ï¼Œ8è¡¨ç¤ºå¥–å“ã€‚è¿·å®«æœ‰ä¸€åˆ°å¤šä¸ªå…¥å£ï¼Œä¸”éšæœºåˆ†å¸ƒã€‚è¯·å¸®åŠ©æ–°äººæ‰¾å‡ºåˆ°å¥–å“çš„æœ€çŸ­è·¯å¾„å¹¶è¾“å‡ºã€‚</p><p><strong>æ€è·¯</strong>ï¼šå’‹ä¸€çœ‹è¿™é¢˜æ•°æ®èŒƒå›´å°å¾—ç¦»è°±ï¼Œåªæœ‰4*4=16ç§æƒ…å†µï¼Œå³ä½¿æ˜¯æŒ‡æ•°çº§åˆ«çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿèƒ½æ¥å—ã€‚æ±‚æœ€çŸ­è·¯çš„é—®é¢˜ä¸€èˆ¬æœ‰ï¼šè®°å¿†åŒ–æœç´¢ã€åŠ¨æ€è§„åˆ’ã€BFSã€Dijkstraã€Floydç­‰æ–¹æ³•ï¼Œä½†æ˜¯è¿™é“é¢˜è¦æ±‚å‡ºæœ€çŸ­çš„è·¯å¾„æ˜¯ä»€ä¹ˆï¼Œæ¶‰åŠåˆ°è¿™ç§è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦è¿›è¡Œæ±‚è§£çš„ï¼Œè€ƒè™‘ç”¨æš´åŠ›å›æº¯ã€‚æˆ‘ä»¬å¯ä»¥æšä¸¾æ¯ä¸ªåˆæ³•çš„å‡ºå‘ç‚¹ï¼Œä»æ¯ä¸ªåˆæ³•çš„å‡ºå‘ç‚¹è¿›è¡ŒDFSæœç´¢ï¼Œæœç´¢è¿‡ç¨‹ä¸­å¯é€‰çš„ä¸‹ä¸€æ­¥ä¸ºï¼šä¸Šä¸‹å·¦å³&amp;&amp;åˆæ³•ï¼›åŒæ—¶ä¸ºäº†é¿å…èµ°å›å¤´è·¯å¯¼è‡´StackOverFlowè¦å½“å‰è½®æœç´¢è¿‡çš„èŠ‚ç‚¹è¿›è¡Œæ ‡è®°ï¼Œæœç´¢çš„åŒæ—¶è¦è¿›è¡Œè®°å½•ï¼Œæœç´¢å®Œäº†è¦è¿›è¡Œæ’¤å›ã€‚é‚£ä¹ˆå‡ºå£åªæœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯æ‰¾åˆ°ç¤¼å“äº†ï¼Œé€€å‡ºçš„æ—¶å€™æˆ‘ä»¬è®°å½•å½“å‰è®°å½•çš„é•¿åº¦å¹¶ä¸ä¹‹å‰çš„æ¯”è¾ƒï¼Œå½“ä¸”ä»…å½“é•¿åº¦æ¯”ä¹‹å‰çš„å°æ‰æ˜¯æœ€çŸ­è·¯å¾„ã€‚</p><p><strong>æ—¶é—´å¤æ‚åº¦:O(N^3) ç©ºé—´å¤æ‚åº¦:O(N^2)</strong></p><h3 id="å†™æ³•1ï¼šå…ˆå¤„ç†å†è¿›è¡Œdfs"><a href="#å†™æ³•1ï¼šå…ˆå¤„ç†å†è¿›è¡Œdfs" class="headerlink" title="å†™æ³•1ï¼šå…ˆå¤„ç†å†è¿›è¡Œdfs"></a>å†™æ³•1ï¼šå…ˆå¤„ç†å†è¿›è¡Œdfs</h3><p>å…ˆå¤„ç†å®Œå†è¿›è¡ŒDFSçš„æ–¹å¼ï¼Œè¦æ±‚åœ¨æ¯ä¸ªDFSè¿›è¡Œä¹‹å‰å°±è¿›è¡Œå¤„ç†ï¼ˆæ ‡è®°è®¿é—®+è®°å½•æ•°æ®ï¼‰ï¼Œæ¯ä¸ªDFSç»“æŸä¹‹åè¦è¿›è¡Œå¯¹åº”çš„æ’¤å›ï¼ˆæ³¨æ„æ˜¯æ¯ä¸ªDFSæ–¹æ³•ï¼‰ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯éå†è¯¥å±‚çš„ä¸‹ä¸€ä¸ªé€‰æ‹©æ—¶æ˜¯æ­£ç¡®çš„çŠ¶æ€ã€‚</p><p>PSï¼šå…¶å®è¿™é¢˜è¿˜å¯ä»¥è¿›è¡Œä¸€äº›å‰ªæå¤„ç†åŠ é€Ÿï¼šæ¯”å¦‚ä»æŸä¸ªè¾¹ç¼˜å‡ºå‘ç‚¹åˆ°è¾¾ä¸æ˜¯è¿™ä¸ªå‡ºå‘ç‚¹çš„è¾¹ç¼˜çš„æƒ…å†µå¯ä»¥è¿›è¡Œå‰ªæåŠ é€Ÿã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">t1</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span>[][] grid = &#123;</span><br><span class="line">                &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;,</span><br><span class="line">                &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;,</span><br><span class="line">                &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">8</span>, <span class="number">1</span>&#125;,</span><br><span class="line">                &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>&#125;&#125;;</span><br><span class="line">        List&lt;<span class="type">int</span>[]&gt; res = winMaze(grid);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span>[] p : res) &#123;</span><br><span class="line">            System.out.println(Arrays.toString(p));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// reså­˜å‚¨å½“å‰éå†åˆ°çš„æœ€çŸ­è·¯å¾„ï¼Œcurå­˜å‚¨å½“å‰æ­£åœ¨éå†çš„è·¯å¾„</span></span><br><span class="line">    List&lt;<span class="type">int</span>[]&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(), cur = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> <span class="number">0x3f3f3f3f</span>;   <span class="comment">// å½“å‰æ‰¾åˆ°çš„æœ€çŸ­è·¯å¾„é•¿åº¦ï¼Œåˆå§‹åŒ–ä¸ºINF</span></span><br><span class="line">    <span class="type">int</span>[][] dirs = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;&#125;;  <span class="comment">// æ–¹å‘å‘é‡</span></span><br><span class="line">    <span class="type">boolean</span>[][] vis = <span class="keyword">new</span> <span class="title class_">boolean</span>[<span class="number">4</span>][<span class="number">4</span>];    <span class="comment">// æ ‡è®°æ˜¯å¦è¢«è®¿é—®</span></span><br><span class="line">    <span class="type">int</span>[][] grid;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;<span class="type">int</span>[]&gt; winMaze(<span class="type">int</span>[][] _grid) &#123;</span><br><span class="line">        grid = _grid;</span><br><span class="line">        <span class="comment">// æšä¸¾æ¯ä¸ªåˆæ³•èµ·ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line">                <span class="comment">// ä»…ä»…è¾¹ç¼˜ä¸”å¯ä»¥èµ°çš„æ ¼å­æ‰è¿›è¡Œdfs</span></span><br><span class="line">                <span class="keyword">if</span> ((i == <span class="number">0</span> || i == <span class="number">3</span> || j == <span class="number">0</span> ||j == <span class="number">3</span>) &amp;&amp; grid[i][j] == <span class="number">0</span>) &#123;</span><br><span class="line">                    vis[i][j] = <span class="literal">true</span>;   <span class="comment">// è¿›å…¥dfsä¹‹å‰å°±è¿›è¡Œæ ‡è®°å’Œå¤„ç†</span></span><br><span class="line">                    cur.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;i, j&#125;);</span><br><span class="line">                    dfs(i, j);</span><br><span class="line">                    vis[i][j] = <span class="literal">false</span>;   <span class="comment">// dfså®Œæˆä¹‹åå†æ’¤å›</span></span><br><span class="line">                    cur.remove(cur.size() - <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="comment">// base case -&gt; æ‰¾åˆ°ç¤¼å“äº†</span></span><br><span class="line">        <span class="keyword">if</span> (grid[i][j] == <span class="number">8</span>) &#123;</span><br><span class="line">            <span class="comment">// å½“ä¸”ä»…å½“æ‰¾åˆ°æ›´çŸ­çš„è·¯å¾„æ‰è¿›è¡Œä¿å­˜</span></span><br><span class="line">            <span class="keyword">if</span> (cur.size() &lt; min) &#123;</span><br><span class="line">                res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(cur);</span><br><span class="line">                min = cur.size();   <span class="comment">// æ›´æ–°å½“å‰æœ€çŸ­é•¿åº¦</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>; <span class="comment">// ç»“æŸ</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// éå†ä¸‹ä¸€æ­¥èƒ½åˆ°çš„æ ¼å­</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span>[] dir : dirs) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">newI</span> <span class="operator">=</span> i + dir[<span class="number">0</span>], newJ = j + dir[<span class="number">1</span>];</span><br><span class="line">            <span class="comment">// æ²¡æœ‰è¶Šç•Œ&amp;&amp;æ²¡æœ‰è®¿é—®è¿‡&amp;&amp;å¯è¡Œçš„</span></span><br><span class="line">            <span class="keyword">if</span> (newI &gt;= <span class="number">0</span> &amp;&amp; newI &lt; <span class="number">4</span> &amp;&amp; newJ &gt;= <span class="number">0</span> &amp;&amp; newJ &lt; <span class="number">4</span> &amp;&amp; !vis[newI][newJ] &amp;&amp; grid[newI][newJ] != <span class="number">1</span>) &#123;</span><br><span class="line">                vis[newI][newJ] = <span class="literal">true</span>; <span class="comment">// è¿›å…¥dfsä¹‹å‰å°±è¿›è¡Œæ ‡è®°å’Œå¤„ç†</span></span><br><span class="line">                cur.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;newI, newJ&#125;);</span><br><span class="line">                dfs(newI, newJ);</span><br><span class="line">                vis[newI][newJ] = <span class="literal">false</span>;    <span class="comment">// æ’¤å›</span></span><br><span class="line">                cur.remove(cur.size() - <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[<span class="number">3</span>, <span class="number">1</span>]</span><br><span class="line">[<span class="number">2</span>, <span class="number">1</span>]</span><br><span class="line">[<span class="number">2</span>, <span class="number">2</span>]</span><br></pre></td></tr></table></figure><h3 id="2-å†™æ³•äºŒï¼šåœ¨dfså†…éƒ¨è¿›è¡Œå¤„ç†"><a href="#2-å†™æ³•äºŒï¼šåœ¨dfså†…éƒ¨è¿›è¡Œå¤„ç†" class="headerlink" title="2:å†™æ³•äºŒï¼šåœ¨dfså†…éƒ¨è¿›è¡Œå¤„ç†"></a>2:å†™æ³•äºŒï¼šåœ¨dfså†…éƒ¨è¿›è¡Œå¤„ç†</h3><p>è¿™ç§åœ¨dfså†…éƒ¨å¤„ç†çš„æ–¹å¼ï¼Œåœ¨DFSä¸€å¼€å§‹å°±è¦è¿›è¡Œå¤„ç†ï¼ˆæ ‡è®°è®¿é—®+è®°å½•æ•°æ®ï¼‰ï¼ŒDFSç»“æŸä¹‹å‰è¦è¿›è¡Œæ’¤å›ï¼ˆæ³¨æ„å‡ºå£å¯èƒ½ä¸æ­¢ä¸€å¤„ï¼‰ï¼Œä¿è¯DFSå‡½æ•°æ‰§è¡Œå®Œåå½“å‰çš„é€’å½’æ ‘æ·±åº¦ä¸å˜ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">t1</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span>[][] grid = &#123;</span><br><span class="line">                &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;,</span><br><span class="line">                &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;,</span><br><span class="line">                &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">8</span>, <span class="number">1</span>&#125;,</span><br><span class="line">                &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>&#125;&#125;;</span><br><span class="line">        List&lt;<span class="type">int</span>[]&gt; res = winMaze(grid);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span>[] p : res) &#123;</span><br><span class="line">            System.out.println(Arrays.toString(p));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// reså­˜å‚¨å½“å‰éå†åˆ°çš„æœ€çŸ­è·¯å¾„ï¼Œcurå­˜å‚¨å½“å‰æ­£åœ¨éå†çš„è·¯å¾„</span></span><br><span class="line">    List&lt;<span class="type">int</span>[]&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(), cur = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> <span class="number">0x3f3f3f3f</span>;   <span class="comment">// å½“å‰æ‰¾åˆ°çš„æœ€çŸ­è·¯å¾„é•¿åº¦ï¼Œåˆå§‹åŒ–ä¸ºINF</span></span><br><span class="line">    <span class="type">int</span>[][] dirs = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;&#125;;  <span class="comment">// æ–¹å‘å‘é‡</span></span><br><span class="line">    <span class="type">boolean</span>[][] vis = <span class="keyword">new</span> <span class="title class_">boolean</span>[<span class="number">4</span>][<span class="number">4</span>];    <span class="comment">// æ ‡è®°æ˜¯å¦è¢«è®¿é—®</span></span><br><span class="line">    <span class="type">int</span>[][] grid;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;<span class="type">int</span>[]&gt; winMaze(<span class="type">int</span>[][] _grid) &#123;</span><br><span class="line">        grid = _grid;</span><br><span class="line">        <span class="comment">// æšä¸¾æ¯ä¸ªåˆæ³•èµ·ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line">                <span class="comment">// ä»…ä»…è¾¹ç¼˜ä¸”å¯ä»¥èµ°çš„æ ¼å­æ‰è¿›è¡Œdfs</span></span><br><span class="line">                <span class="keyword">if</span> ((i == <span class="number">0</span> || i == <span class="number">3</span> || j == <span class="number">0</span> || j == <span class="number">3</span>) &amp;&amp; grid[i][j] == <span class="number">0</span>) dfs(i, j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="comment">// dfsæœ€å¼€å§‹è¿›è¡Œæ ‡è®°+è®°å½•</span></span><br><span class="line">        vis[i][j] = <span class="literal">true</span>;</span><br><span class="line">        cur.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;i, j&#125;);</span><br><span class="line">        <span class="comment">// base case -&gt; æ‰¾åˆ°ç¤¼å“äº†</span></span><br><span class="line">        <span class="keyword">if</span> (grid[i][j] == <span class="number">8</span>) &#123;</span><br><span class="line">            <span class="comment">// å½“ä¸”ä»…å½“æ‰¾åˆ°æ›´çŸ­çš„è·¯å¾„æ‰è¿›è¡Œä¿å­˜</span></span><br><span class="line">            <span class="keyword">if</span> (cur.size() &lt; min) &#123;</span><br><span class="line">                res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(cur);</span><br><span class="line">                min = cur.size();   <span class="comment">// æ›´æ–°å½“å‰æœ€çŸ­é•¿åº¦</span></span><br><span class="line">            &#125;</span><br><span class="line">            vis[i][j] = <span class="literal">false</span>;    <span class="comment">// dfsç»“æŸä¹‹å‰è¦æ’¤å›</span></span><br><span class="line">            cur.remove(cur.size() - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">return</span>; <span class="comment">// ç»“æŸ</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// éå†ä¸‹ä¸€æ­¥èƒ½åˆ°çš„æ ¼å­</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span>[] dir : dirs) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">newI</span> <span class="operator">=</span> i + dir[<span class="number">0</span>], newJ = j + dir[<span class="number">1</span>];</span><br><span class="line">            <span class="comment">// æ²¡æœ‰è¶Šç•Œ&amp;&amp;æ²¡æœ‰è®¿é—®è¿‡&amp;&amp;å¯è¡Œçš„</span></span><br><span class="line">            <span class="keyword">if</span> (newI &gt;= <span class="number">0</span> &amp;&amp; newI &lt; <span class="number">4</span> &amp;&amp; newJ &gt;= <span class="number">0</span> &amp;&amp; newJ &lt; <span class="number">4</span> &amp;&amp; !vis[newI][newJ] &amp;&amp; grid[newI][newJ] != <span class="number">1</span>) &#123;</span><br><span class="line">                dfs(newI, newJ);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        vis[i][j] = <span class="literal">false</span>;    <span class="comment">// dfsç»“æŸä¹‹å‰è¦æ’¤å›</span></span><br><span class="line">        cur.remove(cur.size() - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[<span class="number">3</span>, <span class="number">1</span>]</span><br><span class="line">[<span class="number">2</span>, <span class="number">1</span>]</span><br><span class="line">[<span class="number">2</span>, <span class="number">2</span>]</span><br></pre></td></tr></table></figure><h2 id="å›æº¯ä¾‹é¢˜ï¼šLC679-24ç‚¹æ¸¸æˆ"><a href="#å›æº¯ä¾‹é¢˜ï¼šLC679-24ç‚¹æ¸¸æˆ" class="headerlink" title="å›æº¯ä¾‹é¢˜ï¼šLC679.24ç‚¹æ¸¸æˆ"></a><a href="https://leetcode.cn/problems/24-game/"><strong>å›æº¯ä¾‹é¢˜ï¼šLC679.24ç‚¹æ¸¸æˆ</strong></a></h2><p>â€‹    <strong>å›æº¯æ³•æš´åŠ›éå†</strong>:(å‚è€ƒå®˜æ–¹é¢˜è§£)</p><p>â€‹    æ‹¬å·å¯ä»¥ç›´æ¥å¿½ç•¥,å› ä¸ºæš´åŠ›éå†å·²ç»åŒ…å«æ‰€æœ‰è¿ç®—æ¬¡åº</p><p>â€‹    4*3*4*3*2*4*2*1*4=9216ç§å¯èƒ½æ€§</p><p>â€‹    1.è¿™ä¸ªæ¸¸æˆçš„æœ¬è´¨å°±æ˜¯å°†å…¶ä¸­ä¸¤ä¸ªæ•°è¿›è¡Œç›¸ä¹˜çš„ç»“æœé‡æ–°åŠ å…¥å¹¶è¿›è¡Œæ–°ä¸€è½®åŸæ¥çš„24ç‚¹è®¡ç®—</p><p>â€‹    2.æ’é™¤å‡ ç§ç‰¹æ®Šæƒ…å†µ:</p><p>  2.1 é™¤0è®¡ç®—:è¿™ç§æƒ…å†µç›´æ¥è·³è¿‡</p><p>â€‹        2.2 ä¹˜æ³•ä¸åŠ æ³•çš„è¿ç®—å¯ä»¥è¿›è¡Œå‰ªæ</p><p>â€‹        2.3 è¯¯å·®è€ƒè™‘:å½“è¯¯å·®&lt;1e-6æ—¶,è®¤ä¸ºå°±æ˜¯0</p><p>â€‹    3.è‹¥æœ€ç»ˆéƒ½æ²¡æœ‰è¿”å›trueè¯´æ˜æ‰¾ä¸åˆ°æœ€åè¿”å›false</p><p>â€‹    æ—¶é—´å¤æ‚åº¦ä¸ç©ºé—´å¤æ‚åº¦å‡ä¸º:O(1)</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®—è¯¯å·®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">double</span> <span class="variable">ERROR</span> <span class="operator">=</span> <span class="number">1e-6</span>;</span><br><span class="line">    <span class="comment">// ç›®æ ‡å€¼</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">double</span> <span class="variable">TARGET</span> <span class="operator">=</span> <span class="number">24</span>;</span><br><span class="line">    <span class="comment">// åŠ å‡ä¹˜é™¤</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">PLUS</span> <span class="operator">=</span> <span class="number">0</span>, MULTIPLY = <span class="number">1</span>, SUBTRACT = <span class="number">2</span>, DIVIDE = <span class="number">3</span>;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    åˆ¤æ–­æ˜¯å¦èƒ½å‡‘æˆ24</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">judgePoint24</span><span class="params">(<span class="type">int</span>[] cards)</span> &#123;</span><br><span class="line">        List&lt;Double&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> num : cards) &#123;</span><br><span class="line">            list.add((<span class="type">double</span>)num);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dfs(list);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    dfsä¸»å‡½æ•°:è¿”å›listä¸­æ˜¯å¦èƒ½è®¡ç®—å‡º24</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">dfs</span><span class="params">(List&lt;Double&gt; list)</span> &#123;</span><br><span class="line">        <span class="comment">// é€’å½’å‡ºå£1:ç©ºåˆ—è¡¨</span></span><br><span class="line">        <span class="keyword">if</span>(list.size() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// é€’å½’å‡ºå£2:è¿ç®—ç»“æœä¸º24</span></span><br><span class="line">        <span class="keyword">if</span>(list.size() == <span class="number">1</span> &amp;&amp; Math.abs(list.get(<span class="number">0</span>) - TARGET) &lt; ERROR) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å…ˆæŠ½å‡ºä¸¤ä¸ªè¦è¿›è¡Œè¿ç®—çš„æ•°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> list.size();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; size; j++) &#123;</span><br><span class="line">                <span class="comment">// æ³¨æ„æ˜¯ç´¢å¼•ä¸åŒçš„ä¸¤ä¸ªæ•°æ‰èƒ½è¿›è¡Œè¿ç®—</span></span><br><span class="line">                <span class="keyword">if</span>(i != j) &#123;</span><br><span class="line">                    <span class="comment">// å†åˆ›å»ºä¸€ä¸ªåˆ—è¡¨å­˜æ”¾å‰©ä½™çš„å…ƒç´ </span></span><br><span class="line">                    List&lt;Double&gt; remain = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; size; k++) &#123;</span><br><span class="line">                        <span class="keyword">if</span>(k != i &amp;&amp; k != j) &#123;</span><br><span class="line">                            remain.add(list.get(k));</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// åœ¨å¯¹é€‰ä¸­çš„ä¸¤ä¸ªæ•°list[i]ä¸list[j]è¿›è¡Œè®¡ç®—å¹¶åŠ å…¥remainåˆ—è¡¨</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; <span class="number">4</span>; k++) &#123;</span><br><span class="line">                        <span class="comment">// åŠ æ³•ä¸é™¤æ³•è¿›è¡Œå‰ªæ(åªä¿ç•™i&gt;jéƒ¨åˆ†ä¸€åŠ)</span></span><br><span class="line">                        <span class="keyword">if</span>(k &lt; <span class="number">2</span> &amp;&amp; i &lt; j) &#123;</span><br><span class="line">                            <span class="keyword">continue</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span>(k == PLUS) &#123;</span><br><span class="line">                            remain.add(list.get(i) + list.get(j));</span><br><span class="line">                        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(k == MULTIPLY) &#123;</span><br><span class="line">                            remain.add(list.get(i) * list.get(j));</span><br><span class="line">                        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(k == SUBTRACT) &#123;</span><br><span class="line">                            remain.add(list.get(i) - list.get(j));</span><br><span class="line">                        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(k == DIVIDE) &#123;</span><br><span class="line">                            <span class="comment">// æ’é™¤é™¤0çš„æƒ…å½¢</span></span><br><span class="line">                            <span class="keyword">if</span>(list.get(j) &lt; ERROR) &#123;</span><br><span class="line">                                <span class="keyword">continue</span>;</span><br><span class="line">                            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                                remain.add(list.get(i) / list.get(j));</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">// å°†åŠ å…¥è¿ç®—ç»“æœçš„remainåˆ—è¡¨è¿›è¡Œé€’å½’è¿ç®—,è‹¥å¾—åˆ°24ç›´æ¥è¿”å›true</span></span><br><span class="line">                        <span class="keyword">if</span>(dfs(remain)) &#123;</span><br><span class="line">                            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">// æ’¤å›æ“ä½œåˆšåˆšçš„æ·»åŠ æ“ä½œç»§ç»­ä¸‹ä¸€ç§ç¬¦å·çš„è¿ç®—</span></span><br><span class="line">                        remain.remove(remain.size() - <span class="number">1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è‹¥æœ€åéƒ½æ‰¾ä¸åˆ°æ­£ç¡®çš„é€‰é¡¹,è¯´æ˜å°±æ˜¯æ²¡æœ‰äº†</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¸€ç‚¹æ€è€ƒï¼š</strong></p><p>å…¶å®å›æº¯æœ¬è´¨ä¸Šå°±æ˜¯é€’å½’+å›é€€ä»è€Œæ‰¾åˆ°æ‰€æœ‰çš„è·¯å¾„(ç»„åˆçš„å¯èƒ½)ï¼Œæœ€å…³é”®çš„å°±æ˜¯è¦æ‰¾åˆ°<strong>å­é—®é¢˜</strong></p><p>é—®é¢˜ï¼š<strong>nä¸ªæ•°è¿›è¡Œç»„åˆè¿ç®—èƒ½å¦å¾—å‡º24è¿™ä¸ªç»“æœ</strong></p><p>å¼€å§‹æ˜¯4ä¸ªæ•°è¿›è¡Œè¿ç®—[1,2,3,4]</p><p>é€‰å…¶ä¸­ä¸¤ä¸ªæ•°å°è¯•ï¼Œä¾‹å¦‚é€‰äº†selected=[1,3]ï¼Œå‰©ä½™çš„æ˜¯remain=[2,4]</p><p>é‚£ä¹ˆå°†selectedä¸­çš„ä¸¤ä¸ªæ•°è¿›è¡Œ [+, -, *, /] 4ç§è¿ç®—å¾—åˆ°çš„ç»“æœ[4, -2, 3 , 0.3333â€¦]åˆ†åˆ«å†æ¬¡æ”¾å…¥remainä¸­</p><p><strong>åˆ¤æ–­è¿™3ä¸ªæ•°è¿›è¡Œè¿ç®—çš„ç»“æœæ˜¯å¦èƒ½å¾—åˆ°24ï¼Ÿ</strong></p><p><strong>å­é—®é¢˜ç”±æ­¤äº§ç”Ÿï¼šç”±4ä¸ªæ•°å­—çš„ç»„åˆå˜æˆäº†3ä¸ªæ•°å­—çš„ç»„åˆ</strong></p><p><strong>è‹¥3ä¸ªæ•°å­—çš„ç»„åˆèƒ½ç®—å‡º24å¯ä»¥é©¬ä¸Šæ¨å‡º4ä¸ªæ•°å­—çš„ç»„åˆèƒ½å°±ç®—å‡º24ï¼</strong></p><p>æ­¤æ—¶æˆ‘ä»¬é‡å¤è°ƒç”¨åŸæœ¬çš„å‡½æ•°å°±èƒ½è§£å†³è¿™ä¸ª3ä¸ªæ•°èƒ½å¦ç»„æˆ24çš„é—®é¢˜äº†â†’è¿™å°±æ˜¯é€’å½’ï¼</p><p>åœ¨é€’å½’è¿‡ç¨‹æœ‰ä¸åˆæ ¼çš„æ¡ˆä¾‹è¿›è¡Œå›é€€å¹¶å¾€å¦ä¸€æ¡è·¯å¾„èµ°ï¼Œè¿™å°±æ˜¯å›æº¯äº†ï¼</p><p>ä¾‹å¦‚æˆ‘é€šè¿‡1+3=4ï¼Œè€Œ[2,4,4]é€šè¿‡é€’å½’å‘ç°<strong>ä¸èƒ½</strong>ä½¿å¾—ç»“æœä¸º24ï¼Œå› æ­¤è¿™ç§æƒ…å†µå°±è¦<strong>èˆå¼ƒ</strong>äº†</p><p>æ€æ ·è¿›è¡Œèˆå¼ƒ?</p><p>å¾ˆç®€å•ï¼Œå°†[2,4,4]æœ€ååŠ å…¥å…ƒç´ åˆ æ‰å°±ç›¸å½“äºè¿”å›ä¸Šä¸€å±‚ï¼Œå¯ä»¥ç»§ç»­è¿›è¡Œä¸‹ä¸€ä¸ªè¿ç®—ç¬¦çš„è®¡ç®—ï¼Œå†æ”¾è¿›å»[2,4]é‡Œé¢è¿›è¡Œé€’å½’â€¦</p><p>è‹¥æŸä¸ªdfs([x,x,x])è¿”å›trueå°±è¯´æ˜è¿™æ¡è·¯å¾„æ˜¯å¯è¡Œçš„</p>]]></content>
    
    
    <summary type="html">å›æº¯æœ¬è´¨ä¸Šå°±æ˜¯é€’å½’+å›é€€ä»è€Œæ‰¾åˆ°æ‰€æœ‰çš„è·¯å¾„(ç»„åˆçš„å¯èƒ½)ï¼Œæœ€å…³é”®çš„å°±æ˜¯è¦æ‰¾åˆ°å­é—®é¢˜</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fomal.cc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="å›æº¯" scheme="https://www.fomal.cc/tags/%E5%9B%9E%E6%BA%AF/"/>
    
    <category term="é€’å½’" scheme="https://www.fomal.cc/tags/%E9%80%92%E5%BD%92/"/>
    
  </entry>
  
  <entry>
    <title>äºŒåˆ†æŸ¥æ‰¾æ¨¡æ¿</title>
    <link href="https://www.fomal.cc/posts/70e223cf.html"/>
    <id>https://www.fomal.cc/posts/70e223cf.html</id>
    <published>2022-08-12T06:28:18.000Z</published>
    <updated>2022-08-12T06:28:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>äºŒåˆ†æŸ¥æ‰¾è¦æ±‚æ•°æ®æœ‰äºŒæ®µæ€§ï¼Œå¯ä»¥å°†æŸ¥æ‰¾æŸä¸ªåˆ†å‰²ç‚¹çš„æ—¶é—´å¤æ‚åº¦ä»O(N)åŠ é€Ÿè‡³O(logN)</p><p><a href="https://leetcode-cn.com/problems/binary-search/"><strong>LC704. äºŒåˆ†æŸ¥æ‰¾</strong></a></p><p>ç»™å®šä¸€ä¸ª n ä¸ªå…ƒç´ æœ‰åºçš„ï¼ˆå‡åºï¼‰æ•´å‹æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ target  </p><p>å†™ä¸€ä¸ªå‡½æ•°æœç´¢ nums ä¸­çš„ targetï¼Œå¦‚æœç›®æ ‡å€¼å­˜åœ¨è¿”å›ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› -1ã€‚</p><p><strong>ç¤ºä¾‹1:</strong><br>è¾“å…¥ï¼š nums = [-1,0,3,5,9,12], target = 9 è¾“å‡ºï¼š4<br>è§£é‡Šï¼š9å‡ºç°åœ¨ numsä¸­å¹¶ä¸”ä¸‹æ ‡ä¸º4<br><strong>ç¤ºä¾‹2:</strong><br>è¾“å…¥ï¼šnums = [-1,0,3,5,9,12],target = 2 è¾“å‡ºï¼š-1<br>è§£é‡Šï¼š2ä¸å­˜åœ¨numsä¸­å› æ­¤è¿”å›-1</p><p><strong>æ€è·¯ï¼š</strong></p><p><strong>äºŒåˆ†æŸ¥æ‰¾-&gt;æ¢¦å¼€å§‹çš„åœ°æ–¹</strong></p><p>è¿™é“é¢˜æ˜¯äºŒåˆ†æŸ¥æ‰¾çš„å…¥é—¨é¢˜ç›®ï¼ŒäºŒåˆ†æŸ¥æ‰¾çš„æ°´éå¸¸æ·±ï¼Œä½†æ˜¯ç®€å•çš„é¢˜ç›®é€šå¸¸ä¼šç”±äºå„ç§åŸå› ä¸¢åˆ†ã€‚</p><p>è¿™é‡Œæˆ‘æ€»ç»“ä¸€ä¸‹äºŒåˆ†æŸ¥æ‰¾çš„ä¸€äº›æ¨¡æ¿å’Œåšé¢˜å¥—è·¯</p><p>é¦–å…ˆèƒ½ç”¨äºŒåˆ†æŸ¥æ‰¾çš„<strong>å‰æ</strong>æ˜¯åœ¨<strong>å¯ä»¥æ ¹æ®f(mid)çš„å€¼æ¥åˆ¤æ–­ä¸‹ä¸€ä¸ªåˆæ³•åŒºé—´åœ¨midå·¦è¾¹è¿˜æ˜¯å³è¾¹</strong></p><p>å› æ­¤äºŒåˆ†æŸ¥æ‰¾å‰é¢é€šå¸¸éƒ½ä¼šæœ‰<strong>æ’åº</strong>ç­‰æ­¥éª¤æ¥ç¡®ä¿é—®é¢˜å…·æœ‰<strong>â€œäºŒæ®µæ€§â€</strong></p><p>æ€»ä½“è¦æ³¨æ„çš„ï¼š</p><p>1.while (l &lt; r)ï¼š è¿™ç§å†™æ³•ä½¿å¾—é€€å‡ºæ¡ä»¶æ˜¯<strong>l==r</strong>ï¼Œå› æ­¤æ‰§è¡Œå®Œä¹‹åå¿…å®šæœ‰l==r</p><p>2.midçš„æ±‚æ³•ï¼š è¿™ä¸ªmidçš„æ±‚æ³•éå¸¸è®²ç©¶ï¼Œæˆ‘æ€»ç»“çš„æ˜¯</p><ul><li>mid = l + (r - l + 1) / 2ï¼Œmidä¸»åŠ¨åå³-&gt;å³è¾¹ç•Œä¸»åŠ¨æ”¶ç¼©r = mid - 1;</li><li>mid = l + (r - l ) / 2ï¼Œmidä¸»åŠ¨åå·¦-&gt;å·¦è¾¹ç•Œä¸»åŠ¨æ”¶ç¼©l = mid + 1;</li></ul><p>3.ä¸‹ä¸€ä¸ªåŒºé—´çš„åˆ¤æ–­é‡‡ç”¨å‡æ²»æ€æƒ³ï¼Œå°†ä¸€å®šä¸ç¬¦åˆæ¡ä»¶çš„å…ˆæ’é™¤ï¼Œå¦‚ï¼šnums[mid] &gt; targetï¼Œé‚£ä¹ˆmidå¿…å®šä¸ç¬¦åˆé¢˜æ„ï¼-&gt;r = mid - 1</p><p>ç„¶åå¦å¤–ä¸€ä¸ªåŒºé—´æ˜¯å…¶åé¢ï¼Œä¸€èˆ¬æ˜¯å°†åˆæ³•åŒºé—´åŒ…å«åœ¨è¾¹ç•Œï¼Œå¦‚ï¼šnums[mid] &lt;=targetï¼Œé‚£ä¹ˆmidå¯èƒ½ä¸ç¬¦åˆé¢˜æ„ï¼-&gt;l = mid</p><p>4.é€€å‡ºå¾ªç¯çš„æ—¶å€™è¦é‡å¤åˆ©ç”¨å¥½l==rè¿™ä¸ªæ¡ä»¶ï¼Œç­”æ¡ˆè•´è—åœ¨å…¶ä¸­ï¼</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">search</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        åœ¨å‡åºæ•°ç»„ä¸­æŸ¥æ‰¾ç›®æ ‡æ•°å­—å¯¹åº”ä¸‹æ ‡-&gt;äºŒåˆ†æŸ¥æ‰¾</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">0</span>, r = nums.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">            <span class="comment">// ä¸‹é¢æ˜¯å³è¾¹ä¸»åŠ¨æ”¶ç¼©</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> l + (r - l + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">            <span class="comment">// &gt;target,è¯´æ˜targetåœ¨å·¦è¾¹(ä¸å«)</span></span><br><span class="line">            <span class="keyword">if</span> (nums[mid] &gt; target) &#123;</span><br><span class="line">                r = mid - <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// &lt;=target,è¯´æ˜targetåœ¨å³è¾¹(å«)</span></span><br><span class="line">                l = mid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// l==r,nums[l]è¦ä¸å°±æ˜¯target;è¦ä¸å°±æ˜¯numsä¸­æ²¡æœ‰target</span></span><br><span class="line">        <span class="keyword">return</span> nums[l] == target ? l : -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">äºŒåˆ†æŸ¥æ‰¾è¦æ±‚æ•°æ®æœ‰äºŒæ®µæ€§ï¼Œå¯ä»¥å°†æŸ¥æ‰¾æŸä¸ªåˆ†å‰²ç‚¹çš„æ—¶é—´å¤æ‚åº¦ä»O(N)åŠ é€Ÿè‡³O(logN)</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fomal.cc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="äºŒåˆ†" scheme="https://www.fomal.cc/tags/%E4%BA%8C%E5%88%86/"/>
    
  </entry>
  
  <entry>
    <title>çŠ¶æ€æœºDPæ€»ç»“</title>
    <link href="https://www.fomal.cc/posts/baa972ab.html"/>
    <id>https://www.fomal.cc/posts/baa972ab.html</id>
    <published>2022-08-12T06:17:05.000Z</published>
    <updated>2022-08-12T06:17:05.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>çŠ¶æ€æœºDPå°±æ˜¯è€ƒè™‘åˆ°å½“å‰æ—¶åˆ»ã€ä½ç½®ç­‰ï¼Œæœ‰å¯èƒ½å¤„äºæœ‰é™ç§æƒ…å½¢ä¸­çš„å…¶ä¸­ä¸€ç§</strong></p><p><strong>æ¯”å¦‚è¯´å½“å‰ä½ç½®çš„æˆ¿å­æ¶‚äº†ä»€ä¹ˆé¢œè‰²ã€å½“å‰æ—¶é—´çš„è‚¡ç¥¨å¤„äºå–å‡ºè¿˜æ˜¯ä¹°å…¥çš„çŠ¶æ€ã€å½“å‰åˆ é™¤åˆ°çš„åºåˆ—æ˜¯ä»¥0è¿˜æ˜¯ä»¥1ç»“å°¾ã€å½“å‰ä½ç½®æ˜¯æ”¾äº†è¿˜æ˜¯æ²¡æœ‰æ”¾ç½®ä¸œè¥¿ã€å½“å‰ä½ç½®æ˜¯æ­£è¿˜æ˜¯è´Ÿ</strong></p><p><strong>æŠŠè¿™äº›æƒ…å†µåˆ†å¼€æ¥è½¬ç§»å¯ä»¥ä½¿å¾—è½¬ç§»çš„æ€è·¯æ›´åŠ æ¸…æ™°æ˜äº†ï¼Œç±»æ¯”æˆå½“å‰ä½ç½® i çš„ä¸€ä¸ªçŠ¶æ€ j èƒ½å¤Ÿç”±å‰é¢ä½ç½® i-1 çš„æŒ‡å®šçŠ¶æ€ k è½¬ç§»å¾—åˆ°ï¼ï¼ï¼</strong></p><h3 id="1-ç²‰åˆ·æˆ¿å­é—®é¢˜"><a href="#1-ç²‰åˆ·æˆ¿å­é—®é¢˜" class="headerlink" title="1.ç²‰åˆ·æˆ¿å­é—®é¢˜"></a>1.ç²‰åˆ·æˆ¿å­é—®é¢˜</h3><h4 id="1-1-LC123-å‰‘æŒ‡-Offer-II-091-ç²‰åˆ·æˆ¿å­"><a href="#1-1-LC123-å‰‘æŒ‡-Offer-II-091-ç²‰åˆ·æˆ¿å­" class="headerlink" title="1.1 LC123.å‰‘æŒ‡ Offer II 091. ç²‰åˆ·æˆ¿å­"></a>1.1 <strong>LC123.å‰‘æŒ‡ Offer II 091. ç²‰åˆ·æˆ¿å­</strong></h4><p><strong>åˆ†çŠ¶æ€çš„DPé—®é¢˜(åºåˆ—DP):</strong></p><p> 1.çŠ¶æ€å®šä¹‰:dp[i][0],dp[i][1],dp[i][2]åˆ†åˆ«ä¸ºç²‰åˆ·æˆ¿å­[0,i],ä¸”æˆ¿å­içš„é¢œè‰²ç²‰åˆ·ä¸ºçº¢è‰²/è“è‰²/ç»¿è‰²æ‰€èŠ±è´¹çš„æœ€ä½è´¹ç”¨</p><p>â€‹            <strong>ä¸ºä»€ä¹ˆè¿˜è¦å¸¦ä¸€ä¸ªåç¼€?å› ä¸ºç²‰åˆ·ç¬¬ié—´æˆ¿å­å¯èƒ½çš„çŠ¶æ€æœ¬èº«æœ‰3ç§!</strong></p><p>â€‹            <strong>å¦‚æœæ··åœ¨ä¸€èµ·è®¨è®ºéå¸¸å¤æ‚,åˆ†å¼€è®¨è®ºå¯ä»¥æ ¹æ®å‰é¢çš„çŠ¶æ€åˆ†å¼€è½¬ç§»å°±éå¸¸æ–¹ä¾¿</strong></p><p>â€‹            <strong>ç±»ä¼¼äºè‚¡ç¥¨é—®é¢˜-&gt;è€ƒè™‘ç¬¬iå¤©ä¸”ç¬¬iå¤©å¤„äºå–å‡ºè¿˜æ˜¯ä¹°å…¥çŠ¶æ€æ–¹ä¾¿è½¬ç§»!</strong></p><p>2.çŠ¶æ€è½¬ç§»:ç”±äºç›¸é‚»çš„ä¸¤ä¸ªæˆ¿å­é¢œè‰²ä¸èƒ½ç›¸åŒ,å› æ­¤æ ¹æ®dp[i-1][j]çš„çŠ¶æ€åˆ†ç±»è½¬ç§»å³å¯</p><p>â€‹         2.1 dp[i][0]å¯ä»¥ç”±dp[i-1][1]ä¸dp[i-1][2]åŠ ä¸Šcost[i][0]å–æœ€å°å€¼è½¬ç§»</p><p>â€‹         2.2 dp[i][1]å¯ä»¥ç”±dp[i-1][0]ä¸dp[i-1][2]åŠ ä¸Šcost[i][1]å–æœ€å°å€¼è½¬ç§»</p><p>â€‹         2.3 dp[i][2]å¯ä»¥ç”±dp[i-1][0]ä¸dp[i-1][1]åŠ ä¸Šcost[i][2]å–æœ€å°å€¼è½¬ç§»</p><p>  æ„ä¹‰å°±æ˜¯æˆ‘è¿™é—´æˆ¿å­æ¶‚äº†é¢œè‰²0,é‚£ä¹ˆåªèƒ½ç”±å‰é¢æ¶‚äº†ä¸æ˜¯é¢œè‰²0çš„è¿›è¡Œè½¬ç§»ä¸”å–æœ€å°å€¼</p><p>3.åˆå§‹åŒ–:åˆå§‹åŒ–dp[0][0]=cost[0][0],dp[0][1]=cost[0][1],dp[0][2]=cost[0][2]</p><p>4.éå†é¡ºåº:iæ­£åº,jæ— æ‰€è°“</p><p>5.è¿”å›å½¢å¼:æ¶‚åˆ°æœ€åä¸€é—´æˆ¿å­æœ€å°è´¹ç”¨ä¸çŸ¥é“æ˜¯ä»¥å“ªç§é¢œè‰²ç»“å°¾çš„,å¯ä»¥å–æœ€å°å€¼min(dp[n-1][0],dp[n-1][1],dp[n-1][2])</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minCost</span><span class="params">(<span class="type">int</span>[][] costs)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> costs.length;</span><br><span class="line">        <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[n][<span class="number">3</span>];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = costs[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">1</span>] = costs[<span class="number">0</span>][<span class="number">1</span>];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">2</span>] = costs[<span class="number">0</span>][<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            dp[i][<span class="number">0</span>] = costs[i][<span class="number">0</span>] + Math.min(dp[i - <span class="number">1</span>][<span class="number">1</span>], dp[i - <span class="number">1</span>][<span class="number">2</span>]);</span><br><span class="line">            dp[i][<span class="number">1</span>] = costs[i][<span class="number">1</span>] + Math.min(dp[i - <span class="number">1</span>][<span class="number">0</span>], dp[i - <span class="number">1</span>][<span class="number">2</span>]);</span><br><span class="line">            dp[i][<span class="number">2</span>] = costs[i][<span class="number">2</span>] + Math.min(dp[i - <span class="number">1</span>][<span class="number">0</span>], dp[i - <span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Math.min(dp[n - <span class="number">1</span>][<span class="number">0</span>], Math.min(dp[n - <span class="number">1</span>][<span class="number">1</span>], dp[n - <span class="number">1</span>][<span class="number">2</span>]));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-2-LC1473-ç²‰åˆ·æˆ¿å­-III"><a href="#1-2-LC1473-ç²‰åˆ·æˆ¿å­-III" class="headerlink" title="1.2 LC1473. ç²‰åˆ·æˆ¿å­ III"></a>1.2 <strong>LC1473. ç²‰åˆ·æˆ¿å­ III</strong></h4><p>çŠ¶æ€æœºDPé—®é¢˜(å‚è€ƒå‰‘æŒ‡OfferII.91  ç²‰åˆ·æˆ¿å­):</p><p>å…¶å®ä¸ä¹‹å‰é‚£é“ç²‰åˆ·æˆ¿å­çš„ä¹Ÿå¾ˆç±»ä¼¼,ä¸è¿‡è¿™é‡Œæ›´åŠ å¤æ‚ä¸€ç‚¹å°±æ˜¯è¦è€ƒè™‘å½¢æˆçš„è¡—åŒºæ•°ç›®,åŒæ—¶æœ‰çš„æˆ¿å­å·²ç»æ¶‚äº†è‰²</p><p>æˆ‘ä»¬å‰é¢ä¸€é“é¢˜æ˜¯è€ƒè™‘åˆ°ä¸¤ä¸ªdpç»´åº¦:æˆ¿å­ä½ç½®i,ç¬¬ié—´æˆ¿å­çš„é¢œè‰²j</p><p>è¦åŒæ—¶è€ƒè™‘å½¢æˆçš„è¡—åŒºæ•°ç›®(ç‹¬ç«‹),æ­¤æ—¶å¿…é¡»å¢åŠ ä¸€ä¸ªdpçš„ç»´åº¦k,è¡¨ç¤ºå½“å‰å½¢æˆçš„è¡—åŒºæ•°ç›®</p><p>åŒæ—¶è¦å¯¹å·²ç»æ¶‚äº†è‰²çš„æƒ…å†µè¿›è¡Œåˆ†ç±»è®¨è®ºè½¬ç§»</p><p><strong>1.çŠ¶æ€å®šä¹‰:</strong> dp[i][j][k]ä¸ºè€ƒè™‘å¯¹æˆ¿å­[0,i]è¿›è¡Œæ¶‚è‰²,ä¸”æˆ¿å­i(iâˆˆ[0,m-1])é¢œè‰²è¢«æ¶‚ä¸ºé¢œè‰²j(jâˆˆ[1,n]),ä¸”æ¶‚å®Œä¹‹åå°±å½¢æˆk(kâˆˆ[1,target])ä¸ªè¡—åŒºçš„æœ€å°èŠ±è´¹</p><p><strong>2.çŠ¶æ€è½¬ç§»:</strong> æˆ‘ä»¬ä»¥house[i]æ˜¯å¦ä¸º0è¿›è¡Œåˆ†ç±»è®¨</p><p>â€‹      2.1 house[i]==0 è¡¨ç¤ºæˆ¿å­iè¿˜æ²¡æœ‰è¢«æ¶‚è‰²,é€‰æ‹©ä»»æ„é¢œè‰²jâˆˆ[1,n]å¯¹æˆ¿å­iè¿›è¡Œæ¶‚è‰²,æ¶‚çš„å…·ä½“é¢œè‰²ä¼šå½±å“è¡—åŒºçš„æ•°ç›®</p><p>â€‹          dp[i][j][k]=cost[i][j-1]+min(dp[i-1][j][k],dp[i-1][jâ€™][k-1]) å…¶ä¸­jâ€™ä¸ºâ‰ jçš„é›†åˆ(é¢œè‰²ä¸åŒè¡—åŒºæ•°+1)</p><p>â€‹          æ³¨æ„ç»†èŠ‚:åˆæ³•çš„dp[i-1][jj][?]çŠ¶æ€æ‰èƒ½è½¬ç§»</p><p>â€‹      2.2 house[i]!=0 è¡¨ç¤ºæˆ¿å­iå·²ç»è¢«æ¶‚è‰²,æ­¤æ—¶åªèƒ½å¯¹dp[i][house[i]][k]è¿›è¡Œè½¬ç§»,å…¶ä»–dp[i][jâ€™][?]æ— æ³•è½¬ç§»ä»ä¸ºINF</p><p>â€‹          dp[i][houses[i]][k]=0+min(dp[i-1][houses[i]][k],dp[i-1][jâ€™][k-1]) å…¶ä¸­jâ€™ä¸ºâ‰ houses[i]çš„é›†åˆ(é¢œè‰²ä¸åŒè¡—åŒºæ•°+1)</p><p><strong>3.åˆå§‹åŒ–:</strong> é¦–å…ˆå…¨éƒ¨åˆå§‹åŒ–ä¸ºINFè¡¨ç¤ºæ²¡æœ‰è½¬ç§»</p><p>â€‹      å½“houses[0]==0æ—¶,dp[0][j][1]=cost[0][j-1] -&gt; è¦æ¶‚è‰²</p><p>â€‹      å½“houses[0]!=0æ—¶,dp[0][houses[0]][1]=0 -&gt; ä¸ç”¨æ¶‚è‰²</p><p><strong>4.éå†é¡ºåº:</strong> æ˜¾ç„¶iæ­£åº,jæ— æ‰€è°“,kæ­£åº</p><p><strong>5.è¿”å›å½¢å¼:</strong> æœ€åè¿”å›min(dp[m-1][j][target]),jâˆˆ[1,n] è‹¥æ‰”æ²¡æœ‰è½¬ç§»åˆ™è¿”å›-1</p><p><strong>æ—¶é—´å¤æ‚åº¦:O((mn)^2) ç©ºé—´å¤æ‚åº¦:O(n*m^2)</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minCost</span><span class="params">(<span class="type">int</span>[] houses, <span class="type">int</span>[][] cost, <span class="type">int</span> m, <span class="type">int</span> n, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">INF</span> <span class="operator">=</span> <span class="number">0x3f3f3f3f</span>;   <span class="comment">// å“¨å…µ</span></span><br><span class="line">    <span class="type">int</span>[][][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[m][n + <span class="number">1</span>][target + <span class="number">1</span>];</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            Arrays.fill(dp[i][j], INF);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (houses[<span class="number">0</span>] != <span class="number">0</span>) &#123;   <span class="comment">// 1.é¦–ä¸ªæˆ¿å­ä¸ç”¨æ¶‚è‰²</span></span><br><span class="line">        dp[<span class="number">0</span>][houses[<span class="number">0</span>]][<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 2.é¦–ä¸ªæˆ¿å­è¦æ¶‚è‰²,è´¹ç”¨æœ€å°å°±æ˜¯ç›´æ¥æ¶‚,ä¸”åªèƒ½å½¢æˆä¸€ä¸ªè¡—åŒº</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            dp[<span class="number">0</span>][j][<span class="number">1</span>] = cost[<span class="number">0</span>][j - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// éå†dpçš„æ¯ä¸ªçŠ¶æ€</span></span><br><span class="line">    <span class="comment">// iâˆˆ[1,m-1]</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="comment">// jâˆˆ[1,n]</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="comment">// kâˆˆ[1,target]</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">1</span>; k &lt;= target; k++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (houses[i] == <span class="number">0</span>) &#123;   <span class="comment">// 1.houses[i]è¦æ¶‚è‰²</span></span><br><span class="line">                    <span class="comment">// éå†æ‰€æœ‰å¯èƒ½çš„houses[i-1]çš„é¢œè‰²è¿›è¡Œè½¬ç§»</span></span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">jj</span> <span class="operator">=</span> <span class="number">1</span>; jj &lt;= n; jj++) &#123;</span><br><span class="line">                        <span class="comment">// ç»†èŠ‚:åªæœ‰æœ‰æ•ˆçš„çŠ¶æ€æ‰èƒ½è¿›è¡Œè½¬ç§»</span></span><br><span class="line">                        <span class="keyword">if</span> (jj == j &amp;&amp; dp[i - <span class="number">1</span>][jj][k] != INF) &#123;  <span class="comment">// ä¸å‰é¢é¢œè‰²ç›¸åŒ,è¡—åŒºæ•°ç›®ä¸å˜</span></span><br><span class="line">                            dp[i][j][k] = Math.min(dp[i][j][k], cost[i][j - <span class="number">1</span>] + dp[i - <span class="number">1</span>][jj][k]);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (jj != j &amp;&amp; dp[i - <span class="number">1</span>][jj][k - <span class="number">1</span>] != INF) &#123;    <span class="comment">// ä¸å‰é¢é¢œè‰²ä¸åŒ,è¡—åŒºæ•°ç›®+1</span></span><br><span class="line">                            dp[i][j][k] = Math.min(dp[i][j][k], cost[i][j - <span class="number">1</span>] + dp[i - <span class="number">1</span>][jj][k - <span class="number">1</span>]);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 2.houses[i]å·²ç»è¢«æ¶‚è‰²</span></span><br><span class="line">                    <span class="keyword">if</span> (j == houses[i]) &#123;   <span class="comment">// åªèƒ½è½¬ç§»j==houses[i]çš„çŠ¶æ€</span></span><br><span class="line">                        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">jj</span> <span class="operator">=</span> <span class="number">1</span>; jj &lt;= n; jj++) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (jj == j &amp;&amp; dp[i - <span class="number">1</span>][jj][k] != INF) &#123;  <span class="comment">// ä¸å‰é¢é¢œè‰²ç›¸åŒ,è¡—åŒºæ•°ç›®ä¸å˜(ä¸”ä¸ç”¨èŠ±è´¹)</span></span><br><span class="line">                                dp[i][j][k] = Math.min(dp[i][j][k], dp[i - <span class="number">1</span>][jj][k]);</span><br><span class="line">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (jj != j &amp;&amp; dp[i - <span class="number">1</span>][jj][k - <span class="number">1</span>] != INF) &#123;    <span class="comment">// ä¸å‰é¢é¢œè‰²ä¸åŒ,è¡—åŒºæ•°ç›®+1(ä¸”ä¸ç”¨èŠ±è´¹)</span></span><br><span class="line">                                dp[i][j][k] = Math.min(dp[i][j][k], dp[i - <span class="number">1</span>][jj][k - <span class="number">1</span>]);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç»“æœä¸ºmin(dp[m-1][j][target]),jâˆˆ[1,n] ä¸ä¸ºINFéƒ¨åˆ†çš„æœ€å°å€¼</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> INF;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">        res = Math.min(res, dp[m - <span class="number">1</span>][j][target]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res == INF ? -<span class="number">1</span> : res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-6ç§è‚¡ç¥¨é—®é¢˜"><a href="#2-6ç§è‚¡ç¥¨é—®é¢˜" class="headerlink" title="2.6ç§è‚¡ç¥¨é—®é¢˜"></a>2.6ç§è‚¡ç¥¨é—®é¢˜</h3><h4 id="2-1-LC121-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"><a href="#2-1-LC121-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº" class="headerlink" title="2.1 LC121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"></a>2.1 <a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/"><strong>LC121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</strong></a></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        dpäº”éƒ¨æ›²:ä¸»è¦æ ¹æ®æ¯å¤©æŒæœ‰ä¸ä¸æŒæœ‰è‚¡ç¥¨çš„çŠ¶æ€è¿›è¡Œè½¬ç§»</span></span><br><span class="line"><span class="comment">        1.çŠ¶æ€å®šä¹‰:dp[i][0]ä»£è¡¨ç¬¬iå¤©(æ“ä½œå)ä¸æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§èº«ä»·,dp[i][0]ä»£è¡¨ç¬¬iå¤©(æ“ä½œå)æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§èº«ä»·</span></span><br><span class="line"><span class="comment">        2.çŠ¶æ€è½¬ç§»:</span></span><br><span class="line"><span class="comment">            2.1 dp[i][0]ç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨</span></span><br><span class="line"><span class="comment">                1.å½“å¤©å–äº†:dp[i-1][1]+prices[i]</span></span><br><span class="line"><span class="comment">                2.ä¹‹å‰å°±å–äº†:dp[i-1][0]</span></span><br><span class="line"><span class="comment">                3.è¿˜æ²¡ä¹°:0 (å¯ä»¥å¿½ç•¥)</span></span><br><span class="line"><span class="comment">            å–æœ€å¤§å€¼è½¬ç§»å€¼dp[i][0]</span></span><br><span class="line"><span class="comment">            2.2  dp[i][1]ç¬¬iå¤©æŒæœ‰è‚¡ç¥¨</span></span><br><span class="line"><span class="comment">                1.å½“å¤©å…¥æ‰‹:-prices[i]</span></span><br><span class="line"><span class="comment">                2.ä¹‹å‰å°±å…¥æ‰‹äº†:dp[i-1][1]</span></span><br><span class="line"><span class="comment">            å–æœ€å¤§å€¼è½¬ç§»å€¼dp[i][1]</span></span><br><span class="line"><span class="comment">        3.åˆå§‹åŒ–:ç¬¬0å¤©çš„æƒ…å†µ-&gt;dp[0][0]=0,dp[0][1]=-prices[0]</span></span><br><span class="line"><span class="comment">        4.éå†é¡ºåº:iæ­£åº,jæ— æ‰€è°“</span></span><br><span class="line"><span class="comment">        5.è¿”å›å½¢å¼:æœ€åä¸€å¤©è‚¯å®šæ˜¯å–å‡ºè‚¡ç¥¨çš„èº«ä»·å¤§-&gt;dp[len-1][0];</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> prices.length;</span><br><span class="line">        <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[len][<span class="number">2</span>];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">            dp[i][<span class="number">0</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">1</span>] + prices[i], dp[i - <span class="number">1</span>][<span class="number">0</span>]);</span><br><span class="line">            dp[i][<span class="number">1</span>] = Math.max(-prices[i], dp[i - <span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[len - <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-2-LC122-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-II"><a href="#2-2-LC122-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-II" class="headerlink" title="2.2 LC122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II"></a>2.2 <a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/"><strong>LC122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II</strong></a></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        dpè§£æ³•:</span></span><br><span class="line"><span class="comment">        1.çŠ¶æ€å®šä¹‰:dp[i][0]ä»£è¡¨ç¬¬iå¤©(æ“ä½œå)ä¸æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§èº«ä»·,dp[i][0]ä»£è¡¨ç¬¬iå¤©(æ“ä½œå)æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§èº«ä»·</span></span><br><span class="line"><span class="comment">        2.çŠ¶æ€è½¬ç§»:</span></span><br><span class="line"><span class="comment">            2.1 dp[i][0]ç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨</span></span><br><span class="line"><span class="comment">                1.å½“å¤©å–äº†:dp[i-1][1]+prices[i]</span></span><br><span class="line"><span class="comment">                2.ä¹‹å‰å°±å–äº†:dp[i-1][0]</span></span><br><span class="line"><span class="comment">                3.è¿˜æ²¡ä¹°:0 (å¯ä»¥å¿½ç•¥)</span></span><br><span class="line"><span class="comment">            å–æœ€å¤§å€¼è½¬ç§»å€¼dp[i][0]</span></span><br><span class="line"><span class="comment">            2.2  dp[i][1]ç¬¬iå¤©æŒæœ‰è‚¡ç¥¨</span></span><br><span class="line"><span class="comment">                1.å½“å¤©å…¥æ‰‹:dp[i-1][0]-prices[i] (åŒºåˆ«åœ¨æ­¤,ä¹‹å‰ä¸æŒæœ‰è‚¡ç¥¨å¯èƒ½å·²ç»äº¤æ˜“è¿‡å‡ è½®äº†)</span></span><br><span class="line"><span class="comment">                2.ä¹‹å‰å°±å…¥æ‰‹äº†:dp[i-1][1]</span></span><br><span class="line"><span class="comment">            å–æœ€å¤§å€¼è½¬ç§»å€¼dp[i][1]</span></span><br><span class="line"><span class="comment">        3.åˆå§‹åŒ–:ç¬¬0å¤©çš„æƒ…å†µ-&gt;dp[0][0]=0,dp[0][1]=-prices[0]</span></span><br><span class="line"><span class="comment">        4.éå†é¡ºåº:iæ­£åº,jæ— æ‰€è°“</span></span><br><span class="line"><span class="comment">        5.è¿”å›å½¢å¼:æœ€åä¸€å¤©è‚¯å®šæ˜¯å–å‡ºè‚¡ç¥¨çš„èº«ä»·å¤§-&gt;dp[len-1][0]</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> prices.length;</span><br><span class="line">        <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[len][<span class="number">2</span>];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">            dp[i][<span class="number">0</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">1</span>] + prices[i], dp[i - <span class="number">1</span>][<span class="number">0</span>]);</span><br><span class="line">            dp[i][<span class="number">1</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">0</span>] - prices[i], dp[i - <span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[len - <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-3-LC123-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-III"><a href="#2-3-LC123-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-III" class="headerlink" title="2.3 LC123. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III"></a>2.3 <a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/"><strong>LC123. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III</strong></a></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ€»ä½“æ€è·¯:ç¬¬iå¤©æœ‰5ä¸ªé˜¶æ®µ:0.è¿˜æ²¡ä¹° 1.ç¬¬ä¸€æ¬¡ä¹°å…¥å 2.ç¬¬ä¸€æ¬¡æŠ›å”®å 3.ç¬¬äºŒæ¬¡è¿ˆä¹°å…¥å 4.ç¬¬äºŒæ¬¡æŠ›å”®å</span></span><br><span class="line"><span class="comment">        1.çŠ¶æ€å®šä¹‰:dp[i][0]ä¸ºå¤„äºçš„é˜¶æ®µ0æœ€å¤§èº«ä»·;dp[i][1]ä¸ºå¤„äºé˜¶æ®µ1æœ€å¤§èº«ä»·;....</span></span><br><span class="line"><span class="comment">        2.çŠ¶æ€è½¬ç§»:</span></span><br><span class="line"><span class="comment">            2.1 é˜¶æ®µ0èº«ä»·æ’ä¸º0</span></span><br><span class="line"><span class="comment">            2.2 é˜¶æ®µ1æœ‰ä¸¤ç§æƒ…å†µ:å½“å¤©ç¬¬ä¸€æ¬¡ä¹°å’Œä¹‹å‰ç¬¬ä¸€æ¬¡ä¹°äº†,å–å¤§çš„å€¼:max(dp[i-1][0]-prices[i],dp[i-1][1])</span></span><br><span class="line"><span class="comment">            2.3 é˜¶æ®µ2æœ‰ä¸¤ç§æƒ…å†µ:å½“å¤©ç¬¬ä¸€æ¬¡å–å’Œä¹‹å‰ç¬¬ä¸€æ¬¡å–äº†,å–å¤§çš„å€¼:max(dp[i-1][1]+prices[i],dp[i-1][2])</span></span><br><span class="line"><span class="comment">            2.3 é˜¶æ®µ3æœ‰ä¸¤ç§æƒ…å†µ:å½“å¤©ç¬¬äºŒæ¬¡ä¹°å’Œä¹‹å‰ç¬¬äºŒæ¬¡ä¹°äº†,å–å¤§çš„å€¼:max(dp[i-1][2]-prices[i],dp[i-1][3])</span></span><br><span class="line"><span class="comment">            2.3 é˜¶æ®µ4æœ‰ä¸¤ç§æƒ…å†µ:å½“å¤©ç¬¬äºŒæ¬¡å–å’Œä¹‹å‰ç¬¬äºŒæ¬¡å–äº†,å–å¤§çš„å€¼:max(dp[i-1][3]+prices[i],dp[i-1][4])</span></span><br><span class="line"><span class="comment">        3.åˆå§‹åŒ–:dp[0][0]=0,dp[0][1]=-prices[0],dp[0][2]=0,dp[0][3]=-prices[0],dp[0][4]=0</span></span><br><span class="line"><span class="comment">        4.éå†é¡ºåº:iæ­£åº,jæ— æ‰€è°“</span></span><br><span class="line"><span class="comment">        5.è¿”å›å½¢å¼:ç¬¬ä¸€æ¬¡å–å‡ºä¸ç¬¬äºŒæ¬¡å–å‡ºå–æœ€å¤§å€¼:max(dp[len-1][2],dp[len-1][4])</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> prices.length;</span><br><span class="line">        <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[len][<span class="number">5</span>];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">1</span>] = dp[<span class="number">0</span>][<span class="number">3</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">            dp[i][<span class="number">1</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">0</span>] - prices[i], dp[i - <span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">            dp[i][<span class="number">2</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">1</span>] + prices[i], dp[i - <span class="number">1</span>][<span class="number">2</span>]);</span><br><span class="line">            dp[i][<span class="number">3</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">2</span>] - prices[i], dp[i - <span class="number">1</span>][<span class="number">3</span>]);</span><br><span class="line">            dp[i][<span class="number">4</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">3</span>] + prices[i], dp[i - <span class="number">1</span>][<span class="number">4</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Math.max(dp[len - <span class="number">1</span>][<span class="number">2</span>], dp[len - <span class="number">1</span>][<span class="number">4</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-4-LC188-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-IV"><a href="#2-4-LC188-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-IV" class="headerlink" title="2.4 LC188. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV"></a>2.4 <a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/"><strong>LC188. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV</strong></a></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span> k, <span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ€»ä½“æ€è·¯:ä¸ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III æ¥è¿‘,å°†ä¹°å–è‚¡ç¥¨çš„é˜¶æ®µåˆ†ä¸ºç¬¬xæ¬¡ä¹°å…¥å’Œç¬¬xæ¬¡å–å‡º</span></span><br><span class="line"><span class="comment">        çŠ¶æ€0:å¤„äºè¿˜æ²¡ä¹°å…¥è¿‡çš„é˜¶æ®µ</span></span><br><span class="line"><span class="comment">        çŠ¶æ€1:å¤„äºç¬¬1æ¬¡ä¹°å…¥åçš„é˜¶æ®µ</span></span><br><span class="line"><span class="comment">        çŠ¶æ€2:å¤„äºç¬¬1æ¬¡å–å‡ºåçš„é˜¶æ®µ</span></span><br><span class="line"><span class="comment">        çŠ¶æ€3:å¤„äºç¬¬2æ¬¡ä¹°å…¥åçš„é˜¶æ®µ</span></span><br><span class="line"><span class="comment">        çŠ¶æ€4:å¤„äºç¬¬2æ¬¡å–å‡ºåçš„é˜¶æ®µ</span></span><br><span class="line"><span class="comment">        ...ä»¥æ­¤ç±»æ¨,dp[i][j]ä¸­çš„iä»£è¡¨çš„æ˜¯å¤„äºç¬¬iå¤©,jä»£è¡¨çš„å½“å‰è‚¡ç¥¨çš„çŠ¶æ€</span></span><br><span class="line"><span class="comment">        jä¸ºå¥‡æ•°æ—¶,è¡¨ç¤ºå¤„äºç¬¬j/2+1æ¬¡ä¹°å…¥è‚¡ç¥¨é˜¶æ®µ;jä¸ºå¶æ•°æ—¶,è¡¨ç¤ºå¤„äºç¬¬j/2æ¬¡å–å‡ºè‚¡ç¥¨é˜¶æ®µ</span></span><br><span class="line"><span class="comment">        1.çŠ¶æ€å®šä¹‰:dp[i][j]ä»£è¡¨ç¬¬iå¤©å¤„äºçš„çŠ¶æ€jæ—¶çš„æœ€å¤§æ”¶ç›Š</span></span><br><span class="line"><span class="comment">        2.çŠ¶æ€è½¬ç§»:å‚è€ƒçŠ¶æ€1ä¸2å¯ä»¥æ¨å¯¼å‡ºåé¢çš„</span></span><br><span class="line"><span class="comment">            2.0 è¿˜æ²¡ä¹°å…¥è¿‡çš„é˜¶æ®µ(j=0)-&gt;æ’ä¸º0(ç›´æ¥åˆå§‹åŒ–ä¸º0å°±å¯ä»¥å®Œæˆæ±‚è§£)</span></span><br><span class="line"><span class="comment">            2.1 ç¬¬1æ¬¡ä¹°å…¥åçš„é˜¶æ®µ(j=1):ä»Šå¤©åˆšä¹°ä¸ä¹‹å‰å°±ä¹°äº†å–è¾ƒå¤§å€¼-&gt;max(dp[i-1][0]-prices[i],dp[i-1][1])</span></span><br><span class="line"><span class="comment">            2.2 ç¬¬1æ¬¡å–å‡ºåçš„é˜¶æ®µ(j=2):ä»Šå¤©åˆšå–ä¸ä¹‹å‰å°±å–äº†å–è¾ƒå¤§å€¼-&gt;max(dp[i-1][1]+prices[i],dp[i-1][2])</span></span><br><span class="line"><span class="comment">            ...ä»¥æ­¤ç±»æ¨,é‚£ä¹ˆdp[i][j]å¯ä»¥ä»¥jä¸ºä¾æ®åˆ†ä¸ºä¸¤ç§æƒ…å†µè¿›è¡Œè½¬ç§»è®¡ç®—:</span></span><br><span class="line"><span class="comment">            jä¸ºå¥‡æ•°æ—¶-&gt;dp[i][j]=max(dp[i-1][j-1]-prices[i],dp[i-1][j])</span></span><br><span class="line"><span class="comment">            jä¸ºå¶æ•°æ—¶-&gt;dp[i][j]=max(dp[i-1][j-1]+prices[i],dp[i-1][j])</span></span><br><span class="line"><span class="comment">        3.åˆå§‹åŒ–:jå¥‡æ•°è¡¨ç¤ºä¹°å…¥çš„çŠ¶æ€-&gt;dp[0][j]=-prices[0],jå¥‡å¶è¡¨ç¤ºå–å‡ºçš„çŠ¶æ€-&gt;dp[0][j]=0</span></span><br><span class="line"><span class="comment">        4.éå†é¡ºåº:iæ­£åº,jæ— æ‰€è°“</span></span><br><span class="line"><span class="comment">        5.è¿”å›å½¢å¼:è¿”å›dp[len-1][j]å…¶ä¸­jä¸ºå¶æ•°çš„æœ€å¤§å€¼(å–å‡ºæ—¶èº«ä»·æ¯”æŒæœ‰æ—¶å¤§)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span> (prices == <span class="literal">null</span> || prices.length == <span class="number">0</span> || k == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> prices.length;</span><br><span class="line">        <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[len][<span class="number">2</span> * k + <span class="number">1</span>];</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= <span class="number">2</span> * k; j += <span class="number">2</span>) &#123;</span><br><span class="line">            dp[<span class="number">0</span>][j] = -prices[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="comment">// ç»Ÿè®¡jä¸ºå¥‡æ•°çš„æƒ…å†µ:å¥‡æ•°+1å°±æ˜¯å¶æ•°</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= <span class="number">2</span> * k; j += <span class="number">2</span>) &#123;</span><br><span class="line">                dp[i][j] = Math.max(dp[i - <span class="number">1</span>][j - <span class="number">1</span>] - prices[i], dp[i - <span class="number">1</span>][j]);</span><br><span class="line">                dp[i][j + <span class="number">1</span>] = Math.max(dp[i - <span class="number">1</span>][j] + prices[i], dp[i - <span class="number">1</span>][j + <span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">2</span>; j &lt;= <span class="number">2</span> * k; j += <span class="number">2</span>) &#123;</span><br><span class="line">            max = Math.max(max, dp[len - <span class="number">1</span>][j]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-5-LC309-æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ"><a href="#2-5-LC309-æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ" class="headerlink" title="2.5 LC309. æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ"></a>2.5 <a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/"><strong>LC309. æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ</strong></a></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ€»ä½“æ€è·¯:ä¸æœ€ä½³ä¹°å–è‚¡ç¥¨IIæ¯”è¾ƒç±»ä¼¼,å¯ä»¥æ— é™æ¬¡äº¤æ˜“ä½†æ˜¯å«æœ‰å†·å†»æœŸ</span></span><br><span class="line"><span class="comment">        ä¸€å…±æœ‰ä»¥ä¸‹6ä¸ªçŠ¶æ€:</span></span><br><span class="line"><span class="comment">        çŠ¶æ€0:å½“å‰è¿˜æ²¡æ“ä½œè‚¡ç¥¨</span></span><br><span class="line"><span class="comment">        çŠ¶æ€1:ä»Šå¤©åˆšä¹°å…¥</span></span><br><span class="line"><span class="comment">        çŠ¶æ€2:ä¹‹å‰å°±ä¹°å…¥äº†</span></span><br><span class="line"><span class="comment">        çŠ¶æ€3:ä»Šå¤©åˆšå–å‡º</span></span><br><span class="line"><span class="comment">        çŠ¶æ€4:å¤„äºå†·å†»æœŸ</span></span><br><span class="line"><span class="comment">        çŠ¶æ€5:ä¹‹å‰å–å‡ºä¸”è¿‡äº†å†·å†»æœŸ</span></span><br><span class="line"><span class="comment">        1.çŠ¶æ€å®šä¹‰:dp[i][j]è¡¨ç¤ºç¬¬iå¤©å¤„äºçŠ¶æ€jçš„æœ€å¤§æ”¶ç›Š</span></span><br><span class="line"><span class="comment">        2.çŠ¶æ€è½¬ç§»:</span></span><br><span class="line"><span class="comment">            2.0 dp[i][0]=0</span></span><br><span class="line"><span class="comment">            2.1 dp[i][1]=max(dp[i-1][0]-prices[i],dp[i-1][5]-prices[i],dp[i-1][3]-prices[i])</span></span><br><span class="line"><span class="comment">                        =max(dp[i-1][5]-prices[i],dp[i-1][3]-prices[i])</span></span><br><span class="line"><span class="comment">            2.2 dp[i][2]=max(dp[i-1][1],dp[i-1][2])</span></span><br><span class="line"><span class="comment">            2.3 dp[i][3]=max(dp[i-1][2]+prices[i],dp[i-1][1]+prices[i])</span></span><br><span class="line"><span class="comment">            2.4 dp[i][4]=dp[i-1][3]</span></span><br><span class="line"><span class="comment">            2.5 dp[i][5]=max(dp[i-1][4],dp[i-1][5])</span></span><br><span class="line"><span class="comment">        3.åˆå§‹åŒ–:dp[0][0]=0,dp[0][1]=-prices[0],dp[0][2]=-prices[0],dp[0][3]=dp[0][4]=dp[0][5]=0</span></span><br><span class="line"><span class="comment">        4.éå†é¡ºåº:iæ­£åº,jæ— æ‰€è°“</span></span><br><span class="line"><span class="comment">        5.è¿”å›å½¢å¼:è¿”å›max(dp[len-1][3],dp[len][4],dp[len-1][5])</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> prices.length;</span><br><span class="line">        <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[len][<span class="number">6</span>];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">1</span>] = dp[<span class="number">0</span>][<span class="number">2</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">            dp[i][<span class="number">1</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">5</span>] - prices[i], dp[i - <span class="number">1</span>][<span class="number">4</span>] - prices[i]);</span><br><span class="line">            dp[i][<span class="number">2</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">1</span>], dp[i - <span class="number">1</span>][<span class="number">2</span>]);</span><br><span class="line">            dp[i][<span class="number">3</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">2</span>] + prices[i], dp[i - <span class="number">1</span>][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            dp[i][<span class="number">4</span>] = dp[i - <span class="number">1</span>][<span class="number">3</span>];</span><br><span class="line">            dp[i][<span class="number">5</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">4</span>], dp[i - <span class="number">1</span>][<span class="number">5</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Math.max(dp[len - <span class="number">1</span>][<span class="number">3</span>], Math.max(dp[len - <span class="number">1</span>][<span class="number">4</span>], dp[len - <span class="number">1</span>][<span class="number">5</span>]));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-6-LC714-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹"><a href="#2-6-LC714-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹" class="headerlink" title="2.6 LC714. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹"></a>2.6 <a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/"><strong>LC714. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹</strong></a></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices, <span class="type">int</span> fee)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ä¸è‚¡ç¥¨ä¹°å–IIååˆ†ç±»ä¼¼,å”¯ä¸€çš„ä¸åŒå°±æ˜¯è¦æ”¯ä»˜æ‰‹ç»­è´¹,å¯ä»¥çœ‹åšå–å‡ºçš„æ—¶å€™è‚¡ç¥¨ä»·æ ¼å‡å°‘fee</span></span><br><span class="line"><span class="comment">        ä¸€å…±æœ‰2ç§çŠ¶æ€:(å…¶ä¸­æ²¡æ“ä½œè‚¡ç¥¨å½’çº³åˆ°æƒ…å†µ1)</span></span><br><span class="line"><span class="comment">        çŠ¶æ€0:æŒæœ‰è‚¡ç¥¨</span></span><br><span class="line"><span class="comment">        çŠ¶æ€1:ä¸æŒæœ‰è‚¡ç¥¨</span></span><br><span class="line"><span class="comment">        1.çŠ¶æ€å®šä¹‰:dp[i][j]ä»£è¡¨çš„ç¬¬iå¤©å¤„äºçŠ¶æ€jæ—¶çš„æœ€å¤§èº«ä»·</span></span><br><span class="line"><span class="comment">        2.çŠ¶æ€è½¬ç§»:</span></span><br><span class="line"><span class="comment">            2.0 æŒæœ‰è‚¡ç¥¨,å¯èƒ½ä»Šå¤©åˆšä¹°æˆ–è€…ä¹‹å‰å°±ä¹°äº†:dp[i][0]=max(dp[i-1][1]-prices[i],dp[i-1][0])</span></span><br><span class="line"><span class="comment">            2.1 ä¸æŒæœ‰è‚¡ç¥¨,å¯èƒ½ä»Šå¤©åˆšå–æˆ–è€…ä¹‹å‰å°±å–äº†:dp[i][1]=max(dp[i-1][1],dp[i-1][0]+prices[i]-fee)</span></span><br><span class="line"><span class="comment">        3.åˆå§‹åŒ–:åˆå§‹åŒ–dp[0][0]=-prices[0],dp[0][1]=0</span></span><br><span class="line"><span class="comment">        4.éå†é¡ºåº:iæ­£åº,jä»»æ„</span></span><br><span class="line"><span class="comment">        5.è¿”å›å½¢å¼:è¿”å›dp[len-1][1]</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> prices.length;</span><br><span class="line">        <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[len][<span class="number">2</span>];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">            dp[i][<span class="number">0</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">1</span>] - prices[i], dp[i - <span class="number">1</span>][<span class="number">0</span>]);</span><br><span class="line">            dp[i][<span class="number">1</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">1</span>], dp[i - <span class="number">1</span>][<span class="number">0</span>] + prices[i] - fee);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[len - <span class="number">1</span>][<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-LC926-å°†å­—ç¬¦ä¸²ç¿»è½¬åˆ°å•è°ƒé€’å¢"><a href="#3-LC926-å°†å­—ç¬¦ä¸²ç¿»è½¬åˆ°å•è°ƒé€’å¢" class="headerlink" title="3.LC926. å°†å­—ç¬¦ä¸²ç¿»è½¬åˆ°å•è°ƒé€’å¢"></a>3.<a href="https://leetcode.cn/problems/flip-string-to-monotone-increasing/"><strong>LC926. å°†å­—ç¬¦ä¸²ç¿»è½¬åˆ°å•è°ƒé€’å¢</strong></a></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minFlipsMonoIncr</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        åŠ¨æ€è§„åˆ’:</span></span><br><span class="line"><span class="comment">        ç¿»è½¬åçš„å•è°ƒé€’å¢å­—ç¬¦ä¸²å¯èƒ½çš„æƒ…å½¢æœ‰:000...000  000...111  111...111</span></span><br><span class="line"><span class="comment">        å½’ç»“èµ·æ¥å°±æ˜¯ä¸¤ç§æƒ…å½¢:ä»¥0ç»“å°¾å’Œä»¥1ç»“å°¾ åˆ†å¼€æ¥è€ƒè™‘è½¬ç§»ä¼šæ›´åŠ æ˜ç¡®</span></span><br><span class="line"><span class="comment">        1.çŠ¶æ€å®šä¹‰:f[i][0]ä¸ºè€ƒè™‘s[0,i]ç¿»è½¬åä¸ºä»¥0ç»“å°¾çš„s[0,i]ä¸ºé€’å¢åºåˆ—æœ€å°‘ç¿»è½¬æ¬¡æ•°</span></span><br><span class="line"><span class="comment">                    f[i][1]ä¸ºè€ƒè™‘s[0,i]ç¿»è½¬åä¸ºä»¥1ç»“å°¾çš„s[0,i]ä¸ºé€’å¢åºåˆ—æœ€å°‘ç¿»è½¬æ¬¡æ•°</span></span><br><span class="line"><span class="comment">        2.çŠ¶æ€è½¬ç§»:è¦æ±‚f[i][0]ä¸f[i][1]å°±è¦çœ‹s[i]</span></span><br><span class="line"><span class="comment">            2.1 s[i]==0æ—¶ f[i][0]=f[i-1][0]  f[i][1]=min(f[i-1][1],f[i-1][0])+1</span></span><br><span class="line"><span class="comment">            2.2 s[i]==1æ—¶ f[i][1]=min(f[i-1][0],f[i-1][1])  f[i][0]=f[i-1][0]+1</span></span><br><span class="line"><span class="comment">        3.åˆå§‹åŒ–:f[0][0]=s[0]==0?0:1  f[0][1]=s[0]==1?0:1</span></span><br><span class="line"><span class="comment">        4.éå†é¡ºåº:iæ­£åº</span></span><br><span class="line"><span class="comment">        5.è¿”å›å½¢å¼:è¿”å›min(f[n-1][0],f[n-1][1]) æœ€åè¢«ç¿»è½¬æˆ0æˆ–è€…1ç»“å°¾éƒ½æœ‰å¯èƒ½ä½¿å¾—ç¿»è½¬æ¬¡æ•°æœ€å°‘</span></span><br><span class="line"><span class="comment">        æ—¶é—´å¤æ‚åº¦:O(N)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> s.length();</span><br><span class="line">        <span class="type">char</span>[] chs = s.toCharArray();</span><br><span class="line">        <span class="type">int</span>[][] f = <span class="keyword">new</span> <span class="title class_">int</span>[n][<span class="number">2</span>];</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = chs[<span class="number">0</span>] == <span class="string">&#x27;0&#x27;</span> ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">1</span>] = chs[<span class="number">0</span>] == <span class="string">&#x27;1&#x27;</span> ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (chs[i] == <span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">                f[i][<span class="number">0</span>] = f[i - <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">                f[i][<span class="number">1</span>] = Math.min(f[i - <span class="number">1</span>][<span class="number">1</span>], f[i - <span class="number">1</span>][<span class="number">0</span>]) + <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                f[i][<span class="number">0</span>] = f[i - <span class="number">1</span>][<span class="number">0</span>] + <span class="number">1</span>;</span><br><span class="line">                f[i][<span class="number">1</span>] = Math.min(f[i - <span class="number">1</span>][<span class="number">0</span>], f[i - <span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Math.min(f[n - <span class="number">1</span>][<span class="number">0</span>], f[n - <span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-LC2320-ç»Ÿè®¡æ”¾ç½®æˆ¿å­çš„æ–¹å¼æ•°"><a href="#4-LC2320-ç»Ÿè®¡æ”¾ç½®æˆ¿å­çš„æ–¹å¼æ•°" class="headerlink" title="4.LC2320. ç»Ÿè®¡æ”¾ç½®æˆ¿å­çš„æ–¹å¼æ•°"></a>4.<a href="https://leetcode.cn/problems/count-number-of-ways-to-place-houses/"><strong>LC2320. ç»Ÿè®¡æ”¾ç½®æˆ¿å­çš„æ–¹å¼æ•°</strong></a></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countHousePlacements</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        çŠ¶æ€æœºDPé—®é¢˜(æœ‰æ›´åŠ ç®€å•çš„åšæ³•ï¼Œè¿™é‡Œä¸ºäº†æ¼”ç¤ºçŠ¶æ€æœºDP):</span></span><br><span class="line"><span class="comment">        1.çŠ¶æ€å®šä¹‰:</span></span><br><span class="line"><span class="comment">            1.1 f[i][0]ä¸ºè€ƒè™‘ä¸¤è¾¹[0,i]çš„åœ°æ–¹iä½ç½®ä¸Šä¸‹éƒ½ä¸æ”¾ç½®æˆ¿å­çš„æ–¹æ¡ˆæ•°</span></span><br><span class="line"><span class="comment">            1.2 f[i][1]ä¸ºè€ƒè™‘ä¸¤è¾¹[0,i]çš„åœ°æ–¹iä½ç½®åªæ”¾ä¸Šé¢çš„åœ°æ–¹</span></span><br><span class="line"><span class="comment">            1.3 f[i][2]ä¸ºè€ƒè™‘ä¸¤è¾¹[0,i]çš„åœ°æ–¹iä½ç½®åªæ”¾ä¸‹é¢çš„åœ°æ–¹</span></span><br><span class="line"><span class="comment">            1.4 f[i][3]ä¸ºè€ƒè™‘ä¸¤è¾¹[0,i]çš„åœ°æ–¹iä½ç½®ä¸Šä¸‹éƒ½æ”¾ç½®æˆ¿å­çš„æ–¹æ¡ˆæ•°</span></span><br><span class="line"><span class="comment">        2.çŠ¶æ€è½¬ç§»:è€ƒè™‘iä½ç½®ä¸€å…±æœ‰4ç§çŠ¶æ€,æ ¹æ®å®é™…è½¬ç§»å³å¯</span></span><br><span class="line"><span class="comment">            f[i][0]=f[i-1][3]+f[i-1][2]+f[i-1][1]+f[i-1][0]</span></span><br><span class="line"><span class="comment">            f[i][1]=f[i-1][2]+f[i-1][0]</span></span><br><span class="line"><span class="comment">            f[i][2]=f[i-1][1]+f[i-1][0]</span></span><br><span class="line"><span class="comment">            f[i][3]=f[i-1][0]</span></span><br><span class="line"><span class="comment">        3.åˆå§‹åŒ–:f[0][0]=f[0][1]=f[0][2]=f[0][3]=1</span></span><br><span class="line"><span class="comment">        4.éå†é¡ºåº:iæ­£åº</span></span><br><span class="line"><span class="comment">        5.è¿”å›å½¢å¼:æœ€å4ç§æƒ…å½¢åŠ èµ·æ¥å°±æ˜¯ç­”æ¡ˆsum(f[n-1][j])</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">MOD</span> <span class="operator">=</span> (<span class="type">int</span>) <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line">        <span class="type">long</span>[][] f = <span class="keyword">new</span> <span class="title class_">long</span>[n][<span class="number">4</span>];</span><br><span class="line">        Arrays.fill(f[<span class="number">0</span>], <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            f[i][<span class="number">0</span>] = (f[i - <span class="number">1</span>][<span class="number">3</span>] + f[i - <span class="number">1</span>][<span class="number">2</span>] + f[i - <span class="number">1</span>][<span class="number">1</span>] + f[i - <span class="number">1</span>][<span class="number">0</span>]) % MOD;</span><br><span class="line">            f[i][<span class="number">1</span>] = (f[i - <span class="number">1</span>][<span class="number">2</span>] + f[i - <span class="number">1</span>][<span class="number">0</span>]) % MOD;</span><br><span class="line">            f[i][<span class="number">2</span>] = (f[i - <span class="number">1</span>][<span class="number">1</span>] + f[i - <span class="number">1</span>][<span class="number">0</span>]) % MOD;</span><br><span class="line">            f[i][<span class="number">3</span>] = (f[i - <span class="number">1</span>][<span class="number">0</span>]) % MOD;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">long</span> ff : f[n - <span class="number">1</span>]) &#123;</span><br><span class="line">            res = (res + ff) % MOD;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-LC552-å­¦ç”Ÿå‡ºå‹¤è®°å½•-II"><a href="#5-LC552-å­¦ç”Ÿå‡ºå‹¤è®°å½•-II" class="headerlink" title="5.LC552. å­¦ç”Ÿå‡ºå‹¤è®°å½• II"></a>5.<a href="https://leetcode.cn/problems/student-attendance-record-ii/"><strong>LC552. å­¦ç”Ÿå‡ºå‹¤è®°å½• II</strong></a></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">checkRecord</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        åŠ¨æ€è§„åˆ’:</span></span><br><span class="line"><span class="comment">        æŒ‰ æ€»å‡ºå‹¤ è®¡ï¼Œå­¦ç”Ÿç¼ºå‹¤ï¼ˆ&#x27;A&#x27;ï¼‰ä¸¥æ ¼ å°‘äºä¸¤å¤©ã€‚</span></span><br><span class="line"><span class="comment">        é‚£ä¹ˆå¯ä»¥å°†æƒ…å†µåˆ†ä¸ºä¸¤ç§:0å¤©æˆ–è€…1å¤©A</span></span><br><span class="line"><span class="comment">        å…¶ä¸­ï¼Œ1å¤©çš„å¯ä»¥æšä¸¾Aå‡ºç°çš„å¤©æ•°ï¼Œç„¶åä¸¤è¾¹é€šè¿‡ä¹˜æ³•åŸç†è¿›è¡Œæ±‚è§£æ¬¡æ•°</span></span><br><span class="line"><span class="comment">            0å¤©çš„å¯ä»¥é€šè¿‡åŠ¨æ€è§„åˆ’è¿›è¡Œæ±‚è§£ï¼Œå› ä¸ºåªæœ‰Lä¸Pä¸¤ç§çŠ¶æ€ï¼Œåˆæ³•æƒ…å†µä¸ºæœ€å¤šä¸¤ä¸ªè¿ç»­çš„L</span></span><br><span class="line"><span class="comment">        1.çŠ¶æ€å®šä¹‰:ç”±äºç¬¬iå¤©ï¼ˆä»1å¼€å§‹ï¼‰çš„é€‰æ‹©è¢«å‰ä¸¤å¤©i-1ä¸i-2é™åˆ¶äº†ï¼Œå› æ­¤ä¼šå¤šå‡ºä¸¤ä¸ªç»´åº¦f[i][pre][cur]</span></span><br><span class="line"><span class="comment">            å› æ­¤å®šä¹‰f[i][0][0]ä¸ºç¬¬i-1ä¸iå¤©é€‰æ‹©ä¸ºLLçš„æƒ…å½¢æ•°ï¼Œf[i][0][1]ä¸ºç¬¬i-1ä¸iå¤©é€‰æ‹©ä¸ºLPçš„æƒ…å½¢æ•°</span></span><br><span class="line"><span class="comment">                f[i][1][0]ä¸ºç¬¬i-1ä¸iå¤©é€‰æ‹©ä¸ºPLçš„æƒ…å½¢æ•°ï¼Œf[i][1][1]ä¸ºç¬¬i-1ä¸iå¤©é€‰æ‹©ä¸ºPPçš„æƒ…å½¢æ•°</span></span><br><span class="line"><span class="comment">        2.çŠ¶æ€è½¬ç§»:æ˜¾ç„¶f[i][0][0]=f[i-1][1][0]ï¼Œf[i][0][1]=f[i-1][0][0]+f[i-1][1][0]</span></span><br><span class="line"><span class="comment">                f[i][1][0]=f[i-1][0][1]+f[i-1][1][1]ï¼Œf[i][1][1]=f[i-1][1][1]+f[i-1][0][1]</span></span><br><span class="line"><span class="comment">        3.åˆå§‹åŒ–:f[2][0][0]=1ï¼Œf[2][1][0]=1ï¼Œf[2][0][1]=1ï¼Œf[2][1][1]=1</span></span><br><span class="line"><span class="comment">        4.éå†é¡ºåº:iæ­£åºï¼Œå…¶ä½™ä»»æ„</span></span><br><span class="line"><span class="comment">        5.è¿”å›å½¢å¼:âˆ‘f[n][pre][cur]+æœ‰1ä¸ªAçš„æƒ…å½¢æ•°</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">MOD</span> <span class="operator">=</span> (<span class="type">int</span>) <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">        <span class="type">long</span>[][][] f = <span class="keyword">new</span> <span class="title class_">long</span>[n + <span class="number">1</span>][<span class="number">2</span>][<span class="number">2</span>];</span><br><span class="line">        f[<span class="number">2</span>][<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        f[<span class="number">2</span>][<span class="number">1</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        f[<span class="number">2</span>][<span class="number">0</span>][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        f[<span class="number">2</span>][<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">3</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            f[i][<span class="number">0</span>][<span class="number">0</span>] = f[i - <span class="number">1</span>][<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">            f[i][<span class="number">0</span>][<span class="number">1</span>] = (f[i - <span class="number">1</span>][<span class="number">0</span>][<span class="number">0</span>] + f[i - <span class="number">1</span>][<span class="number">1</span>][<span class="number">0</span>]) % MOD;</span><br><span class="line">            f[i][<span class="number">1</span>][<span class="number">0</span>] = (f[i - <span class="number">1</span>][<span class="number">0</span>][<span class="number">1</span>] + f[i - <span class="number">1</span>][<span class="number">1</span>][<span class="number">1</span>]) % MOD;</span><br><span class="line">            f[i][<span class="number">1</span>][<span class="number">1</span>] = (f[i - <span class="number">1</span>][<span class="number">1</span>][<span class="number">1</span>] + f[i - <span class="number">1</span>][<span class="number">0</span>][<span class="number">1</span>]) % MOD;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// sum[i]è¡¨ç¤ºé•¿åº¦ä¸ºiå¤©æ•°ä¸åŒ…å«Açš„åˆæ³•æƒ…å½¢æ•°</span></span><br><span class="line">        <span class="type">long</span>[] sum = <span class="keyword">new</span> <span class="title class_">long</span>[n + <span class="number">1</span>];</span><br><span class="line">        sum[<span class="number">0</span>] = <span class="number">1</span>; <span class="comment">// æ²¡æœ‰å¤©æ•°è§†ä¸º1</span></span><br><span class="line">        sum[<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            sum[i] = (f[i][<span class="number">0</span>][<span class="number">0</span>] + f[i][<span class="number">0</span>][<span class="number">1</span>] + f[i][<span class="number">1</span>][<span class="number">0</span>] + f[i][<span class="number">1</span>][<span class="number">1</span>]) % MOD;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// System.out.println(Arrays.toString(sum));</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">res</span> <span class="operator">=</span> sum[n];</span><br><span class="line">        <span class="comment">// ç»Ÿè®¡å¸¦Açš„åˆæ³•æƒ…å½¢æ•°ï¼Œå…¶ä¸­iä¸ºAå‡ºç°çš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            res = (res + (sum[i - <span class="number">1</span>] * sum[n - i]) % MOD) % MOD;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">çŠ¶æ€æœºDPå°±æ˜¯è€ƒè™‘åˆ°å½“å‰æ—¶åˆ»ã€ä½ç½®ç­‰ï¼Œæœ‰å¯èƒ½å¤„äºæœ‰é™ç§æƒ…å½¢ä¸­çš„å…¶ä¸­ä¸€ç§</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fomal.cc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="https://www.fomal.cc/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    <category term="çŠ¶æ€æœºDP" scheme="https://www.fomal.cc/tags/%E7%8A%B6%E6%80%81%E6%9C%BADP/"/>
    
  </entry>
  
  <entry>
    <title>äºŒç»´å‰ç¼€å’Œä¸“é¢˜</title>
    <link href="https://www.fomal.cc/posts/b7f88f4c.html"/>
    <id>https://www.fomal.cc/posts/b7f88f4c.html</id>
    <published>2022-08-11T14:23:10.000Z</published>
    <updated>2022-08-11T14:23:10.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>äºŒç»´å‰ç¼€å’Œæ¨¡æ¿ï¼š</strong></p><p><strong>ä¸€ç»´å‰ç¼€å’Œ:sum[i,j]=sum[j+1]-sum[i]</strong></p><p>å°†sum[i][j]çœ‹æˆæ˜¯ä»¥ <strong>matrix[0][0]</strong> ä¸ºå·¦ä¸Šè§’é¡¶ç‚¹, <strong>matrix[i-1][j-1]</strong> ä¸ºå³ä¸‹è§’é¡¶ç‚¹çš„çŸ©é˜µå†…æ‰€æœ‰å…ƒç´ çš„å’Œ</p><p><strong>åˆå§‹åŒ–sumçŸ©é˜µ</strong>ï¼šsum[i + 1][j + 1] = sum[i][j + 1] + sum[i + 1][j] - sum[i][j] + matrix[i][j];</p><p><img src="../images/p21.jpg" alt="p21"></p><p><strong>åŒºå—æ±‚å’Œ:</strong> sumRegion(r1, c1, r2, c2)=sum[r2 + 1, c2 + 1] - sum[r1, c2 + 1] - sum[r2 + 1, c1] + sum[r1, c1]</p><p><img src="../images/p22.jpg" alt="p22"></p><p>ä¹Ÿå°±æ˜¯æ•°è¯´sum[i][j]æ˜¯æ¯”matrix<strong>è¶…å‰ä¸€ä½</strong>çš„</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NumMatrix</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span>[][] sum;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NumMatrix</span><span class="params">(<span class="type">int</span>[][] matrix)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> matrix.length, n = matrix[<span class="number">0</span>].length;</span><br><span class="line">        sum = <span class="keyword">new</span> <span class="title class_">int</span>[m + <span class="number">1</span>][n + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                sum[i + <span class="number">1</span>][j + <span class="number">1</span>] = sum[i][j + <span class="number">1</span>] + sum[i + <span class="number">1</span>][j] - sum[i][j] + matrix[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ±‚ä»¥(r1,c1)ä¸ºå·¦ä¸Šè§’,(r2,c2)ä¸ºå³ä¸‹è§’çš„åŒºå—å’Œ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sumRegion</span><span class="params">(<span class="type">int</span> r1, <span class="type">int</span> c1, <span class="type">int</span> r2, <span class="type">int</span> c2)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sum[r2 + <span class="number">1</span>][c2 + <span class="number">1</span>] - sum[r1][c2 + <span class="number">1</span>] - sum[r2 + <span class="number">1</span>][c1] + sum[r1][c1];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">äºŒç»´å‰ç¼€å’Œæ˜¯æŒ‡æ•°æ®ç»´åº¦æœ‰ä¸¤ä¸ªiä¸jï¼Œæ±‚è§£çŸ©é˜µå†…æŸä¸ªçŸ©å½¢åŒºåŸŸå†…æ•°å­—å’Œçš„é—®é¢˜æ˜¯äºŒç»´å‰ç¼€å’Œé—®é¢˜</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fomal.cc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="äºŒç»´å‰ç¼€å’Œ" scheme="https://www.fomal.cc/tags/%E4%BA%8C%E7%BB%B4%E5%89%8D%E7%BC%80%E5%92%8C/"/>
    
  </entry>
  
  <entry>
    <title>æ»‘åŠ¨çª—å£ä¸“é¢˜</title>
    <link href="https://www.fomal.cc/posts/63fc9391.html"/>
    <id>https://www.fomal.cc/posts/63fc9391.html</id>
    <published>2022-08-11T14:20:42.000Z</published>
    <updated>2022-08-11T14:20:42.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1004-æœ€å¤§è¿ç»­1çš„ä¸ªæ•°-III"><a href="#1004-æœ€å¤§è¿ç»­1çš„ä¸ªæ•°-III" class="headerlink" title="1004. æœ€å¤§è¿ç»­1çš„ä¸ªæ•° III"></a><a href="https://leetcode.cn/problems/max-consecutive-ones-iii/">1004. æœ€å¤§è¿ç»­1çš„ä¸ªæ•° III</a></h2><p><strong>è§£é¢˜æ€è·¯</strong></p><p> <strong>é‡ç‚¹ï¼š</strong> é¢˜æ„è½¬æ¢ã€‚æŠŠã€Œæœ€å¤šå¯ä»¥æŠŠ K ä¸ª 0 å˜æˆ 1ï¼Œæ±‚ä»…åŒ…å« 1 çš„æœ€é•¿å­æ•°ç»„çš„é•¿åº¦ã€è½¬æ¢ä¸º ã€Œæ‰¾å‡ºä¸€ä¸ªæœ€é•¿çš„å­æ•°ç»„ï¼Œè¯¥å­æ•°ç»„å†…æœ€å¤šå…è®¸æœ‰ K ä¸ª 0 ã€ã€‚</p><p>ç»è¿‡ä¸Šé¢çš„é¢˜æ„è½¬æ¢ï¼Œæˆ‘ä»¬å¯çŸ¥æœ¬é¢˜æ˜¯æ±‚æœ€å¤§è¿ç»­å­åŒºé—´ï¼Œå¯ä»¥ä½¿ç”¨æ»‘åŠ¨çª—å£æ–¹æ³•ã€‚æ»‘åŠ¨çª—å£çš„é™åˆ¶æ¡ä»¶æ˜¯ï¼šçª—å£å†…æœ€å¤šæœ‰ K ä¸ª 0ã€‚</p><p><strong>ä»£ç æ€è·¯ï¼š</strong></p><p>1.ä½¿ç”¨ l å’Œ r ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘æ»‘åŠ¨çª—å£çš„å·¦å³è¾¹ç•Œã€‚</p><p>2.<strong>r ä¸»åŠ¨å³ç§»ï¼š</strong> r æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥ã€‚å½“nums[r]ä¸º 0ï¼Œè¯´æ˜æ»‘åŠ¨çª—å£å†…å¢åŠ äº†ä¸€ä¸ª 0ï¼›</p><p>3.<strong>l è¢«åŠ¨å³ç§»ï¼š</strong> åˆ¤æ–­æ­¤æ—¶çª—å£å†… 0 çš„ä¸ªæ•°ï¼Œå¦‚æœè¶…è¿‡äº† kï¼Œåˆ™ l æŒ‡é’ˆè¢«è¿«å³ç§»ï¼Œç›´è‡³çª—å£å†…çš„ 0 çš„ä¸ªæ•°å°äºç­‰äº k ä¸ºæ­¢ã€‚</p><p>4.<strong>æ»‘åŠ¨çª—å£é•¿åº¦æœ€å¤§å€¼</strong>å°±æ˜¯æ‰€æ±‚ã€‚</p><p>ç¤ºä¾‹ï¼š</p><p>ä»¥ A= [1,1,1,0,0,0,1,1,1,1,0], K = 2 ä¸ºä¾‹ï¼Œä¸‹é¢çš„åŠ¨å›¾æ¼”ç¤ºäº†æ»‘åŠ¨çª—å£çš„ä¸¤ä¸ªæŒ‡é’ˆçš„ç§»åŠ¨æƒ…å†µã€‚</p><p>è§ <a href="https://leetcode.cn/problems/max-consecutive-ones-iii/solution/fen-xiang-hua-dong-chuang-kou-mo-ban-mia-f76z/"><strong>1004. æœ€å¤§è¿ç»­1çš„ä¸ªæ•° III - è´Ÿé›ªæ˜çƒ› çš„é¢˜è§£</strong></a></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestOnes</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">zero</span> <span class="operator">=</span> <span class="number">0</span>;   <span class="comment">// çª—å£ä¸­0çš„ä¸ªæ•°</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> <span class="number">0</span>, l = <span class="number">0</span>; r &lt; n; r++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[r] == <span class="number">0</span>) zero++; <span class="comment">// rä¸»åŠ¨å³ç§»å½¢æˆæ–°çš„çª—å£</span></span><br><span class="line">        <span class="comment">// çª—å£å†…çš„0ä¸ªæ•°&gt;kä»£è¡¨ä¸ç¬¦åˆé¢˜æ„-&gt;æ­¤æ—¶låº”è¢«åŠ¨ç§»åŠ¨è‡³ç¬¦åˆå¯¹åº”rè¦æ±‚çš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">while</span> (zero &gt; k) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[l] == <span class="number">0</span>) zero--;</span><br><span class="line">            l++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ç»´æŠ¤æ¯ä¸€è½®rå¯¹åº”çš„çª—å£é•¿åº¦æœ€å¤§å€¼å°±æ˜¯res</span></span><br><span class="line">        res = Math.max(res, r - l + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ†äº«æ»‘åŠ¨çª—å£æ¨¡æ¿</p><p>ã€ŠæŒ‘æˆ˜ç¨‹åºè®¾è®¡ç«èµ›ã€‹è¿™æœ¬ä¹¦ä¸­æŠŠæ»‘åŠ¨çª—å£å«åšã€Œè™«å–æ³•ã€ï¼Œæˆ‘è§‰å¾—éå¸¸ç”ŸåŠ¨å½¢è±¡ã€‚å› ä¸ºæ»‘åŠ¨çª—å£çš„ä¸¤ä¸ªæŒ‡é’ˆç§»åŠ¨çš„è¿‡ç¨‹å’Œè™«å­çˆ¬åŠ¨çš„è¿‡ç¨‹éå¸¸åƒï¼šå‰è„šä¸åŠ¨ï¼ŒæŠŠåè„šç§»åŠ¨è¿‡æ¥ï¼›åè„šä¸åŠ¨ï¼ŒæŠŠå‰è„šå‘å‰ç§»åŠ¨ã€‚</p><p>æˆ‘åˆ†äº«ä¸€ä¸ªæ»‘åŠ¨çª—å£çš„æ¨¡æ¿ï¼Œèƒ½è§£å†³å¤§å¤šæ•°çš„æ»‘åŠ¨çª—å£é—®é¢˜ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] findSubArray(<span class="type">int</span>[] nums)&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> num.length; <span class="comment">// æ•°ç»„orå­—ç¬¦ä¸²é•¿åº¦</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">0</span>, r = <span class="number">0</span>;     <span class="comment">// åŒæŒ‡é’ˆï¼Œè¡¨ç¤ºå½“å‰éå†çš„åŒºé—´[l, r]ï¼Œé—­åŒºé—´</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span> <span class="comment">// ç”¨äºç»Ÿè®¡ å­æ•°ç»„orå­åŒºé—´ æ˜¯å¦æœ‰æ•ˆï¼Œæ ¹æ®é¢˜ç›®å¯èƒ½ä¼šæ”¹æˆæ±‚å’Œorè®¡æ•°</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span> <span class="comment">// ä¿å­˜æœ€å¤§çš„æ»¡è¶³é¢˜ç›®è¦æ±‚çš„ å­æ•°ç»„orå­ä¸² é•¿åº¦</span></span><br><span class="line">    <span class="keyword">while</span> (r &lt; n)&#123;     <span class="comment">// å½“å³è¾¹çš„æŒ‡é’ˆæ²¡æœ‰æœç´¢åˆ° æ•°ç»„orå­—ç¬¦ä¸² çš„ç»“å°¾</span></span><br><span class="line">        sum += nums[r]     <span class="comment">// å¢åŠ å½“å‰å³è¾¹æŒ‡é’ˆçš„æ•°å­—orå­—ç¬¦çš„æ±‚å’Œorè®¡æ•°</span></span><br><span class="line">        <span class="keyword">while</span> åŒºé—´[l, r]ä¸ç¬¦åˆé¢˜æ„&#123;</span><br><span class="line">            sum -= nums[l] <span class="comment">// ç§»åŠ¨å·¦æŒ‡é’ˆå‰éœ€è¦ä»sumä¸­å‡å°‘lä½ç½®å­—ç¬¦çš„æ±‚å’Œorè®¡æ•°</span></span><br><span class="line">            l++ <span class="comment">// çœŸæ­£çš„ç§»åŠ¨å·¦æŒ‡é’ˆï¼Œæ³¨æ„ä¸èƒ½è·Ÿä¸Šé¢ä¸€è¡Œä»£ç å†™å</span></span><br><span class="line">        &#125; <span class="comment">// æ­¤æ—¶éœ€è¦ä¸€ç›´ç§»åŠ¨å·¦æŒ‡é’ˆï¼Œç›´è‡³æ‰¾åˆ°ä¸€ä¸ªç¬¦åˆé¢˜æ„çš„åŒºé—´</span></span><br><span class="line">        <span class="comment">// åˆ° while ç»“æŸæ—¶ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†ä¸€ä¸ªç¬¦åˆé¢˜æ„è¦æ±‚çš„ å­æ•°ç»„orå­ä¸²</span></span><br><span class="line">        res = Math.max(res, r - l + <span class="number">1</span>) <span class="comment">// éœ€è¦æ›´æ–°ç»“æœ</span></span><br><span class="line">        r++ <span class="comment">// ç§»åŠ¨å³æŒ‡é’ˆï¼Œå»æ¢ç´¢æ–°çš„åŒºé—´</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ»‘åŠ¨çª—å£ä¸­ç”¨åˆ°äº†å·¦å³ä¸¤ä¸ªæŒ‡é’ˆï¼Œå®ƒä»¬ç§»åŠ¨çš„æ€è·¯æ˜¯ï¼šä»¥å³æŒ‡é’ˆä½œä¸ºé©±åŠ¨ï¼Œæ‹–ç€å·¦æŒ‡é’ˆå‘å‰èµ°ã€‚å³æŒ‡é’ˆæ¯æ¬¡åªç§»åŠ¨ä¸€æ­¥ï¼Œè€Œå·¦æŒ‡é’ˆåœ¨å†…éƒ¨ while å¾ªç¯ä¸­æ¯æ¬¡å¯èƒ½ç§»åŠ¨å¤šæ­¥ã€‚å³æŒ‡é’ˆæ˜¯ä¸»åŠ¨å‰ç§»ï¼Œæ¢ç´¢æœªçŸ¥çš„æ–°åŒºåŸŸï¼›å·¦æŒ‡é’ˆæ˜¯è¢«è¿«ç§»åŠ¨ï¼Œè´Ÿè´£å¯»æ‰¾æ»¡è¶³é¢˜æ„çš„åŒºé—´ã€‚</strong></p><p><strong>æ¨¡æ¿çš„æ•´ä½“æ€æƒ³æ˜¯ï¼š</strong></p><p>1.å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆ l å’Œ r åˆ†åˆ«æŒ‡å‘åŒºé—´çš„å¼€å¤´å’Œç»“å°¾ï¼Œæ³¨æ„æ˜¯é—­åŒºé—´ï¼›å®šä¹‰ sum ç”¨æ¥ç»Ÿè®¡è¯¥åŒºé—´å†…çš„å„ä¸ªå­—ç¬¦å‡ºç°æ¬¡æ•°ï¼›</p><p>2.ç¬¬ä¸€é‡ while å¾ªç¯æ˜¯ä¸ºäº†åˆ¤æ–­ r æŒ‡é’ˆçš„ä½ç½®æ˜¯å¦è¶…å‡ºäº†æ•°ç»„è¾¹ç•Œï¼›å½“ r æ¯æ¬¡åˆ°äº†æ–°ä½ç½®ï¼Œéœ€è¦å¢åŠ  r æŒ‡é’ˆçš„æ±‚å’Œ/è®¡æ•°ï¼›</p><p>3.ç¬¬äºŒé‡ while å¾ªç¯æ˜¯è®© l æŒ‡é’ˆå‘å³ç§»åŠ¨åˆ° [l, r] åŒºé—´ç¬¦åˆé¢˜æ„çš„ä½ç½®ï¼›å½“ l æ¯æ¬¡ç§»åŠ¨åˆ°äº†æ–°ä½ç½®ï¼Œéœ€è¦å‡å°‘ l æŒ‡é’ˆçš„æ±‚å’Œ/è®¡æ•°ï¼›</p><p>4.åœ¨ç¬¬äºŒé‡ while å¾ªç¯ä¹‹åï¼ŒæˆåŠŸæ‰¾åˆ°äº†ä¸€ä¸ªç¬¦åˆé¢˜æ„çš„ [l, r] åŒºé—´ï¼Œé¢˜ç›®è¦æ±‚æœ€å¤§çš„åŒºé—´é•¿åº¦ï¼Œå› æ­¤æ›´æ–° res = max(res, å½“å‰åŒºé—´çš„é•¿åº¦) ã€‚</p><p>5.r æŒ‡é’ˆæ¯æ¬¡å‘å³ç§»åŠ¨ä¸€æ­¥ï¼Œå¼€å§‹æ¢ç´¢æ–°çš„åŒºé—´ã€‚</p><p>6.æ¨¡æ¿ä¸­çš„ sum éœ€è¦æ ¹æ®é¢˜ç›®æ„æ€å…·ä½“å»ä¿®æ”¹ï¼Œæœ¬é¢˜æ˜¯æ±‚å’Œé¢˜ç›®å› æ­¤æŠŠsum å®šä¹‰æˆæ•´æ•°ç”¨äºæ±‚å’Œï¼›å¦‚æœæ˜¯è®¡æ•°é¢˜ç›®ï¼Œå°±éœ€è¦æ”¹æˆå­—å…¸ç”¨äºè®¡æ•°ã€‚å½“å·¦å³æŒ‡é’ˆå‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œéƒ½éœ€è¦æ›´æ–° sum ã€‚</p><p>7.å¦å¤–ä¸€ä¸ªéœ€è¦æ ¹æ®é¢˜ç›®å»ä¿®æ”¹çš„æ˜¯å†…å±‚ while å¾ªç¯çš„åˆ¤æ–­æ¡ä»¶ï¼Œå³ï¼š åŒºé—´ [l, r] ä¸ç¬¦åˆé¢˜æ„ ã€‚å¯¹äºæœ¬é¢˜è€Œè¨€ï¼Œå°±æ˜¯è¯¥åŒºé—´å†…çš„ 0 çš„ä¸ªæ•° è¶…è¿‡äº† 2 ã€‚</p><p><strong>æ»‘çª—é¢˜ç›®ä¸»è¦æœ‰ä¸¤ç§ç±»å‹ï¼š</strong></p><p>1.çª—å£å¤§å°å›ºå®šï¼Œä¾‹å¦‚ä¸º10ï¼Œè¿™æ—¶å€™ç›¸å½“äºå·¦å³è¾¹ç•Œå¿…å®šä¸¥æ ¼åŒæ­¥ç§»åŠ¨ã€‚</p><p>2.å·¦æŒ‡é’ˆlä¸å›é€€ç±»å‹ï¼Œè¿™ç±»å‹ä¸€èˆ¬æ˜¯æ–°åŠ å…¥nums[r]ä½¿å¾—å›é€€å¿…å®šä¸ç¬¦åˆæ¡ä»¶ï¼Œæ—§çš„nums[r]å·²ç»ä¸ç¬¦åˆæ¡ä»¶ï¼Œè¿™ç§ä¹Ÿå¯ä»¥åˆ©ç”¨æ»‘çª—çš„æ€æƒ³æ±‚è§£ã€‚</p><p><strong>å†æ¥ä¸€é“ç»ƒä¹ é¢˜ï¼š</strong></p><h2 id="LC209-é•¿åº¦æœ€å°çš„å­æ•°ç»„"><a href="#LC209-é•¿åº¦æœ€å°çš„å­æ•°ç»„" class="headerlink" title="LC209. é•¿åº¦æœ€å°çš„å­æ•°ç»„"></a><a href="https://leetcode-cn.com/problems/minimum-size-subarray-sum/">LC209. é•¿åº¦æœ€å°çš„å­æ•°ç»„</a></h2><p>ç»™å®šä¸€ä¸ªå«æœ‰nä¸ªæ­£æ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ªæ­£æ•´æ•°<code>target</code> ã€‚<br>æ‰¾å‡ºè¯¥æ•°ç»„ä¸­æ»¡è¶³å…¶å’Œ<code>â‰¥ target</code> çš„é•¿åº¦æœ€å°çš„è¿ç»­å­æ•°ç»„<code>ã€”numslï¼Œnumsl+1ï¼Œ...ï¼Œnumsr-1,numsr]</code>ï¼Œå¹¶è¿”å›å…¶é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ï¼Œè¿”å›0ã€‚<br><strong>ç¤ºä¾‹1:</strong><br>è¾“å…¥ï¼š target = 7, nums = [2,3,1,2,4,3] è¾“å‡ºï¼š2<br>è§£é‡Šï¼šå­æ•°ç»„[4,3]æ˜¯è¯¥æ¡ä»¶ä¸‹çš„é•¿åº¦æœ€å°çš„äº†æ•™ç»„ã€‚<br><strong>ç¤ºä¾‹2:</strong><br>è¾“å…¥ï¼š target = 4ï¼Œnums = [1,4,4] è¾“å‡ºï¼š1<br><strong>ç¤ºä¾‹3:</strong><br>è¾“å…¥ï¼š target = 11ï¼Œnums = [1,1,1,1,1,1,1,1] è¾“å‡ºï¼š0</p><p><strong>æ€è·¯ï¼š</strong></p><p><strong>æ»‘åŠ¨çª—å£</strong>:</p><p>è¿™ä¸€é¢˜æœ€å…³é”®çš„å­—çœ¼â€<strong>â‰¥ target çš„é•¿åº¦æœ€å°çš„ è¿ç»­å­æ•°ç»„</strong>â€œ</p><p>è¿™ä¸ªå­—çœ¼å¯ä»¥è”æƒ³åˆ°å¾ˆå¤šä¸œè¥¿</p><p>1.<strong>è¿ç»­</strong>å­æ•°ç»„ï¼šæ˜¯è¿ç»­çš„ï¼Œå› æ­¤å¯ä»¥ä¸<strong>å‰ç¼€å’Œ</strong>è¿›è¡Œç»“åˆï¼ˆå®é™…ä¸Šsumå˜é‡æ˜¯ä¸€ç§å¯¹äºå‰ç¼€å’Œçš„ä¼˜åŒ–å†™æ³•ï¼Œç›®çš„æ˜¯å¿«é€Ÿè®¡ç®—çª—å£çš„å’Œï¼‰</p><p>åŒæ—¶ï¼Œè¿ç»­å­æ•°ç»„ï¼Œ<strong>å·¦å³æŒ‡é’ˆ</strong>ä¸ºè¾¹ç•Œå°±å¯ä»¥ç¡®å®šä¸€ä¸ªè¿ç»­å­æ•°ç»„-&gt;<strong>æ»‘åŠ¨çª—å£</strong></p><p>å› æ­¤è¿™ä¸€é¢˜çš„çš„æç¤ºå·²ç»éå¸¸æ˜ç¡®äº†ï¼Œå¿…å®šæ˜¯ç”¨æ»‘çª—</p><p>2.é•¿åº¦æœ€å°ï¼šä¸€èˆ¬æ¥è¯´æ±‚æœ€å°é•¿åº¦è¿™ç§å…¨å±€æœ€ä¼˜çŠ¶æ€ï¼Œå¯ä»¥è€ƒè™‘<strong>åŠ¨æ€è§„åˆ’</strong>æˆ–è€…<strong>ä¸€è·¯ç»´æŠ¤</strong></p><p>è¿™é‡Œç”¨dpçš„è¯ï¼ŒçŠ¶æ€å°±æ˜¯nums[i]ç»“å°¾çš„æœ€å¤§é•¿åº¦ï¼Œæ˜¾ç„¶ä¸å¤ªåˆé€‚ï¼Œdp[i-1]ä¸dp[i]æ²¡æœ‰å¾ˆæ˜æ˜¾çš„è”ç³»</p><p>é‚£ä¹ˆå°±éœ€è¦ä¸€è·¯ç»´æŠ¤ï¼Œæ±‚å‡º<strong>ä»¥nums[r]ä¸ºå³è¾¹ç•Œçš„çª—å£çš„æœ€å°é•¿åº¦ï¼Œrâˆˆ[0,len-1]</strong></p><p>ç»´æŠ¤å¥½nums[0]~nums[len-1]ä¸ºå³è¾¹ç•Œçš„åˆæ³•çª—å£é•¿åº¦ï¼Œå°±æ˜¯å…¨å±€çš„åˆæ³•çª—å£æœ€å°å€¼ï¼Œä¹Ÿå°±æ˜¯æ‰€æ±‚ï¼ï¼ï¼</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minSubArrayLen</span><span class="params">(<span class="type">int</span> target, <span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="comment">// æ»‘çª—:å³æŒ‡é’ˆä¸»åŠ¨å³ç§»,å·¦æŒ‡é’ˆè¢«åŠ¨å³ç§»</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> Integer.MAX_VALUE;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">0</span>, r = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// ç»´æŠ¤å½“å‰çª—å£[l,r]çš„æ€»å’Œ</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// ä¸»åŠ¨ç§»åŠ¨å³æŒ‡é’ˆ</span></span><br><span class="line">        <span class="keyword">for</span> (; r &lt; len; r++) &#123;</span><br><span class="line">            <span class="comment">// è®¡ç®—å½“å‰çª—å£[l,r]çš„å’Œ:æ–°åŠ å…¥çš„å…ƒç´ åªæœ‰nums[r]</span></span><br><span class="line">            <span class="comment">// ræŒ‡é’ˆå¯èƒ½è¦å¾ªç¯å¤šæ¬¡æ‰èƒ½æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„[l,r],å› ä¸ºlå³ç§»è‡³ä¸ç¬¦åˆsum&gt;=target</span></span><br><span class="line">            sum += nums[r];</span><br><span class="line">            <span class="comment">// è‹¥çª—å£[l,r]æ»¡è¶³æ¡ä»¶,ç»Ÿè®¡é•¿åº¦å¹¶å°è¯•å°†å…¶å°½å¯èƒ½ç¼©å°,ç›´è‡³ä¸ç¬¦åˆé¢˜æ„</span></span><br><span class="line">            <span class="keyword">while</span> (sum &gt;= target) &#123;</span><br><span class="line">                <span class="comment">// [l,r]ç¬¦åˆæ¡ä»¶,ç»´æŠ¤res</span></span><br><span class="line">                res = Math.min(res, r - l + <span class="number">1</span>);</span><br><span class="line">                <span class="comment">// lä¸€ç›´å³ç§»å¹¶ç»Ÿè®¡,ç›´è‡³ä¸æ»¡è¶³æ¡ä»¶</span></span><br><span class="line">                <span class="comment">// è¿™é‡Œæœ‰ä¸ªå¾ˆå€¼å¾—æ€è€ƒçš„ç‚¹:ä¸ºä»€ä¹ˆlæŒ‡é’ˆå¯ä»¥ä¹‰æ— åé¡¾åœ°ç§»åŠ¨è‡³ä¸ç¬¦åˆæ¡ä»¶çš„l+1?</span></span><br><span class="line">                <span class="comment">// [l,r]åˆæ³•;[l+1,r]ä¸åˆæ³•,è€Œ[l,r+1]åŠæ›´é•¿çš„ä¸å¯èƒ½è¢«ç»Ÿè®¡å› ä¸ºåªç»Ÿè®¡çŸ­çš„</span></span><br><span class="line">                <span class="comment">// [l,r-1]ä»¥åŠæ›´çŸ­çš„å‘¢?å³è¾¹ç•Œä¸ºr-1çš„æƒ…å†µå·²ç»Ÿè®¡,å› ä¸ºlä¼šç›´æ¥ç§»åŠ¨åˆ°ä¸åˆæ³•ä¸”numséƒ½ä¸ºæ­£æ•°,å› æ­¤çª—å£ä¸å¯èƒ½ç»§ç»­ç¼©å°!</span></span><br><span class="line">                <span class="comment">// æ‰€ä»¥æ­¤æ—¶lå¯ä»¥ä¹‰æ— åé¡¾åœ°ç§»åŠ¨è‡³l+1</span></span><br><span class="line">                sum -= nums[l++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è‹¥æ²¡æœ‰çª—å£ç¬¦åˆæ¡ä»¶å°±æ˜¯0</span></span><br><span class="line">        <span class="keyword">return</span> res == Integer.MAX_VALUE ? <span class="number">0</span> : res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>ä¸ºä»€ä¹ˆlæŒ‡é’ˆå¯ä»¥ä¹‰æ— åé¡¾åœ°ç§»åŠ¨è‡³ä¸ç¬¦åˆæ¡ä»¶çš„l+1?æ»‘çª—ç²¾é«“æ‰€åœ¨-&gt;å‡å°‘ä¸å¿…è¦çš„è®¡ç®—</strong></p></blockquote>]]></content>
    
    
    <summary type="html">è¿™ç¯‡æ–‡ç« åˆ†äº«ä¸€ä¸ªæ»‘åŠ¨çª—å£çš„æ¨¡æ¿ï¼Œèƒ½è§£å†³å¤§å¤šæ•°çš„æ»‘åŠ¨çª—å£é—®é¢˜</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fomal.cc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="æ»‘çª—" scheme="https://www.fomal.cc/tags/%E6%BB%91%E7%AA%97/"/>
    
    <category term="åŒæŒ‡é’ˆ" scheme="https://www.fomal.cc/tags/%E5%8F%8C%E6%8C%87%E9%92%88/"/>
    
  </entry>
  
  <entry>
    <title>çŠ¶æ€å‹ç¼©DPä¸“é¢˜</title>
    <link href="https://www.fomal.cc/posts/11a473c.html"/>
    <id>https://www.fomal.cc/posts/11a473c.html</id>
    <published>2022-08-11T14:16:46.000Z</published>
    <updated>2022-08-11T14:16:46.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>ä¸¤é“å…¥é—¨é¢˜ç›®ï¼š</strong></p><h3 id="1-2305-å…¬å¹³åˆ†å‘é¥¼å¹²"><a href="#1-2305-å…¬å¹³åˆ†å‘é¥¼å¹²" class="headerlink" title="1.2305. å…¬å¹³åˆ†å‘é¥¼å¹²"></a>1.<a href="https://leetcode.cn/problems/fair-distribution-of-cookies/"><strong>2305. å…¬å¹³åˆ†å‘é¥¼å¹²</strong></a></h3><p>1.çŠ¶æ€å®šä¹‰:<strong>dp[i][j]</strong> ä¸ºç¬¬ <strong>i</strong>ä¸ªå­©å­åˆ†é¥¼å¹²çŠ¶æ€ä¸º <strong>j</strong> æ—¶æ¯ä¸ªå­©å­èƒ½åˆ†åˆ°çš„æœ€å¤šé¥¼å¹²æ•°çš„æœ€å°å€¼</p><p>2.çŠ¶æ€è½¬ç§»:è¦æ±‚å¾—<strong>dp[i][j]</strong> çš„å€¼ï¼Œè¦è€ƒè™‘ <strong>j</strong> çš„æ¯ä¸ªå­é›†ï¼Œå†ç»´æŠ¤ å­é›†è®¡ç®—å‡ºçš„æœ€å¤§å€¼ç„¶åè½¬ç§»è¿‡æ¥ <strong>æœ€å°å€¼</strong></p><p>â€‹      <strong>dp[i][j]=min(max(dp[i-1][j-x],sum[x]))</strong> å…¶ä¸­sum[x]ä¸ºåˆ†é…çŠ¶æ€ä¸º <strong>x</strong> æ—¶çš„æ€»çš„ç³–æœæ•°</p><p>3.åˆå§‹åŒ–:<strong>dp[0][j]=sum[j]</strong>ï¼Œåªåˆ†ç»™ç¬¬ä¸€ä¸ªå­©å­è‚¯å®šæ˜¯å…¨åˆ†äº†æ€»æ•°å°±æ˜¯é¥¼å¹²æ•°<strong>sum[j]</strong>ï¼Œå…¶ä½™ä¸º <strong>INF</strong> æ–¹ä¾¿è¦†ç›–</p><p>4.éå†é¡ºåº:å…ˆiåjæœ€åx,æ­£åº</p><p>5.è¿”å›å½¢å¼:è¿”å› <strong>dp[n-1][mask-1]</strong> å³ æ‰€æœ‰å­©å­å°†é¥¼å¹²å…¨éƒ¨åˆ†å®Œæ—¶<strong>æ¯ä¸ªå­©å­æœ€å¤§é¥¼å¹²æ•°çš„æœ€å°å€¼</strong></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">distributeCookies</span><span class="params">(<span class="type">int</span>[] cookies, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> cookies.length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mask</span> <span class="operator">=</span> <span class="number">1</span> &lt;&lt; n;</span><br><span class="line">        <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[k][mask];</span><br><span class="line">        <span class="type">int</span>[] sum = <span class="keyword">new</span> <span class="title class_">int</span>[mask];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; mask; i++) &#123;</span><br><span class="line">            <span class="comment">// xä¸ºè·å–çš„æœ€ä½ä½1åé¢å°¾éš0ä¸ªæ•°ï¼Œyä¸ºç¼ºä½xçš„å·®é›†</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> Integer.numberOfTrailingZeros(i), y = i - (<span class="number">1</span> &lt;&lt; x);</span><br><span class="line">            sum[i] = sum[y] + cookies[x];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">        System.arraycopy(sum, <span class="number">0</span>, dp[<span class="number">0</span>], <span class="number">0</span>, mask);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; k; i++) &#123;</span><br><span class="line">            Arrays.fill(dp[i], <span class="number">0x3f3f3f3f</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// éå†çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; k; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; mask; j++) &#123;</span><br><span class="line">                <span class="comment">// æ­¤æ—¶j-xå°±æ˜¯æšä¸¾jçš„æ‰€æœ‰å­é›†</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> j; x != <span class="number">0</span>; x = (x - <span class="number">1</span>) &amp; j) &#123;</span><br><span class="line">                    dp[i][j] = Math.min(dp[i][j], Math.max(dp[i - <span class="number">1</span>][j - x], sum[x]));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[k - <span class="number">1</span>][mask - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-1723-å®Œæˆæ‰€æœ‰å·¥ä½œçš„æœ€çŸ­æ—¶é—´"><a href="#2-1723-å®Œæˆæ‰€æœ‰å·¥ä½œçš„æœ€çŸ­æ—¶é—´" class="headerlink" title="2.1723. å®Œæˆæ‰€æœ‰å·¥ä½œçš„æœ€çŸ­æ—¶é—´"></a>2.<a href="https://leetcode.cn/problems/find-minimum-time-to-finish-all-jobs/"><strong>1723. å®Œæˆæ‰€æœ‰å·¥ä½œçš„æœ€çŸ­æ—¶é—´</strong></a></h3><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minimumTimeRequired</span><span class="params">(<span class="type">int</span>[] jobs, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> jobs.length;    <span class="comment">// nä¸ºå·¥ä½œä»½æ•°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">mask</span> <span class="operator">=</span> <span class="number">1</span> &lt;&lt; n;  <span class="comment">// å·¥ä½œåˆ†é…æƒ…å†µæ•°ç›®</span></span><br><span class="line">        <span class="comment">// dp[i][j]è¡¨ç¤ºè€ƒè™‘ç´¢å¼•ä¸º[0,i]çš„å·¥äºº,å·¥ä½œåˆ†é…æƒ…å†µä¸ºj(01010...è¡¨ç¤º)æ—¶æ¯ä¸ªå·¥äººæœ€å¤§å·¥ä½œæ—¶é—´çš„æœ€å°å€¼</span></span><br><span class="line">        <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[k][mask];</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–sum[i] -&gt; å®ŒæˆçŠ¶æ€ä¸ºiçš„å·¥ä½œçš„æ€»æ—¶é—´</span></span><br><span class="line">        <span class="type">int</span>[] sum = <span class="keyword">new</span> <span class="title class_">int</span>[mask];</span><br><span class="line">        <span class="comment">// iâˆˆ[1,mask-1] å› ä¸ºsum[0]=0</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; mask; i++) &#123;</span><br><span class="line">            <span class="comment">// xä¸ºiæœ€ä½ä½1åé¢çš„å°¾éš0ä¸ªæ•°,yä¸ºä¸iç›¸æ¯”ä»…ä»…ç¼ºä½xä½ç½®çš„çŠ¶æ€</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> Integer.numberOfTrailingZeros(i), y = i - (<span class="number">1</span> &lt;&lt; x);</span><br><span class="line">            sum[i] = sum[y] + jobs[x];  <span class="comment">// åŠ ä¸Šç¼ºä½çš„xå°±æ˜¯içš„æ—¶é•¿</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–dp</span></span><br><span class="line">        System.arraycopy(sum, <span class="number">0</span>, dp[<span class="number">0</span>], <span class="number">0</span>, mask);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; k; i++) &#123;</span><br><span class="line">            Arrays.fill(dp[i], <span class="number">0x3f3f3f3f</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// éå†dpçŠ¶æ€</span></span><br><span class="line">        <span class="comment">// éå†æ¯ä¸ªå·¥äººi</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; k; i++) &#123;</span><br><span class="line">            <span class="comment">// éå†æ¯ç§çŠ¶æ€j</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; mask; j++) &#123;</span><br><span class="line">                <span class="comment">// éå†çŠ¶æ€jçš„æ¯ç§å­é›†j-x</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> j; x != <span class="number">0</span> ; x = (x - <span class="number">1</span>) &amp; j) &#123;</span><br><span class="line">                    <span class="comment">// æ‰¾åˆ°æ¯ç§å­é›†j-xå¾—åˆ°çš„æœ€å¤§å€¼è½¬ç§»è¿‡æ¥çš„ æœ€å°å€¼ å°±æ˜¯è€ƒè™‘[0,i]å·¥äºº,çŠ¶æ€ä¸ºj-xçš„æœ€å¤§å·¥ä½œæ—¶é—´çš„æœ€å°å€¼</span></span><br><span class="line">                    <span class="comment">// å­é›†è½¬ç§»é€”å¾„ä¸º:å–å‰é¢dp[i - 1][j - x]æœ€å¤§å€¼çš„æœ€å°å€¼ä¸åˆ†é…ç»™å·¥äººiçš„sum[x]è¿›è¡Œæ¯”è¾ƒæ‰¾åˆ°æœ€å¤§å€¼</span></span><br><span class="line">                    <span class="comment">// å†ç»´æŠ¤æ¯ç§è½¬ç§»é€”ç»æœ€å°å€¼</span></span><br><span class="line">                    dp[i][j] = Math.min(dp[i][j], Math.max(dp[i - <span class="number">1</span>][j - x], sum[x]));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ‰€æœ‰å·¥äººåˆ†é…å®Œæ‰€æœ‰å·¥ä½œçš„æœ€é•¿å•äººå·¥ä½œæ—¶é—´æœ€å°å€¼</span></span><br><span class="line">        <span class="keyword">return</span> dp[k - <span class="number">1</span>][mask - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¸å¦¨æ¥æ€»ç»“ä¸€ä¸‹çŠ¶æ€å‹ç¼©DPï¼šå…¶å®çŠ¶æ€å‹ç¼©DPæ˜¯ç±»ä¼¼äºæš´åŠ›æ³•å›æº¯çš„æ–¹æ³•ï¼Œèƒ½ç”¨çŠ¶æ€å‹ç¼©æ–¹æ³•åšçš„é€šå¸¸éƒ½å¯ä»¥ç”¨å›æº¯+å‰ªææ¥æ±‚è§£ã€‚ä¸€èˆ¬æ¥è¯´è¿™ç§é—®é¢˜ç§°ä¸ºâ€œåˆ†é…é—®é¢˜â€ï¼Œæˆ–è€…å«åšâ€œæ¡¶è½®è¯¢â€ã€‚å°±æ˜¯å°†å…ƒç´ (é€šå¸¸æ•°ç›®å¾ˆå°&lt;32ä¸ª)åˆ†é…åˆ°å¤šä¸ªå®¹å™¨(æ¡¶)ä¸­ï¼Œç„¶åæ±‚è§£æœ‰æ¯ä¸ªæ¡¶æœ€å¤šæ•°ç›®çš„æœ€å°‘å€¼ï¼Œæˆ–è€…æ˜¯æ»¡è¶³æ¡ä»¶è·¯å¾„æ•°ç­‰ï¼Œè¿™é‡Œæ±‚è§£ç›®æ ‡çš„ä¸åŒä½“ç°åœ¨è½¬ç§»æ–¹ç¨‹ä¸Šã€‚</p><p>æŠ½è±¡ä¸€ä¸‹ï¼šé¥¼å¹²ã€å·¥ä½œï¼ˆè¦åˆ†é…çš„å¯¹è±¡ï¼‰â€”â€”<strong>å…ƒç´ </strong>ï¼›å·¥äººã€å­©å­ï¼ˆè¢«åˆ†é…åˆ°çš„åœ°æ–¹ï¼‰â€”â€”<strong>å®¹å™¨ï¼ˆæ¡¶ï¼‰</strong></p><p><a href="https://leetcode.cn/problems/beautiful-arrangement/">526. ä¼˜ç¾çš„æ’åˆ—</a> è¿™é“é¢˜å°±æ˜¯è¦æ±‚è·¯å¾„æ•°ç›®ï¼ŒåŒæ—¶å°†æ¡¶å®¹é‡é™åˆ¶ä¸º1ï¼Œå› æ­¤å­é›†æ•°ç›®åªæœ‰ i ä¸ª</p><h3 id="3-æ€»ä½“æ¨¡æ¿ï¼ˆæœ¬è´¨ä¹Ÿæ˜¯DPï¼‰ï¼š"><a href="#3-æ€»ä½“æ¨¡æ¿ï¼ˆæœ¬è´¨ä¹Ÿæ˜¯DPï¼‰ï¼š" class="headerlink" title="3.æ€»ä½“æ¨¡æ¿ï¼ˆæœ¬è´¨ä¹Ÿæ˜¯DPï¼‰ï¼š"></a>3.æ€»ä½“æ¨¡æ¿ï¼ˆæœ¬è´¨ä¹Ÿæ˜¯DPï¼‰ï¼š</h3><p>1.çŠ¶æ€å®šä¹‰ï¼šdp[i][i]ä¸ºè€ƒè™‘å‰ <strong>i</strong> ä¸ªå®¹å™¨ï¼ˆæ¡¶ï¼‰ï¼Œåˆ†é…çŠ¶æ€ä¸º <strong>j</strong> (0101è¡¨ç¤ºåˆ†é…çŠ¶æ€)æ—¶å€™çš„ æ‰€æ±‚é‡ï¼ˆè·¯å¾„æ•°ã€æœ€å¤§å€¼ã€æœ€å°å€¼ç­‰ï¼‰</p><p>2.çŠ¶æ€è½¬ç§»ï¼šæ­¤æ—¶éå†åˆ°ç¬¬ <strong>i</strong> ä¸ªå®¹å™¨ï¼ˆæ¡¶ï¼‰ï¼Œä¸€èˆ¬æ¥è¯´è¦æ±‚ <strong>dp[i][j]</strong> å¾—è€ƒè™‘å‰é¢å®¹å™¨çš„æƒ…å†µ -&gt; <strong>dp[i-1][j-x]</strong></p><p>å…¶ä¸­ <strong>x</strong> ä¸ºç¬¬ <strong>i</strong> ä¸ªå®¹å™¨çš„é€‰æ‹©çŠ¶æ€ï¼Œé‚£ä¹ˆ <strong>j-x</strong> å°±æ˜¯ <strong>[0,i-1]</strong> ä¸ªå®¹å™¨çš„é€‰æ‹©çŠ¶æ€</p><p>å°†ç¬¬<strong>i</strong>ä¸ªå®¹å™¨ç‹¬ç«‹å‡ºæ¥è€ƒè™‘ï¼Œè¿™ä¸ªå®¹å™¨çš„é€‰æ‹©æœ‰å“ªäº›ï¼Ÿä¹Ÿå°±æ˜¯è½¬ç§»è·¯å¾„æœ‰å“ªäº›ï¼Ÿï¼Ÿï¼Ÿ</p><p>å¾ˆæ˜¾ç„¶å¦‚æœæ¡¶çš„å®¹é‡ï¼ˆåŒ…æ‹¬å…ƒç´ ä¸ªæ•°ä¸æ€»å’Œï¼‰æ²¡æœ‰é™åˆ¶çš„è¯ï¼Œ<strong>j</strong> çš„å…¨ä½“å­é›†ï¼ˆé™¤äº†æœ¬èº«ï¼‰éƒ½æ˜¯ç¬¦åˆè¦æ±‚çš„å‰ä¸€ä¸ªçŠ¶æ€</p><p>-&gt; å› æ­¤å¯ä»¥ç›´æ¥é€šè¿‡ä¸‹é¢è¯­å¥æšä¸¾ <strong>j</strong> çš„æ‰€æœ‰åˆæ³•å­é›†æ¥è¿›è¡Œ dp[i][j] çŠ¶æ€è½¬ç§»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> j; x != <span class="number">0</span> ; x = (x - <span class="number">1</span>) &amp; j) &#123;</span><br><span class="line">    dp[i][j] = dp[i - <span class="number">1</span>][j - x]... <span class="comment">// æ­å»ºä¸¤ä¸ªçŠ¶æ€çš„æ¡¥æ¢</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>-&gt; å½“ç„¶ä¹Ÿæœ‰å¯èƒ½<strong>å®¹é‡æœ‰é™</strong>ï¼šå‚è€ƒ <a href="https://leetcode.cn/problems/beautiful-arrangement/">526. ä¼˜ç¾çš„æ’åˆ—</a> æšä¸¾ç¬¦åˆæ¡ä»¶çš„å­é›†ï¼ˆåˆæ³•è½¬ç§»è·¯å¾„ï¼‰è¿›è¡Œè½¬ç§»å³å¯</p><p>3.åˆå§‹åŒ–ï¼šä¸€èˆ¬æ¥è¯´ï¼Œåˆå§‹åŒ– <strong>dp[0][j]</strong> ä¸ºé¦–ä¸ªå®¹å™¨åˆ†å¾—çŠ¶æ€ <strong>j</strong> æ—¶çš„æ‰€æ±‚é‡ï¼›å…¶ä»–<strong>dp[i][j]</strong> æŒ‰ç…§è½¬ç§»é€»è¾‘æ¥åˆå§‹åŒ–</p><p>ç›®çš„éƒ½æ˜¯è¦ä½œä¸ºåˆå§‹å“¨å…µä¸å½±å“ç¬¬ä¸€ä¸ªå€¼çš„è¦†ç›–ï¼ˆå¦‚æ±‚æœ€å¤§å€¼å°±å¼„ä¸ªå¾ˆå°çš„æ•°ç¬¬ä¸€ä¸ªæ¯”è¾ƒçš„å¿…å®šé¡ºåˆ©è¦†ç›–â€¦ï¼‰</p><p>4.éå†é¡ºåºï¼šä¸€èˆ¬æ˜¯å…ˆéå†å®¹å™¨ <strong>i</strong> ï¼Œå†éå†æ¯ä¸ªçŠ¶æ€ <strong>j</strong> ï¼Œæœ€åéå†æ¯ç§åˆæ³•è½¬ç§»è·¯å¾„ <strong>j-x</strong>ï¼Œé»˜è®¤æ­£åº</p><p>5.è¿”å›å½¢å¼ï¼šä¸€èˆ¬è¿”å› <strong>dp[n-1][mask-1]</strong> è¡¨ç¤ºè€ƒè™‘æ‰€æœ‰æ¡¶ï¼ŒæŠŠæ‰€æœ‰å…ƒç´ åˆ†é…å®Œçš„æ‰€æ±‚é‡ä¸ºå¤šå°‘</p>]]></content>
    
    
    <summary type="html">çŠ¶æ€å‹ç¼©DPæ˜¯ç±»ä¼¼äºæš´åŠ›æ³•å›æº¯çš„æ–¹æ³•ï¼Œèƒ½ç”¨çŠ¶æ€å‹ç¼©æ–¹æ³•åšçš„é€šå¸¸éƒ½å¯ä»¥ç”¨å›æº¯+å‰ªææ¥æ±‚è§£ï¼Œè¿™ç¯‡æ–‡ç« æ€»ç»“çŠ¶æ€å‹ç¼©DPçš„ä¸€äº›è§£é¢˜æ–¹æ³•</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fomal.cc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="https://www.fomal.cc/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    <category term="çŠ¶æ€å‹ç¼©DP" scheme="https://www.fomal.cc/tags/%E7%8A%B6%E6%80%81%E5%8E%8B%E7%BC%A9DP/"/>
    
  </entry>
  
  <entry>
    <title>æœ‰å‘å›¾çš„è¡¨ç¤ºæ–¹æ³•</title>
    <link href="https://www.fomal.cc/posts/b0713fa8.html"/>
    <id>https://www.fomal.cc/posts/b0713fa8.html</id>
    <published>2022-08-11T14:06:17.000Z</published>
    <updated>2022-08-11T14:06:17.000Z</updated>
    
    <content type="html"><![CDATA[<p>çº¦å®š <strong>n</strong> ä¸ºç‚¹æ•°ï¼Œ <strong>m</strong>ä¸ºè¾¹æ•°ï¼Œtimes = [[2,1,1],[2,3,1],[3,4,1]] è¡¨ç¤º3æ¡è¾¹</p><p>2-&gt;1 æƒé‡ä¸º1</p><p>2-&gt;3 æƒé‡ä¸º1</p><p>3-&gt;4 æƒé‡ä¸º1</p><h3 id="1-é‚»æ¥çŸ©é˜µ"><a href="#1-é‚»æ¥çŸ©é˜µ" class="headerlink" title="1.é‚»æ¥çŸ©é˜µ"></a>1.é‚»æ¥çŸ©é˜µ</h3><p>è¿™æ˜¯ä¸€ç§ä½¿ç”¨äºŒç»´çŸ©é˜µæ¥è¿›è¡Œå­˜å›¾çš„æ–¹å¼ã€‚</p><p>é€‚äºè¾¹æ•°è¾ƒå¤šçš„ã€Œ<strong>ç¨ å¯†å›¾</strong>ã€ä½¿ç”¨ï¼Œå½“è¾¹æ•°é‡æ¥è¿‘ç‚¹çš„æ•°é‡çš„å¹³æ–¹ï¼Œå³mâ‰ˆnÂ²æ—¶ï¼Œå¯å®šä¹‰ä¸ºã€Œ<strong>ç¨ å¯†å›¾</strong>ã€ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é‚»æ¥çŸ©é˜µæ•°ç»„ï¼šw[a][b] = c ä»£è¡¨ä» a åˆ° b æœ‰æƒé‡ä¸º c çš„è¾¹</span></span><br><span class="line"><span class="type">int</span>[][] w = <span class="keyword">new</span> <span class="title class_">int</span>[N][N];</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ è¾¹æ“ä½œ</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> c)</span> &#123;</span><br><span class="line">    w[a][b] = c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-é‚»æ¥è¡¨-é“¾å¼å‰å‘æ˜Ÿå­˜å›¾"><a href="#2-é‚»æ¥è¡¨-é“¾å¼å‰å‘æ˜Ÿå­˜å›¾" class="headerlink" title="2.é‚»æ¥è¡¨(é“¾å¼å‰å‘æ˜Ÿå­˜å›¾)"></a>2.é‚»æ¥è¡¨(é“¾å¼å‰å‘æ˜Ÿå­˜å›¾)</h3><p>é€‚ç”¨äºè¾¹æ•°è¾ƒå°‘çš„ã€Œ<strong>ç¨€ç–å›¾</strong>ã€ä½¿ç”¨ï¼Œå½“è¾¹æ•°é‡æ¥è¿‘ç‚¹çš„æ•°é‡ï¼Œå³mâ‰ˆn æ—¶ï¼Œå¯å®šä¹‰ä¸ºã€Œ<strong>ç¨€ç–å›¾</strong>ã€ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] he = <span class="keyword">new</span> <span class="title class_">int</span>[N], e = <span class="keyword">new</span> <span class="title class_">int</span>[M], ne = <span class="keyword">new</span> <span class="title class_">int</span>[M], w = <span class="keyword">new</span> <span class="title class_">int</span>[M];</span><br><span class="line"><span class="type">int</span> idx;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> c)</span> &#123;</span><br><span class="line">    e[idx] = b;    <span class="comment">// è¾¹idxæŒ‡å‘èŠ‚ç‚¹b</span></span><br><span class="line">    ne[idx] = he[a];    <span class="comment">// å¤´æ’æ³•åœ¨ä¸Šä¸€è½®çš„aå°„å‡ºçš„è¾¹çš„å¤´ç»“ç‚¹ä¸Šæ’å…¥idx</span></span><br><span class="line">    he[a] = idx;    <span class="comment">// æ›´æ–°aå°„å‡ºçš„è¾¹çš„å¤´ç»“ç‚¹ä¸ºè¾¹idx</span></span><br><span class="line">    w[idx] = c;    <span class="comment">// è¾¹idxçš„æƒé‡ä¸ºc</span></span><br><span class="line">    idx++;        <span class="comment">// è¾¹ç´¢å¼•+1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆ idx æ˜¯ç”¨æ¥å¯¹<strong>è¾¹</strong>è¿›è¡Œç¼–å·çš„ï¼š</p><p>1.he æ•°ç»„ï¼šå­˜å‚¨æ˜¯æŸä¸ªèŠ‚ç‚¹æ‰€å¯¹åº”çš„<strong>è¾¹çš„é›†åˆ</strong>ï¼ˆé“¾è¡¨ï¼‰çš„å¤´ç»“ç‚¹ï¼›</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šhe[u]=è¾¹4 </p><p>æ³¨æ„ï¼š<strong>ä»…ä»…æ˜¯å­˜å‚¨å¤´ç»“ç‚¹</strong>ï¼Œä¹‹åå°±å¯ä»¥æ ¹æ®neæ•°ç»„è¿›è¡ŒæŸ¥æ‰¾ï¼</p><p><img src="../images/p20.jpg" alt="p20"></p><p>2.e  æ•°ç»„ï¼š<strong>æŸä¸€æ¡è¾¹æŒ‡å‘çš„èŠ‚ç‚¹</strong>ï¼še[è¾¹4]=v4</p><p>3.ne æ•°ç»„ï¼šç”±äºæ˜¯ä»¥é“¾è¡¨çš„å½¢å¼è¿›è¡Œå­˜è¾¹ï¼Œè¯¥æ•°ç»„ç”¨äº<strong>æ‰¾åˆ°ä¸‹ä¸€æ¡è¾¹</strong></p><p>ne[è¾¹4]=è¾¹3ï¼›æ„å»ºé“¾è¡¨çš„è¿‡ç¨‹æ˜¯å¤´æ’æ³•ï¼šnull&lt;-è¾¹1&lt;-è¾¹2â€¦</p><p>4.w  æ•°ç»„ï¼šç”¨äºè®°å½•<strong>æŸæ¡è¾¹çš„æƒé‡</strong>ä¸ºå¤šå°‘ã€‚</p><p>ç¼–ç çš„è¾¹æ˜¯ç”¨idxä½œä¸ºç´¢å¼•æ¥è¿›è¡Œæ ‡è®°çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸€ä¸ªidxå¯¹åº”ä¸€æ¡è¾¹</p><p>å› æ­¤å½“æˆ‘ä»¬æƒ³è¦<strong>éå†æ‰€æœ‰ç”± a ç‚¹å‘å‡ºçš„è¾¹ï¼ˆæ³¨æ„æ˜¯aä¼¸å‡ºçš„è¾¹ï¼‰</strong> æ—¶ï¼Œå¯ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä»aå°„å‡ºçš„è¾¹çš„å¤´ç»“ç‚¹å‡ºå‘ä¸€è·¯éå†è‡³-1(null)</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> he[a]; i != -<span class="number">1</span>; i = ne[i]) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> e[i], c = w[i]; <span class="comment">// å­˜åœ¨ç”± a æŒ‡å‘ b çš„è¾¹ï¼Œæƒé‡ä¸º c</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-ç±»"><a href="#3-ç±»" class="headerlink" title="3.ç±»"></a>3.ç±»</h3><p>è¿™æ˜¯ä¸€ç§æœ€ç®€å•ï¼Œä½†æ˜¯ç›¸æ¯”ä¸Šè¿°ä¸¤ç§å­˜å›¾æ–¹å¼ï¼Œä½¿ç”¨å¾—è¾ƒå°‘çš„å­˜å›¾æ–¹å¼ã€‚</p><p>åªæœ‰å½“æˆ‘ä»¬éœ€è¦ç¡®ä¿æŸä¸ªæ“ä½œå¤æ‚åº¦ä¸¥æ ¼ä¸º<strong>O(m)</strong> æ—¶ï¼Œæ‰ä¼šè€ƒè™‘ä½¿ç”¨ã€‚</p><p>å…·ä½“çš„ï¼Œæˆ‘ä»¬å»ºç«‹ä¸€ä¸ªç±»æ¥è®°å½•æœ‰å‘è¾¹ä¿¡æ¯ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Edge</span> &#123;</span><br><span class="line">    <span class="comment">// ä»£è¡¨ä» a åˆ° b æœ‰ä¸€æ¡æƒé‡ä¸º c çš„è¾¹</span></span><br><span class="line">    <span class="type">int</span> a, b, c;</span><br><span class="line">    Edge(<span class="type">int</span> _a, <span class="type">int</span> _b, <span class="type">int</span> _c) &#123;</span><br><span class="line">        a = _a; b = _b; c = _c;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨ List å­˜èµ·æ‰€æœ‰çš„è¾¹å¯¹è±¡ï¼Œå¹¶åœ¨éœ€è¦éå†æ‰€æœ‰è¾¹çš„æ—¶å€™ï¼Œè¿›è¡Œéå†ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;Edge&gt; es = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">...</span><br><span class="line"><span class="keyword">for</span> (Edge e : es) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-HashMap"><a href="#4-HashMap" class="headerlink" title="4.HashMap"></a>4.HashMap</h3><p>æ³¨æ„ï¼šå¦‚æœèŠ‚ç‚¹ç´¢å¼•é›†ä¸­å¯ä»¥ç”¨Listæ•°ç»„ä»£æ›¿HashMapï¼Œå…·ä½“å‚è€ƒListæ•°ç»„åˆ›å»ºä¸åˆå§‹åŒ–æ–¹æ³•</p><p>keyä¸ºå‡ºå‘ç‚¹ï¼Œvalueä¸ºè¯¥å‡ºå‘ç‚¹å¯¹åº”çš„ç»ˆç‚¹åˆ—è¡¨ï¼ˆä¸€ä¸ªå‡ºå‘ç‚¹å¯èƒ½å¯¹åº”å¤šä¸ªç»ˆç‚¹ï¼‰</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">HashMap&lt;Integer, List&lt;Integer&gt;&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span>[] edge : edges) &#123;</span><br><span class="line">    List&lt;Integer&gt; list1 = map.getOrDefault(edge[<span class="number">0</span>], <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;());</span><br><span class="line">    list1.add(edge[<span class="number">1</span>]);</span><br><span class="line">    map.put(edge[<span class="number">0</span>], list1);</span><br><span class="line">    <span class="comment">// è‹¥ä¸ºæ— å‘å›¾</span></span><br><span class="line">    List&lt;Integer&gt; list2 = map.getOrDefault(edge[<span class="number">1</span>], <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;());</span><br><span class="line">    list2.add(edge[<span class="number">0</span>]);</span><br><span class="line">    map.put(edge[<span class="number">1</span>], list2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¦æƒå›¾</span></span><br><span class="line">HashMap&lt;Integer, List&lt;<span class="type">int</span>[]]&gt;&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span>[] edge : edges) &#123;</span><br><span class="line">    List&lt;<span class="type">int</span>[]&gt; list1 = map.getOrDefault(edge[<span class="number">0</span>], <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;());</span><br><span class="line">    list1.add(<span class="keyword">new</span> <span class="title class_">int</span>[] &#123;edge[<span class="number">1</span>], edge[<span class="number">2</span>]&#125;);</span><br><span class="line">    map.put(edge[<span class="number">0</span>], list1);</span><br><span class="line">    <span class="comment">// è‹¥ä¸ºå¸¦æƒæ— å‘å›¾</span></span><br><span class="line">    List&lt;Integer&gt; list2 = map.getOrDefault(edge[<span class="number">1</span>], <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;());</span><br><span class="line">    list2.add(<span class="keyword">new</span> <span class="title class_">int</span>[] &#123;edge[<span class="number">0</span>], edge[<span class="number">2</span>]&#125;);</span><br><span class="line">    map.put(edge[<span class="number">1</span>], list2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æœ‰å‘å›¾çš„è¡¨ç¤ºæ–¹æ³•æœ‰å¾ˆå¤šï¼šé‚»æ¥çŸ©é˜µã€é“¾å¼å‰å‘æ˜Ÿå­˜å›¾ã€Listæ•°ç»„ã€HashMapã€ç±»ç­‰</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fomal.cc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="å›¾" scheme="https://www.fomal.cc/tags/%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>æ’åºç®—æ³•ä¸“é¢˜</title>
    <link href="https://www.fomal.cc/posts/7236f06c.html"/>
    <id>https://www.fomal.cc/posts/7236f06c.html</id>
    <published>2022-08-11T13:59:08.000Z</published>
    <updated>2022-08-11T13:59:08.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-å¿«é€Ÿæ’åº"><a href="#1-å¿«é€Ÿæ’åº" class="headerlink" title="1.å¿«é€Ÿæ’åº"></a>1.å¿«é€Ÿæ’åº</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] nums = &#123;<span class="number">10</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">62</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">19</span>&#125;;</span><br><span class="line">    quickSort(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : nums) System.out.println(num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">quickSort</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> low, <span class="type">int</span> high)</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    å¿«é€Ÿæ’åº:åŸç†æ¯ä¸€è½®é€‰ä¸€ä¸ªåŸºå‡†å…ƒç´ pivot</span></span><br><span class="line"><span class="comment">    åˆ©ç”¨ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«å°†&lt;=pivotå’Œ&gt;pivotçš„å…ƒç´ åˆ†åˆ«æ”¾åœ¨pivotçš„å·¦è¾¹ä¸å³è¾¹</span></span><br><span class="line"><span class="comment">    æœ€åé€’å½’è°ƒç”¨åŸå‡½æ•°ç›´è‡³åŒºé—´é•¿åº¦ç¼©å°ä¸º1</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">if</span> (low &gt;= high) <span class="keyword">return</span>; <span class="comment">//  åŒºé—´é•¿åº¦&lt;=1ç›´æ¥ç»“æŸ</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> low, r = high;  <span class="comment">// å·¦å³æŒ‡é’ˆ</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> nums[low];  <span class="comment">// ä»¥nums[low]ä¸ºåŸºå‡†</span></span><br><span class="line">    <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">        <span class="comment">// ræŒ‡é’ˆå…ˆè¡Œå¯ä»¥ç¡®ä¿æœ€ååœç•™çš„ä½ç½®å¿…å®šæ˜¯&lt;=åŸºå‡†ï¼Œå†ä¸æµå°±ç§»åŠ¨åˆ°pivotä½ç½®ä¸Šï¼›è€ŒlæŒ‡é’ˆå…ˆè¡Œä¼šæ‰¾åˆ°é¦–ä¸ªå¤§äºåŸºå‡†çš„ä½ç½®</span></span><br><span class="line">        <span class="comment">// ä¾‹å¦‚åœ¨[1,2,3,4,5]è¿™ç§æƒ…å†µä¼šåœåœ¨2å¤„ï¼Œæ­¤æ—¶ræŒ‡é’ˆæƒ³æ‰¾å°äºç­‰äºåŸºå‡†çš„å…ƒç´ ä½†æ˜¯ä¹Ÿåªèƒ½ç§»åŠ¨åˆ°2å¤„ç»“æŸ</span></span><br><span class="line">        <span class="comment">// å¾ªç¯é€€å‡º-&gt;å°†1ä¸2çš„ä½ç½®äº¤æ¢ï¼Œæ­¤æ—¶æœ‰[2,1,3,4,5] è¿™ä¸ªå°±è¿åäº†å¿«æ’çš„å®—æ—¨äº†ï¼Œå†é€’å½’å·¦å³å­åŒºé—´å°±å‡ºé”™ã€‚</span></span><br><span class="line">        <span class="comment">// å½’æ ¹åˆ°åº•å³æŒ‡é’ˆå…ˆè¡Œï¼Œæ˜¯ä¸ºäº†é¿å…å·¦æŒ‡é’ˆä¸»åŠ¨æ—¶å¯¼è‡´åœç•™åœ¨æ¯”åŸºå‡†å¤§çš„åœ°æ–¹ï¼Œä¸åŸºå‡†äº¤æ¢åç›´æ¥å¯¼è‡´åŸºå‡†å·¦è¾¹æœ‰å…ƒç´ å¤§äºåŸºå‡†ã€‚</span></span><br><span class="line">        <span class="comment">// å³æŒ‡é’ˆå…ˆè¡Œä¼šä¸»åŠ¨å æ®&lt;=åŸºå‡†çš„å…ƒç´ ï¼Œå†ä¸æµå°±æ˜¯ç§»åŠ¨åˆ°åŸºå‡†ä½ç½®ï¼Œè¿™ä¸¤ç§æƒ…å†µç¬¦åˆå¿«æ’ç›®çš„.</span></span><br><span class="line">        <span class="keyword">while</span> (l &lt; r &amp;&amp; nums[r] &gt; pivot) r--;  <span class="comment">// råœç•™åœ¨é¦–ä¸ª&lt;=åŸºå‡†çš„å…ƒç´ å¤„</span></span><br><span class="line">        <span class="keyword">while</span> (l &lt; r &amp;&amp; nums[l] &lt;= pivot) l++;  <span class="comment">// låœç•™åœ¨é¦–ä¸ª&gt;åŸºå‡†çš„å…ƒç´ å¤„</span></span><br><span class="line">        <span class="keyword">if</span> (l &lt; r) &#123;    <span class="comment">// äº¤æ¢nums[l]ä¸nums[r]</span></span><br><span class="line">            <span class="comment">// nums[l] ^= nums[r];</span></span><br><span class="line">            <span class="comment">// nums[r] ^= nums[l];</span></span><br><span class="line">            <span class="comment">// nums[l] ^= nums[r];</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> nums[l];</span><br><span class="line">            nums[l] = nums[r];</span><br><span class="line">            nums[r] = t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// l == r å°†nums[low]ä¸nums[l]äº¤æ¢</span></span><br><span class="line">    nums[low] = nums[l];</span><br><span class="line">    nums[l] = pivot;</span><br><span class="line">    <span class="comment">// é€’å½’æ’åºå·¦å³å­åŒºé—´</span></span><br><span class="line">    quickSort(nums, low, r - <span class="number">1</span>);</span><br><span class="line">    quickSort(nums, r + <span class="number">1</span>, high);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-å½’å¹¶æ’åº"><a href="#2-å½’å¹¶æ’åº" class="headerlink" title="2.å½’å¹¶æ’åº"></a>2.å½’å¹¶æ’åº</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Merge_Sort</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] nums = &#123;<span class="number">10</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">62</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">19</span>&#125;;</span><br><span class="line">        mergeSort(nums);</span><br><span class="line">        System.out.println(Arrays.toString(nums));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    å½’å¹¶æ’åº:åˆ†åŒºé—´æ’åº+åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">mergeSort</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="literal">null</span> || nums.length &lt;= <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="type">int</span>[] tmp = <span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">        mergeSort(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>, tmp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    é‡è½½çš„å¸¦åŒºé—´ç«¯ç‚¹çš„å½’å¹¶æ’åºæ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">mergeSort</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span>[] tmp)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (l == r) <span class="keyword">return</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> l + (r - l) / <span class="number">2</span>;</span><br><span class="line">        mergeSort(nums, l, mid, tmp);   <span class="comment">// é€’å½’æ’åº[l,mid]</span></span><br><span class="line">        mergeSort(nums, mid + <span class="number">1</span>, r, tmp);   <span class="comment">// é€’å½’æ’åº[mid+1,r]</span></span><br><span class="line">        <span class="comment">// åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„[l,mid]å’Œ[mid+1,r]</span></span><br><span class="line">        merge(nums, l, mid, r, tmp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    åˆå¹¶numsä¸¤ä¸ªåŒºé—´å†…çš„ä¸¤ä¸ªæœ‰åºæ•°ç»„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> l, <span class="type">int</span> mid, <span class="type">int</span> r, <span class="type">int</span>[] tmp)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> l;    <span class="comment">// åˆå¹¶åçš„æŒ‡é’ˆ</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> l, j = mid + <span class="number">1</span>; <span class="comment">// å·¦å³æŒ‡é’ˆ</span></span><br><span class="line">        <span class="comment">// å°†[l,mid]å’Œ[mid+1,r]å…ƒç´ æŒ‰ç…§å¤§å°æ‹·è´åˆ°tmpå¯¹åº”ä½ç½®ä¸­</span></span><br><span class="line">        <span class="keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= r) &#123;    <span class="comment">// ç­‰äºçš„æ—¶å€™è¿˜æ²¡èµ‹å€¼!</span></span><br><span class="line">            <span class="keyword">if</span> (nums[i] &lt;= nums[j]) &#123;</span><br><span class="line">                tmp[idx++] = nums[i++];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                tmp[idx++] = nums[j++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// èµ°å®Œè¿˜æ²¡æœ‰èµ°å®Œçš„ä¸€è¾¹</span></span><br><span class="line">        <span class="keyword">while</span> (i &lt;= mid) tmp[idx++] = nums[i++];</span><br><span class="line">        <span class="keyword">while</span> (j &lt;= r) tmp[idx++] = nums[j++];</span><br><span class="line">        <span class="comment">// å°†ä¸´æ—¶æ•°ç»„æ‹·è´è‡³numså¯¹åº”ä½ç½®</span></span><br><span class="line">        System.arraycopy(tmp, l, nums, l, r - l + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="3-å †æ’åº"><a href="#3-å †æ’åº" class="headerlink" title="3.å †æ’åº"></a>3.å †æ’åº</h3><p>å †æ˜¯å…·æœ‰ä»¥ä¸‹æ€§è´¨çš„å®Œå…¨äºŒå‰æ ‘ï¼šæ¯ä¸ªç»“ç‚¹çš„å€¼éƒ½<strong>å¤§äº</strong>æˆ–ç­‰äºå…¶å·¦å³å­©å­ç»“ç‚¹çš„å€¼ï¼Œç§°ä¸ºå¤§é¡¶å †ï¼›</p><p>æˆ–è€…æ¯ä¸ªç»“ç‚¹çš„å€¼éƒ½<strong>å°äº</strong>æˆ–ç­‰äºå…¶å·¦å³å­©å­ç»“ç‚¹çš„å€¼ï¼Œç§°ä¸ºå°é¡¶å †ã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="../images/p19.jpg" alt="p19"></p><p><strong>å‚è€ƒèµ„æ–™ï¼š</strong><a href="https://blog.csdn.net/Javascript_tsj/article/details/124051388"><strong>å †æ’åºï¼ˆè¶…è¯¦ç»†å›¾è§£ javaç‰ˆï¼‰</strong></a></p><p><strong>ä¸»è¦æ­¥éª¤ï¼š</strong></p><p>1.å°†æ— åºåºåˆ—æ„å»ºæˆä¸€ä¸ªå †ï¼Œæ ¹æ®å‡åºé™åºéœ€æ±‚é€‰æ‹©å¤§é¡¶å †æˆ–å°é¡¶å †ï¼ˆå‡åºä¸€èˆ¬ç”¨å¤§é¡¶å †ï¼‰</p><p>2.å°†å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ äº¤æ¢ï¼Œå°†æœ€å¤§å…ƒç´ â€æ²‰â€åˆ°æ•°ç»„æœ«ç«¯</p><p>3.é‡æ–°è°ƒæ•´ç»“æ„,ä½¿å…¶æ»¡è¶³å †å®šä¹‰ï¼Œç„¶åç»§ç»­äº¤æ¢å †é¡¶å…ƒç´ ä¸å½“å‰æœ«å°¾å…ƒç´ </p><p>4.åå¤æ‰§è¡Œè°ƒæ•´+äº¤æ¢æ­¥éª¤ï¼Œç›´åˆ°æ•´ä¸ªåºåˆ—æœ‰åº</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Heap</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] nums = &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>&#125;;</span><br><span class="line">        HeapSort(nums);</span><br><span class="line">        System.out.println(Arrays.toString(nums));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     å †æ’åºä¸»æ–¹æ³•:</span></span><br><span class="line"><span class="comment">     ä¸€èˆ¬æ¥è¯´å‡åºæ’åˆ—å°±æ„é€ å¤§é¡¶å †(å †é¡¶æœ€å¤§&amp;&amp;å½“å‰èŠ‚ç‚¹æ¯”å·¦å³å­èŠ‚ç‚¹éƒ½å¤§-&gt;ä½†æ˜¯å·¦å³èŠ‚ç‚¹çš„å¤§å°æ²¡æœ‰è¦æ±‚)</span></span><br><span class="line"><span class="comment">     å †çš„ç´¢å¼•ç»Ÿä¸€ä»0å¼€å§‹,å› æ­¤æ€»çš„èŒƒå›´åœ¨[0,len-1]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">HeapSort</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="comment">// å¶å­èŠ‚ç‚¹è‚¯å®šå †çš„æœ€åº•å±‚,ä¸ç”¨ä¸‹æ²‰</span></span><br><span class="line">        <span class="comment">// è¿™é‡Œç”¨äº†ä¸€ä¸ªç»“è®º:åªä¸‹æ²‰éå¶å­èŠ‚ç‚¹é—´æ¥ä¹Ÿä¸Šæµ®äº†æ‰€æœ‰å¶å­èŠ‚ å› æ­¤åªä¸‹æ²‰å‰åŠéƒ¨åˆ†å³å¯ä¿è¯å †æœ‰åº</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> len / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;    <span class="comment">// lenÃ·2-1æ˜¯é¦–ä¸ªéå¶å­ç»“ç‚¹ç´¢å¼•</span></span><br><span class="line">            sink(nums, i, len - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä¸‹æ²‰å®Œåæ•´ä¸ªå †æœ‰åº å †é¡¶å…ƒç´ å°±æ˜¯æœ€å¤§å…ƒç´ </span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ³¨:ç´¢å¼•ä¸º[0, i]ä¹‹é—´ä¸ºè¦è°ƒæ•´çš„å †ç»“èŒƒå›´</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> len - <span class="number">1</span>; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">            <span class="comment">// å°†å †ä¸­æœ€åä¸€ä¸ªå…ƒç´ ä¸å †é¡¶å…ƒç´ äº¤æ¢,è®©æœ€å¤§å€¼æ”¾åˆ°æœ€å</span></span><br><span class="line">            swap(nums, <span class="number">0</span>, i);</span><br><span class="line">            <span class="comment">// æ­¤æ—¶å †é¡¶æ˜¯ä¸‹é¢æ¢ä¸Šå»çš„å…ƒç´ å¾ˆå°,å †ç»“æ„è¢«ç ´åäº†,é€šè¿‡sink()æ–¹æ³•è®©è¯¥å…ƒç´ ä¸‹æ²‰è‡³é€‚åˆä½ç½®</span></span><br><span class="line">            <span class="comment">// æ³¨æ„æ­¤æ—¶è¦æŠŠæœ€åä¸€ä¸ªæ’é™¤åœ¨å¤–,å› ä¸ºnumsçš„æœ€å¤§å€¼å·²ç»ç¡®å®š-&gt;æ­¤æ—¶å †èŒƒå›´å˜ä¸º[0,i-1]</span></span><br><span class="line">            sink(nums, <span class="number">0</span>, i - <span class="number">1</span>);</span><br><span class="line">            <span class="comment">// ä¸‹æ²‰å®Œä¹‹å[0,i-1]åˆæ˜¯ä¸€ä¸ªæœ‰åºçš„å †</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è°ƒæ•´å †æ–¹æ³•(åœ¨å¤§é¡¶å †ä¸­è¡¨ç°ä¸ºä¸‹æ²‰)</span></span><br><span class="line"><span class="comment">     * å°†æŒ‡å®šç´¢å¼•targetçš„å…ƒç´ åœ¨[0, end]èŒƒå›´å†…è¿›è¡Œä¸‹æ²‰æ“ä½œè‡³æ­£ç¡®ä½ç½®</span></span><br><span class="line"><span class="comment">     * æ¯”è¾ƒå½“å‰èŠ‚ç‚¹å€¼ä¸å·¦å³å­èŠ‚ç‚¹æœ€å¤§å€¼,è‹¥å‰èŠ‚ç‚¹å€¼å°äºå·¦å³å­èŠ‚ç‚¹æœ€å¤§å€¼å¿…é¡»ä¸‹æ²‰(äº¤æ¢)</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nums   å¾…æ’åºçš„æ•°ç»„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> target ä¸‹æ²‰ç›®æ ‡å…ƒç´ ç´¢å¼•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> end    è¦è°ƒæ•´çš„å †èŒƒå›´æœ€å¤§ç´¢å¼•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">sink</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> target, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> target;   <span class="comment">// ä¸‹æ²‰æŒ‡é’ˆ</span></span><br><span class="line">        <span class="comment">// è‹¥å­˜åœ¨å·¦å­èŠ‚ç‚¹å°±è¿›å…¥å¾ªç¯(å¦åˆ™è¡¨æ˜ä¸‹æ²‰åˆ°åº•å±‚äº†)</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="number">2</span> * idx + <span class="number">1</span> &lt;= end) &#123;</span><br><span class="line">            <span class="comment">// maxLRä¸ºå·¦å³å­èŠ‚ç‚¹æœ€å¤§å€¼å¯¹åº”çš„ç´¢å¼•,åˆå§‹åŒ–ä¸ºå·¦å­èŠ‚ç‚¹ç´¢å¼•</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">maxLR</span> <span class="operator">=</span> <span class="number">2</span> * idx + <span class="number">1</span>;</span><br><span class="line">            <span class="comment">// å¦‚æœæœ‰å³å­èŠ‚ç‚¹ &amp;&amp; å³å­èŠ‚ç‚¹çš„å€¼æ¯”å·¦å­èŠ‚ç‚¹å¤§</span></span><br><span class="line">            <span class="keyword">if</span> (maxLR + <span class="number">1</span> &lt;= end &amp;&amp; nums[maxLR + <span class="number">1</span>] &gt; nums[maxLR]) &#123;</span><br><span class="line">                <span class="comment">// æ›´æ–°maxLRçš„å€¼ä¸ºå³å­èŠ‚ç‚¹ç´¢å¼•</span></span><br><span class="line">                maxLR++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// åˆ¤æ–­ å½“å‰èŠ‚ç‚¹å€¼ ä¸ å·¦å³å­èŠ‚ç‚¹æœ€å¤§å€¼maxLR çš„å¤§å°</span></span><br><span class="line">            <span class="comment">// æ­£ç¡®çš„å †ç»“æ„åº”ä¸º:å½“å‰èŠ‚ç‚¹å€¼nums[idx]&gt;=nums[maxLR] è‹¥è¿™é‡Œnums[idx]&lt;nums[maxLR]é‚£å°±è¦äº¤æ¢äº†</span></span><br><span class="line">            <span class="keyword">if</span> (nums[idx] &lt; nums[maxLR]) &#123;</span><br><span class="line">                <span class="comment">// å°†idxä½ç½®ä¸maxLRä½ç½®å…ƒç´ è¿›è¡Œäº¤æ¢</span></span><br><span class="line">                swap(nums, idx, maxLR);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// nums[idx]&gt;=nums[maxLR]è¡¨æ˜targetå…ƒç´ ä½ç½®å·²ç»æ­£ç¡®-&gt;é€€å‡º</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// idxæŒ‡é’ˆå¾€maxLRæ–¹å‘èµ°</span></span><br><span class="line">            idx = maxLR;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    äº¤æ¢nums[i]ä¸nums[j]çš„å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> nums[i];</span><br><span class="line">        nums[i] = nums[j];</span><br><span class="line">        nums[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æ’åºç®—æ³•æ˜¯æœ€å¸¸ç”¨æœ€åŸºç¡€çš„çš„ç®—æ³•ä¹‹ä¸€ï¼Œæœ¬ç¯‡æ–‡ç« æ€»ç»“å¸¸ç”¨çš„3ç§æ—¶é—´å¤æ‚åº¦ä¸ºO(NlogN)çš„æ¯”è¾ƒæ’åºç®—æ³•ï¼šå¿«æ’ã€å †æ’åºã€å½’å¹¶æ’åºï¼Œå¹¶æ•´åˆå‡ºæ¨¡æ¿ä¾›å‚è€ƒï¼</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fomal.cc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="æ’åº" scheme="https://www.fomal.cc/tags/%E6%8E%92%E5%BA%8F/"/>
    
    <category term="å¿«æ’" scheme="https://www.fomal.cc/tags/%E5%BF%AB%E6%8E%92/"/>
    
    <category term="å †æ’åº" scheme="https://www.fomal.cc/tags/%E5%A0%86%E6%8E%92%E5%BA%8F/"/>
    
    <category term="å½’å¹¶æ’åº" scheme="https://www.fomal.cc/tags/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>åŒºé—´æ±‚å’Œä¸“é¢˜</title>
    <link href="https://www.fomal.cc/posts/6e401bce.html"/>
    <id>https://www.fomal.cc/posts/6e401bce.html</id>
    <published>2022-08-11T13:41:18.000Z</published>
    <updated>2022-08-11T13:41:18.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-æ ‘çŠ¶æ•°ç»„-gt-ã€Œå•ç‚¹ä¿®æ”¹-amp-åŒºé—´æŸ¥è¯¢ã€ï¼š"><a href="#1-æ ‘çŠ¶æ•°ç»„-gt-ã€Œå•ç‚¹ä¿®æ”¹-amp-åŒºé—´æŸ¥è¯¢ã€ï¼š" class="headerlink" title="1.æ ‘çŠ¶æ•°ç»„-&gt;ã€Œå•ç‚¹ä¿®æ”¹ &amp; åŒºé—´æŸ¥è¯¢ã€ï¼š"></a>1.æ ‘çŠ¶æ•°ç»„-&gt;ã€Œå•ç‚¹ä¿®æ”¹ &amp; åŒºé—´æŸ¥è¯¢ã€ï¼š</h3><p>å…ˆè¾“å…¥ä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•°ç»„numsï¼Œæœ‰å¦‚ä¸‹ä¸¤ç§æ“ä½œï¼š</p><p>1.è¾“å…¥ä¸€ä¸ªæ•°mï¼Œè¾“å‡ºæ•°ç»„ä¸­ä¸‹æ ‡1~mçš„å‰ç¼€å’Œsum[1,m]</p><p>2.å¯¹æŸä¸ªæŒ‡å®šä¸‹æ ‡çš„æ•°è¿›è¡Œå€¼çš„ä¿®æ”¹</p><p><img src="../images/p10.jpg" alt="p10"></p><p>å¸¸è§„æ–¹æ³•ï¼š<strong>å‰ç¼€å’Œ</strong>ï¼Œä½†æ˜¯å½“å•ç‚¹ä¿®æ”¹çš„æ¬¡æ•°å¢å¤šï¼Œå‰ç¼€å’Œæ›´æ–°è€—æ—¶O(N)ï¼Œç„¶åå†æ±‚sum[1,m]ï¼Œæ€»ä½“æ—¶é—´å¤æ‚åº¦ä¸ºO(N^2)</p><p>è¿›é˜¶æ–¹æ³•ï¼š<strong>æ ‘çŠ¶æ•°ç»„å’Œçº¿æ®µæ ‘</strong>å¯ä»¥è¾¾åˆ°å•æ¬¡æ“ä½œlogNçº§åˆ«ã€‚å¹³å‡æ—¶é—´å¤æ‚åº¦O(NlogN)</p><p><img src="../images/p11.jpg" alt="p11"></p><p>7=0111=0100+0010+0001=lowBit(7)+lowBit(3)+lowBit(1)</p><p><strong>å‰ç½®çŸ¥è¯†</strong>ï¼šäºŒè¿›åˆ¶åŒºé—´åˆ†è§£lowBit(x)=x^(-x)æ±‚å‡ºxä¸­ä»…ä¿ç•™æœ€ä½ä½çš„1çš„æ•°å€¼ï¼ŒlowBit(7)=0100=4</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">lowbit</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ¦‚å¿µï¼šæ ‘çŠ¶æ•°ç»„å°±æ˜¯ä¸€ç§åŸºäºäºŒè¿›åˆ¶æ€æƒ³çš„æ•°æ®ç»“æ„ï¼ŒåŸºæœ¬ç”¨é€”æ˜¯ç»´æŠ¤åºåˆ—çš„å‰ç¼€å’Œ</strong>ã€‚</p><p><strong>å¯¹äºç»™å®šçš„åºåˆ—aï¼Œè®¾æ ‘çŠ¶æ•°ç»„ä¸ºcï¼Œåˆ™c[x]ä¿å­˜åºåˆ—açš„åŒºé—´[x-lowbit(x)+1,x]ä¸­æ‰€æœ‰æ•°çš„å’Œ</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] tr = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br></pre></td></tr></table></figure><p>ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªåŸºæœ¬æ“ä½œ:</p><p>(1) updateï¼Œå•ç‚¹ä¿®æ”¹ï¼Œä¿®æ”¹åºåˆ—aä¸­çš„æŸä¸ªå…ƒç´ ;</p><p>(2) queryï¼ŒåŒºé—´æŸ¥è¯¢ï¼ŒæŸ¥è¯¢åºåˆ—aä¸­åŒºé—´[1,x]çš„æ‰€æœ‰æ•°çš„å’Œã€‚</p><p><img src="../images/p12.jpg" alt="p12"></p><p><strong>æ“ä½œ1:åŒºé—´æŸ¥è¯¢query</strong></p><p>æ ‘çŠ¶æ•°ç»„èƒ½å¤Ÿå®Œæˆçš„æ˜¯æŸ¥è¯¢å‰ç¼€å’Œï¼Œç›¸å‡å³å¯å¾—åˆ°åŒºé—´å’Œã€‚</p><p>åˆ©ç”¨c[x]ç»´æŠ¤çš„æ˜¯åºåˆ—aä¸­[x-lowbit(x)+1,x]çš„åŒºé—´å’Œï¼Œç„¶åä¸æ–­å‘å‰å¯»æ‰¾å³å¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(logN)ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">query</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> x; i &gt; <span class="number">0</span>; i -= lowbit(i)) ans += tr[i];</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ“ä½œ2:å•ç‚¹ä¿®æ”¹update</strong></p><p>å•ç‚¹ä¿®æ”¹æ›´å‡†ç¡®çš„è¯´æ˜¯â€œå•ç‚¹å¢åŠ â€ï¼Œç»™åºåˆ—aä¸­çš„ä¸€ä¸ªæ•°a[x]åŠ ä¸Štï¼Œç„¶åè¦æ›´æ–°æ ‘çŠ¶æ•°ç»„cç»´æŠ¤çš„å‰ç¼€å’Œï¼Œåªéœ€è¦ä¸æ–­å‘ä¸Šç»´æŠ¤c[x]çš„çˆ¶äº²ç»“ç‚¹å³å¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(logN)ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> u)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> x; i &lt;= n; i += lowbit(i)) tr[i] += u;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šè¿™é‡Œéƒ½é»˜è®¤ç´¢å¼•ä»1å¼€å§‹</strong></p><p><strong>æ€è€ƒ:å¦‚ä½•åˆå§‹åŒ–æ ‘çŠ¶æ•°ç»„?</strong></p><p>æ–¹æ³•ä¸€:è¾“å…¥åºåˆ—aç­‰ä»·äºå¯¹aè¿›è¡Œå•ç‚¹ä¿®æ”¹ï¼Œæ›´æ–°æ ‘çŠ¶æ•°ç»„å³å¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(NlogN)ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">    add(i, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹æ³•äºŒ:è€ƒè™‘æ¯ä¸ªç»“ç‚¹å¯¹çˆ¶äº²ç»“ç‚¹çš„è´¡çŒ®ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(N)ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">    tr[i] += nums[i];</span><br><span class="line">    <span class="keyword">if</span> (i + lowBit(i) &lt;= n) tr[i + lowBit(i)] += tr[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‰å¶å§æ ‘çŠ¶æ•°ç»„æ¨¡æ¿ï¼š</p><p>ä¸€ç¯‡ä¸é”™çš„å›¾è§£ï¼š<a href="https://leetcode-cn.com/problems/range-sum-query-mutable/solution/-by-hu-ge-8-t4rn/">[æ ‘çŠ¶æ•°ç»„] è¯¦è§£æ ‘çŠ¶æ•°ç»„, åŒ…å«æ›´æ–°æŸ¥è¯¢å›¾è§£, ç§’æ‡‚lowbitå«ä¹‰(JAVA 65ms, 68.6MB)</a></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸Šæ¥å…ˆæŠŠä¸‰ä¸ªæ–¹æ³•å†™å‡ºæ¥</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span>[] tree;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">lowbit</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢å‰ç¼€å’Œçš„æ–¹æ³•</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">query</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> x; i &gt; <span class="number">0</span>; i -= lowbit(i)) ans += tree[i];</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åœ¨æ ‘çŠ¶æ•°ç»„ x ä½ç½®ä¸­å¢åŠ å€¼ u</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> u)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> x; i &lt;= n; i += lowbit(i)) tree[i] += u;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–ã€Œæ ‘çŠ¶æ•°ç»„ã€ï¼Œè¦é»˜è®¤æ•°ç»„æ˜¯ä» 1 å¼€å§‹</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) add(i + <span class="number">1</span>, nums[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ã€Œæ ‘çŠ¶æ•°ç»„ã€ï¼š</span></span><br><span class="line">&#123;   </span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="comment">// åŸæœ‰çš„å€¼æ˜¯ nums[i]ï¼Œè¦ä½¿å¾—ä¿®æ”¹ä¸º valï¼Œéœ€è¦å¢åŠ  val - nums[i]</span></span><br><span class="line">        add(i + <span class="number">1</span>, val - nums[i]); </span><br><span class="line">        nums[i] = val;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> <span class="title function_">sumRange</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> query(r + <span class="number">1</span>) - query(l);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-çº¿æ®µæ ‘ã€Œå•ç‚¹ä¿®æ”¹ã€åŒºé—´ä¿®æ”¹ã€å•ç‚¹æŸ¥è¯¢ã€åŒºé—´æŸ¥è¯¢-gt-ä½†æ€§èƒ½ä¸é«˜ã€"><a href="#2-çº¿æ®µæ ‘ã€Œå•ç‚¹ä¿®æ”¹ã€åŒºé—´ä¿®æ”¹ã€å•ç‚¹æŸ¥è¯¢ã€åŒºé—´æŸ¥è¯¢-gt-ä½†æ€§èƒ½ä¸é«˜ã€" class="headerlink" title="2.çº¿æ®µæ ‘ã€Œå•ç‚¹ä¿®æ”¹ã€åŒºé—´ä¿®æ”¹ã€å•ç‚¹æŸ¥è¯¢ã€åŒºé—´æŸ¥è¯¢-&gt;ä½†æ€§èƒ½ä¸é«˜ã€"></a>2.çº¿æ®µæ ‘ã€Œå•ç‚¹ä¿®æ”¹ã€åŒºé—´ä¿®æ”¹ã€å•ç‚¹æŸ¥è¯¢ã€åŒºé—´æŸ¥è¯¢-&gt;ä½†æ€§èƒ½ä¸é«˜ã€</h3><p><strong>å‚è€ƒèµ„æ–™ï¼š</strong><a href="https://mp.weixin.qq.com/s/T3Ds8Eb8mZ5f96NjRFr6WA"><strong>https://mp.weixin.qq.com/s/T3Ds8Eb8mZ5f96NjRFr6WA</strong></a></p><p><strong>ä»¥ä¸‹ç¬”è®°å‡å‚è€ƒåŠ›æ‰£é¢˜è§£(æ¨è)ï¼š</strong><a href="https://leetcode.cn/problems/range-module/solution/by-jiang-hui-4-tu5a/">Rangeæ¨¡å—ã€çº¿æ®µæ ‘åŠ¨æ€å¼€ç‚¹+çº¿æ®µæ ‘å›¾è§£ã€‘</a></p><p><strong>ä»€ä¹ˆæ˜¯çº¿æ®µæ ‘ï¼Ÿ</strong></p><p>çº¿æ®µæ ‘å…¶å®æ˜¯ä¸€ç§äºŒå‰æœç´¢æ ‘ï¼Œå°†ä¸€ä¸ªå¤§çš„åŒºé—´åˆ’åˆ†ä¸ºä¸€ä¸ªä¸ªå•å…ƒåŒºé—´ã€‚</p><p>å†…ä¸ªå•å…ƒåŒºé—´è¡¨ç¤ºæˆä¸€ä¸ªèŠ‚ç‚¹(<strong>å•å…ƒåŒºé—´-&gt;èŠ‚ç‚¹</strong>) çº¿æ®µæ ‘ä¸­çš„çº¿æ®µï¼Œå…¶å®ä¹Ÿæ˜¯åŒºé—´çš„æ„æ€ï¼Œå°±æ˜¯åŒºé—´æ ‘</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ•°ç»„ä¸º[1,2,3,4,5,6,7,8]ï¼Œæˆ‘ä»¬è¡¨ç¤ºä¸ºä¸€ä¸ªåŒºé—´å’Œçº¿æ®µæ ‘å°±æ˜¯ä¸‹å›¾ï¼š</p><p><img src="../images/p13.jpg" alt="p13"></p><p>å¯è§çº¿æ®µæ ‘çš„åŒºé—´æ˜¯æŒ‰ç…§åŒºé—´çš„ä¸­ç‚¹è¿›è¡Œåˆ†å‰ï¼Œå·¦å­èŠ‚ç‚¹çš„åŒºé—´å¿…å®šå°äºå³å­èŠ‚ç‚¹çš„åŒºé—´ï¼ŒåŒç†å·¦å³å­æ ‘å‡æ˜¯BST</p><p><strong>æ„å»ºçº¿æ®µæ ‘ä»£ç ï¼ˆvalåŸºäºåŒºé—´æ±‚å’Œï¼‰ï¼š</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Fomalhaut</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/6/22</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span> çº¿æ®µæ ‘æ¨¡æ¿(ä»Šå¤©ä¸€å®šä¸€å®šè¦å†™å‡ºæ¥!!!!!)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SegmentTree</span> &#123;</span><br><span class="line">    <span class="comment">// ç”¨èŠ‚ç‚¹æ•°ç»„è¡¨ç¤ºçš„çº¿æ®µæ ‘</span></span><br><span class="line">    Node[] tree;</span><br><span class="line">    <span class="comment">// åŸå§‹æ•°æ®</span></span><br><span class="line">    <span class="type">int</span>[] data;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–çº¿æ®µæ ‘</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SegmentTree</span><span class="params">(<span class="type">int</span>[] data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = data;   <span class="comment">// è½½å…¥æ•°æ®</span></span><br><span class="line">        <span class="built_in">this</span>.tree = <span class="keyword">new</span> <span class="title class_">Node</span>[<span class="number">4</span> * data.length];  <span class="comment">// èŠ‚ç‚¹ä¸ªæ•°ç»Ÿä¸€å¼€4*Nä¸ª</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        çº¿æ®µæ ‘èŠ‚ç‚¹ç±»</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="type">int</span> left;   <span class="comment">// (è¯¥èŠ‚ç‚¹å¯¹åº”çš„)åŒºé—´å·¦ç«¯ç‚¹</span></span><br><span class="line">        <span class="type">int</span> right;  <span class="comment">// åŒºé—´å³ç«¯ç‚¹</span></span><br><span class="line">        <span class="type">int</span> lazy;   <span class="comment">// æ‡’æ ‡è®°</span></span><br><span class="line">        <span class="type">int</span> val;    <span class="comment">// èŠ‚ç‚¹å€¼(æ ¹æ®ä¸åŒçš„é—®é¢˜æ„ä¹‰ä¸åŒ)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    æ ¹æ®åŒºé—´å·¦å³è¾¹ç•Œ[l,r]æ¥æ„å»ºçº¿æ®µæ ‘:idxè¡¨ç¤ºçº¿æ®µæ ‘çš„èŠ‚ç‚¹ç´¢å¼•,lä¸råˆ†åˆ«è¡¨ç¤ºåŒºé—´å·¦å³è¾¹ç•Œ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">build</span><span class="params">(<span class="type">int</span> idx, <span class="type">int</span> l, <span class="type">int</span> r)</span> &#123;</span><br><span class="line">        tree[idx] = <span class="keyword">new</span> <span class="title class_">Node</span>(); <span class="comment">// åˆ›å»ºidxä½ç½®çš„èŠ‚ç‚¹</span></span><br><span class="line">        tree[idx].left = l; <span class="comment">// è¯¥èŠ‚ç‚¹å·¦è¾¹ç•Œä¸ºl</span></span><br><span class="line">        tree[idx].right = r;    <span class="comment">//è¯¥èŠ‚ç‚¹å³è¾¹ç•Œä¸ºr</span></span><br><span class="line">        <span class="comment">// base case:åˆ°è¾¾å¶å­ç»“ç‚¹ç›´æ¥èµ‹å€¼</span></span><br><span class="line">        <span class="keyword">if</span> (l == r) &#123;</span><br><span class="line">            tree[idx].val = data[r - <span class="number">1</span>];    <span class="comment">// å› ä¸ºidxä»1å¼€å§‹,åŒºé—´çš„lä¸rä¹Ÿæ˜¯ä»1å¼€å§‹,ä½†æ˜¯dataç´¢å¼•ä»0å¼€å§‹,å› æ­¤å‘å·¦åç§»1ä½</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> l + (r - l) / <span class="number">2</span>;  <span class="comment">// [l,r]åŒºé—´ä¸­ç‚¹</span></span><br><span class="line">        <span class="comment">// é€’å½’æ„å»ºå·¦å³å­æ ‘:å½“idxç´¢å¼•ä»1å¼€å§‹æ—¶,idx*2ä¸ºå·¦å­èŠ‚ç‚¹,idx*2+1ä¸ºå³å­èŠ‚ç‚¹</span></span><br><span class="line">        build(idx * <span class="number">2</span>, l, mid); <span class="comment">// å·¦å­èŠ‚ç‚¹åŒºé—´èŒƒå›´[l,mid] å·¦å­èŠ‚ç‚¹ä¸ªæ•°&gt;=å³å­èŠ‚ç‚¹</span></span><br><span class="line">        build(idx * <span class="number">2</span> + <span class="number">1</span>, mid + <span class="number">1</span>, r); <span class="comment">// å³å­èŠ‚ç‚¹åŒºé—´èŒƒå›´[mid+1,r]</span></span><br><span class="line">        tree[idx].val = tree[idx * <span class="number">2</span>].val + tree[idx * <span class="number">2</span> + <span class="number">1</span>].val;  <span class="comment">// æ›´æ–°idxèŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ‡’æ ‡è®°çš„å¼•å…¥ï¼š</strong></p><p><img src="../images/p14.jpg" alt="p14"></p><p>å¦‚æœæ˜¯çº¿æ®µæ ‘ï¼Œæˆ‘ä»¬ç›´æ¥å¯¹æ ¹èŠ‚ç‚¹çš„å€¼è¿›è¡Œ+(8-1+1)<em>1çš„æ“ä½œå°±å¯ä»¥å¾—åˆ°æ–°çš„åŒºé—´å’Œï¼Œä½†æ˜¯è¿™æ ·å½“æˆ‘ä»¬æŸ¥è¯¢ä¸­é—´æŸæ®µåŒºé—´çš„å’Œæ—¶å°±ä¼šå‘ç°ä¸å¯¹ï¼Œå› ä¸ºè¿™ä¸ª+(8-1+1)</em>1æ²¡æœ‰æ¶‰åŠæ ¹èŠ‚ç‚¹çš„åŒºé—´å’Œæ“ä½œï¼</p><p>äºæ˜¯å°±æƒ³å¯ä¸å¯ä»¥åœ¨rootå¤„å¼•å…¥ä¸€ä¸ªæ ‡è®°çš„é‡ï¼Œåœ¨æˆ‘ä»¬è¦ä¸‹æ¢åˆ°è¦æ±‚rootå­åŒºé—´çš„åŒºé—´å’Œæ—¶å¯ä»¥æŠŠè¿™ä¸ª+1æ“ä½œå¸¦ä¸‹å»ï¼ŸæŠŠå­åŒºé—´è¿›è¡Œæ›´æ–°ï¼Ÿäºæ˜¯å°±å¼•å…¥äº†<strong>lazyå­—æ®µ</strong></p><p><strong>æ³¨æ„ï¼š</strong> æˆ‘ä»¬åªæœ‰åœ¨ç”¨åˆ°æ²¡æœ‰æ›´æ–°çš„åŒºé—´æ—¶ï¼ˆä¹Ÿå°±æ˜¯å½“å‰åŒºé—´å«æœ‰lazyï¼‰ï¼Œæ‰ä¼šä¸‹ä¼ lazyï¼Œè¾¾åˆ°æ‡’æ›´æ–°çš„ç›®çš„ã€‚</p><p><img src="../images/p15.jpg" alt="p15"></p><p><img src="../images/p16.jpg" alt="p16"></p><p>ä¹Ÿè®¸æˆ‘ä»¬è¿˜ä¼šæ›´æ–°[5,8]åŒºé—´çš„å€¼ï¼Œæˆ‘ä»¬é™¤äº†è®¾ç½®lazyå­—æ®µå¤–ï¼Œ<strong>è¿˜éœ€è¦å°†ç»“æœä¸Šä¼ åˆ°ä»–çš„çˆ¶èŠ‚ç‚¹</strong>ï¼ï¼ˆå¾ˆæ˜¾ç„¶ï¼Œä¸‹é¢å˜äº†ï¼Œä¸Šé¢åŒºé—´åŒ…å«ä¸‹é¢ä¹Ÿè¦å˜ï¼‰</p><p><img src="../images/p17.jpg" alt="p17"></p><p><img src="../images/p18.jpg" alt="p18"></p><p><strong>æ›´æ–°ä¸æŸ¥è¯¢ä»£ç å¦‚ä¸‹ï¼ˆéåŠ¨æ€å¼€ç‚¹ï¼‰ï¼š</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æ›´æ–°æŸä¸ªåŒºé—´çš„å€¼:idxä¸ºèŠ‚ç‚¹ç´¢å¼•,[l,r]ä¸ºè¦æ›´æ–°çš„åŒºé—´,valä»£è¡¨è¦æ›´æ–°è¿›å»çš„å€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="type">int</span> idx, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">    <span class="comment">// idxèŠ‚ç‚¹åŒºé—´åœ¨è¦ä¿®æ”¹çš„[l,r]åŒºé—´é‡Œé¢-&gt;ç›´æ¥æ›´æ–°åˆ°è¿™é‡Œå¹¶å¹¶è¿›è¡Œæ‡’æ ‡è®°å³å¯</span></span><br><span class="line">    <span class="keyword">if</span> (tree[idx].left &gt;= l &amp;&amp; tree[idx].right &lt;= r) &#123;</span><br><span class="line">        <span class="comment">// idxèŠ‚ç‚¹å€¼ += val * idxèŠ‚ç‚¹åŒºé—´çš„çš„èŠ‚ç‚¹æ•°</span></span><br><span class="line">        <span class="comment">// æ„æ€å°±æ˜¯æ›´æ–°äº†idxèŠ‚ç‚¹çš„æ•´ä¸ªåŒºé—´,èŠ‚ç‚¹å€¼å°±åŠ ä¸Šç›¸åº”çš„æ•°</span></span><br><span class="line">        tree[idx].val += (tree[idx].right - tree[idx].left + <span class="number">1</span>) * val;</span><br><span class="line">        <span class="comment">// å¯¹idxèŠ‚ç‚¹è¿›è¡Œæ‡’æ ‡è®°</span></span><br><span class="line">        tree[idx].lazy = val;</span><br><span class="line">        <span class="keyword">return</span>; <span class="comment">// ç»“æŸ</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (tree[idx].lazy != <span class="number">0</span>) pushDown(idx); <span class="comment">// å½“å‰èŠ‚ç‚¹æœ‰æ‡’æ ‡è®°-&gt;ä¸‹æ²‰æ‡’æ ‡è®°</span></span><br><span class="line">    <span class="comment">// [l,r]ä¸idxèŠ‚ç‚¹å·¦åŒºé—´æœ‰äº¤é›†</span></span><br><span class="line">    <span class="keyword">if</span> (l &lt;= tree[idx * <span class="number">2</span>].right) update(idx * <span class="number">2</span>, l, r, val);</span><br><span class="line">    <span class="comment">// [l,r]ä¸idxèŠ‚ç‚¹å³åŒºé—´æœ‰äº¤é›†</span></span><br><span class="line">    <span class="keyword">if</span> (r &gt;= tree[idx * <span class="number">2</span> + <span class="number">1</span>].left) update(idx * <span class="number">2</span> + <span class="number">1</span>, l, r, val);</span><br><span class="line">    <span class="comment">// åº•ä¸‹é€’å½’å®Œæˆåå‘ä¸Šå›æº¯æ›´æ–°idxçš„å€¼</span></span><br><span class="line">    pushUp(idx);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æŸ¥è¯¢åŒºé—´[l,r]</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">query</span><span class="params">(<span class="type">int</span> idx, <span class="type">int</span> l, <span class="type">int</span> r)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// idxèŠ‚ç‚¹çš„åŒºé—´è¢«[l,r]å®Œå…¨åŒ…å« -&gt; ç›´æ¥è¿”å›èŠ‚ç‚¹å€¼</span></span><br><span class="line">    <span class="keyword">if</span> (tree[idx].left &gt;= l &amp;&amp; tree[idx].right &lt;= r) <span class="keyword">return</span> tree[idx].val;</span><br><span class="line">    <span class="comment">// å¦åˆ™å°±è¿˜è¦ç»§ç»­å¾€ä¸‹èµ°æ›´å°çš„åŒºé—´</span></span><br><span class="line">    <span class="comment">// é‡åˆ°æœ‰æ‡’æ ‡è®°ä¹Ÿè¦ä¸‹æ²‰(å› ä¸ºä½ ç°åœ¨è¦æŸ¥è¯¢å°åŒºé—´çš„ä¿¡æ¯)</span></span><br><span class="line">    <span class="keyword">if</span> (tree[idx].lazy != <span class="number">0</span>) pushDown(idx);</span><br><span class="line">    <span class="comment">// è·Ÿå·¦å³åŒºé—´æœ‰äº¤é›†</span></span><br><span class="line">    <span class="keyword">if</span> (tree[idx * <span class="number">2</span>].right &gt;= l) res += query(idx * <span class="number">2</span>, l, r);  <span class="comment">// ç´¯åŠ é€’å½’å®Œæˆçš„å€¼</span></span><br><span class="line">    <span class="keyword">if</span> (tree[idx * <span class="number">2</span> + <span class="number">1</span>].left &lt;= r) res += query(idx * <span class="number">2</span> + <span class="number">1</span>, l, r);</span><br><span class="line">    <span class="keyword">return</span> res; <span class="comment">// è¿”å›ç»“æœ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ä¸Šä¼ ç»“æœ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pushUp</span><span class="params">(<span class="type">int</span> idx)</span> &#123;</span><br><span class="line">    tree[idx].val = tree[idx * <span class="number">2</span>].val + tree[idx * <span class="number">2</span> + <span class="number">1</span>].val;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ä¸‹æ²‰æ‡’æ ‡è®°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pushDown</span><span class="params">(<span class="type">int</span> idx)</span> &#123;</span><br><span class="line">    <span class="comment">// å‘å·¦å³å­èŠ‚ç‚¹ä¸‹æ²‰lazy(ç´¯åŠ è€Œä¸æ˜¯è¦†ç›–)</span></span><br><span class="line">    tree[idx * <span class="number">2</span>].lazy += tree[idx].lazy;</span><br><span class="line">    tree[idx * <span class="number">2</span> + <span class="number">1</span>].lazy += tree[idx].lazy;</span><br><span class="line">    <span class="comment">// idxèŠ‚ç‚¹åŒºé—´çš„ä¸­ç‚¹</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> tree[idx].left + (tree[idx].right - tree[idx].left) / <span class="number">2</span>;</span><br><span class="line">    <span class="comment">// å·¦å³å­èŠ‚ç‚¹çš„èŠ‚ç‚¹å€¼åˆ†åˆ«åŠ ä¸Š(æ‡’æ ‡è®°çš„å€¼*åŒºé—´èŠ‚ç‚¹ä¸ªæ•°)</span></span><br><span class="line">    tree[idx * <span class="number">2</span>].val += tree[idx].lazy * (mid - tree[idx].left + <span class="number">1</span>);</span><br><span class="line">    tree[idx * <span class="number">2</span> + <span class="number">1</span>].val += tree[idx].lazy * (tree[idx].right - mid);</span><br><span class="line">    <span class="comment">// ä¸‹æ²‰äº†lazyåidxçš„æ‡’æ ‡è®°ç½®0</span></span><br><span class="line">    tree[idx].lazy = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åŠ¨æ€å¼€ç‚¹çš„å¼•å…¥ï¼š</strong></p><p>ä¸Šè¿°ä»£ç åªæ˜¯é’ˆå¯¹ä¸å¯¹åŒºé—´é•¿åº¦è¿›è¡Œä¿®æ”¹ï¼Œåªèƒ½åœ¨å›ºå®šçš„åŒºé—´å†…æŸ¥è¯¢å’Œä¿®æ”¹ï¼Œå¹¶ä¸”ç”¨åˆ°äº†4nçš„ç©ºé—´ï¼Œæœ‰äº›ç©ºé—´æ ¹æœ¬æ²¡æœ‰è¢«ä½¿ç”¨ï¼Œæœ‰çš„é¢˜ç›®æ•°æ®è§„æ¨¡åˆ°äº†1e9ï¼Œå¦‚æœæˆ‘ä»¬å¼€4nçš„ç©ºé—´å¹¶ä¸å¯è¡Œï¼</p><p>äºæ˜¯æˆ‘ä»¬éœ€è¦åŠ¨æ€åœ°è¿›è¡ŒèŠ‚ç‚¹åˆ›å»ºï¼Œå³æˆ‘ä»¬ä¸ç”¨idx <em> 2å’Œidx</em> 2 + 1æ¥è¡¨ç¤ºèŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹ï¼Œè€Œæ˜¯åœ¨Nodeé‡Œæ·»åŠ leftChildå’ŒrightChildä¸¤ä¸ªå¼•ç”¨ï¼Œæ¥æ‰¾åˆ°å·¦å³èŠ‚ç‚¹ã€‚ç”±äºæˆ‘ä»¬æ˜¯åœ¨æ›´æ–°ä¸æŸ¥è¯¢ä¸­è¿›è¡ŒåŠ¨æ€å¼€ç‚¹ï¼Œæ‰€ä»¥ä¸éœ€è¦buildæ ‘ï¼</p><p><strong>åŠ¨æ€å¼€ç‚¹çš„ä»£ç å¦‚ä¸‹ï¼š</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Fomalhaut</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/6/23</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span> çº¿æ®µæ ‘(åŠ¨æ€å¼€ç‚¹+æ‡’æ ‡è®°)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SegmentTree_Dynamic</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    åŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘èŠ‚ç‚¹ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="type">int</span> left, right;    <span class="comment">// åŒºé—´å·¦å³ç«¯ç‚¹</span></span><br><span class="line">        <span class="type">int</span> val;    <span class="comment">// èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        <span class="type">int</span> lazy;   <span class="comment">// æ‡’æ ‡è®°:0ä»£è¡¨æ²¡æœ‰æ‡’æ ‡è®°</span></span><br><span class="line">        Node leftChild, rightChild; <span class="comment">// å·¦å³å­æ ‘å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ ¹æ®åŒºé—´[left,right]åˆ›å»ºèŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.left = left;</span><br><span class="line">            <span class="built_in">this</span>.right = right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    åŠ¨æ€å¼€ç‚¹çš„åŒºé—´æ›´æ–°:rootä»£è¡¨æ ¹èŠ‚ç‚¹,[l,r]ä»£è¡¨æ›´æ–°åŒºé—´,valä»£è¡¨æ›´æ–°çš„å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Node root, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.[l,r]ä¸åœ¨rootåŒºé—´çš„èŒƒå›´å†… -&gt; ç›´æ¥è¿”å›</span></span><br><span class="line">        <span class="keyword">if</span> (r &lt; root.left || l &gt; root.right) <span class="keyword">return</span>;</span><br><span class="line">        <span class="comment">// 2.[l,r]åŒ…å«rootåŒºé—´ -&gt; è¿›è¡Œæ‡’æ ‡è®°å¹¶æ›´æ–°rootçš„å€¼</span></span><br><span class="line">        <span class="keyword">if</span> (root.left &gt;= l &amp;&amp; root.right &lt;= r) &#123;</span><br><span class="line">            root.lazy = val;    <span class="comment">// è¿›è¡Œæ‡’æ ‡è®°</span></span><br><span class="line">            root.val += (root.right - root.left + <span class="number">1</span>) * val; <span class="comment">// èŠ‚ç‚¹å€¼+=åŒºé—´é•¿åº¦*val</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3.ç»§ç»­å¾€ä¸‹èµ°</span></span><br><span class="line">        lazyCreate(root);   <span class="comment">// åŠ¨æ€å¼€ç‚¹</span></span><br><span class="line">        pushDown(root); <span class="comment">// ä¸‹ä¼ lazy</span></span><br><span class="line">        update(root.leftChild, l, r, val);  <span class="comment">// æ›´æ–°å·¦å­æ ‘åŒºé—´</span></span><br><span class="line">        update(root.rightChild, l, r, val); <span class="comment">// æ›´æ–°å³å­æ ‘åŒºé—´</span></span><br><span class="line">        pushUp(root);   <span class="comment">// ä¸Šä¼ ç»“æœ</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    åŠ¨æ€å¼€ç‚¹çš„æŸ¥è¯¢åŒºé—´[l,r]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">query</span><span class="params">(Node root, <span class="type">int</span> l, <span class="type">int</span> r)</span> &#123;</span><br><span class="line">        <span class="comment">// [l,r]å¿…å®šåœ¨rooté‡Œé¢,å› ä¸ºrootæ˜¯æœ€å¤§çš„å¯èƒ½åŒºé—´</span></span><br><span class="line">        <span class="comment">// 1.rootçš„åŒºé—´åœ¨[l,r]é‡Œé¢ -&gt; ç›´æ¥è¿”å›èŠ‚ç‚¹å€¼</span></span><br><span class="line">        <span class="keyword">if</span> (root.left &gt;= l &amp;&amp; root.right &lt;= r) <span class="keyword">return</span> root.val;</span><br><span class="line">        <span class="comment">// 2.å¦åˆ™è¦å¾€ä¸‹èµ°æ‰¾åˆ°[l,r]å®Œå…¨åŒ…å«å­èŠ‚ç‚¹æ•´ä¸ªåŒºé—´çš„æƒ…å†µ</span></span><br><span class="line">        lazyCreate(root);   <span class="comment">// åŠ¨æ€å¼€ç‚¹</span></span><br><span class="line">        pushDown(root); <span class="comment">// ä¸‹ä¼ æ‡’æ ‡è®°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> root.left + (root.right - root.left) / <span class="number">2</span>; <span class="comment">// rootåŒºé—´ä¸­ç‚¹</span></span><br><span class="line">        <span class="comment">// å·¦å­æ ‘èŒƒå›´[ll, mid] å³å­æ ‘èŒƒå›´[mid+1,rr]</span></span><br><span class="line">        <span class="keyword">if</span> (r &lt;= mid) &#123; <span class="comment">// [l,r]åªå æ®åˆ°rootå·¦å­æ ‘</span></span><br><span class="line">            <span class="keyword">return</span> query(root.leftChild, l, r);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (l &gt; mid) &#123;   <span class="comment">// [l,r]åªå æ®åˆ°rootå³å­æ ‘</span></span><br><span class="line">            <span class="keyword">return</span> query(root.rightChild, l, r);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;    <span class="comment">// [l,r]å æ®rootå·¦å­æ ‘ä¸å³å­æ ‘</span></span><br><span class="line">            <span class="keyword">return</span> query(root.leftChild, l, mid) + query(root.rightChild, mid + <span class="number">1</span>, r);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä¸ç”¨ä¸Šä¼ ç»“æœäº†å› ä¸ºæŸ¥è¯¢ä¸æ”¹å˜èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    ä¸Šä¼ ç»“æœ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pushUp</span><span class="params">(Node root)</span> &#123;</span><br><span class="line">        root.val = root.leftChild.val + root.rightChild.val;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    ä¸‹ä¼ æ‡’æ ‡è®°:æœ‰æ‡’æ ‡è®°-&gt;ä¸‹ä¼ æ‡’æ ‡è®°å¹¶æ›´æ–°å­èŠ‚ç‚¹çš„å€¼;æ²¡æœ‰-&gt;ç»“æŸ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pushDown</span><span class="params">(Node root)</span> &#123;</span><br><span class="line">        <span class="comment">// å½“ä¸”ä»…å½“æœ‰æ‡’æ ‡è®°æ‰è¿›è¡Œä¸‹ä¼ </span></span><br><span class="line">        <span class="keyword">if</span> (root.lazy != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// æ‡’æ ‡è®°çš„å€¼</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">v</span> <span class="operator">=</span> root.lazy;</span><br><span class="line">            <span class="comment">// æ‡’æ ‡è®°ä¸‹æ²‰è‡³å·¦å³å­èŠ‚ç‚¹</span></span><br><span class="line">            <span class="comment">// è¿™é‡Œæ‡’æ ‡è®°ç´¯åŠ è¿˜æ˜¯è¦†ç›–å¯ä»¥æ ¹æ®å…·ä½“é—®é¢˜è¿›è¡Œåˆ†æ</span></span><br><span class="line">            <span class="comment">// æ¯”å¦‚è¯´æ˜¯æ±‚åŒºé—´çš„ç´¯åŠ å€¼å°±æ˜¯+= å¦‚æœæ˜¯åªæœ‰ä¸¤ä¸ªçŠ¶æ€é‚£ç§å¯ä»¥ç›´æ¥è¿›è¡Œè¦†ç›–(LC715.Rangeæ¨¡å—)</span></span><br><span class="line">            root.leftChild.lazy += v;</span><br><span class="line">            root.rightChild.lazy += v;</span><br><span class="line">            <span class="comment">// æ›´æ–°å·¦å³å­èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">            root.leftChild.val += (root.leftChild.right - root.leftChild.left + <span class="number">1</span>) * v;</span><br><span class="line">            root.rightChild.val += (root.rightChild.right - root.rightChild.left + <span class="number">1</span>) * v;</span><br><span class="line">            <span class="comment">// rootå–æ¶ˆæ‡’æ ‡è®°</span></span><br><span class="line">            root.lazy = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    åˆ›å»ºå·¦å³å­æ ‘</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">lazyCreate</span><span class="params">(Node root)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> root.left + (root.right - root.left) / <span class="number">2</span>; <span class="comment">// rootåŒºé—´ä¸­ç‚¹</span></span><br><span class="line">        <span class="comment">// åˆ›å»ºå·¦å³å­æ ‘å¹¶æ„å»ºè¿æ¥</span></span><br><span class="line">        <span class="keyword">if</span> (root.leftChild == <span class="literal">null</span>) root.leftChild = <span class="keyword">new</span> <span class="title class_">Node</span>(root.left, mid);</span><br><span class="line">        <span class="keyword">if</span> (root.rightChild == <span class="literal">null</span>) root.leftChild = <span class="keyword">new</span> <span class="title class_">Node</span>(mid + <span class="number">1</span>, root.right);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><strong>æ•°ç»„è¡¨ç¤ºçš„çº¿æ®µæ ‘(å«æ‡’æ ‡è®°+åŠ¨æ€å¼€ç‚¹)å¯ä»¥å‚è€ƒä¸‰å¶ï¼š</strong></p><p><a href="https://leetcode.cn/problems/my-calendar-i/"><strong>729. æˆ‘çš„æ—¥ç¨‹å®‰æ’è¡¨ I</strong></a> </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> leetcode.SegmentTree;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Fomalhaut</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/6/24</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span> 729. æˆ‘çš„æ—¥ç¨‹å®‰æ’è¡¨ I</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Q729</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MyCalendar</span> <span class="variable">myCalendar</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyCalendar</span>();</span><br><span class="line">        System.out.println(myCalendar.book(<span class="number">10</span>, <span class="number">20</span>));    <span class="comment">// true</span></span><br><span class="line">        System.out.println(myCalendar.book(<span class="number">15</span>, <span class="number">25</span>));    <span class="comment">// false</span></span><br><span class="line">        System.out.println(myCalendar.book(<span class="number">20</span>, <span class="number">30</span>));    <span class="comment">// true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">MyCalendar</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æœ¬é¢˜æ˜¯çº¿æ®µæ ‘çš„æ¨¡æ¿é¢˜ä¹‹ä¸€,ç”±äºå€¼åŸŸèŒƒå›´åœ¨[0,1e9]å› æ­¤åªèƒ½é‡‡ç”¨åŠ¨æ€å¼€ç‚¹çš„æ–¹å¼,å¦åˆ™ä¼šå‡ºç°MLE</span></span><br><span class="line"><span class="comment">        æœ¬é¢˜è¦åŠ¨æ€åœ°è·å½“å‰åŒºé—´æ˜¯å¦å®Œå…¨è¢«è¦†ç›–,å¯ä»¥å°†çº¿æ®µæ ‘èŠ‚ç‚¹å€¼è®¾ä¸ºå½“å‰åŒºé—´çš„èŠ‚ç‚¹æ•°(å¶å­ç»“ç‚¹åªæœ‰0ä¸1çš„åŒºé—´å’Œ)</span></span><br><span class="line"><span class="comment">        åŒæ—¶ä¸ºäº†ä½¿æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ä¸ºä¸¥æ ¼çš„O(logN)è¦åŠ å…¥æ‡’æ ‡è®°</span></span><br><span class="line"><span class="comment">        -&gt;æŸ¥è¯¢[start,end)åŒºé—´æ˜¯å¦èƒ½bookå°±ç›¸å½“äºæ±‚[start,end-1]çš„åŒºé—´å’Œæ˜¯å¦ä¸º0</span></span><br><span class="line"><span class="comment">        æ‡’æ ‡è®°çš„çº¿æ®µæ ‘ç©ºé—´å¤æ‚åº¦ä¸ºO(MlogN),Mä¸ºæ“ä½œæ¬¡æ•°; æŸ¥è¯¢å’Œæ›´æ–°ä¸€æ¬¡æ—¶é—´å¤æ‚åº¦ä¸º:O(logN)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         èŠ‚ç‚¹ç±»:</span></span><br><span class="line"><span class="comment">         æœ¬èŠ‚ç‚¹ä¸ä¹‹å‰çš„æ¨¡æ¿ä¸åŒ,è¯¥èŠ‚ç‚¹æˆå‘˜æ²¡æœ‰æ˜¾å¼åœ°åŒ…å«èŠ‚ç‚¹uçš„åŒºé—´å·¦å³ç«¯ç‚¹[lc,rc]</span></span><br><span class="line"><span class="comment">         åŒºé—´å·¦å³ç«¯ç‚¹[lc,rc]å¯ä»¥é€šè¿‡update()ä¸query()æ˜¾å¼åœ°ä¼ å…¥å†è¿›è¡Œé€’å½’è®¡ç®—</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">            <span class="comment">// ls ä¸rs åˆ†åˆ«ä»£è¡¨å½“èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹åœ¨trä¸­çš„ä¸‹æ ‡ (ç›¸å½“äºleftChildä¸rightChild)</span></span><br><span class="line">            <span class="comment">// val è¡¨ç¤ºå½“å‰èŠ‚ç‚¹çš„åŒºé—´å’Œ(åªæœ‰0ä¸1)</span></span><br><span class="line">            <span class="comment">// addä¸ºæ‡’æ ‡è®°</span></span><br><span class="line">            <span class="type">int</span> ls, rs, add, val;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">N</span> <span class="operator">=</span> (<span class="type">int</span>) <span class="number">1e9</span>, M = <span class="number">120010</span>, cnt = <span class="number">1</span>; <span class="comment">// N åŒºé—´èŒƒå›´; M èŠ‚ç‚¹ä¸ªæ•°; cnt èŠ‚ç‚¹ç´¢å¼•</span></span><br><span class="line">        Node[] tr = <span class="keyword">new</span> <span class="title class_">Node</span>[M];    <span class="comment">// æ•°ç»„è¡¨ç¤ºçš„çº¿æ®µæ ‘</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">MyCalendar</span><span class="params">()</span> &#123;</span><br><span class="line">            tr[<span class="number">0</span>] = <span class="keyword">new</span> <span class="title class_">Node</span>(); <span class="comment">// æ ¹èŠ‚ç‚¹uä»tr[0]å¼€å§‹</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ›´æ–°[l,r]åŒºé—´çš„èŠ‚ç‚¹,æ›´æ–°å€¼ä¸ºval=1</span></span><br><span class="line"><span class="comment">        u æ ¹èŠ‚ç‚¹ç´¢å¼•;lc ä¸ rc ä»£è¡¨æ ¹èŠ‚ç‚¹uè¡¨ç¤ºçš„å€¼åŸŸèŒƒå›´</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> lc, <span class="type">int</span> rc, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">            <span class="comment">// èŠ‚ç‚¹uè¡¨ç¤ºçš„èŒƒå›´[lc,rc]åœ¨[l,r]å†…éƒ¨ -&gt; ç›´æ¥æ›´æ–°èŠ‚ç‚¹å€¼å’Œæ‡’æ ‡è®°</span></span><br><span class="line">            <span class="keyword">if</span> (lc &gt;= l &amp;&amp; rc &lt;= r) &#123;</span><br><span class="line">                tr[u].val = (rc - lc + <span class="number">1</span>) * val;</span><br><span class="line">                tr[u].add = val;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            lazyCreate(u);  <span class="comment">// åŠ¨æ€å¼€ç‚¹</span></span><br><span class="line">            pushDown(u, rc - lc + <span class="number">1</span>);   <span class="comment">// ä¸‹ä¼ æ‡’æ ‡è®°</span></span><br><span class="line">            <span class="comment">// é€’å½’æ›´æ–°å·¦å³å­èŠ‚ç‚¹</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> lc + (rc - lc) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (l &lt;= mid) update(tr[u].ls, lc, mid, l, r, val); <span class="comment">// [l,r]å æ®åˆ°å·¦å­æ ‘</span></span><br><span class="line">            <span class="keyword">if</span> (r &gt; mid) update(tr[u].rs, mid + <span class="number">1</span>, rc, l, r, val);  <span class="comment">// [l,r]å æ®åˆ°å³å­æ ‘</span></span><br><span class="line">            pushUp(u);  <span class="comment">// å›æº¯æ›´æ–°uçš„å€¼</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æŸ¥è¯¢[l,r]åŒºé—´çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">        u æ ¹èŠ‚ç‚¹ç´¢å¼•;lc ä¸ rc ä»£è¡¨æ ¹èŠ‚ç‚¹uè¡¨ç¤ºçš„å€¼åŸŸèŒƒå›´</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">query</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> lc, <span class="type">int</span> rc, <span class="type">int</span> l, <span class="type">int</span> r)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (lc &gt;= l &amp;&amp; rc &lt;= r) <span class="keyword">return</span> tr[u].val;   <span class="comment">// uèŠ‚ç‚¹åŒºé—´åœ¨[l,r]å†…</span></span><br><span class="line">            <span class="comment">// å¦åˆ™ç»§ç»­å¾€ä¸‹èµ°</span></span><br><span class="line">            lazyCreate(u);  <span class="comment">// åŠ¨æ€å¼€ç‚¹</span></span><br><span class="line">            pushDown(u, rc - lc + <span class="number">1</span>); <span class="comment">// ä¸‹ä¼ æ‡’æ ‡è®°</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> lc + (rc - lc) / <span class="number">2</span>, res = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (l &lt;= mid) res = query(tr[u].ls, lc, mid, l, r); <span class="comment">// [l,r]å æ®åˆ°å·¦å­æ ‘</span></span><br><span class="line">            <span class="keyword">if</span> (r &gt; mid) res += query(tr[u].rs, mid + <span class="number">1</span>, rc, l, r);  <span class="comment">// [l,r]å æ®åˆ°å³å­æ ‘</span></span><br><span class="line">            <span class="keyword">return</span> res; <span class="comment">// è¿”å›å·¦å³åŒºé—´æ€»å’Œ</span></span><br><span class="line">            <span class="comment">// æŸ¥è¯¢ä¸æ›´æ–°ç«¯ç‚¹çš„å€¼å› æ­¤ä¸ç”¨å›æº¯</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å‘ä¸Šæ›´æ–°uçš„å€¼</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pushUp</span><span class="params">(<span class="type">int</span> u)</span> &#123;</span><br><span class="line">            tr[u].val = tr[tr[u].ls].val + tr[tr[u].rs].val;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ä¸‹ä¼ æ‡’æ ‡è®°</span></span><br><span class="line"><span class="comment">        å…¶ä¸­ len ä¸ºèŠ‚ç‚¹è¡¨ç¤ºçš„åŒºé—´é•¿åº¦ ç”¨äºç®€åŒ–è®¡ç®—åŒºé—´é•¿åº¦</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pushDown</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> len)</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">v</span> <span class="operator">=</span> tr[u].add;</span><br><span class="line">            <span class="keyword">if</span> (v != <span class="number">0</span>) &#123;   <span class="comment">// é€ä¸€æ‡’æ ‡è®°ä¸ä¸º0æ‰ä¸‹ä¼ </span></span><br><span class="line">                <span class="comment">// 1.ä¸‹ä¼ æ‡’æ ‡è®°</span></span><br><span class="line">                tr[tr[u].ls].add = v;</span><br><span class="line">                tr[tr[u].rs].add = v;</span><br><span class="line">                <span class="comment">// 2.æ›´æ–°å­èŠ‚ç‚¹çš„å€¼(ä¸åˆ¤æ–­æ‡’æ ‡è®°å°±è¦+=é¿å…0è¦†ç›–)</span></span><br><span class="line">                tr[tr[u].ls].val = (len - len / <span class="number">2</span>) * v; <span class="comment">// å·¦(å¤§)</span></span><br><span class="line">                tr[tr[u].rs].val = (len / <span class="number">2</span>) * v;   <span class="comment">// å³(å°)</span></span><br><span class="line">                <span class="comment">// 3.æ‡’æ ‡è®°ä¸‹ä¼ å®Œç½®0</span></span><br><span class="line">                tr[u].add = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        åŠ¨æ€å¼€ç‚¹:åŠ¨æŒ‰éœ€æ€åˆ›å»ºå·¦å³å­èŠ‚ç‚¹å¹¶æ„å»ºè¿æ¥</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">lazyCreate</span><span class="params">(<span class="type">int</span> u)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (tr[u].ls == <span class="number">0</span>) &#123;    <span class="comment">// å½“ä¸”ä»…å½“å·¦å­èŠ‚ç‚¹æ²¡æœ‰æ—¶æ‰è¿›è¡Œå¼€ç‚¹(tr[u].lsä¸º0è¡¨ç¤ºè¿˜æ²¡å¼€å·¦å­èŠ‚ç‚¹)</span></span><br><span class="line">                tr[u].ls = cnt++;   <span class="comment">// æ„å»ºä¸tr[u]çš„è¿æ¥,ç´¢å¼•ä¾æ¬¡å–</span></span><br><span class="line">                tr[tr[u].ls] = <span class="keyword">new</span> <span class="title class_">Node</span>();  <span class="comment">// å¼€ç‚¹</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (tr[u].rs == <span class="number">0</span>) &#123;</span><br><span class="line">                tr[u].rs = cnt++;</span><br><span class="line">                tr[tr[u].rs] = <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">book</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">            <span class="comment">// åŒºé—´[start,end-1]å·²ç»æœ‰ä¸œè¥¿å¡«å……è¿‡äº†-&gt;ä¸èƒ½book</span></span><br><span class="line">            <span class="keyword">if</span> (query(<span class="number">0</span>, <span class="number">0</span>, N, start, end - <span class="number">1</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å¦åˆ™æ›´æ–°å¹¶è¿”å›true</span></span><br><span class="line">            update(<span class="number">0</span>, <span class="number">0</span>, N, start, end - <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> <a href="https://leetcode.cn/problems/my-calendar-ii/solution/by-ac_oier-okkc/"><strong>731. æˆ‘çš„æ—¥ç¨‹å®‰æ’è¡¨ II</strong></a><strong>(æ³¨æ„èŠ‚ç‚¹ç»´æŠ¤çš„æ˜¯æœ€å¤§å€¼)</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> leetcode.SegmentTree;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Fomalhaut</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/6/24</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span> 731. æˆ‘çš„æ—¥ç¨‹å®‰æ’è¡¨ II</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Q731</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MyCalendarTwo</span> <span class="variable">MyCalendar</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyCalendarTwo</span>();</span><br><span class="line">        System.out.println(MyCalendar.book(<span class="number">10</span>, <span class="number">20</span>));    <span class="comment">// true</span></span><br><span class="line">        System.out.println(MyCalendar.book(<span class="number">50</span>, <span class="number">60</span>));    <span class="comment">// true</span></span><br><span class="line">        System.out.println(MyCalendar.book(<span class="number">10</span>, <span class="number">40</span>));    <span class="comment">// true</span></span><br><span class="line">        System.out.println(MyCalendar.book(<span class="number">5</span>, <span class="number">15</span>));     <span class="comment">// false</span></span><br><span class="line">        System.out.println(MyCalendar.book(<span class="number">5</span>, <span class="number">10</span>));     <span class="comment">// true</span></span><br><span class="line">        System.out.println(MyCalendar.book(<span class="number">25</span>, <span class="number">55</span>));    <span class="comment">// true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">MyCalendarTwo</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        è¿™é¢˜ä¹Ÿå¯ä»¥ç”¨çº¿æ®µæ ‘è¿›è¡Œæ±‚è§£:startä¸endçš„èŒƒå›´ä¸º[0,1e9]</span></span><br><span class="line"><span class="comment">        ä¸è¿‡ç›¸æ¯”äºQ729 æˆ‘çš„æ—¥ç¨‹å®‰æ’è¡¨I è¿™é‡Œè¦ç»´æŠ¤çš„valä¸ºåŒºé—´çš„æœ€å¤§å€¼max</span></span><br><span class="line"><span class="comment">        å½“åŒºé—´çš„æœ€å¤§å€¼&gt;=2å°±è¯´æ˜å·²ç»æœ‰ä¸¤ä¸ªé‡å çš„é¢„è®¢,ç¬¬3ä¸ªé¢„è®¢å°±ä¸èƒ½bookäº†</span></span><br><span class="line"><span class="comment">        æŸ¥è¯¢å’Œæ›´æ–°ä¸€æ¬¡æ—¶é—´å¤æ‚åº¦ä¸º:O(logN) ç©ºé—´å¤æ‚åº¦ä¸ºO(MlogN),Mä¸ºæ“ä½œæ¬¡æ•°</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        èŠ‚ç‚¹ç±»</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">            <span class="type">int</span> ls, rs, add, max;   <span class="comment">// ls, rs ä¸ºå·¦å³å­èŠ‚ç‚¹åœ¨trä¸­ç´¢å¼•(è§¦æ‰‹); add æ‡’æ ‡è®°; max ç»´æŠ¤åŒºé—´æœ€å¤§å€¼</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">N</span> <span class="operator">=</span> (<span class="type">int</span>) <span class="number">1e9</span>, M = <span class="number">120010</span>, cnt = <span class="number">1</span>; <span class="comment">// N åŒºé—´èŒƒå›´; M èŠ‚ç‚¹ä¸ªæ•°; cnt èŠ‚ç‚¹åœ¨trä¸­çš„ç´¢å¼•</span></span><br><span class="line">        Node[] tr = <span class="keyword">new</span> <span class="title class_">Node</span>[M];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">MyCalendarTwo</span><span class="params">()</span> &#123;</span><br><span class="line">            tr[<span class="number">0</span>] = <span class="keyword">new</span> <span class="title class_">Node</span>(); <span class="comment">// åˆ›å»ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ›´æ–°åŒºé—´[l,r] å€¼ä¸ºval</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> lc, <span class="type">int</span> rc, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">            <span class="comment">// [l,r]åœ¨uè¡¨ç¤ºçš„åŒºé—´å†…</span></span><br><span class="line">            <span class="keyword">if</span> (lc &gt;= l &amp;&amp; rc &lt;= r) &#123;</span><br><span class="line">                tr[u].add += val;   <span class="comment">// æ‡’æ ‡è®°è¦ç´¯è®¡(ä¾‹å¦‚è¦†ç›–äº†2æ¬¡)</span></span><br><span class="line">                <span class="comment">// æœ€å¤§å€¼æ˜¯max(curVal,curVal+val)=curVal+val -&gt; max += val;</span></span><br><span class="line">                tr[u].max += val;</span><br><span class="line">                <span class="keyword">return</span>; <span class="comment">// ç»“æŸ</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// [l,r]ä¸åœ¨uå†…</span></span><br><span class="line">            lazyCreate(u);  <span class="comment">// åŠ¨æ€å¼€ç‚¹</span></span><br><span class="line">            pushDown(u);    <span class="comment">// ä¸‹ä¼ æ‡’æ ‡è®°</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> lc + (rc - lc) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (l &lt;= mid) update(tr[u].ls, lc, mid, l, r, val); <span class="comment">// å æ®åˆ°å·¦å­æ ‘</span></span><br><span class="line">            <span class="keyword">if</span> (r &gt; mid) update(tr[u].rs, mid + <span class="number">1</span>, rc, l, r, val);  <span class="comment">// å æ®åˆ°å³å­æ ‘</span></span><br><span class="line">            pushUp(u);  <span class="comment">// å›æº¯</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">       æŸ¥è¯¢åŒºé—´[l,r]çš„æœ€å¤§å€¼</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">query</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> lc, <span class="type">int</span> rc, <span class="type">int</span> l, <span class="type">int</span> r)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (lc &gt;= l &amp;&amp; rc &lt;= r) <span class="keyword">return</span> tr[u].max;</span><br><span class="line">            lazyCreate(u);  <span class="comment">// å†¬å¤©å¼€ç‚¹</span></span><br><span class="line">            pushDown(u);    <span class="comment">// ä¸‹ä¼ æ‡’æ ‡è®°</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> lc + (rc - lc) / <span class="number">2</span>, res = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (l &lt;= mid) res = query(tr[u].ls, lc, mid, l, r);</span><br><span class="line">            <span class="keyword">if</span> (r &gt; mid) res = Math.max(res, query(tr[u].rs, mid + <span class="number">1</span>, rc, l, r));   <span class="comment">// è®°å¾—å–å·¦å³å­èŠ‚ç‚¹çš„æœ€å¤§å€¼</span></span><br><span class="line">            <span class="keyword">return</span> res; <span class="comment">// è¿”å›æœ€å¤§å€¼</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æŒ‰éœ€åŠ¨æ€å¼€ç‚¹</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">lazyCreate</span><span class="params">(<span class="type">int</span> u)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (tr[u].ls == <span class="number">0</span>) &#123;    <span class="comment">// å·¦å­èŠ‚ç‚¹ä¸å­˜åœ¨ -&gt; åˆ›å»ºå¹¶æ„å»ºè¿æ¥</span></span><br><span class="line">                tr[u].ls = cnt++;</span><br><span class="line">                tr[tr[u].ls] = <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (tr[u].rs == <span class="number">0</span>) &#123;</span><br><span class="line">                tr[u].rs = cnt++;</span><br><span class="line">                tr[tr[u].rs] = <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ä¸‹ä¼ æ‡’æ ‡è®°</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pushDown</span><span class="params">(<span class="type">int</span> u)</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">v</span> <span class="operator">=</span> tr[u].add;  <span class="comment">// èŠ‚ç‚¹uä¸‹ä¼ ä¸‹æ¥çš„æ‡’æ ‡è®°</span></span><br><span class="line">            <span class="keyword">if</span> (v != <span class="number">0</span>) &#123;   <span class="comment">// å½“ä¸”ä»…å½“æ‡’æ ‡è®°ä¸ä¸º0æ‰è¿›è¡Œä¸‹ä¼ </span></span><br><span class="line">                <span class="comment">// ä¸‹ä¼ æ‡’æ ‡è®°è‡³å­èŠ‚ç‚¹(ç´¯è®¡)</span></span><br><span class="line">                tr[tr[u].ls].add += v;</span><br><span class="line">                tr[tr[u].rs].add += v;</span><br><span class="line">                <span class="comment">// æ›´æ–°å·¦å³å­èŠ‚ç‚¹çš„å€¼(ç´¯è®¡)</span></span><br><span class="line">                tr[tr[u].ls].max += v;</span><br><span class="line">                tr[tr[u].rs].max += v;</span><br><span class="line">                tr[u].add = <span class="number">0</span>;  <span class="comment">// ä¸‹ä¼ æ‡’æ ‡è®°å®Œæˆæ’¤é”€uçš„æ‡’æ ‡è®°</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å›æº¯æ›´æ–°uçš„æœ€å¤§å€¼</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pushUp</span><span class="params">(<span class="type">int</span> u)</span> &#123;</span><br><span class="line">            tr[u].max = Math.max(tr[tr[u].ls].max, tr[tr[u].rs].max);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">book</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">            <span class="comment">// æœ€å¤§å€¼&gt;=2è¯´æ˜åŒºé—´[start,end-1]å­˜åœ¨æŸä¸ªç‚¹è¦†ç›–äº†2æ¬¡</span></span><br><span class="line">            <span class="keyword">if</span> (query(<span class="number">0</span>, <span class="number">0</span>, N, start, end - <span class="number">1</span>) &gt;= <span class="number">2</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            update(<span class="number">0</span>, <span class="number">0</span>, N, start, end - <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åšå®Œè¿™ä¸¤é¢˜ä¼°è®¡å¯¹çº¿æ®µæ ‘æœ‰äº†å……åˆ†äº†è§£äº†ï¼</p><h3 id="3-å·®åˆ†æ•°ç»„-gt-ã€ŒåŒºé—´ä¿®æ”¹-amp-å•ç‚¹æŸ¥è¯¢ã€ï¼š"><a href="#3-å·®åˆ†æ•°ç»„-gt-ã€ŒåŒºé—´ä¿®æ”¹-amp-å•ç‚¹æŸ¥è¯¢ã€ï¼š" class="headerlink" title="3.å·®åˆ†æ•°ç»„-&gt;ã€ŒåŒºé—´ä¿®æ”¹ &amp; å•ç‚¹æŸ¥è¯¢ã€ï¼š"></a>3.å·®åˆ†æ•°ç»„-&gt;ã€ŒåŒºé—´ä¿®æ”¹ &amp; å•ç‚¹æŸ¥è¯¢ã€ï¼š</h3><p> å·®åˆ†åŒºé—´æ±‚å’Œ:å°†æ¯ä¸ªåŒºé—´è¦†ç›–ä¿¡æ¯è½¬åŒ–ä¸º<strong>å˜åŒ–é‡</strong>è®°å½•,æœ€å<strong>ä»å¤´å¼€å§‹ç»Ÿè®¡å˜åŒ–é‡</strong>å°±å¯ä»¥å°†æ€»çš„å˜åŒ–é‡æ±‚å‡ºæ¥</p><p> æ¯”å–»æˆå…¬äº¤è½¦:ä¸Šè½¦å°±è¡¨ç¤ºè¯¥æ—¶åˆ»t1-&gt;æ–°åŒºé—´åŠ å…¥ä¹˜å®¢+1ï¼›ä¸‹è½¦å°±è¡¨ç¤ºåŒºé—´ç»“æŸ-&gt;ä¸‹ä¸€ä¸ªæ—¶åˆ»(t2+1)ä¹˜å®¢-1</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] corpFlightBookings(<span class="type">int</span>[][] bookings, <span class="type">int</span> n) &#123;</span><br><span class="line">        <span class="comment">//  æ³¨æ„èˆªç­ç¼–å·ä¸º1-n</span></span><br><span class="line">        <span class="comment">// å˜åŒ–é‡è®¡æ•°å™¨:ç´¢å¼•[0,n-1]</span></span><br><span class="line">        <span class="type">int</span>[] counter = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        <span class="comment">// éå†æ¯ä¸ªåŒºé—´</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span>[] booking : bookings) &#123;</span><br><span class="line">            <span class="comment">// å› ä¸ºèˆªç­ç¼–å·ä¸º1-n,å› æ­¤å·¦åç§»ä¸€ä½æ‰æ˜¯counterç´¢å¼•</span></span><br><span class="line">            counter[booking[<span class="number">0</span>] - <span class="number">1</span>] += booking[<span class="number">2</span>];</span><br><span class="line">            <span class="comment">// è¿™é‡ŒåŸæœ¬æœ‰+1åˆå‘å·¦åç§»ä¸€ä½å°±æ˜¯åŸæœ¬çš„,è¦åˆ¤æ–­åŒºé—´æ˜¯å¦åˆæ³•</span></span><br><span class="line">            <span class="keyword">if</span>(booking[<span class="number">1</span>] &lt; n) counter[booking[<span class="number">1</span>]] -= booking[<span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è¯¥ç«™äººæ•°=ä¸Šä¸€ç«™äººæ•°+è¯¥ç«™å˜åŒ–é‡</span></span><br><span class="line">        <span class="comment">// æ³¨æ„æœ€åˆçš„ä¸€ç«™å°±æ˜¯0+counter[0]=counter[0]</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            counter[i] += counter[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> counter;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">åŒºé—´æ±‚å’Œçš„é—®é¢˜èƒ½æ¶‰åŠçš„æ–¹æ³•æœ‰å¾ˆå¤šï¼ŒåŒ…æ‹¬å‰ç¼€å’Œã€æ ‘çŠ¶æ•°ç»„ã€å·®åˆ†æ•°ç»„ç­‰ï¼Œé™ä½æ—¶é—´å¤æ‚åº¦æ˜¯è¦ä¹‰ï¼</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fomal.cc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="æ ‘çŠ¶æ•°ç»„" scheme="https://www.fomal.cc/tags/%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84/"/>
    
    <category term="çº¿æ®µæ ‘" scheme="https://www.fomal.cc/tags/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
    <category term="å·®åˆ†" scheme="https://www.fomal.cc/tags/%E5%B7%AE%E5%88%86/"/>
    
    <category term="å‰ç¼€å’Œ" scheme="https://www.fomal.cc/tags/%E5%89%8D%E7%BC%80%E5%92%8C/"/>
    
  </entry>
  
  <entry>
    <title>å¹¶æŸ¥é›†ä¸“é¢˜</title>
    <link href="https://www.fomal.cc/posts/226132e.html"/>
    <id>https://www.fomal.cc/posts/226132e.html</id>
    <published>2022-08-11T13:38:57.000Z</published>
    <updated>2022-08-11T13:38:57.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-å¹¶æŸ¥é›†æ¨¡æ¿"><a href="#1-å¹¶æŸ¥é›†æ¨¡æ¿" class="headerlink" title="1.å¹¶æŸ¥é›†æ¨¡æ¿"></a>1.å¹¶æŸ¥é›†æ¨¡æ¿</h2><p>å¹¶æŸ¥é›†æ˜¯ä¸€ç§æ ‘å‹æ•°æ®ç»“æ„(å¤šå‰æ ‘)ï¼Œå¯ä»¥é«˜æ•ˆåœ°å®ç°æŸ¥æ‰¾å’Œåˆå¹¶åŠŸèƒ½ï¼Œå¸¸ç”¨äºæ±‚<strong>è¿é€š</strong>é—®é¢˜</p><p>1.æ¯ä¸ªæ•°æ®å¯ä»¥çœ‹ä½œä¸€ä¸ªèŠ‚ç‚¹</p><p>2.æ¯ä¸€ç»„æ•°æ®éƒ½æ˜¯ä¸€é¢—æ ‘</p><p>3.ä¸€ä¸ªç»„ä¸­çš„æ•°æ®å¯¹åº”çš„æ ‘å’Œå¦å¤–ä¸€ä¸ªç»„ä¸­æ•°æ®å¯¹åº”çš„æ ‘ä¹‹é—´æ²¡æœ‰ä»»ä½•å…³ç³»</p><p>4.åˆå§‹åŒ–çš„æ—¶å€™æŠŠç´¢å¼•å½“ä½œæ¯ä¸ªç»„çš„æ ‡è¯†ç¬¦</p><p><strong>å¹¶æŸ¥é›†ä¸»è¦æœ‰ä¸‰ä¸ªåŠŸèƒ½ï¼š</strong></p><p>1.<strong>å¯»æ‰¾æ ¹èŠ‚ç‚¹</strong>ï¼Œå‡½æ•°ï¼šfind(int u)ï¼Œä¹Ÿå°±æ˜¯åˆ¤æ–­è¿™ä¸ªèŠ‚ç‚¹çš„ç¥–å…ˆèŠ‚ç‚¹æ˜¯å“ªä¸ª</p><p>2.<strong>å°†ä¸¤ä¸ªèŠ‚ç‚¹æ¥å…¥åˆ°åŒä¸€ä¸ªé›†åˆ</strong>ï¼Œå‡½æ•°ï¼šjoin(int u, int v)ï¼Œå°†ä¸¤ä¸ªèŠ‚ç‚¹è¿åœ¨åŒä¸€ä¸ªæ ¹èŠ‚ç‚¹ä¸Š</p><p>3.<strong>åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦åœ¨åŒä¸€ä¸ªé›†åˆ</strong>ï¼Œå‡½æ•°ï¼šsame(int u, int v)ï¼Œå°±æ˜¯åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯ä¸æ˜¯åŒä¸€ä¸ªæ ¹èŠ‚ç‚¹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">1005</span>; <span class="comment">// èŠ‚ç‚¹æ•°é‡3 åˆ° 1000</span></span><br><span class="line"><span class="type">int</span>[] father = <span class="keyword">new</span> <span class="title class_">int</span>[n]; <span class="comment">// father[i]ä¸ºèŠ‚ç‚¹içš„çˆ¶äº²</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¹¶æŸ¥é›†åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        father[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¹¶æŸ¥é›†å¯»æ ¹</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> u)</span> &#123;</span><br><span class="line">    <span class="comment">// return u == father[u] ? u : father[u] = find(father[u]);</span></span><br><span class="line">    <span class="keyword">if</span>(father[u]!=u) father[u]=find(father[u]); <span class="comment">// é€’å½’è¿”å›çš„åŒæ—¶å‹ç¼©è·¯å¾„</span></span><br><span class="line">    <span class="keyword">return</span> father[u];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†v-&gt;u è¿™æ¡è¾¹åŠ å…¥å¹¶æŸ¥é›†(åˆå¹¶:å…¶ä¸­uä¸ºæ ¹èŠ‚ç‚¹)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">join</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v)</span> &#123;</span><br><span class="line">    u = find(u);</span><br><span class="line">    v = find(v);</span><br><span class="line">    <span class="keyword">if</span> (u == v) <span class="keyword">return</span>;</span><br><span class="line">    father[v] = u;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­ u å’Œ v æ˜¯å¦ä½äºåŒä¸€ä¸ªè¿é€šåŸŸ(åŒæ ¹)</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">same</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v)</span> &#123;</span><br><span class="line">    u = find(u);</span><br><span class="line">    v = find(v);</span><br><span class="line">    <span class="keyword">return</span> u == v;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong> æ¯ä¸ªè¿é€šåŸŸæ ¹èŠ‚ç‚¹éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œå› æ­¤å¯ä»¥é€šè¿‡æŸä¸ªèŠ‚ç‚¹å¯»æ ¹+HashMapç»Ÿè®¡å‡ºæ¯ä¸ªè¿é€šåŸŸçš„èŠ‚ç‚¹æ•°é‡ä»¥åŠè¿é€šåŸŸä¸ªæ•°ç­‰ï¼Œè€Œä¸ç”¨å¤šä¸€ä¸ªå­—æ®µå€¼sumï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®å›¾çš„ä¿¡æ¯æ„å»ºè¿æ¥</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span>[] e : edges) &#123;</span><br><span class="line">    join(e[<span class="number">0</span>], e[<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç”±äºæ¯ä¸ªè¿é€šå—çš„æ ¹éƒ½æ˜¯å”¯ä¸€çš„,å› æ­¤æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ­¤æ¥ç»Ÿè®¡è¿é€šå—å†…çš„å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">HashMap&lt;Integer, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">root</span> <span class="operator">=</span> find(i); <span class="comment">// è¯¥è¿é€šåŸŸå¯¹åº”çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    map.put(root, map.getOrDefault(root, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>map.size()</code>å°±æ˜¯è¿é€šåŸŸæ•°é‡ï¼›<code>map.get(find(x))</code>å°±æ˜¯èŠ‚ç‚¹xæ‰€åœ¨è¿é€šåŸŸèŠ‚ç‚¹æ•°é‡</p>]]></content>
    
    
    <summary type="html">å¹¶æŸ¥é›†æ˜¯ä¸€ç§æ ‘å‹æ•°æ®ç»“æ„(å¤šå‰æ ‘)ï¼Œå¯ä»¥é«˜æ•ˆåœ°å®ç°æŸ¥æ‰¾å’Œåˆå¹¶åŠŸèƒ½ï¼Œå¸¸ç”¨äºæ±‚è¿é€šé—®é¢˜</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fomal.cc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="å›¾" scheme="https://www.fomal.cc/tags/%E5%9B%BE/"/>
    
    <category term="å¹¶æŸ¥é›†" scheme="https://www.fomal.cc/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/"/>
    
  </entry>
  
  <entry>
    <title>è®°å¿†åŒ–æœç´¢ä¸“é¢˜</title>
    <link href="https://www.fomal.cc/posts/8802f5d3.html"/>
    <id>https://www.fomal.cc/posts/8802f5d3.html</id>
    <published>2022-08-11T13:36:09.000Z</published>
    <updated>2022-08-11T13:36:09.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¬¬300åœºå‘¨èµ›"><a href="#ç¬¬300åœºå‘¨èµ›" class="headerlink" title="ç¬¬300åœºå‘¨èµ›"></a><a href="https://leetcode.cn/contest/weekly-contest-300/"><strong>ç¬¬300åœºå‘¨èµ›</strong></a></h3><p>è¿™æ¬¡å‘¨èµ›çš„ç¬¬3ä¸ç¬¬4é¢˜å‡å¯ä»¥ç”¨è®°å¿†åŒ–DFSè¿›è¡Œæ±‚è§£ï¼Œç¬¬ä¸€æ¬¡å°è¯•è¿™ç§å¼ºå¤§çš„æ–¹æ³•ï¼Œæ˜¯åŠ¨æ€è§„åˆ’çš„åº•å±‚é€»è¾‘æ¼”ç®—ï¼è®°å¿†åŒ–DFSçš„é¦–æ¡ä»¶æ˜¯å‡ºç°å­é—®é¢˜å¹¶ä¸”å­é—®é¢˜æ•°é‡æœ‰é™</p><p>é€šè¿‡è®°å¿†åŒ–æœç´¢å¯ä»¥å°†æ—¶é—´å¤æ‚åº¦ä»2^Né™ä½è‡³O(N)</p><p><a href="https://leetcode.cn/problems/number-of-people-aware-of-a-secret/">6109. çŸ¥é“ç§˜å¯†çš„äººæ•°</a></p><p>ä¾‹å¦‚è¿™ä¸€é¢˜çš„ dfs(i) ä¸ºç¬¬ i å¤©å‘ç°çš„ç§˜å¯†çš„äºº(åŒ…å«è‡ªå·±åœ¨å†…)ä¸€å…±å¯ä»¥ä½¿å¾—åé¢å¤šå°‘äººçŸ¥é“ç§˜å¯†</p><p>æˆ‘ä»¬å¯ä»¥æ€æ ·æ±‚dfs(i)ï¼Ÿä»–å¯ä»¥ç”±å“ªå‡ ä¸ªå­é—®é¢˜çš„ç»“æœè¿ç®—å¾—åˆ°ï¼Ÿ</p><p>æŸä¸ªäººåœ¨ç¬¬ i å¤©çŸ¥é“ç§˜å¯†ï¼Œåˆ™å¯¹åº”çš„ä¼ æ’­é˜¶æ®µä¸º [min(i+delay,n),min(i+forget-1,n)] è®°ä¸º [a,b] </p><p>æ­¤æ—¶çŸ¥é“ç§˜å¯†çš„äººæ•°æœ‰dfs(i)=1+âˆ‘dfs(a,b) å…¶ä¸­1ä¸ºè‡ªå·±æœ¬èº«</p><p>åªéœ€è¦å¤„ç†å¥½base caseå’Œmemoï¼ŒåŒæ—¶æ³¨æ„ i æœ¬èº«ä¹Ÿä¼šå¿˜è®° å°±å¯ä»¥è½»æ¾å†™å‡ºæ¥</p><p>è¿™ç§ä¸€è·¯dfsåˆ°åº•çš„å†™æ³•ï¼Œåˆ©ç”¨dfsé€’å½’è¿”å›çš„ç»“æœè¿›è¡Œä¸­é—´è¿ç®—çš„æ–¹æ³•ç§°ä¸ºéå›æº¯å‹çš„å†™æ³•</p><p>è·Ÿå›æº¯å†™æ³•çš„åŒºåˆ«å°±æ˜¯ï¼Œå›æº¯ç±»å‹å†™æ³•éœ€è¦æ‰¾åˆ°å¹¶ä¿å­˜æ‰€æœ‰çš„path</p><p>åœ¨è¿™é‡Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“dfs(i)çš„è®¡ç®—å€¼å³å¯ï¼Œå› æ­¤è¿™é‡Œdfs(i)å¸¦ä¸Šè¿”å›å‚æ•°intç±»å‹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="type">int</span> n, delay, forget;</span><br><span class="line">    <span class="type">int</span> <span class="variable">MOD</span> <span class="operator">=</span> (<span class="type">int</span>) <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line">    <span class="type">int</span>[] memo;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peopleAwareOfSecret</span><span class="params">(<span class="type">int</span> _n, <span class="type">int</span> _delay, <span class="type">int</span> _forget)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        Java è®°å¿†åŒ–æœç´¢:</span></span><br><span class="line"><span class="comment">        æˆ‘ä»¬è®°dfs(i)ä¸ºç¬¬iå¤©å‘ç°çš„ç§˜å¯†çš„äººåŒ…å«è‡ªå·±åœ¨å†…ä¸€å…±å¯ä»¥ä½¿å¾—åé¢å¤šå°‘äººçŸ¥é“ç§˜å¯†</span></span><br><span class="line"><span class="comment">        iä»i+delayå¤©èµ·,åˆ°i+forget-1å¤©éƒ½æ˜¯å¯ä»¥å°†ç§˜å¯†æ•£æ’­å‡ºå»çš„</span></span><br><span class="line"><span class="comment">        ä¹Ÿå°±æ˜¯[min(i+delay,n),min(i+forget-1,n)]=[a,b]è¿™ä¸ªæ—¶é—´æ®µæ˜¯içš„ä¼ æ’­é˜¶æ®µ</span></span><br><span class="line"><span class="comment">        æ­¤æ—¶çŸ¥é“ç§˜å¯†çš„äººæ•°æœ‰1+âˆ‘dfs(a,b)</span></span><br><span class="line"><span class="comment">        åŒæ—¶åº”è¯¥æ³¨æ„çŸ¥é“äº†ç§˜å¯†çš„äººä¼šå¿˜è®°ç§˜å¯†,å› æ­¤ä¹Ÿä¼šæœ‰ä¸€ä¸ªæœŸé™</span></span><br><span class="line"><span class="comment">        è¿™é‡Œç”±äºå­é—®é¢˜çš„å‡ºç°å¯ä»¥ä½¿ç”¨è®°å¿†åŒ–å‡å°‘æœç´¢æ¬¡æ•°</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        n = _n;</span><br><span class="line">        delay = _delay;</span><br><span class="line">        forget = _forget;</span><br><span class="line">        memo = <span class="keyword">new</span> <span class="title class_">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">return</span> dfs(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="comment">// åœ¨ç¬¬nå¤©ä¹‹åæ‰èƒ½ä¼ æ’­,è¯´æ˜åªæœ‰è‡ªå·±çŸ¥é“</span></span><br><span class="line">        <span class="keyword">if</span> (i + delay &gt; n) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// å·²ç»æœç´¢è¿‡ç›´æ¥è¿”å›</span></span><br><span class="line">        <span class="keyword">if</span> (memo[i] != <span class="number">0</span>) <span class="keyword">return</span> memo[i];</span><br><span class="line">        <span class="comment">// iä¼ æ’­çš„èŒƒå›´ä¸º[min(i+delay,n),min(i+forget-1,n)]=[a,b]</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> i + delay, b = Math.min(i + forget - <span class="number">1</span>, n);</span><br><span class="line">        <span class="type">long</span> <span class="variable">res</span> <span class="operator">=</span> i + forget &lt;= n ? <span class="number">0</span> : <span class="number">1</span>;    <span class="comment">// è‡ªèº«åˆ°[i+forget]å°±å¿˜è®°äº†,åœ¨nå¤©å†…å¿˜è®°äº†å–0,åä¹‹å–1</span></span><br><span class="line">        <span class="comment">// åˆæ³•çš„ä¼ æ’­èŒƒå›´ä¸º[a,b]</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> a; j &lt;= b; j++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> dfs(j);</span><br><span class="line">            memo[j] = t;    <span class="comment">// æ ‡è®°</span></span><br><span class="line">            res = (res + t) % MOD;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="LC6110-ç½‘æ ¼å›¾ä¸­é€’å¢è·¯å¾„çš„æ•°ç›®"><a href="#LC6110-ç½‘æ ¼å›¾ä¸­é€’å¢è·¯å¾„çš„æ•°ç›®" class="headerlink" title="LC6110. ç½‘æ ¼å›¾ä¸­é€’å¢è·¯å¾„çš„æ•°ç›®"></a><a href="https://leetcode.cn/problems/number-of-increasing-paths-in-a-grid/">LC6110. ç½‘æ ¼å›¾ä¸­é€’å¢è·¯å¾„çš„æ•°ç›®</a></h3><p>è¿™é“é¢˜ä¸€æ ·æ—¶å¯ä»¥åˆ©ç”¨å­é—®é¢˜çš„æœç´¢ç»“æœå‡å°‘è®¡ç®—é‡çš„é¢˜ç›®</p><p>dfs(i,j)ä¸»é€»è¾‘:grid[i][j]å‡ºå‘çš„é€’å¢è·¯å¾„æ•°=æœ¬èº«è‡ªæˆ1æ¡è·¯å¾„+ä¸Šä¸‹å·¦å³å‡ºå‘ä¸¥æ ¼é€’å¢è·¯å¾„æ•°ä¹‹å’Œ</p><p>å¦å¤–ç”¨ä¸€ä¸ªmemo[i][j]ä¿å­˜ä»grid[i][j]å‡ºå‘çš„é€’å¢è·¯å¾„æ•°</p><p>å¦å¤–æœ‰ä¸€äº›ç»†èŠ‚ï¼švisçš„æ ‡è®°æ–¹æ³•ä¸æ’¤å›ã€memoçš„æ ‡è®°æ–¹æ³•ï¼ˆæ€æ ·æ‰åšåˆ°ä¸é‡å¤æ ‡è®°ï¼‰ã€å–æ¨¡æŠ€å·§ï¼ˆå¯èƒ½æº¢å‡ºçš„å˜é‡è¦ç”¨longç±»å‹ï¼‰ç­‰ç­‰â€¦.</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="type">int</span>[][] memo, grid;</span><br><span class="line">    <span class="type">boolean</span>[][] vis;</span><br><span class="line">    <span class="type">int</span> m, n;</span><br><span class="line">    <span class="type">int</span> <span class="variable">MOD</span> <span class="operator">=</span> (<span class="type">int</span>) <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line">    <span class="type">int</span>[][] dirs = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countPaths</span><span class="params">(<span class="type">int</span>[][] _grid)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        dfsè®°å¿†åŒ–æœç´¢:</span></span><br><span class="line"><span class="comment">        ä»æ¯ä¸ªæ ¼å­å‡ºå‘æœç´¢é€’å¢çš„è·¯å¾„æ•°æœ‰å¤šå°‘</span></span><br><span class="line"><span class="comment">        æœ‰ä¸Šä¸‹å·¦å³4ä¸ªæ–¹å‘,åˆæ³•çš„æ–¹å‘æ˜¯æ¯”ä¹‹å‰æ ¼å­ä¸¥æ ¼å¤§çš„</span></span><br><span class="line"><span class="comment">        å¦å¤–ç”¨ä¸€ä¸ªmemo[i][j]ä¿å­˜ä»grid[i][j]å‡ºå‘çš„é€’å¢è·¯å¾„æ•°</span></span><br><span class="line"><span class="comment">        dfs(i,j)ä¸»é€»è¾‘:grid[i][j]å‡ºå‘çš„é€’å¢è·¯å¾„æ•°=æœ¬èº«è‡ªæˆ1æ¡è·¯å¾„+ä¸Šä¸‹å·¦å³å‡ºå‘ä¸¥æ ¼é€’å¢è·¯å¾„æ•°ä¹‹å’Œ</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        grid = _grid;</span><br><span class="line">        m = grid.length;</span><br><span class="line">        n = grid[<span class="number">0</span>].length;</span><br><span class="line">        memo = <span class="keyword">new</span> <span class="title class_">int</span>[m][n];</span><br><span class="line">        vis = <span class="keyword">new</span> <span class="title class_">boolean</span>[m][n];    <span class="comment">// ä¿å­˜å½“å‰è·¯å¾„è®¿é—®è¿‡çš„æ ¼å­:å›æº¯å½¢å¼æ ‡è®°,é€’å½’å‡ºæ ˆæ—¶å€™ä¼šæ¢å¤åŸçŠ¶</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// ç»Ÿè®¡æ¯ä¸€ä¸ªå‡ºå‘ç‚¹çš„é€’å¢è·¯å¾„</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                vis[i][j] = <span class="literal">true</span>;   <span class="comment">// è¿›å…¥dfså‰æ ‡è®°æœç´¢</span></span><br><span class="line">                res = (res + dfs(i, j)) % MOD;</span><br><span class="line">                vis[i][j] = <span class="literal">false</span>;  <span class="comment">// æ’¤å›</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="comment">// å·²ç»æœç´¢è¿‡äº†,ç›´æ¥è¿”å›å…¶æ•°å€¼</span></span><br><span class="line">        <span class="keyword">if</span> (memo[i][j] != <span class="number">0</span>) <span class="keyword">return</span> memo[i][j];</span><br><span class="line">        <span class="type">long</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">1</span>;   <span class="comment">// æœ¬èº«è‡ªæˆä¸€æ¡ä¸¥æ ¼é€’å¢è·¯å¾„</span></span><br><span class="line">        <span class="comment">// ä¸€å…±æœ‰4ä¸ªæœç´¢æ–¹å‘</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span>[] dir : dirs) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">newI</span> <span class="operator">=</span> i + dir[<span class="number">0</span>], newJ = j + dir[<span class="number">1</span>];</span><br><span class="line">            <span class="comment">// è¶Šç•Œ||å·²ç»æœç´¢è¿‡||å¤§å°ä¸ç¬¦åˆè¦æ±‚</span></span><br><span class="line">            <span class="keyword">if</span> (newI &lt; <span class="number">0</span> || newI &gt;= m || newJ &lt; <span class="number">0</span> || newJ &gt;= n || vis[newI][newJ] || grid[newI][newJ] &lt;= grid[i][j])</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            vis[newI][newJ] = <span class="literal">true</span>; <span class="comment">// æ ‡è®°æœç´¢</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> dfs(newI, newJ);    <span class="comment">// ä¸‹ä¸€ç‚¹å‡ºå‘ç‚¹è·¯å¾„æ•°</span></span><br><span class="line">            vis[newI][newJ] = <span class="literal">false</span>;    <span class="comment">// è®°å¾—æ’¤å›è®¿é—®æ ‡è®°,å› ä¸ºä»…éœ€è¦æ ‡è®°å•ä¸€è·¯å¾„ä¸Šçš„;ä»å¦å¤–ä¸€ç‚¹å‡ºå‘å¯ä»¥ç»è¿‡åŒä¸€æ¡è·¯å¾„</span></span><br><span class="line">            res = (res + t) % MOD;  <span class="comment">// ç´¯åŠ ç»“æœ</span></span><br><span class="line">        &#125;</span><br><span class="line">        memo[i][j] = (<span class="type">int</span>) res; <span class="comment">// æ ‡è®°grid[i][j]å‡ºå‘çš„è·¯å¾„æ•°</span></span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¡¥å……ï¼šå…³äºbase-caseä¸memoè¿”å›çš„å…ˆåé¡ºåºé—®é¢˜"><a href="#è¡¥å……ï¼šå…³äºbase-caseä¸memoè¿”å›çš„å…ˆåé¡ºåºé—®é¢˜" class="headerlink" title="è¡¥å……ï¼šå…³äºbase caseä¸memoè¿”å›çš„å…ˆåé¡ºåºé—®é¢˜"></a>è¡¥å……ï¼šå…³äºbase caseä¸memoè¿”å›çš„å…ˆåé¡ºåºé—®é¢˜</h3><p>è¿™é‡Œå»ºè®®éƒ½å…ˆå†™memoè¿”å›ï¼Œç„¶åå†å†™base caseï¼Œå› ä¸ºæœ‰äº›base caseåˆ¤æ–­é€»è¾‘å¯èƒ½æœ‰è¾ƒå¤§çš„æ—¶é—´å¼€é”€ã€‚</p><p><strong>base case åœ¨å‰é¢ï¼š69ms</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] nums = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">318</span>];</span><br><span class="line">    <span class="keyword">static</span> HashSet&lt;Integer&gt; set = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] memo = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">100005</span>];  <span class="comment">// memo[i]=0è¡¨ç¤ºè¿˜æ²¡èµ‹å€¼ï¼Œ1è¡¨ç¤ºå¿…è¾“ï¼Œ2è¡¨ç¤ºå¿…èµ¢</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// é¢„å¤„ç†å‡ºå¯é€‰çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; <span class="number">318</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> i * i;</span><br><span class="line">            nums[i] = num;</span><br><span class="line">            set.add(num);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">winnerSquareGame</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        è®°å¿†åŒ–DFS(1 &lt;= n &lt;= 10^5)</span></span><br><span class="line"><span class="comment">        æˆ‘ä»¬è®°dfs(i)ä¸ºå‰©ä½™çŸ³å¤´ä¸ºié¢—æ—¶ï¼Œå½“å‰å…ˆæ‰‹é€‰æ‹©è€…æ˜¯å¦å¯ä»¥èµ¢å¾—æ¸¸æˆï¼Œè‹¥èƒ½èµ¢åˆ™ä¸ºtrueï¼Œå¦åˆ™ä¸ºfalse</span></span><br><span class="line"><span class="comment">        åŒæ—¶ç»´æŠ¤ä¸€ä¸ªæ•°æ®ç»“æ„memoå­˜å‚¨å·²ç»è®¡ç®—è¿‡çš„ç»“æœ:memo[i]æ˜¯å·²ç»è®¡ç®—è¿‡çš„dfs(i)</span></span><br><span class="line"><span class="comment">        æˆ‘ä»¬é¢„å¤„ç†å‡ºä¸€ä¸ªå¯é€‰çš„æ•°ç›®åˆ—è¡¨nums=[1,4,9,16,25,...]</span></span><br><span class="line"><span class="comment">        base case:</span></span><br><span class="line"><span class="comment">       å‰©ä½™çš„çŸ³å¤´æ•°å­—æ°å¥½åœ¨åˆ—è¡¨å½“ä¸­å‡ºç°ï¼Œé‚£ä¹ˆè¿”å›trueï¼Œå½“å‰é€‰æ‹©è€…å¦ä¸€ä¸ªå°±æ²¡æ³•é€‰äº†</span></span><br><span class="line"><span class="comment">        dfsä¸»é€»è¾‘:æ€è€ƒå½“å‰é€‰æ‹©è€…å¯ä»¥åšå‡ºçš„é€‰æ‹©æœ‰å“ªäº›?</span></span><br><span class="line"><span class="comment">            æ˜¾ç„¶å¯ä»¥ä»numsä¸­é€‰æ‹© &lt; å½“å‰å‰©ä½™çŸ³å¤´æ•°ç›®çš„çŸ³å¤´jï¼Œè€Œä¸”å½“å‰é€‰æ‹©è€…èµ¢å¾—æ¸¸æˆçš„å……è¦æ¡ä»¶æ˜¯:</span></span><br><span class="line"><span class="comment">            é€‰äº†çŸ³å¤´ä¹‹åä¸‹ä¸€ä¸ªå…ˆæ‰‹çš„è¾“æ‰æ¸¸æˆï¼Œå³dfs(i-j)==falseï¼Œè¿™ä¹ˆå¤šç§é€‰æ‹©jä¸­åªéœ€è¦ä¸€ä¸ªä¸ºfalseå³å¯</span></span><br><span class="line"><span class="comment">            äºæ˜¯ç”¨||æ¡ä»¶è¿›è¡Œè¿æ¥</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">return</span> dfs(n);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="comment">// base case</span></span><br><span class="line">        <span class="keyword">if</span> (set.contains(i)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (memo[i] != <span class="number">0</span>) <span class="keyword">return</span> memo[i] == <span class="number">2</span>;  <span class="comment">// è®°å¿†åŒ–åŠ é€Ÿ</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; <span class="number">318</span> &amp;&amp; nums[j] &lt; i; j++) &#123;</span><br><span class="line">            <span class="comment">// åæ‰‹è¾“äº†ï¼Œå…ˆæ‰‹å¿…èµ¢</span></span><br><span class="line">            <span class="keyword">if</span> (!dfs(i - nums[j])) &#123;</span><br><span class="line">                memo[i] = <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// åæ‰‹åœ¨è¿™ç§æƒ…å†µèµ¢äº†ï¼Œå…ˆæ‰‹åœ¨åé¢è¿˜æœ‰æœºä¼šèµ¢</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æœ€åéƒ½ä¸æå‰è¿”å›ï¼Œè¯´æ˜å…ˆæ‰‹å¿…è¾“äº†</span></span><br><span class="line">        memo[i] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>memo åœ¨å‰é¢ï¼š20ms</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] nums = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">318</span>];</span><br><span class="line">    <span class="keyword">static</span> HashSet&lt;Integer&gt; set = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[] memo = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">100005</span>];  <span class="comment">// memo[i]=0è¡¨ç¤ºè¿˜æ²¡èµ‹å€¼ï¼Œ1è¡¨ç¤ºå¿…è¾“ï¼Œ2è¡¨ç¤ºå¿…èµ¢</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// é¢„å¤„ç†å‡ºå¯é€‰çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; <span class="number">318</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> i * i;</span><br><span class="line">            nums[i] = num;</span><br><span class="line">            set.add(num);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">winnerSquareGame</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        è®°å¿†åŒ–DFS(1 &lt;= n &lt;= 10^5)</span></span><br><span class="line"><span class="comment">        æˆ‘ä»¬è®°dfs(i)ä¸ºå‰©ä½™çŸ³å¤´ä¸ºié¢—æ—¶ï¼Œå½“å‰å…ˆæ‰‹é€‰æ‹©è€…æ˜¯å¦å¯ä»¥èµ¢å¾—æ¸¸æˆï¼Œè‹¥èƒ½èµ¢åˆ™ä¸ºtrueï¼Œå¦åˆ™ä¸ºfalse</span></span><br><span class="line"><span class="comment">        åŒæ—¶ç»´æŠ¤ä¸€ä¸ªæ•°æ®ç»“æ„memoå­˜å‚¨å·²ç»è®¡ç®—è¿‡çš„ç»“æœ:memo[i]æ˜¯å·²ç»è®¡ç®—è¿‡çš„dfs(i)</span></span><br><span class="line"><span class="comment">        æˆ‘ä»¬é¢„å¤„ç†å‡ºä¸€ä¸ªå¯é€‰çš„æ•°ç›®åˆ—è¡¨nums=[1,4,9,16,25,...]</span></span><br><span class="line"><span class="comment">        base case:</span></span><br><span class="line"><span class="comment">       å‰©ä½™çš„çŸ³å¤´æ•°å­—æ°å¥½åœ¨åˆ—è¡¨å½“ä¸­å‡ºç°ï¼Œé‚£ä¹ˆè¿”å›trueï¼Œå½“å‰é€‰æ‹©è€…å¦ä¸€ä¸ªå°±æ²¡æ³•é€‰äº†</span></span><br><span class="line"><span class="comment">        dfsä¸»é€»è¾‘:æ€è€ƒå½“å‰é€‰æ‹©è€…å¯ä»¥åšå‡ºçš„é€‰æ‹©æœ‰å“ªäº›?</span></span><br><span class="line"><span class="comment">            æ˜¾ç„¶å¯ä»¥ä»numsä¸­é€‰æ‹© &lt; å½“å‰å‰©ä½™çŸ³å¤´æ•°ç›®çš„çŸ³å¤´jï¼Œè€Œä¸”å½“å‰é€‰æ‹©è€…èµ¢å¾—æ¸¸æˆçš„å……è¦æ¡ä»¶æ˜¯:</span></span><br><span class="line"><span class="comment">            é€‰äº†çŸ³å¤´ä¹‹åä¸‹ä¸€ä¸ªå…ˆæ‰‹çš„è¾“æ‰æ¸¸æˆï¼Œå³dfs(i-j)==falseï¼Œè¿™ä¹ˆå¤šç§é€‰æ‹©jä¸­åªéœ€è¦ä¸€ä¸ªä¸ºfalseå³å¯</span></span><br><span class="line"><span class="comment">            äºæ˜¯ç”¨||æ¡ä»¶è¿›è¡Œè¿æ¥</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">return</span> dfs(n);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (memo[i] != <span class="number">0</span>) <span class="keyword">return</span> memo[i] == <span class="number">2</span>;  <span class="comment">// è®°å¿†åŒ–åŠ é€Ÿ</span></span><br><span class="line">        <span class="comment">// base case</span></span><br><span class="line">        <span class="keyword">if</span> (set.contains(i)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; <span class="number">318</span> &amp;&amp; nums[j] &lt; i; j++) &#123;</span><br><span class="line">            <span class="comment">// åæ‰‹è¾“äº†ï¼Œå…ˆæ‰‹å¿…èµ¢</span></span><br><span class="line">            <span class="keyword">if</span> (!dfs(i - nums[j])) &#123;</span><br><span class="line">                memo[i] = <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// åæ‰‹åœ¨è¿™ç§æƒ…å†µèµ¢äº†ï¼Œå…ˆæ‰‹åœ¨åé¢è¿˜æœ‰æœºä¼šèµ¢</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æœ€åéƒ½ä¸æå‰è¿”å›ï¼Œè¯´æ˜å…ˆæ‰‹å¿…è¾“äº†</span></span><br><span class="line">        memo[i] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">è®°å¿†åŒ–DFSæ˜¯ä¸€ç§å¼ºå¤§çš„å¤„ç†æœ‰é™çŠ¶æ€é—®é¢˜çš„æ–¹æ³•ï¼Œæ˜¯åŠ¨æ€è§„åˆ’çš„åº•å±‚é€»è¾‘æ¼”ç®—ï¼</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fomal.cc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="DFS" scheme="https://www.fomal.cc/tags/DFS/"/>
    
    <category term="è®°å¿†åŒ–DFS" scheme="https://www.fomal.cc/tags/%E8%AE%B0%E5%BF%86%E5%8C%96DFS/"/>
    
  </entry>
  
  <entry>
    <title>åŒºé—´DPä¸“é¢˜æ€»ç»“</title>
    <link href="https://www.fomal.cc/posts/3cc9359b.html"/>
    <id>https://www.fomal.cc/posts/3cc9359b.html</id>
    <published>2022-08-11T13:31:46.000Z</published>
    <updated>2022-08-11T13:31:46.000Z</updated>
    
    <content type="html"><![CDATA[<p>åŒºé—´DPæ˜¯æŒ‡ä»¥åŒºé—´å·¦å³è¾¹ç•Œ f[i][j] ä½œä¸ºåŠ¨æ€è§„åˆ’å˜é‡çš„é—®é¢˜</p><p>ä¸€èˆ¬æ±‚è§£æ­¥éª¤ï¼š</p><p>1.çŠ¶æ€å®šä¹‰ï¼šf[i][j] ä¸º<strong>æ±‚è§£åˆ†åŒºé—´ [i,j] é‡å¤å­é—®é¢˜çš„å¼€é”€</strong>ï¼Œå…¶ä¸­ i&lt;=j</p><p>2.çŠ¶æ€è½¬ç§»ï¼šæ±‚f[i][j]é€šå¸¸è¦è€ƒè™‘<strong>å°† [i, j] åŒºé—´åˆ†ä¸ºä¸¤ä¸ªé‡å¤å­é—®é¢˜</strong></p><p>è¿™ä¸ªæ ¹æ®å…·ä½“çš„é—®é¢˜è€Œå®šï¼Œæœ‰çš„å¯èƒ½è¦æ ¹æ®s[i]ä¸s[j]æ˜¯å¦ç›¸ç­‰åšå‡ºä¸åŒçš„è½¬ç§»ï¼Œå¦‚ <a href="https://leetcode.cn/problems/strange-printer/">664. å¥‡æ€ªçš„æ‰“å°æœº</a></p><p>æœ‰çš„å¯èƒ½æ˜¯é€‰æ‹©ç›´æ¥æšä¸¾åˆ†å‰²ç‚¹kï¼Œç„¶åå»ºç«‹ [i, j] åŒºé—´ä¸ å·¦å³å­åŒºé—´çš„è½¬ç§»ï¼Œå¦‚ <a href="https://leetcode.cn/problems/guess-number-higher-or-lower-ii/">375. çŒœæ•°å­—å¤§å° II</a></p><p>æœ‰çš„è¿˜å¯èƒ½ä¸æ˜¯åˆ†å‰²åŒºé—´ï¼Œè€Œæ˜¯åˆ©ç”¨ç¼©å°åŒºé—´ [i+1,j] çš„å­é—®é¢˜ä¸ [i, j] åŒºé—´å»ºç«‹è¿æ¥ï¼Œå¦‚ <a href="https://leetcode-cn.com/problems/stone-game/">877. çŸ³å­æ¸¸æˆ</a></p><p>3.åˆå§‹åŒ–ï¼šé€šå¸¸æ¥è¯´è¦åˆå§‹åŒ–<strong>é•¿åº¦ä¸º1çš„è¾¹ç•ŒçŠ¶æ€ f[i][i] çš„å€¼</strong>ï¼Œä¸ºæ¥ä¸‹æ¥çš„éå†åšå¥½åˆå€¼å‡†å¤‡</p><p>4.éå†é¡ºåºï¼šè¿™é‡Œæœ‰ä¸¤ç§éå†çš„æ–¹æ³•ï¼Œæ¨è<strong>ä»¥éå†é•¿åº¦len</strong>çš„æ–¹æ³•</p><p><strong>4.1 é•¿åº¦lenä¸ºåŸºç¡€è¿›è¡Œéå†</strong></p><p>1.éå†é•¿åº¦len(æ­£åº2~n)ï¼›</p><p>2.éå†å·¦è¾¹ç•Œi(æ­£åº0~i+len-1==n-1)ï¼›</p><p>3.éå†åˆ†å‰²ç‚¹k(æ­£ååºæ— æ‰€è°“i~j-1)</p><p>â€‹      <strong>4.2 iä¸jä¸ºåŸºç¡€è¿›è¡Œéå†</strong></p><p>1.æšä¸¾å·¦ç«¯ç‚¹i(å€’åºn-2~0) </p><p>2.æšä¸¾å³ç«¯ç‚¹j(æ­£åºi+1~n-1) </p><p>3.æšä¸¾åˆ†å‰²ç‚¹k(æ­£ååºæ— æ‰€è°“i~j-1)</p><p>æ­¤æ—¶ä»¥kåˆ†å‰²åçš„å·¦å³å­åŒºé—´åˆ†åˆ«ä¸ºï¼š[i,k] ä¸ [k+1,j]</p><p>ç¤ºæ„å›¾å¦‚ä¸‹ï¼šå¯çŸ¥åˆ†å‰²åŒºé—´ä¾èµ–äºæ­£ä¸‹æ–¹å’Œæ­£å·¦æ–¹çš„çŠ¶æ€æœ‰æ•ˆå€¼-&gt;<strong>éå†é•¿åº¦æ˜¯ä»¥â€œæ»‘æ¢¯â€çš„æ–¹å¼ä¸‹å»çš„ï¼›éå†iä¸jæ˜¯ä»åº•ä¸‹ä¸Šæ¥çš„</strong></p><p><img src="../images/p9.jpg" alt="p9"></p><p>5.è¿”å›å½¢å¼ï¼šä¸€èˆ¬æ¥è¯´è¿”å› <strong>f[0][n-1]</strong> å°±æ˜¯å…³äºæ•´ä¸ªåŒºé—´å¯¹åº”çš„å­é—®é¢˜ç­”æ¡ˆ</p><p>å¤æ‚åº¦åˆ†æï¼šä¸€èˆ¬åœ°ï¼Œæ—¶é—´å¤æ‚åº¦:O(N^3)ï¼›ç©ºé—´å¤æ‚åº¦:O(N^2)</p><p><a href="https://leetcode.cn/problems/guess-number-higher-or-lower-ii/"><strong>375. çŒœæ•°å­—å¤§å° II</strong></a></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[][] f = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">205</span>][<span class="number">205</span>];</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">INF</span> <span class="operator">=</span> <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMoneyAmount</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        è§£æ³•2ï¼šåŒºé—´DP</span></span><br><span class="line"><span class="comment">        1.çŠ¶æ€å®šä¹‰:f[i][j]ä¸ºç¡®ä¿çŒœä¸­åŒºé—´[i,j]è‡³å°‘éœ€è¦çš„é‡‘é¢ï¼Œå…¶ä¸­ j&gt;=i &amp;&amp; i,jâˆˆ[1,n]</span></span><br><span class="line"><span class="comment">        2.çŠ¶æ€è½¬ç§»:è¦æƒ³æ±‚è§£f[i][j]å°±è¦è€ƒè™‘f[i][k-1]ä¸f[k+1][j]</span></span><br><span class="line"><span class="comment">            å…¶ä¸­kä¸ºåŒºé—´çš„åˆ†å‰²ç‚¹ï¼ˆæŸæ¬¡çŒœçš„æ•°å­—ä¸ºkï¼‰ï¼Œéå†kâˆˆ[i,j]ï¼Œæ±‚å¾—è¯¥æ¬¡ç¨³èµ¢çš„å¼€é”€ä¸º k+max(f[i][k-1],f[k+1][j])</span></span><br><span class="line"><span class="comment">            éå†kè¿‡ç¨‹ä¸­ç»´æŠ¤[i,j]åŒºé—´åˆ†å‰²æˆä¸¤ä¸ªåŒºé—´åçš„æœ€å°å€¼minï¼Œé‚£ä¹ˆminå°±æ˜¯f[i][j]çš„å€¼</span></span><br><span class="line"><span class="comment">        3.åˆå§‹åŒ–:f[i][j]=0 å…¶ä¸­i&gt;=j</span></span><br><span class="line"><span class="comment">        4.éå†é¡ºåº:æ±‚f[i][j]è¦ç”¨åˆ°f[i][k-1]ä¸f[k+1][j] é‚£ä¹ˆjæ­£åº iå€’åº kæ— æ‰€è°“</span></span><br><span class="line"><span class="comment">        5.è¿”å›å½¢å¼:è¿”å›f[1][n]å°±æ˜¯ç­”æ¡ˆ</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">// éå†å·¦è¾¹ç•Œiâˆˆ[n,1]</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">            <span class="comment">// éå†å³è¾¹ç•Œjâˆˆ[i+1,n] æ³¨æ„j=iä¸º0 å¼ºè¡Œè½¬ç§»ä¼šå‘ç”Ÿé”™è¯¯</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> INF;</span><br><span class="line">                <span class="comment">// éå†åˆ†ç•Œçº¿kâˆˆ[i,j]</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> i; k &lt;= j; k++) &#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">cur</span> <span class="operator">=</span> k + Math.max(f[i][k - <span class="number">1</span>], f[k + <span class="number">1</span>][j]);   <span class="comment">// æœ¬æ¬¡çŒœkçš„ç¨³èµ¢çš„å¼€é”€</span></span><br><span class="line">                    min = Math.min(min, cur);   <span class="comment">// è¿™ä¹ˆå¤šç§é€‰æ‹©çš„æœ€å°å¼€é”€</span></span><br><span class="line">                &#125;</span><br><span class="line">                f[i][j] = min;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[<span class="number">1</span>][n];     <span class="comment">// é€‰æ‹©[1,n]ä¸­ç¨³èµ¢çš„æœ€å°å¼€é”€</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/strange-printer/"><strong>664. å¥‡æ€ªçš„æ‰“å°æœº</strong></a></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">strangePrinter</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ–¹æ³•2ï¼šåŒºé—´DP</span></span><br><span class="line"><span class="comment">        1.çŠ¶æ€å®šä¹‰:f[i][j]ä¸ºæ‰“å°s[i,j]æ‰€éœ€è¦çš„æœ€å°‘æ‰“å°æ¬¡æ•°ï¼ˆi&lt;=jï¼‰</span></span><br><span class="line"><span class="comment">        2.çŠ¶æ€è½¬ç§»:æ±‚f[i][j]å°±è¦è€ƒè™‘s[i]ä¸s[j]</span></span><br><span class="line"><span class="comment">            2.1 å½“s[i]==s[j]æ—¶ s[i]ä¸s[j]å…¶ä¸­ä¸€ä¸ªå¯ä»¥é¡ºè·¯æ‰“å° f[i][j]=f[i][j-1]</span></span><br><span class="line"><span class="comment">            2.1 å½“s[i]=!s[j]æ—¶ æšä¸¾åˆ†å‰²ç‚¹ï¼Œåˆ†å‰²ç‚¹ä¸¤è¾¹çš„æ¬¡æ•°åŠ èµ·æ¥å–æœ€å°å€¼å°±æ˜¯ç­”æ¡ˆ(åªå–æœ€ä¼˜çš„æ‰“å°æ¬¡æ•°è½¬ç§»)</span></span><br><span class="line"><span class="comment">                f[i][j]=min(f[i][k]+f[k+1][j]) å…¶ä¸­kâˆˆ[i,j-1]</span></span><br><span class="line"><span class="comment">        3.åˆå§‹åŒ–:åˆå§‹åŒ–f[i][i]=1 å•ä¸ªå­—ç¬¦æœ€å°‘æ‰“å°1æ¬¡</span></span><br><span class="line"><span class="comment">        4.éå†é¡ºåº:Loop1-&gt;éå†é•¿åº¦len(æ­£åº)  Loop2-&gt;éå†å·¦è¾¹ç•Œi(æ­£åº)  Loop3-&gt;éå†åˆ†å‰²ç‚¹k(æ­£åº)</span></span><br><span class="line"><span class="comment">            å¦ä¸€ä¸ªéå†è§’åº¦:æšä¸¾å·¦ç«¯ç‚¹i(å€’åºn-2~0) æšä¸¾å³ç«¯ç‚¹j(æ­£åºi~n-1) æšä¸¾åˆ†å‰²ç‚¹k(æ²¡æ‰€è°“i~j-1)</span></span><br><span class="line"><span class="comment">        5.è¿”å›å½¢å¼:è¿”å›f[0][n-1]å°±æ˜¯æ‰“å°s[0,n-1]æ‰€éœ€è¦çš„æœ€å°æ‰“å°æ¬¡æ•°</span></span><br><span class="line"><span class="comment">        æ—¶é—´å¤æ‚åº¦:O(N^3) ç©ºé—´å¤æ‚åº¦:O(N^2)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> s.length(), INF = <span class="number">101</span>;</span><br><span class="line">        <span class="type">int</span>[][] f = <span class="keyword">new</span> <span class="title class_">int</span>[n][n];</span><br><span class="line">        <span class="comment">// æ‰“å°1ä¸ªå­—ç¬¦åªéœ€è¦1æ¬¡</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            f[i][i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æšä¸¾é•¿åº¦lenâˆˆ[2,len]</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">2</span>; len &lt;= n; len++) &#123;</span><br><span class="line">            <span class="comment">// æšä¸¾å·¦ç«¯ç‚¹iâˆˆ[0,n-len]</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i + len - <span class="number">1</span> &lt; n; i++) &#123;</span><br><span class="line">                <span class="comment">// jä¸ºå³ç«¯ç‚¹</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + len - <span class="number">1</span>;</span><br><span class="line">                <span class="comment">// s[i]==s[j] é¡ºè·¯æ‰“å°</span></span><br><span class="line">                <span class="keyword">if</span> (s.charAt(i) == s.charAt(j)) &#123;</span><br><span class="line">                    f[i][j] = f[i][j - <span class="number">1</span>];</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> INF;  <span class="comment">// æœ€å¤šçš„æ‰“å°æ¬¡æ•°</span></span><br><span class="line">                    <span class="comment">// æšä¸¾åˆ†å‰²ç‚¹kâˆˆ[i,j-1]</span></span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> i; k &lt; j; k++) &#123;</span><br><span class="line">                        <span class="comment">// ç»´æŠ¤æœ€å°çš„æ‰“å°æ¬¡æ•°</span></span><br><span class="line">                        min = Math.min(min, f[i][k] + f[k + <span class="number">1</span>][j]);</span><br><span class="line">                    &#125;</span><br><span class="line">                    f[i][j] = min;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[<span class="number">0</span>][n - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è®°å¿†åŒ–DFSè§£æ³•ï¼š</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[][] memo;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">INF</span> <span class="operator">=</span> <span class="number">101</span>;</span><br><span class="line">    <span class="type">char</span>[] chs;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">strangePrinter</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ–¹æ³•1ï¼šè®°å¿†åŒ–DFS:</span></span><br><span class="line"><span class="comment">        å…³æ³¨å­é—®é¢˜ï¼Œæ¯å½“æ‰“å°ä¸€æ®µæ¶‰åŠåˆ°çš„å˜é‡ä¸ºçš„å½“å‰æ‰“å°åŒºé—´çš„å·¦å³è¾¹ç•Œs[i,j]</span></span><br><span class="line"><span class="comment">        å› æ­¤å®šä¹‰dfs(i,j)ä¸ºæ‰“å°s[i,j]éœ€è¦çš„æœ€å°‘æ‰“å°æ¬¡æ•°</span></span><br><span class="line"><span class="comment">        æ­¤æ—¶æƒ…å†µåˆ†ä¸º2ç§ï¼š</span></span><br><span class="line"><span class="comment">        1.å½“s[i]==s[j]æ—¶ï¼Œæ‰“å°s[i]æ—¶å¯ä»¥åŒæ—¶æŠŠs[j]ä¹Ÿæ‰“å°äº†ï¼Œå› æ­¤æ€»çš„æ¬¡æ•°ä¸ºdfs(i,j-1)</span></span><br><span class="line"><span class="comment">        2.å½“s[i]!=s[j]æ—¶ï¼Œæ‰“å°s[i]æ—¶ä¸èƒ½åŒæ—¶æŠŠs[j]ä¹Ÿæ‰“å°</span></span><br><span class="line"><span class="comment">            å‡è®¾ä¸­é—´çš„å­—æ¯éƒ½ä¸ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œæ€»çš„æ¬¡æ•°éœ€è¦dfs(i,j-1)+1ï¼Œå³æ¯ä¸ªå­—æ¯éƒ½è¦ç‹¬ç«‹æ‰“å°</span></span><br><span class="line"><span class="comment">            ä½†æ˜¯s[i...k...j]ä¸­é—´çš„s[k]å¯èƒ½ä¸s[i]æˆ–è€…s[j]ç›¸ç­‰ï¼Œæ­¤æ—¶çš„æ‰“å°æ¬¡æ•°å¯ä»¥å‡å°‘ï¼Œå› ä¸ºå¯ä»¥é¡ºå¸¦æ‰“å°</span></span><br><span class="line"><span class="comment">            é‚£ä¹ˆå°±è¦æšä¸¾s[i,j]ä¹‹é—´çš„åˆ†å‰²ç‚¹s[k]ï¼Œå…¶ä¸­kâˆˆ[i,j-1]ï¼Œåˆ†å‰²åçš„åŒºé—´ä¸ºs[i,k]ä¸s[k+1,j]</span></span><br><span class="line"><span class="comment">            æœ€å°‘çš„æ‰“å°æ¬¡æ•°ä¸ºå¤šå°‘ï¼Ÿç­”æ¡ˆä¸ºmin(dfs(i,k)+dfs(k+1,j)) ä¸­é—´å¯ä»¥é¡ºå¸¦æ‰“å°çš„éƒ½ç»è¿‡äº†æœ€ä¼˜çš„çŠ¶æ€è½¬ç§»</span></span><br><span class="line"><span class="comment">        æœ€åè¿”å›dfs(0,n-1)å°±æ˜¯ç­”æ¡ˆ</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        chs = s.toCharArray();</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> chs.length;</span><br><span class="line">        memo = <span class="keyword">new</span> <span class="title class_">int</span>[n][n];</span><br><span class="line">        <span class="keyword">return</span> dfs(<span class="number">0</span>, n - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// dfs(i,j):æ‰“å°s[i,j]éœ€è¦çš„æœ€å°‘æ‰“å°æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="comment">// memoä¸­å­˜åœ¨è¯¥çŠ¶æ€ç›´æ¥è¿”å›</span></span><br><span class="line">        <span class="keyword">if</span> (memo[i][j] != <span class="number">0</span>) <span class="keyword">return</span> memo[i][j];</span><br><span class="line">        <span class="comment">// base case</span></span><br><span class="line">        <span class="keyword">if</span> (i == j) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// s[i]==s[j]</span></span><br><span class="line">        <span class="keyword">if</span> (chs[i] == chs[j]) <span class="keyword">return</span> dfs(i, j - <span class="number">1</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> INF;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> i; k &lt; j; k++) &#123;</span><br><span class="line">            min = Math.min(min, dfs(i, k) + dfs(k + <span class="number">1</span>, j)); <span class="comment">// å–æœ€å°åˆ†å‰²ä½ç½®èµ‹å€¼åˆ°dfs(i,j)</span></span><br><span class="line">        &#125;</span><br><span class="line">        memo[i][j] = min;</span><br><span class="line">        <span class="keyword">return</span> min;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶å®èƒ½ç”¨åŠ¨æ€è§„åˆ’è§£å†³çš„é—®é¢˜éƒ½å¯ä»¥ç”¨è®°å¿†åŒ–DFSè§£å†³</p><p>è®°å¿†åŒ–DFSçš„ä¼˜ç‚¹å°±æ˜¯ä¸ç”¨è€ƒè™‘å…·ä½“çš„çŠ¶æ€éå†é¡ºåºæ˜¯æ€æ ·çš„ï¼Œåªè¦èƒ½å¤Ÿåˆ¤æ–­å‡ºmemoé‡Œé¢çš„çŠ¶æ€è¢«æœ‰æ•ˆå€¼è¦†ç›–è¿‡å°±å¯ä»¥ç›´æ¥æ‹¿æ¥ç”¨ï¼Œå› æ­¤å¯ä»¥å°† memo[i][j] çš„å€¼åˆå§‹åŒ–ä¸ºä¸€ä¸ªä¸å¯èƒ½åˆ°è¾¾çš„å€¼INF</p><p>æ¨¡æ¿ä¸­ä¸€èˆ¬åŒ…å«ä¸€ä¸‹å‡ ä¸ªå…³é”®ç‚¹ï¼š</p><p>1.æ¯æ¬¡é€’å½’è¿”å›ä¹‹å‰è®°å½•è¯¥æ¬¡æœ€ä¼˜å€¼è¿›å…¥memo memo[i][j] = min;</p><p>2.è‹¥dfs(i,j)ä¸­çš„memo[i][j]çš„æœ‰æ•ˆå€¼å·²ç»å‡ºç°è¿‡å¯ä»¥ç›´æ¥å– if (memo[i][j] != 0) return memo[i][j];</p><p>3.base case ä¸€èˆ¬æ¥è¯´æ˜¯ if (i == j) return ?;</p><p>4.éå†ä¸dfs(i,j)æœ‰å…³çš„çŠ¶æ€ï¼ˆç»“æœï¼‰ï¼Œé€‰æ‹©æœ€ä¼˜çš„ï¼ˆç»è¿‡è®¡ç®—ï¼‰å¾—åˆ°çš„ç»“æœä½œä¸ºdfs(i,j)çš„ç»“æœ è§†å…·ä½“é—®é¢˜è€Œå®š</p>]]></content>
    
    
    <summary type="html">åŒºé—´DPæ˜¯æŒ‡ä»¥åŒºé—´å·¦å³è¾¹ç•Œf[i][j]ä½œä¸ºåŠ¨æ€è§„åˆ’å˜é‡çš„é—®é¢˜</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fomal.cc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="åŒºé—´DP" scheme="https://www.fomal.cc/tags/%E5%8C%BA%E9%97%B4DP/"/>
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="https://www.fomal.cc/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
  </entry>
  
  <entry>
    <title>æ•°ä½DPæ€»ç»“</title>
    <link href="https://www.fomal.cc/posts/d795dbaa.html"/>
    <id>https://www.fomal.cc/posts/d795dbaa.html</id>
    <published>2022-08-11T13:24:43.000Z</published>
    <updated>2022-08-11T13:24:43.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="1-ä¸‰å¶çš„æ¨¡æ¿"><a href="#1-ä¸‰å¶çš„æ¨¡æ¿" class="headerlink" title="1.ä¸‰å¶çš„æ¨¡æ¿"></a>1.ä¸‰å¶çš„æ¨¡æ¿</h4><p>ä½DPæ˜¯ä¸€ç§æ¯”è¾ƒæŠ½è±¡å’Œéš¾ç†è§£çš„DPé¢˜å‹ï¼Œä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ°æ•°ä½DPå»è§£é¢˜ï¼Ÿ</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œå½“é‡åˆ°æ±‚ [a,b] å†…æ»¡è¶³ä¸€å®šæ¡ä»¶çš„æ•°å­—æœ‰å¤šå°‘ä¸ªæ—¶ï¼Œå¤§æ¦‚ç‡ä¼šç”¨åˆ°æ•°ä½DP</p><p>è®¾ f[i] ä¸º [0,i] æ»¡è¶³æ¡ä»¶çš„æ•°å­—ä¸ªæ•°ï¼Œé‚£ä¹ˆ[a, b] å†…çš„ç¬¦åˆè¦æ±‚æ•°ç›®å°±æ˜¯ f[b]-f[a]</p><p>ä¸‰å¶çš„æ•°ä½DPæ–¹é¢æ€»ç»“å¾—æ¯”è¾ƒç³»ç»Ÿï¼Œé¢˜è§£ä¹Ÿæ˜¯æ¯”è¾ƒæ¨¡æ¿åŒ–çš„ï¼Œ<strong>å»ºè®®æŒ‰ç…§æ¨¡æ¿æ¥</strong>ï¼Œå¤§è‡´æ¢³ç†ä¸€ä¸‹æ¨¡æ¿å’Œæ€è·¯å¦‚ä¸‹ï¼š</p><p>å°† [0,n] çš„æ•°å­—åˆ†ä¸º3éƒ¨åˆ†ï¼š</p><p>1.<strong>res1</strong> <strong><em>ä½æ•°å°äºn</em></strong>çš„éƒ¨åˆ† è¿™éƒ¨åˆ†ä¸€èˆ¬å¯ä»¥é€šè¿‡<strong>ä¹˜æ³•åŸç†</strong>æ±‚è§£</p><p>2.<strong>res2</strong> <strong><em>ä½æ•°ç­‰äºnä¸”æœ€é«˜ä½å°äºnéƒ¨åˆ†</em></strong> è¿™éƒ¨åˆ†ä¹Ÿå¯ä»¥ç”¨ä¹˜æ³•åŸç†è¿›è¡Œæ±‚è§£ï¼Œ<strong>æšä¸¾æœ€é«˜ä½å¯ç”¨çš„æƒ…å½¢ç„¶ååˆ©ç”¨ä¹˜æ³•åŸç†è®¡ç®—</strong></p><p>3.<strong>res3</strong> <strong><em>ä½æ•°ç­‰äºnä¸”æœ€é«˜ä½ç­‰äºnéƒ¨åˆ†</em></strong> è¿™éƒ¨åˆ†æ˜¯æœ€éš¾çš„ï¼Œå› ä¸ºæ¯ä¸€ä½çš„å–å€¼ä¸¥æ ¼è¢«é™åˆ¶äº†ï¼Œéœ€è¦ç”¨åˆ°DPçš„æ€æƒ³è¿›è¡Œæ±‚è§£</p><p>ï¼ˆæ³¨æ„è¿™ä¸ªres3ä¸ä¸€å®šæ˜¯nçš„æœ€é«˜ä½ï¼Œæ˜¯éå†è¿‡ç¨‹ä¸­ä½œä¸ºçŠ¶æ€å€¼åŠ¨æ€å˜åŒ–çš„ï¼‰</p><p>res2ä¸res3ä¸€èˆ¬æ”¾åœ¨ä¸€èµ·æ±‚è§£ï¼Œå¥—è·¯å¦‚ä¸‹ï¼š</p><p>ä»<strong>é«˜ä½å‘ä½ä½</strong>æšä¸¾ï¼Œå‡è®¾å½“å‰ä½æ•°å­—ä¸ºcurï¼Œå…¶ä¸­res2éƒ¨åˆ†å¯ä»¥é€šè¿‡ä¹˜æ³•åŸç†è®¡ç®—å¾—åˆ°</p><p>res3éƒ¨åˆ†éœ€è¦ç”± <strong>å½“å‰ä½çš„åé¢ä½æ–¹æ¡ˆ</strong>æ•° å†³å®šï¼Œè¿™é‡Œå°±æœ‰äº†å­é—®é¢˜çš„å¤ç°äº†ï¼ŒåŸé—®é¢˜ä¸å­é—®é¢˜çš„ç»´åº¦å·®å¼‚å°±æ˜¯å­é—®é¢˜æ¯”åŸé—®é¢˜å°‘äº†åŸæ¥çš„æœ€é«˜ä½</p><p>ä»¥ LC 1012ä¸ºä¾‹</p><p>res2 = [0,cur-1]èƒ½ç”¨çš„æ•°å­—æ•° * åé¢å‰©ä½™ä½æ•°çš„æ’åˆ—æ•°</p><p><code>res3ç›¸å½“äºå›ºå®šäº†å½“å‰ä½ä¸ºæœ€å¤§å€¼curï¼Œå†çœ‹åé¢ä½æ€»çš„æ–¹æ¡ˆæ•°ï¼Œé€šè¿‡forå¾ªç¯ä¸€ç›´éå†è‡³æœ€åä¸€ä½(æˆ–è€…æ˜¯å‡ºç°é‡å¤çš„ä¸€ä½)</code></p><p>è¿˜æœ‰ä¸€ä¸ªç»†èŠ‚å°±æ˜¯åˆ«æ¼äº†æœ€å¤§æ•°æœ¬èº«ä¹Ÿç¬¦åˆè¦æ±‚è¿™ç§æƒ…å½¢</p><p>æ’åˆ—æ•°çš„æƒ…å½¢æœ‰é™ï¼Œæˆ‘ä»¬å¯ä»¥é¢„å¤„ç†å‡ºæ¥æ‰€æœ‰æ’åˆ—æ•°æ¥åŠ å¿«è®¡ç®—é€Ÿåº¦</p><p>æœ€åå†ç´¯åŠ ä¸Šres1çš„æ–¹æ¡ˆæ•°å°±æ˜¯ç­”æ¡ˆ</p><p><a href="https://leetcode.cn/problems/numbers-with-repeated-digits/"><strong>1012. è‡³å°‘æœ‰ 1 ä½é‡å¤çš„æ•°å­—</strong></a></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="comment">// é¢„å¤„ç†æ’åˆ—æ•° f[i][j]=i*(i+1)*...*(j-1)*j</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span>[][] f = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">11</span>][<span class="number">11</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; <span class="number">11</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i; j &lt; <span class="number">11</span>; j++) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">cur</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> i; k &lt;= j; k++) &#123;</span><br><span class="line">                    cur *= k;</span><br><span class="line">                &#125;</span><br><span class="line">                f[i][j] = cur;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numDupDigitsAtMostN</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ•°ä½DP(è¾ƒéš¾):</span></span><br><span class="line"><span class="comment">        æœ¬é¢˜å¯ä»¥è½¬åŒ–ä¸ºæ±‚[1,n]å…¨éƒ¨æ•°å­—ä¸ç›¸åŒçš„æ•°å­—ä¸ªæ•°ï¼Œæ˜¯å…¸å‹çš„æ•°ä½DPé—®é¢˜</span></span><br><span class="line"><span class="comment">        æ•°ä½DPé—®é¢˜æ±‚è§£çš„æ€»ä½“æ€è·¯å°±æ˜¯æ±‚[0,n]ä¸­æ»¡è¶³æŸäº›æ¡ä»¶çš„æ•°å­—ä¸ªæ•°</span></span><br><span class="line"><span class="comment">        é€šå¸¸å¥—è·¯å°±æ˜¯å°†[0,n]çš„æ•°å­—åˆ†ä¸º3éƒ¨åˆ†ï¼š</span></span><br><span class="line"><span class="comment">        1.res1 ä½æ•°å°äºnçš„éƒ¨åˆ† è¿™éƒ¨åˆ†ä¸ LC357 è§£æ³•ä¸€è‡´ï¼Œåˆ©ç”¨ä¹˜æ³•åŸç†æ±‚è§£</span></span><br><span class="line"><span class="comment">        2.res2 ä½æ•°ç­‰äºnçš„éƒ¨åˆ†ä¸”æœ€é«˜ä½å°äºn è¿™éƒ¨åˆ†ä¹Ÿå¯ä»¥ç”¨ä¹˜æ³•åŸç†è¿›è¡Œæ±‚è§£ï¼Œæšä¸¾æœ€é«˜ä½ç›´æ¥è®¡ç®—å°±å¯ä»¥</span></span><br><span class="line"><span class="comment">        3.res3 ä½æ•°ç­‰äºnçš„éƒ¨åˆ†ä¸”æœ€é«˜ä½ç­‰äºn è¿™éƒ¨åˆ†æ˜¯æœ€éš¾çš„ï¼Œå› ä¸ºæ¯ä¸€ä½çš„å–å€¼ä¸¥æ ¼è¢«é™åˆ¶äº†ï¼Œéœ€è¦ç”¨åˆ°DPçš„æ€æƒ³è¿›è¡Œæ±‚è§£</span></span><br><span class="line"><span class="comment">        res2ä¸res3ä¸€èˆ¬æ”¾åœ¨ä¸€èµ·æ±‚è§£ï¼Œå¥—è·¯å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="comment">        ä»é«˜ä½å‘ä½ä½æšä¸¾ï¼Œå‡è®¾å½“å‰ä½ä¸ºcurï¼Œå…¶ä¸­res2éƒ¨åˆ†å¯ä»¥é€šè¿‡ä¹˜æ³•åŸç†è®¡ç®—å¾—åˆ°</span></span><br><span class="line"><span class="comment">        res3éƒ¨åˆ†éœ€è¦ç”±  å½“å‰ä½çš„åé¢ä½æ–¹æ¡ˆæ•°  å†³å®š</span></span><br><span class="line"><span class="comment">        å…·ä½“çš„ï¼Œres2=[0,cur-1]èƒ½ç”¨çš„æ•°å­—æ•°*åé¢å‰©ä½™ä½æ•°çš„æ’åˆ—æ•°</span></span><br><span class="line"><span class="comment">                res3ç›¸å½“äºå›ºå®šäº†å½“å‰ä½ä¸ºæœ€å¤§å€¼curï¼Œå†çœ‹åé¢ä½çš„æ€»çš„æ–¹æ¡ˆæ•°ï¼Œé€šè¿‡forå¾ªç¯ä¸€ç›´éå†è‡³æœ€åä¸€ä½(æˆ–è€…æ˜¯å‡ºç°é‡å¤çš„ä¸€ä½)</span></span><br><span class="line"><span class="comment">                æ’åˆ—æ•°çš„æƒ…å½¢æœ‰é™ï¼Œæˆ‘ä»¬å¯ä»¥é¢„å¤„ç†å‡ºæ¥åŠ å¿«è®¡ç®—é€Ÿåº¦</span></span><br><span class="line"><span class="comment">        æ—¶é—´å¤æ‚åº¦:O(logN)  ç©ºé—´å¤æ‚åº¦:O(C)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">return</span> n - dp(n) + <span class="number">1</span>;   <span class="comment">// æ³¨æ„æ’é™¤æ‰0çš„æƒ…å†µ</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// dp[x]è¿”å›[0,x]ä¸­æ¯ä¸€ä½éƒ½ä¸åŒçš„æ•°å­—æ•°ç›®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">dp</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="comment">// ä¸€ä½æ•°ç›´æ¥è¿”å›x+1(å› ä¸ºåŒ…å«0)</span></span><br><span class="line">        <span class="keyword">if</span> (x &lt;= <span class="number">9</span>) <span class="keyword">return</span> x + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// å°†xæ¯ä¸€ä½æå‡ºæ¥</span></span><br><span class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">while</span> (x != <span class="number">0</span>) &#123;</span><br><span class="line">            list.add(x % <span class="number">10</span>);</span><br><span class="line">            x /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">bitCnt</span> <span class="operator">=</span> list.size();</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// 1.è®¡ç®—res1+res2éƒ¨åˆ†</span></span><br><span class="line">        <span class="comment">// å…¶ä¸­iä¸ºæ•°å­—xçš„ä½ç´¢å¼•ï¼Œiè¶Šå¤§è¡¨ç¤ºä½æ•°è¶Šé«˜(è¶Šå·¦)</span></span><br><span class="line">        <span class="comment">// pè®°å½•å½“å‰å¾ªç¯åˆ°çš„ä½ç½®å·²ç»éå†äº†å¤šå°‘ä½</span></span><br><span class="line">        <span class="comment">// usedæ ‡è®°å½“å‰éå†è¿‡ç¨‹ä¸­å·²ç»ç”¨äº†çš„å“ªäº›æ•°å­—ï¼Œåˆ°æ—¶å€™æ ¹æ®usedæ’é™¤</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> bitCnt - <span class="number">1</span>, used = <span class="number">0</span>, p = <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--, p++) &#123;</span><br><span class="line">            <span class="comment">// é¦–å…ˆè®¡ç®—å½“å‰ä½curèƒ½ç”¨çš„æ•°å­—ä¸ªæ•°cnt</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">cur</span> <span class="operator">=</span> list.get(i), cnt = <span class="number">0</span>;</span><br><span class="line">            <span class="comment">// æšä¸¾[cur-1,0]ï¼Œå†æ’é™¤æ‰å‰é¢å·²ç»ç”¨è¿‡çš„</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> cur - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--) &#123;</span><br><span class="line">                <span class="comment">// æœ€é«˜ä½å¯ä»¥ç”¨[cur-1,1]</span></span><br><span class="line">                <span class="keyword">if</span> (i == bitCnt - <span class="number">1</span>) &#123;</span><br><span class="line">                    cnt = cur - <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// ä½ä½å¯ä»¥ç”¨[cur-1,0]æ²¡ç”¨è¿‡çš„ä»»æ„æ•°</span></span><br><span class="line">                <span class="keyword">if</span> (((used &gt;&gt; j) &amp; <span class="number">1</span>) == <span class="number">0</span>) cnt++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// è®¡ç®—res2éƒ¨åˆ†</span></span><br><span class="line">            <span class="comment">// åˆæ³•å€¼ a&gt;=b å…¶ä¸­aä¸ºcuråé¢é¦–ä½é€‰æ‹©æ•°ï¼Œbä¸ºç»ˆç‚¹(æœ€åä¸€ä½)çš„é€‰æ‹©æ•°</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span> - p, b = a - (bitCnt - p) + <span class="number">1</span>;</span><br><span class="line">            res += cnt * (i &gt; <span class="number">0</span> ? f[b][a] : <span class="number">1</span>);    <span class="comment">// ç‰¹ä¾‹ä¸ºæœ€åä¸€ä½çš„æ—¶å€™å¯ä»¥é€‰cntä¸ª</span></span><br><span class="line">            <span class="comment">// å·²ç»é‡åˆ°ç›¸åŒæ•°å­—ï¼Œç»Ÿè®¡å®Œcntæ¬¡ä»¥å([0,cur-1]çš„æƒ…å†µ)å°±å¯ä»¥é€€å‡º</span></span><br><span class="line">            <span class="keyword">if</span> (((used &gt;&gt; cur) &amp; <span class="number">1</span>) == <span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">0</span>) res++;  <span class="comment">// å½“xæœ¬èº«å°±æ˜¯åˆæ³•æ¡ˆä¾‹ï¼Œæœ€åä¸€ä½åŠ å®Œcntä¹‹åè¿˜è¦å†+1</span></span><br><span class="line">            used |= (<span class="number">1</span> &lt;&lt; cur);  <span class="comment">// æ ‡è®°ä½¿ç”¨äº†cur</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2.è®¡ç®—res3éƒ¨åˆ†(ä½æ•°å°äºxçš„éƒ¨åˆ†)</span></span><br><span class="line">        res += <span class="number">10</span>;  <span class="comment">// å…ˆç»Ÿè®¡ä¸€ä½æ•°çš„æƒ…å†µ</span></span><br><span class="line">        <span class="comment">// ç»Ÿè®¡åé¢çš„[2,bitCnt-1]ä½:9*9  9*9*8  9*9*8*7 ...</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt; bitCnt; i++) &#123;</span><br><span class="line">            res += <span class="number">9</span> * f[<span class="number">11</span> - i][<span class="number">9</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-çµä½¬çš„æ¨¡æ¿ï¼ˆæ¨èï¼‰"><a href="#2-çµä½¬çš„æ¨¡æ¿ï¼ˆæ¨èï¼‰" class="headerlink" title="2.çµä½¬çš„æ¨¡æ¿ï¼ˆæ¨èï¼‰"></a>2.çµä½¬çš„æ¨¡æ¿ï¼ˆæ¨èï¼‰</h4><p><a href="https://leetcode.cn/problems/count-special-integers/">2376. ç»Ÿè®¡ç‰¹æ®Šæ•´æ•°</a></p><p>å‚è€ƒçµç¥å†™çš„è®°å¿†åŒ–DFSè§£å†³æ•°ä½DPé—®é¢˜çš„æ¨¡æ¿ï¼Œéå¸¸å¥½ç”¨ï¼Œå‡ ä¹å¯ä»¥â€œç§’æ€â€ä»»ä½•ç±»å‹çš„æ•°ä½DPï¼</p><p><strong>è®°å¿†åŒ–æœ¬è´¨å°±æ˜¯å‡å°‘å‰é¢å·²é€‰çŠ¶æ€ä¸€è‡´çš„æƒ…å†µï¼Œå°†1eMçš„æ—¶é—´å¤æ‚åº¦å‹ç¼©è‡³1&lt;&lt;Mï¼Œæ•ˆç‡éå¸¸é«˜</strong></p><p><strong>è¯¦ç»†å‚è€ƒï¼š<a href="https://leetcode.cn/problems/count-special-integers/solution/shu-wei-dp-mo-ban-by-endlesscheng-xtgx/">æ•°ä½ DP é€šç”¨æ¨¡æ¿ï¼Œé™„é¢˜å•ï¼ˆPython/Java/C++/Goï¼‰</a></strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="type">int</span>[][] memo;   <span class="comment">// memo[i][mask]è®°å½•å½“å‰é€‰æ‹©é¡ºä½ä¸ºiï¼Œå·²é€‰çŠ¶æ€ä¸ºmaskæ—¶ï¼Œæ„é€ ç¬¬iä½åŠåé¢ä½çš„åˆæ³•æ–¹æ¡ˆæ•°</span></span><br><span class="line">    <span class="type">char</span>[] s;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countSpecialNumbers</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å‚è€ƒçµç¥ã®æ•°ä½DPè®°å¿†åŒ–DFSæ¨¡æ¿ï¼š</span></span><br><span class="line"><span class="comment">        æ³¨æ„è¿™é¢˜ä¸LC1012æ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡è¿™é¢˜æ›´ç›´æ¥æ±‚æ¯ä¸€ä½éƒ½ä¸ç›¸åŒæ•°å­—</span></span><br><span class="line"><span class="comment">        dfs(i, mask, isLimit, hasNum) ä»£è¡¨ä»å·¦åˆ°å³é€‰åˆ°ç¬¬iä¸ªæ•°å­—æ—¶(iä»0å¼€å§‹)ï¼Œå‰é¢æ•°å­—å·²é€‰çŠ¶æ€ä¸ºmaskæ—¶çš„åˆæ³•æ–¹æ¡ˆæ•°</span></span><br><span class="line"><span class="comment">        å„ä¸ªå‚æ•°çš„å«ä¹‰å¦‚ä¸‹:</span></span><br><span class="line"><span class="comment">        i:å½“å‰é€‰æ‹©çš„æ•°å­—ä½æ¬¡ï¼Œä»0å¼€å§‹</span></span><br><span class="line"><span class="comment">        mask:å‰é¢å·²æ‹©æ•°å­—çš„çŠ¶æ€ï¼Œæ˜¯ä¸€ä¸ª10ä½çš„äºŒè¿›åˆ¶æ•°ï¼Œå¦‚:0000000010å°±ä»£è¡¨å‰é¢å·²ç»é€‰äº†1</span></span><br><span class="line"><span class="comment">        isLimit:booleanç±»å‹ï¼Œä»£è¡¨å½“å‰ä½é€‰æ‹©æ˜¯å¦è¢«å‰é¢ä½çš„é€‰æ‹©é™åˆ¶äº†ï¼›</span></span><br><span class="line"><span class="comment">            å¦‚n=1234ï¼Œå‰é¢é€‰äº†12ï¼Œé€‰ç¬¬3ä½çš„æ—¶å€™ä¼šè¢«é™åˆ¶åœ¨0~3ï¼ŒisLimit=trueï¼›å¦åˆ™æ˜¯0~9ï¼ŒisLimit=false</span></span><br><span class="line"><span class="comment">        hasNum:è¡¨ç¤ºå‰é¢æ˜¯å¦å·²ç»é€‰æ‹©äº†æ•°å­—ï¼Œè‹¥é€‰æ‹©äº†å°±ä¸ºtrue(è¯†åˆ«ç›´æ¥æ„é€ ä½ä½çš„æƒ…å†µ)</span></span><br><span class="line"><span class="comment">        æ—¶é—´å¤æ‚åº¦:O(1024*M*10) ç©ºé—´å¤æ‚åº¦:O(1024*M)</span></span><br><span class="line"><span class="comment">        è®°å¿†åŒ–DFSçš„æ—¶é—´å¤æ‚åº¦=çŠ¶æ€æ•°*æ¯ä¸€æ¬¡æšä¸¾çš„æƒ…å†µæ•°</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        s = String.valueOf(n).toCharArray();    <span class="comment">// è½¬åŒ–ä¸ºå­—ç¬¦æ•°ç»„å½¢å¼</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> s.length;</span><br><span class="line">        memo = <span class="keyword">new</span> <span class="title class_">int</span>[m][<span class="number">1</span> &lt;&lt; <span class="number">10</span>];     <span class="comment">// iâˆˆ[0,m-1]ï¼Œmaskä¸ºä¸€ä¸ª10ä½äºŒè¿›åˆ¶æ•°</span></span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–memoä¸º-1ä»£è¡¨è¯¥é¡ºä½ä¸‹è¯¥å·²é€‰çŠ¶æ€è¿˜æ²¡è¿›è¡Œè®¡ç®—</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            Arrays.fill(memo[i], -<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ³¨æ„ä¸€å¼€å§‹æœ€é«˜ä½æ˜¯æœ‰é™åˆ¶çš„ï¼ŒisLimit=true</span></span><br><span class="line">        <span class="keyword">return</span> dfs(<span class="number">0</span>, <span class="number">0</span>, <span class="literal">true</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// dfs(i, mask, isLimit, hasNum) ä»£è¡¨ä»å·¦åˆ°å³é€‰ç¬¬iä¸ªæ•°å­—æ—¶ï¼Œå‰é¢å·²é€‰çŠ¶æ€ä¸ºmaskæ—¶çš„åˆæ³•æ–¹æ¡ˆæ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> mask, <span class="type">boolean</span> isLimit, <span class="type">boolean</span> hasNum)</span> &#123;</span><br><span class="line">        <span class="comment">// base case</span></span><br><span class="line">        <span class="comment">// iè¶Šè¿‡æœ€åä¸€ä½ï¼Œæ­¤æ—¶å‰é¢é€‰äº†å°±ç®—ä¸€ä¸ªï¼Œæ²¡é€‰çš„å°±ä¸ç®—ï¼Œå› ä¸ºä¸é€‰åé¢ä¹Ÿæ²¡å¾—é€‰äº†</span></span><br><span class="line">        <span class="keyword">if</span> (i == s.length) <span class="keyword">return</span> hasNum ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// å·²ç»è®¡ç®—è¿‡è¯¥çŠ¶æ€ï¼Œå¹¶ä¸”è¯¥çŠ¶æ€æ˜¯æœ‰æ•ˆçš„ï¼Œç›´æ¥è¿”å›è¯¥çŠ¶æ€</span></span><br><span class="line">        <span class="comment">// è¿™ä¸€æ­¥æ˜¯é™ä½æ—¶é—´å¤æ‚åº¦çš„å…³é”®ï¼Œä½¿å¾—è®°å¿†åŒ–dfsçš„æ—¶é—´å¤æ‚åº¦æ§åˆ¶å¾—å¾ˆä½</span></span><br><span class="line">        <span class="comment">// !isLimitè¡¨ç¤ºæ²¡æœ‰è¢«é™åˆ¶çš„æ‰å¯ä»¥ç›´æ¥å¾—å‡ºç»“æœï¼Œå¦åˆ™è¿˜è¦æ ¹æ®åé¢çš„æ•°å­—è¿›è¡Œè®¡ç®—å­é—®é¢˜è®¡ç®—</span></span><br><span class="line">        <span class="keyword">if</span> (!isLimit &amp;&amp; hasNum &amp;&amp; memo[i][mask] != -<span class="number">1</span>) <span class="keyword">return</span> memo[i][mask];</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;    <span class="comment">// ç»“æœ</span></span><br><span class="line">        <span class="comment">// æœ¬ä½å¯ä»¥å–0(å¯ç›´æ¥æ„é€ ä½ä½æ•°)çš„æƒ…å†µï¼Œæ­¤æ—¶è¦åŠ ä¸Šæ„é€ ä½ä½æ•°0xxxçš„æ–¹æ¡ˆæ•°</span></span><br><span class="line">        <span class="comment">// å°†æ˜¯å¦é€‰äº†æ•°å­—ä½œä¸ºåˆ†ç±»æ¡ä»¶æ˜¯ä¸ºäº†é¿å…å‡ºç°00010è¿™æ ·æœ‰å¤šä¸ª0çš„å°±ä¸èƒ½ç»Ÿè®¡äº†</span></span><br><span class="line">        <span class="keyword">if</span> (!hasNum) res = dfs(i + <span class="number">1</span>, mask, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">        <span class="comment">// æ„é€ ä¸å½“å‰é¡ºä½ç›¸åŒä½æ•°çš„æ•°å­—å°±è¦æšä¸¾å¯é€‰çš„æ•°å­—è¿›è¡ŒDFS</span></span><br><span class="line">        <span class="comment">// æšä¸¾çš„èµ·ç‚¹è¦è§†hasNumè€Œå®šï¼Œå¦‚æœå‰é¢é€‰æ‹©äº†æ•°å­—ï¼Œé‚£ä¹ˆç°åœ¨å¯ä»¥é€‰0ï¼›å¦åˆ™åªèƒ½ä»1å¼€å§‹</span></span><br><span class="line">        <span class="comment">// æšä¸¾å¾—ç»ˆç‚¹è§†isLimitè€Œå®šï¼Œè‹¥è¢«é™åˆ¶äº†åªèƒ½åˆ°s[i]ï¼Œå¦åˆ™å¯ä»¥åˆ°9</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> hasNum ? <span class="number">0</span> : <span class="number">1</span>, end = isLimit ? s[i] - <span class="string">&#x27;0&#x27;</span> : <span class="number">9</span>; k &lt;= end; k++) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœè¯¥æ•°å­—kè¿˜æ²¡æœ‰è¢«é€‰ä¸­ï¼Œé‚£çŒ«å°±å¯ä»¥é€‰è¯¥ä½æ•°å­—</span></span><br><span class="line">            <span class="keyword">if</span> (((mask &gt;&gt; k) &amp; <span class="number">1</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// æ–¹æ¡ˆæ•°éµå¾ªåŠ æ³•åŸç†</span></span><br><span class="line">                <span class="comment">// i:è¿›è¡Œä¸‹ä¸€ä½çš„DFSï¼Œå› æ­¤ä¸ºi+1</span></span><br><span class="line">                <span class="comment">// mask:ç”±äºè¯¥ä½é€‰ä¸­äº†kï¼Œmaskæ©è†œä¼ ä¸‹å»å°±è¦æ›´æ–°ï¼Œå·²é€‰çŠ¶æ€åŠ ä¸Šk</span></span><br><span class="line">                <span class="comment">// isLimit:å½“ä¸”ä»…å½“å‰é¢çš„è¢«é™åˆ¶äº†ä¸”è¯¥ä½è¢«é™åˆ¶</span></span><br><span class="line">                <span class="comment">// hasNum:è¯¥ä½é€‰äº†å¿…å®šä¸ºtrue</span></span><br><span class="line">                res += dfs(i + <span class="number">1</span>, mask | (<span class="number">1</span> &lt;&lt; k), isLimit &amp;&amp; k == end, <span class="literal">true</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!isLimit &amp;&amp; hasNum) memo[i][mask] = res;    <span class="comment">// å¦‚æœå‰é¢æ²¡æœ‰é™åˆ¶ï¼Œè¡¨æ˜åé¢éƒ½æ˜¯åŒè´¨çš„ï¼Œå¯ä»¥è®°å½•è¿›memoä¸­</span></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æ•°ä½DPæ˜¯ä¸€ç§æ¯”è¾ƒæŠ½è±¡å’Œéš¾ç†è§£çš„DPé¢˜å‹ï¼Œè¿™ç¯‡æ–‡ç« æ€»ç»“æ•°ä½DPä¸€äº›æ€æƒ³å’Œè§£é¢˜æ–¹æ³•</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fomal.cc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="https://www.fomal.cc/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    <category term="æ•°ä½DP" scheme="https://www.fomal.cc/tags/%E6%95%B0%E4%BD%8DDP/"/>
    
  </entry>
  
  <entry>
    <title>å¤šæºBFSæ€»ç»“</title>
    <link href="https://www.fomal.cc/posts/3efa1ce7.html"/>
    <id>https://www.fomal.cc/posts/3efa1ce7.html</id>
    <published>2022-08-11T13:09:18.000Z</published>
    <updated>2022-08-11T13:09:18.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-1020-é£åœ°çš„æ•°é‡"><a href="#1-1020-é£åœ°çš„æ•°é‡" class="headerlink" title="1.1020. é£åœ°çš„æ•°é‡"></a>1.<a href="https://leetcode.cn/problems/number-of-enclaves/">1020. é£åœ°çš„æ•°é‡</a></h3><p>BFSæ ‡è®°å·²ç»æœç´¢è¿‡çš„æ ¼å­é¿å…é‡å¤æœç´¢ï¼Œä¸€å®šä¸€å®šè¦åœ¨å…¥é˜Ÿæ—¶å€™å°±æ ‡è®°æœç´¢</p><p><strong>å¦‚æœåœ¨å‡ºé˜Ÿæ—¶æ‰æ ‡è®°æœç´¢ï¼Œé‚£ä¹ˆä¸‹ä¸€å±‚çš„èŠ‚ç‚¹å¯èƒ½ä¼šæŠŠä¸Šä¸€å±‚çš„é‡å¤å…¥é˜Ÿï¼Œå› ä¸ºä¸Šä¸€å±‚å‰é¢çš„èŠ‚ç‚¹å‡ºé˜Ÿäº†ï¼Œåé¢çš„è¿˜æ²¡å‡ºé˜Ÿå› æ­¤è¿˜è§†ä¸ºæœªè¢«æœç´¢ï¼Œæœ‰é‡å¤å…¥é˜Ÿçš„é£é™©ï¼</strong></p><p><strong>1.å¸¸è§„å•æºBFSè§£æ³•ï¼š5ms</strong> <strong>48.8 MB</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="type">boolean</span>[][] canReach;  <span class="comment">// canReachè®°å½•grid[i][j]æ˜¯å¦èƒ½åˆ°è¾¾è¾¹ç•Œ</span></span><br><span class="line">    <span class="type">int</span>[][] grid;</span><br><span class="line">    <span class="type">int</span> m, n;</span><br><span class="line">    <span class="type">int</span>[][] dirs = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numEnclaves</span><span class="params">(<span class="type">int</span>[][] _grid)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å¤šæºBFS:</span></span><br><span class="line"><span class="comment">        æœ‰ä¸€ä¸ªæŠ€å·§ï¼Œè¦è¶Šè¿‡è¾¹ç•Œä¸€å®šè¦ç»è¿‡è¾¹ç•Œï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦æ±‚ä¸­é—´æœ‰å“ªäº›ä¸èƒ½åˆ°è¾¾è¾¹ç•Œçš„ï¼Œåè¿‡æ¥å°±æ˜¯è¦æ±‚å“ªäº›èƒ½åˆ°è¾¾è¾¹ç•Œçš„</span></span><br><span class="line"><span class="comment">        å†åè¿‡æ¥åªéœ€è¦ä»è¾¹ç•Œå¼€å§‹DFSçœ‹çœ‹èƒ½åˆ°è¾¾å“ªäº›é™†åœ°å³å¯ï¼Œå†ç”¨æ€»çš„é™†åœ°æ•°å‡å»èƒ½åˆ°è¾¾è¾¹ç•Œçš„é™†åœ°æ•°å°±æ˜¯ä¸èƒ½åˆ°è¾¾çš„é™†åœ°æ•°</span></span><br><span class="line"><span class="comment">        éå†æ ¼å­çš„æ–¹å¼ä¹Ÿå¯ä»¥æ˜¯BFS</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        grid = _grid;</span><br><span class="line">        m = grid.length;</span><br><span class="line">        n = grid[<span class="number">0</span>].length;</span><br><span class="line">        canReach = <span class="keyword">new</span> <span class="title class_">boolean</span>[m][n];</span><br><span class="line">        <span class="comment">// æœç´¢4æ¡è¾¹ç•Œçš„é™†åœ°</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[i][<span class="number">0</span>] == <span class="number">1</span>) bfs(i, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">if</span> (grid[i][n - <span class="number">1</span>] == <span class="number">1</span>) bfs(i, n - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; n - <span class="number">1</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[<span class="number">0</span>][j] == <span class="number">1</span>) bfs(<span class="number">0</span>, j);</span><br><span class="line">            <span class="keyword">if</span> (grid[m - <span class="number">1</span>][j] == <span class="number">1</span>) bfs(m - <span class="number">1</span>, j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ç»Ÿè®¡ä¸èƒ½åˆ°è¾¾è¾¹ç•Œçš„æ•°ç›®</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (grid[i][j] == <span class="number">1</span> &amp;&amp; !canReach[i][j]) res++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// dfs(i,j)æœç´¢ä¸ä¹‹è¿æ¥çš„é™†åœ°å¹¶æ ‡è®°åˆ°canReach</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">bfs</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="comment">// grid[i][j]å¯ä»¥åˆ°è¾¾è¾¹ç•Œè¯´æ˜ä¸ä¹‹è¿é€šçš„å·²ç»æœç´¢è¿‡äº†ï¼Œç»“æŸ</span></span><br><span class="line">        <span class="keyword">if</span> (canReach[i][j]) <span class="keyword">return</span>;</span><br><span class="line">        Queue&lt;<span class="type">int</span>[]&gt; que = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        canReach[i][j] = <span class="literal">true</span>;  <span class="comment">// ç»Ÿä¸€å…¥é˜Ÿæ ‡è®°æœç´¢(é€Ÿåº¦å¿«å¾ˆå¤šé¿å…é‡å¤æœç´¢)</span></span><br><span class="line">        que.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;i, j&#125;);</span><br><span class="line">        <span class="keyword">while</span> (!que.isEmpty()) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> que.size();</span><br><span class="line">            <span class="keyword">while</span> (size-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="type">int</span>[] poll = que.poll();</span><br><span class="line">                <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> poll[<span class="number">0</span>], y = poll[<span class="number">1</span>];</span><br><span class="line">                <span class="comment">// æœç´¢4ä¸ªæ–¹å‘</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span>[] dir : dirs) &#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">newX</span> <span class="operator">=</span> x + dir[<span class="number">0</span>], newY = y + dir[<span class="number">1</span>];</span><br><span class="line">                    <span class="comment">// ä½äºåŒºåŸŸå†…å¹¶ä¸”æ˜¯é™†åœ°å°±å¯ä»¥åˆ°è¾¾ï¼Œä¸”ä¸èƒ½æœå›å¤´è·¯</span></span><br><span class="line">                    <span class="keyword">if</span> (newX &gt;= <span class="number">0</span> &amp;&amp; newX &lt;= m - <span class="number">1</span> &amp;&amp; newY &gt;= <span class="number">0</span> &amp;&amp; newY &lt;= n - <span class="number">1</span> &amp;&amp; grid[newX][newY] == <span class="number">1</span> &amp;&amp; !canReach[newX][newY]) &#123;</span><br><span class="line">                        canReach[newX][newY] = <span class="literal">true</span>;  <span class="comment">// ç»Ÿä¸€å…¥é˜Ÿæ ‡è®°æœç´¢</span></span><br><span class="line">                        que.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;newX, newY&#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2.å¤šæºBFSå†™æ³•ï¼š</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="type">boolean</span>[][] canReach;  <span class="comment">// canReachè®°å½•grid[i][j]æ˜¯å¦èƒ½åˆ°è¾¾è¾¹ç•Œ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numEnclaves</span><span class="params">(<span class="type">int</span>[][] grid)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å¤šæºBFS:</span></span><br><span class="line"><span class="comment">        æœ‰ä¸€ä¸ªæŠ€å·§ï¼Œè¦è¶Šè¿‡è¾¹ç•Œä¸€å®šè¦ç»è¿‡è¾¹ç•Œï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦æ±‚ä¸­é—´æœ‰å“ªäº›ä¸èƒ½åˆ°è¾¾è¾¹ç•Œçš„ï¼Œåè¿‡æ¥å°±æ˜¯è¦æ±‚å“ªäº›èƒ½åˆ°è¾¾è¾¹ç•Œçš„</span></span><br><span class="line"><span class="comment">        å†åè¿‡æ¥åªéœ€è¦ä»è¾¹ç•Œå¼€å§‹BFSçœ‹çœ‹èƒ½åˆ°è¾¾å“ªäº›é™†åœ°å³å¯ï¼Œå†ç”¨æ€»çš„é™†åœ°æ•°å‡å»èƒ½åˆ°è¾¾è¾¹ç•Œçš„é™†åœ°æ•°å°±æ˜¯ä¸èƒ½åˆ°è¾¾çš„é™†åœ°æ•°</span></span><br><span class="line"><span class="comment">        è¿™æ˜¯å¤šä¸ªæºç‚¹çš„BFSï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå¤šä¸ªèŠ‚ç‚¹åŒæ—¶å…¥é˜Ÿï¼Œç›¸å½“äºå¼€å§‹å°±è¿›è¡Œç¬¬äºŒå±‚çš„BFS</span></span><br><span class="line"><span class="comment">        æ—¶é—´å¤æ‚åº¦:O(N^2)  ç©ºé—´å¤æ‚åº¦:O(N)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> grid.length, n = grid[<span class="number">0</span>].length;</span><br><span class="line">        <span class="type">int</span>[][] dirs = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">        Queue&lt;<span class="type">int</span>[]&gt; que = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// æœç´¢4æ¡è¾¹ç•Œçš„é™†åœ°</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[i][<span class="number">0</span>] == <span class="number">1</span>) &#123;</span><br><span class="line">                grid[i][<span class="number">0</span>] = <span class="number">2</span>; <span class="comment">// è®¿é—®è¿‡ä¸è¾¹ç¼˜è¿é€šçš„é™†åœ°æ ‡è®°ä¸º2</span></span><br><span class="line">                que.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;i, <span class="number">0</span>&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (grid[i][n - <span class="number">1</span>] == <span class="number">1</span>) &#123;</span><br><span class="line">                grid[i][n - <span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line">                que.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;i, n - <span class="number">1</span>&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; n - <span class="number">1</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[<span class="number">0</span>][j] == <span class="number">1</span>) &#123;</span><br><span class="line">                grid[<span class="number">0</span>][j] = <span class="number">2</span>;</span><br><span class="line">                que.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">0</span>, j&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (grid[m - <span class="number">1</span>][j] == <span class="number">1</span>) &#123;</span><br><span class="line">                grid[m - <span class="number">1</span>][j] = <span class="number">2</span>;</span><br><span class="line">                que.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;m - <span class="number">1</span>, j&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (!que.isEmpty()) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> que.size();</span><br><span class="line">            <span class="keyword">while</span> (size-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="type">int</span>[] poll = que.poll();</span><br><span class="line">                <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> poll[<span class="number">0</span>], y = poll[<span class="number">1</span>];</span><br><span class="line">                <span class="comment">// æœç´¢4ä¸ªæ–¹å‘</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span>[] dir : dirs) &#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">newX</span> <span class="operator">=</span> x + dir[<span class="number">0</span>], newY = y + dir[<span class="number">1</span>];</span><br><span class="line">                    <span class="comment">// ä½äºåŒºåŸŸå†…å¹¶ä¸”æ˜¯é™†åœ°å°±å¯ä»¥åˆ°è¾¾ï¼Œä¸”ä¸èƒ½æœå›å¤´è·¯</span></span><br><span class="line">                    <span class="keyword">if</span> (newX &gt;= <span class="number">0</span> &amp;&amp; newX &lt;= m - <span class="number">1</span> &amp;&amp; newY &gt;= <span class="number">0</span> &amp;&amp; newY &lt;= n - <span class="number">1</span> &amp;&amp; grid[newX][newY] == <span class="number">1</span>) &#123;</span><br><span class="line">                        grid[newX][newY] = <span class="number">2</span>;</span><br><span class="line">                        que.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;newX, newY&#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ç»Ÿè®¡ä¸èƒ½åˆ°è¾¾è¾¹ç•Œçš„æ•°ç›®</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (grid[i][j] == <span class="number">1</span>) res++; <span class="comment">// ä¸º1çš„å°±æ˜¯æ— æ³•åˆ°è¾¾è¾¹ç•Œçš„é™†åœ°</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>3.DFSè§£æ³•ï¼š4ms 48.7 MB</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="type">boolean</span>[][] canReach;  <span class="comment">// canReachè®°å½•grid[i][j]æ˜¯å¦èƒ½åˆ°è¾¾è¾¹ç•Œ</span></span><br><span class="line">    <span class="type">int</span>[][] grid;</span><br><span class="line">    <span class="type">int</span> m, n;</span><br><span class="line">    <span class="type">int</span>[][] dirs = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numEnclaves</span><span class="params">(<span class="type">int</span>[][] _grid)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        è®°å¿†åŒ–DFS:</span></span><br><span class="line"><span class="comment">        æœ‰ä¸€ä¸ªæŠ€å·§ï¼Œè¦è¶Šè¿‡è¾¹ç•Œä¸€å®šè¦ç»è¿‡è¾¹ç•Œï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦æ±‚ä¸­é—´æœ‰å“ªäº›ä¸èƒ½åˆ°è¾¾è¾¹ç•Œçš„ï¼Œåè¿‡æ¥å°±æ˜¯è¦æ±‚å“ªäº›èƒ½åˆ°è¾¾è¾¹ç•Œçš„</span></span><br><span class="line"><span class="comment">        å†åè¿‡æ¥åªéœ€è¦ä»è¾¹ç•Œå¼€å§‹DFSçœ‹çœ‹èƒ½åˆ°è¾¾å“ªäº›é™†åœ°å³å¯ï¼Œå†ç”¨æ€»çš„é™†åœ°æ•°å‡å»èƒ½åˆ°è¾¾è¾¹ç•Œçš„é™†åœ°æ•°å°±æ˜¯ä¸èƒ½åˆ°è¾¾çš„é™†åœ°æ•°</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        grid = _grid;</span><br><span class="line">        m = grid.length;</span><br><span class="line">        n = grid[<span class="number">0</span>].length;</span><br><span class="line">        canReach = <span class="keyword">new</span> <span class="title class_">boolean</span>[m][n];</span><br><span class="line">        <span class="comment">// æœç´¢4æ¡è¾¹ç•Œçš„é™†åœ°</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[i][<span class="number">0</span>] == <span class="number">1</span>) dfs(i, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">if</span> (grid[i][n - <span class="number">1</span>] == <span class="number">1</span>) dfs(i, n - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; n - <span class="number">1</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[<span class="number">0</span>][j] == <span class="number">1</span>) dfs(<span class="number">0</span>, j);</span><br><span class="line">            <span class="keyword">if</span> (grid[m - <span class="number">1</span>][j] == <span class="number">1</span>) dfs(m - <span class="number">1</span>, j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ç»Ÿè®¡ä¸èƒ½åˆ°è¾¾è¾¹ç•Œçš„æ•°ç›®</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (grid[i][j] == <span class="number">1</span> &amp;&amp; !canReach[i][j]) res++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// dfs(i,j)æœç´¢ä¸ä¹‹è¿æ¥çš„é™†åœ°å¹¶æ ‡è®°åˆ°canReach</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="comment">// grid[i][j]å¯ä»¥åˆ°è¾¾è¾¹ç•Œè¯´æ˜ä¸ä¹‹è¿é€šçš„å·²ç»æœç´¢è¿‡äº†ï¼Œç»“æŸ</span></span><br><span class="line">        <span class="keyword">if</span> (canReach[i][j]) <span class="keyword">return</span>;</span><br><span class="line">        <span class="comment">// æ ‡è®°ä¸è¾¹ç•Œè¿é€š</span></span><br><span class="line">        canReach[i][j] = <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">// æœç´¢4ä¸ªæ–¹å‘</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span>[] dir : dirs) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">newI</span> <span class="operator">=</span> i + dir[<span class="number">0</span>], newJ = j + dir[<span class="number">1</span>];</span><br><span class="line">            <span class="comment">// ä½äºåŒºåŸŸå†…å¹¶ä¸”æ˜¯é™†åœ°å°±å¯ä»¥åˆ°è¾¾</span></span><br><span class="line">            <span class="keyword">if</span> (newI &gt;= <span class="number">0</span> &amp;&amp; newI &lt;= m - <span class="number">1</span> &amp;&amp; newJ &gt;= <span class="number">0</span> &amp;&amp; newJ &lt;= n - <span class="number">1</span> &amp;&amp; grid[newI][newJ] == <span class="number">1</span>) &#123;</span><br><span class="line">                dfs(newI, newJ);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-1162-åœ°å›¾åˆ†æ"><a href="#2-1162-åœ°å›¾åˆ†æ" class="headerlink" title="2.1162. åœ°å›¾åˆ†æ"></a>2.<a href="https://leetcode.cn/problems/as-far-from-land-as-possible/"><strong>1162. åœ°å›¾åˆ†æ</strong></a></h3><p><strong>å¤šæºBFSå®é™…å°±æ˜¯å•æºBFSçš„ç¬¬äºŒå±‚ï¼Œåœ¨å‰é¢åŠ ä¸Šä¸€ä¸ªè¶…çº§æºç‚¹æŒ‡å‘æœ€åˆå…¥é˜Ÿçš„èŠ‚ç‚¹ï¼Œå°±æ˜¯æ™®é€šçš„å•æºBFS</strong></p><p><strong>å‚è€ƒï¼š</strong><a href="https://leetcode.cn/problems/as-far-from-land-as-possible/solution/zhen-liang-yan-sou-huan-neng-duo-yuan-kan-wan-miao/"> <strong>Êšè‡ªåœ¨é£èŠ±É | å¤šä¸ªæºç‚¹çš„å¹¿æœ</strong></a></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxDistance</span><span class="params">(<span class="type">int</span>[][] grid)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å¤šæºBFSé—®é¢˜(ç›¸å½“äºå•æºBFSä»ç¬¬2å±‚å¼€å§‹):</span></span><br><span class="line"><span class="comment">        è¿™é¢˜æ˜¯æœ€çŸ­è·¯å¾„é—®é¢˜ï¼Œæ±‚æŸä¸ª0åˆ°è¾¾1çš„æœ€çŸ­è·¯å¾„çš„æœ€å¤§å€¼</span></span><br><span class="line"><span class="comment">        æ±‚æœ€çŸ­è·¯å¾„ï¼Œé¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯BFSï¼Œå¯ä»¥æšä¸¾æ¯ä¸ªæ ¼å­0æ±‚å‡ºæ¯ä¸ªæµ·æ´‹åˆ°è¾¾é™†åœ°çš„æœ€è¿‘è·ç¦»ï¼Œå–æœ€å¤§å€¼</span></span><br><span class="line"><span class="comment">        è¿™æ ·åšçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n^4)â‰ˆ1e8 å¿…å®šTLE</span></span><br><span class="line"><span class="comment">        ä¸å¦¨åè¿‡æ¥ï¼Œæˆ‘ä»¬ä»é™†åœ°1å‡ºå‘è¿›è¡Œå¤šæºç‚¹çš„BFS</span></span><br><span class="line"><span class="comment">        æ¯ä¸€åœˆåˆ°è¾¾çš„æµ·æ´‹0éƒ½æ˜¯é™†åœ°åˆ°è¾¾çš„è¯¥æµ·æ´‹çš„æœ€çŸ­è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯è¿™ä¸ªæµ·æ´‹åˆ°è¾¾é™†åœ°çš„æœ€çŸ­è·¯å¾„</span></span><br><span class="line"><span class="comment">        é‚£ä¹ˆéå†åˆ°æœ€åä¸€å±‚å°±æ˜¯é™†åœ°1åˆ°è¾¾æµ·æ´‹0çš„æœ€çŸ­è·¯å¾„æœ€å¤§å€¼</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> grid.length, n = grid[<span class="number">0</span>].length;</span><br><span class="line">        <span class="type">int</span>[][] dirs = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">        Queue&lt;<span class="type">int</span>[]&gt; que = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// æ‰€æœ‰çš„é™†åœ°å…¥é˜Ÿ(ç›¸å½“äºå•æºBFSçš„ç¬¬äºŒå±‚)</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (grid[i][j] == <span class="number">1</span>) &#123;</span><br><span class="line">                    que.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;i, j&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å…¨æ˜¯æµ·æ´‹æˆ–è€…é™†åœ°è¿”å›-1</span></span><br><span class="line">        <span class="keyword">if</span> (que.size() == m * n || que.size() == <span class="number">0</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">dis</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (!que.isEmpty()) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> que.size();</span><br><span class="line">            <span class="keyword">while</span> (size-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="type">int</span>[] poll = que.poll();</span><br><span class="line">                <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> poll[<span class="number">0</span>], y = poll[<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span>[] dir : dirs) &#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">newX</span> <span class="operator">=</span> x + dir[<span class="number">0</span>], newY = y + dir[<span class="number">1</span>];</span><br><span class="line">                    <span class="comment">// grid[newX][newY]åœ¨åŒºåŸŸå†…ä¸”ä¸ºæ²¡æœ‰è¢«è®¿é—®è¿‡çš„æµ·æ´‹</span></span><br><span class="line">                    <span class="keyword">if</span> (newX &gt;= <span class="number">0</span> &amp;&amp; newX &lt;= m - <span class="number">1</span> &amp;&amp; newY &gt;= <span class="number">0</span> &amp;&amp; newY &lt;= n - <span class="number">1</span> &amp;&amp; grid[newX][newY] == <span class="number">0</span>) &#123;</span><br><span class="line">                        grid[newX][newY] = <span class="number">2</span>; <span class="comment">// è®¿é—®è¿‡çš„æµ·æ´‹è®°ä¸º2å°±ä¸ä¼šé‡å¤è®¿é—®</span></span><br><span class="line">                        que.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;newX, newY&#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            dis++;  <span class="comment">// æ¯ä¸€åœˆè·ç¦»+1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dis;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åœ¨çŸ©é˜µä¸­ï¼Œå…³äºBFSå…¥é˜Ÿçš„ç±»å‹ï¼Œå¯ä»¥ä¸ºint[] ç±»å‹çš„[x,y]ï¼Œä¹Ÿå¯ä»¥å°†å…¶åŒ–ä¸ºintç±»å‹åé¢å†è¿›è¡Œè§£æ</strong></p><h3 id="3-1765-åœ°å›¾ä¸­çš„æœ€é«˜ç‚¹"><a href="#3-1765-åœ°å›¾ä¸­çš„æœ€é«˜ç‚¹" class="headerlink" title="3.1765. åœ°å›¾ä¸­çš„æœ€é«˜ç‚¹"></a>3.<a href="https://leetcode.cn/problems/map-of-highest-peak/"><strong>1765. åœ°å›¾ä¸­çš„æœ€é«˜ç‚¹</strong></a></h3><p><strong>1.å¸¸è§„å†™æ³•ï¼š44 ms  136.9 MB</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[][] highestPeak(<span class="type">int</span>[][] isWater) &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å¤šæºBFSï¼š</span></span><br><span class="line"><span class="comment">        çŸ©é˜µå°±æ˜¯4æ–¹å‘çš„æ— å‘å›¾</span></span><br><span class="line"><span class="comment">        è¿™é¢˜è¦æ±‚çš„æ˜¯ä»æŸä¸ªæ°´åŸŸ1å‡ºå‘åçš„BFSçš„å±‚æ•°èƒ½è¾¾åˆ°çš„æ–¹æ¡ˆå€¼å¯¹åº”çš„çŸ©é˜µï¼Œä¸”ä»»æ„ç›¸é‚»çš„æ ¼å­é«˜åº¦å·® è‡³å¤š ä¸º 1</span></span><br><span class="line"><span class="comment">        å¤šæºçš„BFSè§£æ³•å°±æ˜¯é¦–å…ˆè®©å¯ä»¥å…¥é˜Ÿçš„æ°´åŸŸ1å…¨éƒ¨ä¸€æ¬¡å…¥é˜Ÿï¼Œé‡åˆ°ä¸‹ä¸€ä¸ªæ ¼å­ç›´æ¥ç­‰äºæœ¬æ ¼å­çš„å€¼+1</span></span><br><span class="line"><span class="comment">        éå†å®Œä¹‹åä¼šå‡ºç°æœ€å¤§å€¼ï¼Œæœ€åçš„çŸ©é˜µå°±æ˜¯ç­”æ¡ˆ</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> isWater.length, n = isWater[<span class="number">0</span>].length;</span><br><span class="line">        <span class="type">int</span>[][] dirs = &#123;&#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;&#125;;</span><br><span class="line">        Queue&lt;<span class="type">int</span>[]&gt; que = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// è¿™é‡Œè§„å®šä¸ºæ°´åŸŸä¸º0ï¼Œæ²¡æœ‰è®¿é—®çš„åœŸåœ°ä¸º-1</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (isWater[i][j] == <span class="number">1</span>) &#123;</span><br><span class="line">                    isWater[i][j] = <span class="number">0</span>;</span><br><span class="line">                    que.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;i, j&#125;);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    isWater[i][j] = -<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (!que.isEmpty()) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> que.size();</span><br><span class="line">            <span class="keyword">while</span> (size-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="type">int</span>[] poll = que.poll();</span><br><span class="line">                <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> poll[<span class="number">0</span>], y = poll[<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span>[] dir : dirs) &#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">newX</span> <span class="operator">=</span> x + dir[<span class="number">0</span>], newY = y + dir[<span class="number">1</span>];</span><br><span class="line">                    <span class="comment">// åœ¨åŒºåŸŸå†…ä¸”æ²¡æœ‰è¢«è®¿é—®è¿‡çš„åœŸåœ°æ‰èƒ½BFS</span></span><br><span class="line">                    <span class="keyword">if</span> (newX &gt;= <span class="number">0</span> &amp;&amp; newX &lt;= m - <span class="number">1</span> &amp;&amp; newY &gt;= <span class="number">0</span> &amp;&amp; newY &lt;= n - <span class="number">1</span> &amp;&amp; isWater[newX][newY] == -<span class="number">1</span>) &#123;</span><br><span class="line">                        isWater[newX][newY] = isWater[x][y] + <span class="number">1</span>;</span><br><span class="line">                        que.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;newX, newY&#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> isWater;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åŒ–ä¸ºintç±»å‹åï¼š45 ms 158.2 MB</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[][] highestPeak(<span class="type">int</span>[][] isWater) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> isWater.length, n = isWater[<span class="number">0</span>].length;</span><br><span class="line">        <span class="type">int</span>[][] dirs = &#123;&#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;&#125;;</span><br><span class="line">        Queue&lt;Integer&gt; que = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();    <span class="comment">// ç”¨intä»£æ›¿[x,y]æ•°ç»„</span></span><br><span class="line">        <span class="comment">// è¿™é‡Œè§„å®šä¸ºæ°´åŸŸä¸º0ï¼Œæ²¡æœ‰è®¿é—®çš„åœŸåœ°ä¸º-1</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (isWater[i][j] == <span class="number">1</span>) &#123;</span><br><span class="line">                    isWater[i][j] = <span class="number">0</span>;</span><br><span class="line">                    que.add(i * n + j);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    isWater[i][j] = -<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (!que.isEmpty()) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> que.size();</span><br><span class="line">            <span class="keyword">while</span> (size-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">poll</span> <span class="operator">=</span> que.poll();</span><br><span class="line">                <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> poll / n, y = poll % n; <span class="comment">// è§£æå‡ºxä¸y</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span>[] dir : dirs) &#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">newX</span> <span class="operator">=</span> x + dir[<span class="number">0</span>], newY = y + dir[<span class="number">1</span>];</span><br><span class="line">                    <span class="comment">// åœ¨åŒºåŸŸå†…ä¸”æ²¡æœ‰è¢«è®¿é—®è¿‡çš„åœŸåœ°æ‰èƒ½BFS</span></span><br><span class="line">                    <span class="keyword">if</span> (newX &gt;= <span class="number">0</span> &amp;&amp; newX &lt;= m - <span class="number">1</span> &amp;&amp; newY &gt;= <span class="number">0</span> &amp;&amp; newY &lt;= n - <span class="number">1</span> &amp;&amp; isWater[newX][newY] == -<span class="number">1</span>) &#123;</span><br><span class="line">                        isWater[newX][newY] = isWater[x][y] + <span class="number">1</span>;</span><br><span class="line">                        que.add(newX * n + newY);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> isWater;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">å¤šæºBFSå®é™…å°±æ˜¯å•æºBFSçš„ç¬¬äºŒå±‚ï¼Œåœ¨å‰é¢åŠ ä¸Šä¸€ä¸ªè¶…çº§æºç‚¹æŒ‡å‘æœ€åˆå…¥é˜Ÿçš„èŠ‚ç‚¹ï¼Œå°±æ˜¯æ™®é€šçš„å•æºBFSï¼Œæœ¬ç¯‡æ€»ç»“æœ‰å…³äºå¤šæºBFSæœ‰å…³é—®é¢˜åŠæ³¨æ„ç‚¹</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fomal.cc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="å¤šæºBFS" scheme="https://www.fomal.cc/tags/%E5%A4%9A%E6%BA%90BFS/"/>
    
    <category term="BFS" scheme="https://www.fomal.cc/tags/BFS/"/>
    
  </entry>
  
  <entry>
    <title>å•è°ƒæ ˆæ€»ç»“</title>
    <link href="https://www.fomal.cc/posts/e88c5782.html"/>
    <id>https://www.fomal.cc/posts/e88c5782.html</id>
    <published>2022-08-11T12:58:12.000Z</published>
    <updated>2022-08-11T12:58:12.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-å•è°ƒæ ˆå¯ä»¥è§£å†³çš„é—®é¢˜ï¼š"><a href="#1-å•è°ƒæ ˆå¯ä»¥è§£å†³çš„é—®é¢˜ï¼š" class="headerlink" title="1.å•è°ƒæ ˆå¯ä»¥è§£å†³çš„é—®é¢˜ï¼š"></a>1.å•è°ƒæ ˆå¯ä»¥è§£å†³çš„é—®é¢˜ï¼š</h3><p>æˆ‘ä»¬å¸¸å¸¸é‡åˆ°è¦åœ¨O(N)çš„æ—¶é—´å¤æ‚åº¦å†…æ±‚å‡ºå½“å‰å¯¹è±¡ nums[i] å·¦è¾¹æˆ–è€…å³è¾¹é¦–ä¸ªæ¯”è‡ªå·±å¤§æˆ–è€…å°çš„æƒ…å†µ</p><p>è¿™ç§é—®é¢˜é€šå¸¸ç§°ä¸º<strong>Next Greateré—®é¢˜</strong></p><p>å°±ç›¸å½“äºä½ æ˜¯ä¸€ä¸ªäººï¼Œå¾€ä¸¤è¾¹çœ‹é¦–å…ˆè¢«å“ªä¸ªé«˜ä¸ªå­æŒ¡ä½ï¼Œè¿™ä¸ªé«˜ä¸ªå­æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š</p><p>1.èº«é«˜æ¯”ä½ é«˜ï¼›2.åœ¨æŸä¸€æ–¹å‘ä¸­æ¯”ä½ é«˜çš„äººä¸­è·ç¦»ä½ æœ€è¿‘</p><p>è¿™ç§æ¡ä»¶å¯èƒ½æ¯”è¾ƒæ˜æ˜¾ï¼Œ<a href="https://leetcode.cn/problems/daily-temperatures/">739. æ¯æ—¥æ¸©åº¦</a>  <a href="https://leetcode.cn/problems/next-greater-element-i/">496. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  I</a> è¿™ç±»å‹è¦ä½ ç›´æ¥æ±‚ä¸‹ä¸€ä¸ªæ›´å¤§æ›´å°çš„å…ƒç´ æ˜¯ä»€ä¹ˆ</p><p>ä¹Ÿæœ‰å¯èƒ½æ˜¯æ¯”è¾ƒéšç§˜çš„ï¼ŒæŠ½è±¡æˆ<strong>æ³¢åŠèŒƒå›´</strong>çš„ï¼Œè¿™å±äºå•è°ƒæ ˆä¸­çš„å›°éš¾é¢˜äº† <a href="https://leetcode.cn/problems/trapping-rain-water/">42. æ¥é›¨æ°´</a>  <a href="https://leetcode.cn/problems/subarray-with-elements-greater-than-varying-threshold/">6119. å…ƒç´ å€¼å¤§äºå˜åŒ–é˜ˆå€¼çš„å­æ•°ç»„</a></p><p>æ±‚æŸä¸ªå…ƒç´ çš„å½±å“èŒƒå›´ï¼Œé€šå¸¸éƒ½æ˜¯æ‰¾åˆ°ä¸¤è¾¹é¦–ä¸ªæ¯”è‡ªå·±å°çš„æˆ–å¤§çš„ left ä¸ rightï¼Œç„¶åè¿™ä¸ª[left,right]é€šå¸¸å°±æ˜¯å½±å“åŒºé—´çš„</p><p>ä¾‹å¦‚[left,right]å¯ä»¥æ¥ä½é«˜åº¦ä¸ºmax-nums[i]çš„é›¨æ°´ï¼Œå¯ä»¥ç»„æˆæŸæŸåŒºé—´ç­‰â€¦</p><h3 id="2-å•è°ƒæ ˆçš„ä¸¤ç§å†™æ³•ï¼š"><a href="#2-å•è°ƒæ ˆçš„ä¸¤ç§å†™æ³•ï¼š" class="headerlink" title="2.å•è°ƒæ ˆçš„ä¸¤ç§å†™æ³•ï¼š"></a>2.å•è°ƒæ ˆçš„ä¸¤ç§å†™æ³•ï¼š</h3><p>ä»¥<a href="https://leetcode.cn/problems/daily-temperatures/">739. æ¯æ—¥æ¸©åº¦</a> ä¸ºä¾‹è¿›è¡Œè¯´æ˜ï¼Œä¸€èˆ¬æ¥è¯´æœ‰ä¸¤ç§å†™æ³•ï¼š</p><p>1.<strong>Next Greaterå…ƒç´ </strong>åœ¨æ ˆä¸­çš„å†™æ³•ï¼ˆ25ms/51.1MBï¼‰</p><p>ä¸¾ä¸ªğŸŒ°ï¼šç°åœ¨è¦å¯»æ‰¾çš„nums[i]å·¦è¾¹é¦–ä¸ªä¸¥æ ¼å°äºnums[i]çš„å…ƒç´ ï¼Œst = [1, 2, 3, 6] </p><p>è‹¥nums[i]=7ï¼Œç›´æ¥å–æ ˆé¡¶çš„6ä½œä¸ºå·¦è¾¹é¦–ä¸ªä¸¥æ ¼å°äºnums[i]çš„å…ƒç´ </p><p>è‹¥nums[i]=3ï¼Œè¦å°†æ ˆé¡¶ä¸­&gt;=nums[i]çš„å…ƒç´ å…¨éƒ¨å¼¹å‡ºï¼Œç›´è‡³æ ˆé¡¶ä¸¥æ ¼å°äºnums[i] æ­¤æ—¶st = [1, 2]ï¼Œé‚£ä¹ˆ2å°±æ˜¯æ‰€æ±‚</p><p><strong>è¦ç‚¹ï¼š</strong> å¦‚æœæ‰¾nums[i] å³è¾¹çš„å…ƒç´ ï¼Œé‚£ä¹ˆä»å³è¾¹éå†èµ·ä»¥ä¾¿äº Next Greaterå…ƒç´ å…ˆå…¥æ ˆï¼›</p><p>åä¹‹ï¼Œå¦‚æœæ‰¾nums[i] å·¦è¾¹çš„å…ƒç´ ï¼Œé‚£ä¹ˆä»å·¦è¾¹éå†èµ·ä»¥ä¾¿äº Next Greaterå…ƒç´ å…ˆå…¥æ ˆï¼›</p><p>å½“å‰éå†åˆ°çš„nums[i]å°±æ˜¯åŸºå‡†å…ƒç´ ï¼Œå¦‚æœæ‰¾å³è¾¹é¦–ä¸ªå¤§äºnums[i]çš„å°±è¦ä¸€ç›´ä¿æŒnums[i]æ˜¯æœ€å·¦è¾¹çš„ä¸”æ˜¯æœ€å°çš„ï¼Œä¸ç¬¦åˆæ¡ä»¶çš„æ ˆé¡¶å…ƒç´ ï¼ˆ&lt;=nums[i]çš„ï¼‰å°±å‡ºæ ˆï¼Œç›´åˆ°ç¬¦åˆæ¡ä»¶å°±æ‰¾åˆ°äº†ç­”æ¡ˆã€‚</p><p><img src="../images/p8.jpg" alt="p8"></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] dailyTemperatures(<span class="type">int</span>[] tem) &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å†™æ³•1:Next Greaterå…ƒç´ åœ¨æ ˆä¸­çš„å†™æ³•</span></span><br><span class="line"><span class="comment">        æˆ‘ä»¬è¦æ‰¾nums[i]å³è¾¹é¦–ä¸ªæ¯”è‡ªèº«ä¸¥æ ¼å¤§çš„æ¸©åº¦ï¼Œå› æ­¤è¦ä»å³è¾¹èµ·éå†æ¸©åº¦</span></span><br><span class="line"><span class="comment">        å¹¶ä¸”ç»´æŠ¤ä¸€ä¸ªä¸¥æ ¼å•è°ƒé€’å¢çš„æ ˆï¼ˆä»å·¦å¾€å³çœ‹ï¼‰</span></span><br><span class="line"><span class="comment">        å•è°ƒæ‰¾çš„æ“ä½œæœ‰å¦‚ä¸‹ä¸¤ç§é€‰æ‹©ï¼š</span></span><br><span class="line"><span class="comment">        1.tem[i]&lt;tem[æ ˆé¡¶] è¯´æ˜æ‰¾åˆ°tem[i]å³è¾¹é¦–ä¸ªæ¯”è‡ªèº«å¤§çš„æ¸©åº¦ï¼Œç›´æ¥è®°å½•ï¼Œæœ€åtem[i]ä¹Ÿè¦å…¥æ ˆ</span></span><br><span class="line"><span class="comment">        2.tem[i]&gt;=tem[æ ˆé¡¶] è¯´æ˜æ ˆé¡¶ä¸æ˜¯ç¬¦åˆè¦æ±‚çš„å…ƒç´ ï¼Œé€ä¸ªå¼¹å‡ºç›´è‡³tem[i]&lt;tem[æ ˆé¡¶]ï¼Œè®°å½•ç»“æœï¼Œæœ€åtem[i]ä¹Ÿè¦å…¥æ ˆ</span></span><br><span class="line"><span class="comment">        ç‰¹æ®Šæƒ…å†µï¼šæ ˆä¸ºç©ºç›´æ¥å…¥æ ˆ</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> tem.length;</span><br><span class="line">        <span class="type">int</span>[] res = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        <span class="comment">// å•è°ƒæ ˆå­˜å‚¨ç´¢å¼•å³å¯</span></span><br><span class="line">        Deque&lt;Integer&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="comment">// tem[i]&gt;=tem[æ ˆé¡¶] å¼¹å‡ºæ ˆé¡¶å…ƒç´ ç›´è‡³tem[i]&lt;tem[æ ˆé¡¶]</span></span><br><span class="line">            <span class="keyword">while</span> (!stack.isEmpty() &amp;&amp; tem[i] &gt;= tem[stack.peekFirst()]) stack.pollFirst();</span><br><span class="line">            <span class="comment">// è®°å½•ç»“æœ:æ ˆä¸ºç©ºè¯´æ˜tem[i]åé¢æ²¡æœ‰æ¯”tem[i]æ¸©åº¦é«˜çš„ï¼Œè®°å½•0ï¼›å¦åˆ™è®°å½•å¤©æ•°å·®å€¼</span></span><br><span class="line">            res[i] = stack.isEmpty() ? <span class="number">0</span> : stack.peekFirst() - i;</span><br><span class="line">            <span class="comment">// tem[i]å…¥æ ˆ</span></span><br><span class="line">            stack.addFirst(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.<strong>åŸºå‡†å…ƒç´ nums[i]</strong> åœ¨æ ˆä¸­çš„å†™æ³•(23ms/56.8MB)</p><p>ä¸¾ä¸ªğŸŒ°ï¼šç°åœ¨è¦å¯»æ‰¾çš„nums[i]å³è¾¹é¦–ä¸ªä¸¥æ ¼å¤§äºnums[i]çš„å…ƒç´ ï¼Œst = [8, 6, 4, 3] </p><p>ç°åœ¨æˆ‘ä»¬æ ˆä¸­çš„å…ƒç´ è¿˜è¦æ‰¾è‡ªå·±å³è¾¹é¦–ä¸ªå¤§äºè‡ªå·±çš„å…ƒç´ å‘¢ï¼Œå—·å—·å¾…å“º~~~</p><p>è‹¥nums[i]=2ï¼Œæ¯”æ ˆé¡¶è¿˜å°ï¼Œç›´æ¥å…¥æ ˆå¾—äº†ï¼Œæ‰€æœ‰äººéƒ½è¿˜æ²¡æ‰¾åˆ°æ¯”è‡ªå·±å°çš„å…ƒç´ ~~~æ­¤æ—¶ st = [8, 6, 4, 3, 2]</p><p>æ­¤æ—¶æ¥äº†nums[i]=4ï¼Œæ ˆä¸Šæ–¹çš„2ä¸3æ˜¾ç„¶æ˜¯æ‰¾åˆ°äº†å³è¾¹é¦–ä¸ªæ¯”è‡ªå·±ä¸¥æ ¼å¤§çš„å…ƒç´ ï¼Œå‡ºæ ˆå¹¶è®°å½•</p><p>ä½†æ˜¯æ ˆä¸­çš„4è¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°æ¯”è‡ªå·±ä¸¥æ ¼å¤§çš„ï¼Œå› æ­¤åªèƒ½æœŸå¾…æ¥ä¸‹æ¥æœ‰æ²¡æœ‰æ›´å¤§çš„æ•°å­—äº†~~~</p><p>æ­¤æ—¶st = [8, 6, 4, 4] è‹¥æ­¤æ—¶å†æ¥ä¸ª5é‚£ä¹ˆè¿™ä¸¤ä¸ªå¯æ€œçš„4å°±æœ‰æœºä¼šå‡ºæ ˆå¹¶è®°å½•äº†~~~</p><p><strong>è¦ç‚¹ï¼š</strong> å¦‚æœæ‰¾nums[i] å³è¾¹çš„å…ƒç´ ï¼Œé‚£ä¹ˆä»å·¦è¾¹éå†èµ·ä»¥ä¾¿äºåŸºå‡†å…ƒç´ nuns[i]å…ˆå…¥æ ˆï¼›</p><p>åä¹‹ï¼Œå¦‚æœæ‰¾nums[i] å·¦è¾¹çš„å…ƒç´ ï¼Œé‚£ä¹ˆä»å³éå†èµ·ä»¥ä¾¿äºåŸºå‡†å…ƒç´ nums[i]å…ˆå…¥æ ˆï¼›</p><p>å½“å‰éå†åˆ°çš„nums[i]å°±æ˜¯åŸºå‡†å…ƒç´ ï¼Œä¸”ä¸€ç›´è¦ä¿æŒæ ˆé¡¶æ˜¯æœ€å°çš„ï¼Œä¸€æ—¦æ–°æ¥çš„nums[i]ä¸¥æ ¼å¤§äºæ ˆé¡¶çš„å°å¯æ€œï¼Œå°±ä»£è¡¨æ ˆé¡¶çš„å°å¯æ€œå¯ä»¥å‡ºæ ˆè®°å½•äº†</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] dailyTemperatures(<span class="type">int</span>[] tem) &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    å†™æ³•2:åŸºå‡†å…ƒç´ nums[i]åœ¨æ ˆä¸­çš„å†™æ³•</span></span><br><span class="line"><span class="comment">    æˆ‘ä»¬è¦æ‰¾nums[i]å³è¾¹é¦–ä¸ªæ¯”è‡ªèº«ä¸¥æ ¼å¤§çš„æ¸©åº¦ï¼Œå› æ­¤è¦ä»å·¦èµ·éå†æ¸©åº¦ä»¥ä¾¿äºåŸºå‡†å…ƒç´ å…¥æ ˆ</span></span><br><span class="line"><span class="comment">    ç»´æŠ¤ä¸€ä¸ªå•è°ƒé€’å‡æ ˆï¼ˆä»å·¦å¾€å³çœ‹ï¼‰ ä¸€æ—¦æ ˆé¡¶å°å¯çˆ±é‡åˆ°æ¯”è‡ªå·±å¤§çš„å°±å†²å‡ºæ¥å¹¶è®°å½•</span></span><br><span class="line"><span class="comment">    1.tem[i]&lt;=tem[æ ˆé¡¶] è¯´æ˜æ ˆé¡¶çš„å°å¯çˆ±éƒ½è¿˜æ²¡æ‰¾åˆ°ä¸‹ä¸€ä¸ªæ¯”è‡ªå·±ä¸¥æ ¼å¤§çš„å…ƒç´ ï¼Œtem[i]ç›´æ¥å…¥æ ˆå½“ä¸‹ä¸€ä¸ªå°å¯çˆ±</span></span><br><span class="line"><span class="comment">    2.tem[i]&gt;tem[æ ˆé¡¶] è¯´æ˜æ ˆé¡¶é‚£ç¾¤å°å¯çˆ±å·²ç»æ‰¾åˆ°ä¸‹ä¸€ä¸ªæ¯”è‡ªå·±ä¸¥æ ¼å¤§çš„å…ƒç´ ï¼Œå‡ºæ ˆå¹¶è®°å½•ï¼Œæœ€ååˆ«å¿˜äº†tem[i]ä¹Ÿè¦å…¥æ ˆæ‰¾è‡ªå·±çš„ä¸‹ä¸€ä¸ªæ¯”è‡ªèº«å¤§çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">    ç‰¹æ®Šæƒ…å†µï¼šæ ˆä¸ºç©ºç›´æ¥å…¥æ ˆå³å¯ï¼Œæ ˆé¡¶æ²¡æœ‰äººè¦æ‰¾ä¸‹ä¸€ä¸ªæ›´å¤§çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> tem.length;</span><br><span class="line">    <span class="type">int</span>[] res = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    <span class="comment">// å•è°ƒæ ˆå­˜å‚¨ç´¢å¼•å³å¯</span></span><br><span class="line">    Deque&lt;Integer&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="comment">// å½“æ ˆé¡¶å°å¯çˆ±é‡åˆ°æ¯”è‡ªå·±å¤§çš„tem[i]ï¼Œcå‡ºæ ˆå¹¶è®°å½•åtem[i]å…¥æ ˆ</span></span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty() &amp;&amp; tem[i] &gt; tem[stack.peekFirst()]) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">poll</span> <span class="operator">=</span> stack.pollFirst();</span><br><span class="line">            res[poll] = i - poll;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦åˆ™ç›´æ¥å…¥æ ˆ</span></span><br><span class="line">        stack.addFirst(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±è¿è¡Œç»“æœå¯çŸ¥ä¸¤ç§å†™æ³•æ—¶é—´æ¶ˆè€—ä¸ç©ºé—´æ¶ˆè€—æ¥è¿‘ï¼Œä¸ªäººæ¯”è¾ƒæ¨è<strong>å†™æ³•1</strong></p><h3 id="3-APIçš„é€‰ç”¨ä¹ æƒ¯ï¼š"><a href="#3-APIçš„é€‰ç”¨ä¹ æƒ¯ï¼š" class="headerlink" title="3.APIçš„é€‰ç”¨ä¹ æƒ¯ï¼š"></a>3.APIçš„é€‰ç”¨ä¹ æƒ¯ï¼š</h3><p>ç›®å‰æ¯”è¾ƒæ¨èä»¥ä¸‹ä¸¤ç§ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å†™æ³•1</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">Deque&lt;Integer&gt; st = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">st.push(i);    <span class="comment">// å…ƒç´ å…¥æ ˆ</span></span><br><span class="line">st.peek();    <span class="comment">// æŸ¥çœ‹æ ˆé¡¶å…ƒç´ </span></span><br><span class="line">st.pop();    <span class="comment">// å¼¹å‡ºæ ˆé¡¶å…ƒç´ </span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å†™æ³•2</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">Deque&lt;Integer&gt; st = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">st.addFirst(i);    <span class="comment">// å…ƒç´ å…¥æ ˆ</span></span><br><span class="line">st.peekFirst();    <span class="comment">// æŸ¥çœ‹æ ˆé¡¶å…ƒç´ </span></span><br><span class="line">st.pollFirst();    <span class="comment">// å¼¹å‡ºæ ˆé¡¶å…ƒç´ </span></span><br></pre></td></tr></table></figure><h3 id="4-å•è°ƒæ ˆä¸èŒƒå›´ç®¡è¾–é—®é¢˜ï¼ˆHardï¼‰"><a href="#4-å•è°ƒæ ˆä¸èŒƒå›´ç®¡è¾–é—®é¢˜ï¼ˆHardï¼‰" class="headerlink" title="4.å•è°ƒæ ˆä¸èŒƒå›´ç®¡è¾–é—®é¢˜ï¼ˆHardï¼‰"></a>4.å•è°ƒæ ˆä¸èŒƒå›´ç®¡è¾–é—®é¢˜ï¼ˆHardï¼‰</h3><p><a href="https://leetcode.cn/problems/sum-of-subarray-ranges/"><strong>2104. å­æ•°ç»„èŒƒå›´å’Œ</strong></a></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] nums;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">long</span> <span class="title function_">subArrayRanges</span><span class="params">(<span class="type">int</span>[] _nums)</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    æ–¹æ³•2ï¼šå•è°ƒæ ˆ</span></span><br><span class="line"><span class="comment">    æˆ‘ä»¬è¦æ‰¾nums[i]ä¸­æ‰€æœ‰çš„å­æ•°ç»„çš„max-minçš„å’Œï¼Œé‚£ä¹ˆæˆ‘ä»¬ç½—åˆ—å‡ºæ‰€æœ‰å­æ•°ç»„ï¼Œå…¶æœ€å¤§å€¼å’Œæœ€å°å€¼å¿…å®šå‡ºè‡ªäºnums[i]å…¶ä¸­æŸä¸€ä¸ª</span></span><br><span class="line"><span class="comment">    æ¢ä¸€ä¸ªè§’åº¦ï¼Œæˆ‘ä»¬å‡è®¾nums[i]ä½œä¸ºmaxç®¡è¾–çš„å­æ•°ç»„ä¸ªæ•°ä¸ºk1ï¼Œæœ€ä¸ºminç®¡è¾–çš„å­æ•°ç»„ä¸ªæ•°ä¸ºk2ï¼Œé‚£ä¹ˆnums[i]*(k2-k1)å°±æ˜¯nums[i]è¿™ä¸ªæ•°å­—è´¡çŒ®çš„èŒƒå›´å’Œ</span></span><br><span class="line"><span class="comment">    æˆ‘ä»¬æ€æ ·çŸ¥é“æŸä¸ªnums[i]çš„ç®¡è¾–èŒƒå›´ï¼Ÿå¾ˆæ˜¾ç„¶è¦æ‰¾åˆ°nums[i]åœ¨åŒ…å«è‡ªèº«çš„å“ªä¸ªèŒƒå›´å†…æ˜¯â€œè€å¤§â€</span></span><br><span class="line"><span class="comment">    ä¾‹å¦‚ä½œä¸ºmaxå°±è¦çŸ¥é“è‡ªå·±å·¦å³ä¸¤è¾¹é¦–ä¸ªæ¯”è‡ªå·±å¤§çš„æ•°å­—ï¼Œåœ¨è¿™ä¸¤ä¸ªæ•°å­—ä¹‹é—´nums[i]å°±æ˜¯è€å¤§</span></span><br><span class="line"><span class="comment">    è¿™ç§æƒ…å†µæ˜¾ç„¶å°±è¦ç”¨åˆ°å•è°ƒæ‰¾æ¥æŸ¥æ‰¾è‡ªå·±çš„ç®¡è¾–èŒƒå›´</span></span><br><span class="line"><span class="comment">    ä»¥æ±‚æœ€å¤§å€¼ä¸ºä¾‹è¿›è¡Œè¯´æ˜ï¼Œæˆ‘ä»¬è¦æ±‚è‡ªå·±å·¦å³ä¸¤è¾¹æ¯”è‡ªå·±å¤§çš„æ•°å­—ï¼Œå…ˆä»¥å·¦è¾¹ä¸ºä¾‹è¿›è¡Œè¯´æ˜</span></span><br><span class="line"><span class="comment">    åœ¨æ ˆä¸­ä»å·¦åˆ°å³ç»´æŠ¤ä¸€ä¸ªå•è°ƒé€’å‡æ ˆï¼Œä¸€æ—¦é‡åˆ°nums[i]&lt;nums[æ ˆé¡¶]å°±è¯´æ˜nums[i]æ‰¾åˆ°äº†æ¯”è‡ªå·±å¤§çš„æ•°å­—ä½ç½®</span></span><br><span class="line"><span class="comment">    æ‰¾åˆ°nums[i]å·¦å³ä¸¤è¾¹æ¯”è‡ªå·±å¤§çš„æ•°å­—ä½ç½®ä¹‹åï¼Œä¾‹å¦‚ nums = [4,-2,-3,4,1] è®¡ç®—å¾—idx=3çš„å…ƒç´ èŒƒå›´ä¸º[-1,5]</span></span><br><span class="line"><span class="comment">    è¿™é‡Œæ˜¯ä¸‹ä¸€ä¸ªæ¯”è‡ªå·±å¤§çš„æ•°å­—èŒƒå›´ï¼Œå› æ­¤åŒ…å«idx=3çš„å­æ•°ç»„ä¸ªæ•°ä¸ºï¼š(3-(-1))*(5-3)=8 å·¦è¾¹4ä¸ª:3  2,3  1,2,3  0,1,2,3</span></span><br><span class="line"><span class="comment">    å³è¾¹2ä¸ª:âˆ…  4 æ¢ç®—åˆ°ä¸€èˆ¬æƒ…å†µå°±æ˜¯ (idx-left)*(right-idx)</span></span><br><span class="line"><span class="comment">    æ³¨æ„ç‚¹ï¼šnums = [4,-2,-3,4,1] è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬ä¼šæ±‚å¾—ç¬¬ä¸€ä¸ª4çš„èŒƒå›´ä¸ºï¼š[0,4] åŒç†ç¬¬äºŒä¸ªèŒƒå›´ä¹Ÿä¸ºï¼š[0,4]</span></span><br><span class="line"><span class="comment">    è¿™ä¸¤ç§æƒ…å†µä¼šé‡å¤è®¡ç®—ç¬¬ä¸€ä¸ª4ä¸ç¬¬äºŒä¸ª4å…±å­˜çš„æƒ…å†µ</span></span><br><span class="line"><span class="comment">    å› æ­¤æˆ‘ä»¬åœ¨å•è°ƒæ ˆè®¡ç®—çš„æ—¶å€™ï¼Œçº¦å®šå·¦è¾¹æ‰¾æ¯”è‡ªå·±ä¸¥æ ¼å¤§(å°)çš„é¦–ä¸ªæ•°å­—ï¼Œå³è¾¹æ‰¾å¤§äºç­‰äº(å°äºç­‰äº)è‡ªå·±çš„é¦–ä¸ªæ•°å­—</span></span><br><span class="line"><span class="comment">    æ—¶é—´å¤æ‚åº¦:O(N) ç©ºé—´å¤æ‚åº¦:O(N)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    nums = _nums;</span><br><span class="line">    n = nums.length;</span><br><span class="line">    <span class="type">long</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// max[i]è¡¨ç¤ºnums[i]ä½œä¸ºæœ€å¤§å€¼çš„å­æ•°ç»„ä¸ªæ•°ï¼Œmin[i]è¡¨ç¤ºnums[i]ä½œä¸ºæœ€å°å€¼çš„å­æ•°ç»„ä¸ªæ•°</span></span><br><span class="line">    <span class="type">int</span>[] max = getCnt(<span class="literal">true</span>), min = getCnt(<span class="literal">false</span>);</span><br><span class="line">    <span class="comment">// è®¡ç®—æ‰€æœ‰å­æ•°ç»„èŒƒå›´å’Œ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        res += (<span class="type">long</span>) (max[i] - min[i]) * nums[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// getCnt(true)è¡¨ç¤ºè·å–nums[i]æœ€å¤§å€¼çš„å­æ•°ç»„ä¸ªæ•°ï¼Œåä¹‹å°±æ˜¯è·å–nums[i]æœ€å¤§å€¼çš„å­æ•°ç»„ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span>[] getCnt(<span class="type">boolean</span> isMax) &#123;</span><br><span class="line">    <span class="comment">// ans[i]è¡¨ç¤ºè¦è¿”å›çš„æ•°æ®</span></span><br><span class="line">    <span class="type">int</span>[] ans = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    <span class="comment">// left[i]è¡¨ç¤ºnums[i]å·¦è¾¹é¦–ä¸ªä¸¥æ ¼å¤§äº(å°äº)è‡ªèº«çš„æ•°å­—ç´¢å¼•</span></span><br><span class="line">    <span class="comment">// right[i]è¡¨ç¤ºnums[i]å·¦è¾¹é¦–ä¸ªéä¸¥æ ¼å¤§äº(å°äº)è‡ªèº«çš„æ•°å­—ç´¢å¼•</span></span><br><span class="line">    <span class="type">int</span>[] left = <span class="keyword">new</span> <span class="title class_">int</span>[n], right = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    <span class="comment">// åˆ©ç”¨å•è°ƒæ ˆæŸ¥æ‰¾ç®¡è¾–èŒƒå›´</span></span><br><span class="line">    Deque&lt;Integer&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty() &amp;&amp; (isMax ? nums[i] &gt;= nums[stack.peekFirst()] : nums[i] &lt;= nums[stack.peekFirst()])) stack.pollFirst();</span><br><span class="line">        left[i] = stack.isEmpty() ? -<span class="number">1</span> : stack.peekFirst();</span><br><span class="line">        stack.addFirst(i);</span><br><span class="line">    &#125;</span><br><span class="line">    stack.clear();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty() &amp;&amp; (isMax ? nums[i] &gt; nums[stack.peekFirst()] : nums[i] &lt; nums[stack.peekFirst()])) stack.pollFirst();</span><br><span class="line">        right[i] = stack.isEmpty() ? n : stack.peekFirst();</span><br><span class="line">        stack.addFirst(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è®¡ç®—ç®¡è¾–èŒƒå›´å†…å­æ•°ç»„ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        ans[i] = (i - left[i]) * (right[i] - i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/subarray-with-elements-greater-than-varying-threshold/"><strong>2334. å…ƒç´ å€¼å¤§äºå˜åŒ–é˜ˆå€¼çš„å­æ•°ç»„</strong></a></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">validSubarraySize</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> threshold)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å•è°ƒæ ˆçš„åº”ç”¨:</span></span><br><span class="line"><span class="comment">        ä¸å¦¨æšä¸¾nums[i]å¹¶å‡è®¾æŸåŒ…å«nums[i]çš„å­æ®µæ˜¯é•¿åº¦ä¸ºkçš„æŸæ®µä¸­æœ€å°çš„æ•°å­—</span></span><br><span class="line"><span class="comment">        åœ¨è¯¥æ®µä¸­å…¶ä½™æ•°å­—éƒ½å¤§äºnums[i]ï¼Œåªè¦nums[i]&gt;threshold/kï¼Œé‚£ä¹ˆæ®µå†…çš„æ‰€æœ‰å…ƒç´ å‡å¤§äºthreshold/k</span></span><br><span class="line"><span class="comment">        æˆ‘ä»¬åªéœ€è¦æ±‚å‡ºæœ‰æ²¡æœ‰è¿™æ ·çš„nums[i]å°±å¯ä»¥çŸ¥é“æ˜¯å¦æœ‰ç¬¦åˆé¢˜æ„çš„k</span></span><br><span class="line"><span class="comment">        æ€æ ·ç»´æŠ¤æŸä¸ªnums[i]åœ¨æŸä¸ªæ®µå†…æ˜¯æœ€å°çš„æ•°å­—ï¼Ÿæˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°nums[i]å·¦è¾¹å’Œå³è¾¹é¦–ä¸ªä¸¥æ ¼å°äºnums[i]çš„ç´¢å¼•</span></span><br><span class="line"><span class="comment">        é‚£ä¹ˆç´¢å¼•ä¹‹é—´å°±æ˜¯nums[i]è¿™æ®µçš„æ³¢åŠèŒƒå›´</span></span><br><span class="line"><span class="comment">        å¿«é€Ÿæ±‚nums[i]å·¦è¾¹å’Œå³è¾¹é¦–ä¸ªå°äºnums[i]çš„å…ƒç´ å±äºNext Greateré—®é¢˜ï¼Œå¯ä»¥ç”¨å•è°ƒæ ˆè§£å†³</span></span><br><span class="line"><span class="comment">        æ—¶é—´å¤æ‚åº¦ï¼šO(N) ç©ºé—´å¤æ‚åº¦ï¼šO(N)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="comment">// ä¸¤ä¸ªå•è°ƒæ ˆst1ä¸st2</span></span><br><span class="line">        Deque&lt;Integer&gt; st1 = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;(), st2 = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// left[i]å­˜å‚¨nums[i]å·¦è¾¹é¦–ä¸ªä¸¥æ ¼å°äºnums[i]çš„æ•°å­—ç´¢å¼•ï¼Œä¸å­˜åœ¨æ—¶ä¸º-1</span></span><br><span class="line">        <span class="comment">// right[i]å­˜å‚¨nums[i]å³è¾¹é¦–ä¸ªä¸¥æ ¼å°äºnums[i]çš„æ•°å­—ç´¢å¼•ï¼Œä¸å­˜åœ¨æ—¶ä¸ºn</span></span><br><span class="line">        <span class="type">int</span>[] left = <span class="keyword">new</span> <span class="title class_">int</span>[n], right = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        <span class="comment">// æ­£åºéå†æ±‚left[i]</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="comment">// é‡åˆ°nums[i]&lt;=nums[æ ˆé¡¶ç´¢å¼•] -&gt; å¼¹å‡ºæ ˆé¡¶ç´¢å¼•ç›´è‡³nums[i]&gt;nums[æ ˆé¡¶ç´¢å¼•]</span></span><br><span class="line">            <span class="comment">// æ­¤æ—¶nums[æ ˆé¡¶ç´¢å¼•]å°±æ˜¯nums[i]å·¦è¾¹é¦–ä¸ªä¸¥æ ¼å°äºnums[i]çš„æ•°å­—</span></span><br><span class="line">            <span class="comment">// è¢«å¼¹å‡ºçš„é‚£äº›æ ˆé¡¶å…ƒç´ æ˜¯ä¸å¯èƒ½æˆä¸ºåé¢left[i]æœ‰æ•ˆå–å€¼çš„ï¼Œå› ä¸ºä¼šä¼˜å…ˆå–åˆ°å½“å‰çš„nums[i]</span></span><br><span class="line">            <span class="comment">// e.g. nums[st1]=[1,2,4,5] nums[i]=3 æ˜¾ç„¶4ä¸5ä¸ç¬¦åˆé¢˜æ„å¼¹å‡º 3æ‰æ˜¯ç¬¦åˆé¢˜æ„çš„ åŠ å…¥åé¢æœ‰ä¸ª6è¿›æ¥äº†</span></span><br><span class="line">            <span class="comment">// å¿…ç„¶ä¼šä¼˜å…ˆå–åˆ°3è€Œä¸ä¼šå–æ›´å‰é¢çš„4ä¸5</span></span><br><span class="line">            <span class="keyword">while</span> (!st1.isEmpty() &amp;&amp; nums[st1.peek()] &gt;= nums[i]) st1.pop();    <span class="comment">// ä¸€ç›´å¼¹å‡ºç›´è‡³st1ä¸¥æ ¼é€’å¢</span></span><br><span class="line">            left[i] = st1.isEmpty() ? -<span class="number">1</span> : st1.peek();  <span class="comment">// æ ˆé¡¶çš„å¿…å®š1ä¸¥æ ¼å°äºnums[i]å¹¶ä¸”æ˜¯æœ€è¿‘çš„(-1è¡¨ç¤ºå–å…¨éƒ¨)</span></span><br><span class="line">            st1.push(i);    <span class="comment">// æ¯æ¬¡éƒ½è¦å…¥æ ˆ</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å€’åºéå†æ±‚right[i]</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">while</span> (!st2.isEmpty() &amp;&amp; nums[st2.peek()] &gt;= nums[i]) st2.pop();</span><br><span class="line">            right[i] = st2.isEmpty() ? n : st2.peek();</span><br><span class="line">            st2.push(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æšä¸¾nums[i]æ ¹æ®å…¶æ³¢åŠèŒƒå›´ç¡®å®šåˆ°kï¼Œå†åˆ¤æ–­kæ˜¯å¦åˆæ³•</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> right[i] - left[i] - <span class="number">1</span>; <span class="comment">// å®é™…èŒƒå›´:[left[i]+1,right[i]-1]</span></span><br><span class="line">            <span class="keyword">if</span> (nums[i] &gt; threshold / k) <span class="keyword">return</span> k;  <span class="comment">// åˆæ³•</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;  <span class="comment">// ä¸å­˜åœ¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-æ ˆç»“æ„å†™æ³•çš„ä¼˜åŒ–"><a href="#5-æ ˆç»“æ„å†™æ³•çš„ä¼˜åŒ–" class="headerlink" title="5.æ ˆç»“æ„å†™æ³•çš„ä¼˜åŒ–"></a>5.æ ˆç»“æ„å†™æ³•çš„ä¼˜åŒ–</h3><p>ä»¥<a href="https://leetcode.cn/problems/sum-of-subarray-ranges/"><strong>2104. å­æ•°ç»„èŒƒå›´å’Œ</strong></a>ä¸ºä¾‹è¿›è¡Œè¯´æ˜</p><p>æ ˆç»“æ„è¿˜å¯ä»¥ä¼˜åŒ–æˆæ•°ç»„çš„å†™æ³•ï¼Œè¾…åŠ©ä¸€ä¸ªptræŒ‡é’ˆï¼Œåœ¨æ•°æ®èŒƒå›´å°çš„æ—¶å€™éå¸¸èŠ‚çœæ—¶é—´ä¸ç©ºé—´</p><p>å…¶ä¸­<strong>ptræŒ‡ä»£å½“å‰æ ˆä¸­æ ˆé¡¶å…ƒç´ æ‰€åœ¨stackæ•°ç»„çš„ä½ç½®</strong></p><p>prtæŒ‡é’ˆå¯ä»¥åˆå§‹åŒ–ä¸º-1æˆ–è€…0è¡¨ç¤ºæ ˆåº•ç´¢å¼•ï¼Œæ ˆçš„å®¹é‡åˆå§‹åŒ–ä¸ºå¯èƒ½å‡ºç°çš„æœ€å¤§æ ˆä¸­å…ƒç´ ä¸ªæ•°</p><p><strong>å…¥æ ˆï¼š</strong> stack[++ptr]=i    è…¾å‡ºç©ºä½å†èµ‹å€¼</p><p><strong>å‡ºæ ˆï¼š</strong> ç›´æ¥ptrâ€”å³å¯ï¼Œåé¢æ–°å…ƒç´ å…¥æ ˆä¼šè¦†ç›–æ‰æ—§çš„ç—•è¿¹</p><p><strong>æŸ¥çœ‹æ ˆé¡¶å…ƒç´ ï¼š</strong> è¿”å›stack[ptr]å°±æ˜¯</p><p><strong>æ¸…ç©ºæ ˆï¼š</strong> ptr=0ï¼ˆ-1ï¼‰</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] nums;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">long</span> <span class="title function_">subArrayRanges</span><span class="params">(<span class="type">int</span>[] _nums)</span> &#123;</span><br><span class="line">    nums = _nums;</span><br><span class="line">    n = nums.length;</span><br><span class="line">    <span class="type">long</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// max[i]è¡¨ç¤ºnums[i]ä½œä¸ºæœ€å¤§å€¼çš„å­æ•°ç»„ä¸ªæ•°ï¼Œmin[i]è¡¨ç¤ºnums[i]ä½œä¸ºæœ€å°å€¼çš„å­æ•°ç»„ä¸ªæ•°</span></span><br><span class="line">    <span class="type">int</span>[] max = getCnt(<span class="literal">true</span>), min = getCnt(<span class="literal">false</span>);</span><br><span class="line">    <span class="comment">// è®¡ç®—æ‰€æœ‰å­æ•°ç»„èŒƒå›´å’Œ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        res += (<span class="type">long</span>) (max[i] - min[i]) * nums[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// getCnt(true)è¡¨ç¤ºè·å–nums[i]æœ€å¤§å€¼çš„å­æ•°ç»„ä¸ªæ•°ï¼Œåä¹‹å°±æ˜¯è·å–nums[i]æœ€å¤§å€¼çš„å­æ•°ç»„ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span>[] getCnt(<span class="type">boolean</span> isMax) &#123;</span><br><span class="line">    <span class="comment">// ans[i]è¡¨ç¤ºè¦è¿”å›çš„æ•°æ®</span></span><br><span class="line">    <span class="type">int</span>[] ans = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    <span class="comment">// left[i]è¡¨ç¤ºnums[i]å·¦è¾¹é¦–ä¸ªä¸¥æ ¼å¤§äº(å°äº)è‡ªèº«çš„æ•°å­—ç´¢å¼•</span></span><br><span class="line">    <span class="comment">// right[i]è¡¨ç¤ºnums[i]å·¦è¾¹é¦–ä¸ªéä¸¥æ ¼å¤§äº(å°äº)è‡ªèº«çš„æ•°å­—ç´¢å¼•</span></span><br><span class="line">    <span class="type">int</span>[] left = <span class="keyword">new</span> <span class="title class_">int</span>[n], right = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    <span class="comment">// åˆ©ç”¨å•è°ƒæ ˆæŸ¥æ‰¾ç®¡è¾–èŒƒå›´(æ•°ç»„æ¨¡æ‹Ÿæ ˆç»“æ„ï¼Œåœ¨èŒƒå›´å°å¾—æ—¶å€™éå¸¸å¥½ç”¨)</span></span><br><span class="line">    <span class="type">int</span>[] stack = <span class="keyword">new</span> <span class="title class_">int</span>[n + <span class="number">1</span>];</span><br><span class="line">    <span class="type">int</span> <span class="variable">ptr</span> <span class="operator">=</span> <span class="number">0</span>;    <span class="comment">// ptræŒ‡ä»£å½“å‰æ ˆä¸­æ ˆé¡¶å…ƒç´ æ‰€åœ¨stackæ•°ç»„çš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span> (ptr &gt; <span class="number">0</span> &amp;&amp; (isMax ? nums[i] &gt;= nums[stack[ptr]] : nums[i] &lt;= nums[stack[ptr]])) ptr--;</span><br><span class="line">        left[i] = ptr == <span class="number">0</span> ? -<span class="number">1</span> : stack[ptr];</span><br><span class="line">        stack[++ptr] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    ptr = <span class="number">0</span>;    <span class="comment">// æ¸…ç©ºæ ˆ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">while</span> (ptr &gt; <span class="number">0</span> &amp;&amp; (isMax ? nums[i] &gt; nums[stack[ptr]] : nums[i] &lt; nums[stack[ptr]])) ptr--;</span><br><span class="line">        right[i] = ptr == <span class="number">0</span> ? n : stack[ptr];</span><br><span class="line">        stack[++ptr] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è®¡ç®—ç®¡è¾–èŒƒå›´å†…å­æ•°ç»„ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        ans[i] = (i - left[i]) * (right[i] - i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-è®°å½•çš„ä¸€äº›ç»ƒä¹ é¢˜"><a href="#6-è®°å½•çš„ä¸€äº›ç»ƒä¹ é¢˜" class="headerlink" title="6.è®°å½•çš„ä¸€äº›ç»ƒä¹ é¢˜"></a>6.è®°å½•çš„ä¸€äº›ç»ƒä¹ é¢˜</h3><h4 id="6-1-LC402-ç§»æ‰-K-ä½æ•°å­—"><a href="#6-1-LC402-ç§»æ‰-K-ä½æ•°å­—" class="headerlink" title="6.1 LC402. ç§»æ‰ K ä½æ•°å­—"></a><a href="https://leetcode-cn.com/problems/remove-k-digits/"><strong>6.1 LC402. ç§»æ‰ K ä½æ•°å­—</strong></a></h4><p>ç»™ä½ ä¸€ä¸ªä»¥å­—ç¬¦ä¸²è¡¨ç¤ºçš„éè´Ÿæ•´æ•° num å’Œä¸€ä¸ªæ•´æ•° k ï¼Œç§»é™¤è¿™ä¸ªæ•°ä¸­çš„ k ä½æ•°å­—ï¼Œä½¿å¾—å‰©ä¸‹çš„æ•°å­—æœ€å°ã€‚</p><p>è¯·ä½ ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›è¿™ä¸ªæœ€å°çš„æ•°å­—ã€‚</p><p><img src="../images/p24.jpg" alt="p24"></p><p><strong>æ€è·¯ï¼š</strong></p><p><strong>å•è°ƒæ ˆ</strong>:ç»´æŠ¤ä¸€ä¸ªæ ˆåº•-&gt;æ ˆé¡¶å•è°ƒé€’å¢çš„æ ˆ(å‚è€ƒâ€ç¬¨çŒªçˆ†ç ´ç»„â€é¢˜è§£)</p><p>è¦å°½é‡è®©é«˜ä½ç»´æŠ¤ä¸€ä¸ªé€’å¢çš„è¶‹åŠ¿ï¼Œå³å»é™¤é«˜ä½çš„é™åºå¯¹</p><p>å¦‚:1234532ä¸5321234ï¼Œå½“ç»„æˆæ•°å­—ç›¸åŒæ—¶ï¼Œå¿…å®šæ˜¯å‰é¢é«˜ä½é€’å¢æ•°å€¼ä¼šæ›´åŠ å°</p><p>ç°åœ¨ä»»åŠ¡å˜æˆï¼šåˆ é™¤kä½ä½¿å¾—é«˜ä½çš„é€’å¢åºåˆ—å°½é‡é•¿(åˆ é™¤é«˜ä½å°½å¯èƒ½å¤šçš„é€’å‡å¯¹)</p><p>å•è°ƒæ ˆæŒ‰é¡ºåºå­˜å‚¨æƒ³è¦çš„æ•°å­—ï¼Œå…¶ä¸­æ ˆé¡¶ä¸ºæ ˆä¸­æœ€å¤§å€¼ï¼Œå°†å½“å‰éå†åˆ°çš„æ•°å­—ä¸æ ˆé¡¶æ¯”è¾ƒå†³å®šæ ˆé¡¶çš„å»ç•™</p><p>è®¾æ ˆé¡¶æ•°å­—ä¸ºBï¼Œå½“å‰éå†åˆ°çš„æ•°å­—ä¸ºAï¼š</p><p>1.B &gt; Aï¼šBä¸Aä¹‹é—´ç»„æˆé€’å‡å¯¹ï¼Œæ­¤æ—¶å»æ‰Bï¼ŒAä»£æ›¿Bçš„ä½ç½®å¯ä»¥ä½¿å¾—æ•°å€¼å˜å°</p><p>2.B &lt;= Aï¼šBä¸Aä¹‹é—´ç»„æˆé€’å¢å¯¹ï¼Œè®©Aå…¥æ ˆæ˜¯æœ€å¥½çš„é€‰æ‹©</p><p>è¿™é‡Œè¦æ³¨æ„å‡ ä¸ªé—®é¢˜ï¼š</p><p>1.èƒ½å»é™¤ï¼ˆå‡ºæ ˆï¼‰çš„æ•°å­—ä¸ªæ•°æœ‰é™ï¼Œä¸èƒ½è¶…è¿‡kï¼Œå› æ­¤è¶…è¿‡kéƒ¨åˆ†ç›´æ¥åŠ å…¥ï¼Œä¸ä¿è¯æ ˆçš„å•è°ƒæ€§</p><p>2.è€ƒè™‘å»é™¤å‰å¯¼0çš„æƒ…å†µï¼Œå‰å¯¼0ä¸èƒ½åŠ å…¥ï¼›æ¢å¥è¯è¯´å°±æ˜¯ï¼šé0å’Œæœ‰å«åº•çš„0å¯ä»¥åŠ å…¥</p><p>3.å½“å‰numä¸­çš„é™åºå¯¹ &lt; kæ—¶ï¼Œåˆ é™¤å®Œæ‰€æœ‰é™åºå¯¹åï¼Œnumå·²ç»æ˜¯é€’å¢ï¼Œæ­¤æ—¶æˆªå–å‰é¢éƒ¨åˆ†å°±æ˜¯æœ€å°çš„;</p><p>4.å½“å‰numä¸­çš„é™åºå¯¹ &gt;= kæ—¶ï¼Œæ°å¥½åˆ é™¤å®Œæˆ–è€…æœ‰å‰©ä½™ï¼Œæ­¤æ—¶numåé¢çš„ç›´æ¥åŠ å…¥å³å¯ï¼Œä¸ç”¨è€ƒè™‘ä¿æŒæ ˆçš„å•è°ƒæ€§</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">removeKdigits</span><span class="params">(String num, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (num.length() == k) <span class="keyword">return</span> <span class="string">&quot;0&quot;</span>;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="comment">// å•è°ƒæ ˆ</span></span><br><span class="line">        Deque&lt;Character&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// éå†numæ¯ä¸€ä¸ªæ•°å­—</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> ch : num.toCharArray()) &#123;</span><br><span class="line">            <span class="comment">// æ‰¾å‡ºé™åºå¯¹</span></span><br><span class="line">            <span class="keyword">while</span> (k &gt; <span class="number">0</span> &amp;&amp; !stack.isEmpty() &amp;&amp; stack.peekFirst() &gt; ch) &#123;</span><br><span class="line">                <span class="comment">// è¿™é‡Œå¼¹å‡ºä¸€ä¸ªè¡¨æ˜numä¸­åˆ é™¤äº†ä¸€ä¸ª(é™åºå¯¹çš„å‰ä¸€ä¸ªå…ƒç´ )</span></span><br><span class="line">                stack.pollFirst();</span><br><span class="line">                k--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ä¸ºäº†å»é™¤å‰å¯¼0:é0çš„ç›´æ¥åŠ å…¥;å½“å‰æ ˆæœ‰å«åº•çš„,å•¥éƒ½å¯ä»¥åŠ å…¥</span></span><br><span class="line">            <span class="keyword">if</span>(ch != <span class="string">&#x27;0&#x27;</span> || !stack.isEmpty()) stack.addFirst(ch);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// éå†å®Œnumæ‰€æœ‰æ•°å­—,ä½†æ˜¯kè¿˜å¤§äº0,è¦æˆªå–å‰é¢çš„æ•°å­—(ç›¸å½“äºæŠŠæ ˆé¡¶éƒ¨åˆ†å¼¹å‡ºkä¸ª)</span></span><br><span class="line">        <span class="keyword">while</span> (k-- &gt; <span class="number">0</span> &amp;&amp; !stack.isEmpty()) stack.pollFirst();</span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty()) sb.append(stack.pollFirst());</span><br><span class="line">        <span class="comment">// è¿™é‡Œè¦è€ƒè™‘åˆ°æ ˆä¸ºç©ºçš„æƒ…å†µ,sbæ²¡ä¸œè¥¿è¡¨æ˜ä¸º0</span></span><br><span class="line">        <span class="keyword">return</span> sb.length() == <span class="number">0</span> ? <span class="string">&quot;0&quot;</span> : sb.reverse().toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-2-LC316-å»é™¤é‡å¤å­—æ¯"><a href="#6-2-LC316-å»é™¤é‡å¤å­—æ¯" class="headerlink" title="6.2 LC316. å»é™¤é‡å¤å­—æ¯"></a><a href="https://leetcode-cn.com/problems/remove-duplicate-letters/"><strong>6.2 LC316. å»é™¤é‡å¤å­—æ¯</strong></a></h4><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè¯·ä½ å»é™¤å­—ç¬¦ä¸²ä¸­é‡å¤çš„å­—æ¯ï¼Œä½¿å¾—æ¯ä¸ªå­—æ¯åªå‡ºç°ä¸€æ¬¡ã€‚</p><p>éœ€ä¿è¯ è¿”å›ç»“æœçš„å­—å…¸åºæœ€å°ï¼ˆè¦æ±‚ä¸èƒ½æ‰“ä¹±å…¶ä»–å­—ç¬¦çš„ç›¸å¯¹ä½ç½®ï¼‰ã€‚</p><p><img src="../images/p25.jpg" alt="p25"></p><p><strong>æ€è·¯ï¼š</strong></p><p><strong>å•è°ƒæ ˆ+æ ‡è®°:</strong></p><p>å‚è€ƒlabuladongçš„é¢˜è§£ï¼Œæœ¬é¢˜çš„å…³é”®ç‚¹æœ‰å‡ ä¸ªï¼š</p><p>1.è¦æ±‚æœ€åçš„å­—æ¯æ²¡æœ‰é‡å¤ï¼Œä¸”æ¯ä¸ªå­—æ¯éƒ½è¦å‡ºç°ä¸€æ¬¡</p><p>2.è¦æŒ‰ç…§åŸæ¥å­—æ¯çš„å‡ºç°é¡ºåºè¾“å‡º(ç›¸å¯¹é¡ºåºä¸å˜)</p><p>3.æ»¡è¶³æ¡ä»¶1ä¸2å‰æä¸‹çš„è¦æ±‚è¿”å›å­—ç¬¦ä¸²çš„å­—å…¸åºæœ€å°</p><p>å…¶ä¸­ï¼Œæ¡ä»¶1å¯ä»¥ç”¨booleanæ•°ç»„æˆ–è€…HashSetç­‰æ•°æ®ç»“æ„æ¥è¿›è¡Œå­˜å‚¨ï¼Œå¦‚æœå‰é¢å‡ºç°è¿‡å°±ä¸åŠ å…¥ï¼›</p><p>æ¡ä»¶2è¦æ±‚ç›¸å¯¹é¡ºåºä¸å˜ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªæŒ‡é’ˆè¿›è¡Œéå†å†å­˜å‚¨ï¼Œåªè¦æ»¡è¶³æ•°æ®å­˜å‚¨æœ‰åºçš„æ•°æ®ç»“æ„å³å¯</p><p>æœ€å…³é”®çš„æ˜¯æ¡ä»¶3ï¼Œè¦æ±‚å­—å…¸åºæœ€å°çš„æƒ…å½¢è¾“å‡ºã€‚è¿™é‡Œå°±æ˜¯è¦ç”¨åˆ°å•è°ƒæ ˆæœ€æ·±å±‚çš„åŸå› </p><p>å› ä¸ºæˆ‘ä»¬è¦æ“ä½œâ€ä¸´è¿‘å…ƒç´ â€(é™åºå¯¹)ï¼ä¸ºä»€ä¹ˆè¦æ“ä½œé™åºå¯¹ï¼Ÿ</p><p>è¿™ä¸ªå¯ä»¥å‚è€ƒ  402. ç§»æ‰ K ä½æ•°å­—(ä¸­ç­‰)</p><p>402é¢˜æ˜¯è¦æ±‚åˆ æ‰kä¸ªæ•°å­—ä½¿å¾—æœ€åçš„ç»“æœæœ€å°ï¼Œæ ¸å¿ƒå°±æ˜¯ä¼˜å…ˆæ‰¾å‡ºâ€é™åºå¯¹â€ï¼Œä¾‹å¦‚ï¼š76ï¼Œ98ï¼Œ54â€¦.</p><p>å› ä¸ºå½“ä½ åˆ é™¤äº†é™åºå¯¹å‰é¢çš„æ•°å­—åï¼Œåé¢æ•°å­—çš„å±…ä¸Šå–ä»£äº†åŸæ¥å‰é¢çš„æ•°å­—ï¼Œå¿…å®šä½¿å¾—æ•°å­—å˜å°</p><p>A=123a56ä¸B=123b56ï¼Œaä¸bå½“å‰é¢å®Œå…¨ä¸€è‡´ï¼Œæ•´ä¸ªæ•°å­—å¤§å°å–å†³äºaä¸bçš„å¤§å°ï¼Œa&gt;båˆ™A&gt;B</p><p>å›åˆ°æœ¬é¢˜ä¸­ï¼Œæˆ‘ä»¬è¦ä½¿å¾—å­—å…¸åºåœ¨æ»¡è¶³å…¶ä»–æ¡ä»¶çš„å‰æä¸‹å°½å¯èƒ½å°ï¼Œé‚£ä¹ˆå¯ä»¥é€‰æ‹©åˆ æ‰é™åºå¯¹çš„å‰é¢å­—æ¯</p><p>ç”±äºåæ¥å±…ä¸Šçš„ç‰¹å¾ï¼Œé™åºå¯¹æ˜¯ä¸æ–­å˜åŒ–çš„ï¼Œå› æ­¤è¦ç”¨<strong>æ ˆ</strong>è¿™ç§ç»“æ„æ¥æ¨¡æ‹Ÿï¼Œæ¯å½“å½“å‰å­—æ¯chæ»¡è¶³å…¶ä»–æ¡ä»¶æ—¶ï¼Œ</p><p>å¦‚æœä¸æ ˆé¡¶ç»„æˆé™åºå¯¹ï¼Œè¯´æ˜æˆ‘ç°åœ¨<strong>æœ‰æœºä¼š</strong>è®©å­—å…¸åºå˜å°ï¼Œå› æ­¤å¿…ç„¶ä¼šæƒ³ç€å°†æ ˆé¡¶å…ƒç´ å¼¹å‡ºï¼</p><p>å¯æ˜¯æœ¬é¢˜è¦æ±‚æ‰€æœ‰å­—æ¯éƒ½è¦å‡ºç°ä¸€æ¬¡ï¼Œä½ æŠŠæ ˆé¡¶å¼¹å‡ºäº†ä¹‹åä¸‡ä¸€åé¢ä¸å†å‡ºç°æ ˆé¡¶çš„å­—æ¯ä¸å°±ä¸æ»¡è¶³é¢˜æ„ï¼Ÿ</p><p>å› æ­¤è¿˜è¦çœ‹çœ‹åé¢æœ‰æ²¡æœ‰å†å‡ºç°æ ˆé¡¶å…ƒç´ ï¼š</p><p>1.è‹¥æ²¡æœ‰å‡ºç°åˆ™ä¸èƒ½å¼¹å‡ºï¼Œchä¹–ä¹–è¿›å»å§ï¼</p><p>2.è‹¥åé¢è¿˜ä¼šå‡ºç°ï¼Œå¯ä»¥æ”¾å¿ƒå¼¹å‡ºï¼Œåé¢è¿˜å¯ä»¥åŠ å…¥è¯¥å­—æ¯çš„ï¼Œè¿™æ ·æ—¢ä½¿å¾—å­—å…¸åºå°½é‡å°åˆèƒ½æ»¡è¶³æ¡ä»¶ï¼</p><p>åšæ³•å°±æ˜¯ç”¨countæ•°ç»„ç»´æŠ¤å½“å‰ä½ç½®åé¢å‰©ä½™çš„æ¯ä¸ªå­—æ¯ä¸ªæ•°ï¼Œå½“ä¸ªæ•°å‡ä¸º0æ—¶è¯´æ˜åé¢æ²¡æœ‰äº†ï¼</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">removeDuplicateLetters</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="comment">// ç»Ÿè®¡å½“å‰ä½ç½®å‰©ä½™å­—ç¬¦çš„ä¸ªæ•°</span></span><br><span class="line">        <span class="type">int</span>[] count = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">26</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : s.toCharArray()) &#123;</span><br><span class="line">            count[c - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ç»Ÿè®¡æŸä¸ªå­—æ¯æ˜¯å¦åœ¨æ ˆä¸­(ç”¨äºæ ˆä¸­å»é‡)</span></span><br><span class="line">        <span class="type">boolean</span>[] inStack = <span class="keyword">new</span> <span class="title class_">boolean</span>[<span class="number">26</span>];</span><br><span class="line">        <span class="comment">// å•è°ƒæ ˆ:æŒ‰ç…§å­—æ¯çš„å­—å…¸åºä¿å­˜å­—æ¯</span></span><br><span class="line">        Deque&lt;Character&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// éå†å­—ç¬¦ä¸²s</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : s.toCharArray()) &#123;</span><br><span class="line">            <span class="comment">// å­—ç¬¦cæ¬¡æ•°-1</span></span><br><span class="line">            count[c - <span class="string">&#x27;a&#x27;</span>]--;</span><br><span class="line">            <span class="comment">// æ ˆä¸­å·²ç»æœ‰äº†,ä¸å†åŠ å…¥</span></span><br><span class="line">            <span class="keyword">if</span>(inStack[c - <span class="string">&#x27;a&#x27;</span>]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="comment">// å­—ç¬¦cå…¥æ ˆ,å…¥æ ˆå‰è¦å°†æ‰€æœ‰çš„å­—å…¸åºæ¯”cå¤§ä¸”åé¢è¿˜ä¼šå‡ºç°çš„å­—æ¯å¼¹å‡º</span></span><br><span class="line">            <span class="keyword">while</span> (!stack.isEmpty() &amp;&amp; c &lt; stack.peekFirst()) &#123;</span><br><span class="line">                <span class="comment">// æ ˆé¡¶å­—æ¯åé¢æ²¡æœ‰å‡ºç°äº†,ä¸èƒ½å†å¼¹å‡º</span></span><br><span class="line">                <span class="keyword">if</span>(count[stack.peekFirst() - <span class="string">&#x27;a&#x27;</span>] == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">                <span class="comment">// å¦åˆ™å¯ä»¥å¼¹å‡º</span></span><br><span class="line">                <span class="type">char</span> <span class="variable">poll</span> <span class="operator">=</span> stack.pollFirst();</span><br><span class="line">                <span class="comment">// å¼¹å‡ºçš„å°±å°†æ ˆä¸­çš„è®°å½•åˆ é™¤</span></span><br><span class="line">                inStack[poll - <span class="string">&#x27;a&#x27;</span>] = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å­—ç¬¦cå…¥æ ˆ</span></span><br><span class="line">            stack.addFirst(c);</span><br><span class="line">            <span class="comment">// å…¥æ ˆåè¦æ ‡è®°</span></span><br><span class="line">            inStack[c - <span class="string">&#x27;a&#x27;</span>] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æœ€åå°†æ ˆä¸­çš„å…ƒç´ é€ä¸ªå¼¹å‡ºå­˜å…¥sbä¸­</span></span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">            sb.append(stack.pollFirst());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è¿˜è¦å€’åºä¸€ä¸‹æ‰æ˜¯æ­£ç¡®é¡ºåº</span></span><br><span class="line">        <span class="keyword">return</span> sb.reverse().toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>é¢è¯•é¢˜ 03.02. æ ˆçš„æœ€å°å€¼ åŒ 155.æœ€å°æ ˆ</strong></p><p>è®¾è®¡ä¸€ä¸ªæ”¯æŒ push ï¼Œpop ï¼Œtop æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆã€‚</p><p>å®ç° MinStack ç±»:</p><p>MinStack() åˆå§‹åŒ–å †æ ˆå¯¹è±¡ã€‚</p><p>void push(int val) å°†å…ƒç´ valæ¨å…¥å †æ ˆã€‚</p><p>void pop() åˆ é™¤å †æ ˆé¡¶éƒ¨çš„å…ƒç´ ã€‚</p><p>int top() è·å–å †æ ˆé¡¶éƒ¨çš„å…ƒç´ ã€‚</p><p>int getMin() è·å–å †æ ˆä¸­çš„æœ€å°å…ƒç´ ã€‚</p><p><img src="../images/p26.jpg" alt="p26"></p><p><strong>æ€è·¯ï¼š</strong></p><p><strong>å•è°ƒé€’å¢æ ˆ</strong>(æ ˆé¡¶-&gt;æ ˆåº•)ç»´æŠ¤æ ˆä¸­å…ƒç´ æœ€å°å€¼:</p><p> æ–¹æ³•1ï¼šå®Œå…¨åŒæ­¥æ ˆï¼šä¸€ä¸ªä¸ºå¸¸è§„æ ˆï¼ˆä¸»æ ˆï¼‰ï¼›å¦ä¸€ä¸ªä¸ºåŒæ­¥æ ˆï¼Œä¿å­˜æ¯ä¸€æ­¥ä¸­ä¸»æ ˆå…ƒç´ æœ€å°å€¼</p><p>è¿™ä¸ªæ–¹æ³•è¦æ±‚ä¸»æ ˆä¸åŒæ­¥æ ˆçš„å…ƒç´ ä¸ªæ•°ä¸¥æ ¼ç›¸ç­‰ï¼ŒåŠ å…¥æ—¶ä¸¤ä¸ªåŒæ­¥åŠ å…¥ï¼Œå¼¹å‡ºæ—¶ä¸¤ä¸ªåŒæ­¥å¼¹å‡ºï¼Œæ— éœ€å¤šåŠ åˆ¤æ–­</p><p>è¿™ç§æ–¹æ³•å­˜åœ¨ä¸€å®šçš„å†—ä½™å­˜å‚¨ï¼Œäºæ˜¯å°±æœ‰äº†æ–¹æ³•2</p><p>æ–¹æ³•2ï¼šä¸»æ ˆ+å•è°ƒæ ˆï¼šä¸€ä¸ªä¸ºä¸»æ ˆï¼Œå¦ä¸€ä¸ªä¸ºå•è°ƒé€’å¢æ ˆ(æ ˆé¡¶-&gt;æ ˆåº•)ï¼Œå½“ä¸”ä»…å½“è¦åŠ å…¥çš„å…ƒç´ x&lt;=å•è°ƒæ ˆæ ˆé¡¶æ—¶æ‰åŠ å…¥</p><p>å…¶ä½™æƒ…å†µä¸åŠ å…¥ï¼›åŒç†ï¼Œå¼¹å‡ºæ—¶è¦çœ‹å•è°ƒæ ˆæ ˆé¡¶æ˜¯å¦ä¸ä¸»æ ˆå¼¹å‡ºçš„å…ƒç´ ç›¸ç­‰ï¼Œè‹¥ç›¸ç­‰çš„è¯å°±å¼¹å‡ºã€‚</p><p>æ³¨æ„ï¼šè¿™ä¸ªå•è°ƒæ ˆæ˜¯éä¸»åŠ¨æŒ¤å‹å‹çš„ï¼Œä¹Ÿå°±æ˜¯åœ¨åŠ å…¥å…ƒç´ æ—¶ï¼Œå¦‚æœå½“å‰å…ƒç´ ä¸èƒ½ä¸ç°åœ¨çš„å•è°ƒæ ˆæ„æˆå•è°ƒé€’å¢æ ˆä¼šä¸»åŠ¨æ”¾å¼ƒï¼Œè€Œä¸ä¼šå°†æ ˆä¸­ä¸ç¬¦åˆæ¡ä»¶çš„å…¨éƒ¨å¼¹å‡º(è¿™æ˜¾ç„¶ä¼šæŸå¤±æ‰éƒ¨åˆ†æœ€å°å€¼ä¿¡æ¯!)</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MinStack_1</span> &#123;</span><br><span class="line">    Deque&lt;Integer&gt; stack;</span><br><span class="line">    Deque&lt;Integer&gt; minStack;</span><br><span class="line">    <span class="comment">// æ„é€ å™¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MinStack_1</span><span class="params">()</span> &#123;</span><br><span class="line">        stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        minStack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// è¿™ä¸€æ­¥å¾ˆå…³é”®:å°±æ˜¯è®©é¦–ä¸ªåŠ å…¥çš„xä¹Ÿå¯ä»¥é¡ºåˆ©åŠ å…¥minStack</span></span><br><span class="line">        minStack.addFirst(Integer.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¾€æ ˆé¡¶åŠ å…¥å…ƒç´ </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="comment">// å¸¸è§„æ ˆç›´æ¥åŠ å…¥,æœ€å°æ ˆåŠ å…¥å½“å‰æ ˆä¸­æœ€å°å€¼(ç»Ÿä¸€ä»¥é˜Ÿå¤´ä¸ºæ ˆé¡¶)</span></span><br><span class="line">        stack.addFirst(x);</span><br><span class="line">        <span class="comment">// æ±‚å‡ºå½“å‰æ ˆä¸­çš„æœ€å°å€¼</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> Math.min(minStack.peekFirst(), x);</span><br><span class="line">        minStack.addFirst(min);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼¹å‡ºæ ˆé¡¶å…ƒç´ (ä¸è¿”å›)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// å¸¸è§„æ ˆç›´æ¥å¼¹å‡º,æœ€å°æ ˆåŒæ­¥æ›´æ–°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">pop</span> <span class="operator">=</span> stack.pollFirst();</span><br><span class="line">        <span class="comment">// è¿™é‡Œæ— è®ºpopæ˜¯ä½•æ­¢éƒ½è¦å¼¹å‡ºminStackæ ˆé¡¶,å› ä¸ºä¸¤ä¸ªæ ˆçš„ä¸ªæ•°æ€»æ˜¯ä¸€è‡´çš„</span></span><br><span class="line">        minStack.pollFirst();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–æ ˆé¡¶å…ƒç´ (ä¸å¼¹å‡º)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">top</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> stack.peekFirst();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–æ ˆä¸­æœ€å°å€¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMin</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> minStack.peekFirst();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">----------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MinStack_2</span> &#123;</span><br><span class="line">    Deque&lt;Integer&gt; stack;</span><br><span class="line">    Deque&lt;Integer&gt; minStack;</span><br><span class="line">    <span class="comment">// æ„é€ å™¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MinStack_2</span><span class="params">()</span> &#123;</span><br><span class="line">        stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        minStack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// è¿™ä¸€æ­¥å¾ˆå…³é”®:å°±æ˜¯è®©é¦–ä¸ªåŠ å…¥çš„xä¹Ÿå¯ä»¥é¡ºåˆ©åŠ å…¥minStack</span></span><br><span class="line">        minStack.addFirst(Integer.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¾€æ ˆé¡¶åŠ å…¥å…ƒç´ </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="comment">// å¸¸è§„æ ˆç›´æ¥åŠ å…¥,æœ€å°æ ˆåŠ å…¥å½“å‰æ ˆä¸­æœ€å°å€¼(ç»Ÿä¸€ä»¥é˜Ÿå¤´ä¸ºæ ˆé¡¶)</span></span><br><span class="line">        stack.addFirst(x);</span><br><span class="line">        <span class="comment">// æ±‚å‡ºå½“å‰æ ˆä¸­çš„æœ€å°å€¼</span></span><br><span class="line">        <span class="keyword">if</span>(x &lt;= minStack.peekFirst()) minStack.addFirst(x);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼¹å‡ºæ ˆé¡¶å…ƒç´ (ä¸è¿”å›)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// å¸¸è§„æ ˆç›´æ¥å¼¹å‡º,æœ€å°æ ˆåŒæ­¥æ›´æ–°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">pop</span> <span class="operator">=</span> stack.pollFirst();</span><br><span class="line">        <span class="comment">// åŒºåˆ«å°±åœ¨è¿™é‡Œ:è¿™é‡Œè¦çœ‹ä¸popç›¸ç­‰çš„æ ˆé¡¶æ‰å¼¹å‡º</span></span><br><span class="line">        <span class="keyword">if</span>(minStack.peekFirst() == pop) minStack.pollFirst();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–æ ˆé¡¶å…ƒç´ (ä¸å¼¹å‡º)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">top</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> stack.peekFirst();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–æ ˆä¸­æœ€å°å€¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMin</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> minStack.peekFirst();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>è¿™é“é¢˜è¦æ—¶åˆ»æ³¨æ„åˆ¤ç©ºå¼‚å¸¸ï¼Œè¿˜æœ‰åˆå§‹åŒ–è¾…åŠ©æ ˆè¦å°†ä¸å½±å“é¦–ä¸ªå…ƒç´ å…¥æ ˆçš„Integer.MAX_VALUEåŠ å…¥!!!!è®°ä½äº†</strong></p></blockquote>]]></content>
    
    
    <summary type="html">å•è°ƒæ ˆçš„ä½œç”¨æ˜¯åŠæ—¶å¼¹å‡ºæ²¡ç”¨çš„å…ƒç´ ï¼Œç”¨æ¥é™ä½ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.fomal.cc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="å•è°ƒæ ˆ" scheme="https://www.fomal.cc/tags/%E5%8D%95%E8%B0%83%E6%A0%88/"/>
    
  </entry>
  
</feed>
